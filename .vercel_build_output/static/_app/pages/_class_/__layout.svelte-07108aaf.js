var ht=Object.defineProperty;var Me=Object.getOwnPropertySymbols;var bt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable;var je=(o,e,n)=>e in o?ht(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,ve=(o,e)=>{for(var n in e||(e={}))bt.call(e,n)&&je(o,n,e[n]);if(Me)for(var n of Me(e))gt.call(e,n)&&je(o,n,e[n]);return o};import{S as de,i as _e,s as ce,aa as $t,ab as Ae,a3 as pe,ac as Ne,e as R,t as j,k as N,j as F,c as T,a as S,g as A,d as _,n as z,m as U,M as u,f as k,N as y,o as q,a1 as ue,h as re,ad as ze,x as h,u as v,v as B,F as Y,A as ye,a6 as De,Q as G,a9 as Le,P as x,_ as me,ae as Ie,r as K,w as X,af as vt,V as Dt,l as H,ag as kt,ah as wt,ai as Fe,aj as yt,ak as It,b as V,al as Ct,H as Et,am as Ot,W as Rt,I as Ce,J as Ee,K as Oe,L as Re,O as ae,X as Te,an as Ue,ao as qe,ap as Be,aq as Tt,ar as St,T as Se,as as Pt,at as ie,R as He,a4 as Qe,a7 as Vt,a8 as Mt,au as jt,av as At,aw as Nt,ax as zt,ay as Lt,az as Je,aA as We,aB as Ye,aC as Ge,aD as ke,aE as Ft,aF as Ut,aG as qt}from"../../chunks/vendor-d35e056c.js";import{u as he,g as be,b as Pe,i as Ve,r as ne,d as Ke,e as ge,f as Xe,w as Ze,a as Bt,c as Ht}from"../../chunks/navigation-4873d97b.js";import{b as Qt}from"../../chunks/canvas-74f91cf9.js";import"../../chunks/singletons-12a22614.js";function xe(o,e,n){const t=o.slice();return t[17]=e[n],t}function Jt(o){let e;return{c(){e=j("arrow_drop_down")},l(n){e=A(n,"arrow_drop_down")},m(n,t){k(n,e,t)},d(n){n&&_(e)}}}function et(o){let e,n,t=o[7].enrolledClasses,s=[];for(let a=0;a<t.length;a+=1)s[a]=st(xe(o,t,a));const l=a=>v(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=H()},l(a){for(let r=0;r<s.length;r+=1)s[r].l(a);e=H()},m(a,r){for(let f=0;f<s.length;f+=1)s[f].m(a,r);k(a,e,r),n=!0},p(a,r){if(r&385){t=a[7].enrolledClasses;let f;for(f=0;f<t.length;f+=1){const c=xe(a,t,f);s[f]?(s[f].p(c,r),h(s[f],1)):(s[f]=st(c),s[f].c(),h(s[f],1),s[f].m(e.parentNode,e))}for(K(),f=t.length;f<s.length;f+=1)l(f);X()}},i(a){if(!n){for(let r=0;r<t.length;r+=1)h(s[r]);n=!0}},o(a){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)v(s[r]);n=!1},d(a){kt(s,a),a&&_(e)}}}function tt(o){let e,n;function t(){return o[10](o[17])}return e=new Fe({props:{$$slots:{default:[Wt]},$$scope:{ctx:o}}}),e.$on("SMUI:action",t),{c(){F(e.$$.fragment)},l(s){U(e.$$.fragment,s)},m(s,l){q(e,s,l),n=!0},p(s,l){o=s;const a={};l&1048704&&(a.$$scope={dirty:l,ctx:o}),e.$set(a)},i(s){n||(h(e.$$.fragment,s),n=!0)},o(s){v(e.$$.fragment,s),n=!1},d(s){B(e,s)}}}function Wt(o){let e=o[17].name+"",n,t,s=o[17].description+"",l,a;return{c(){n=j(e),t=j(" ("),l=j(s),a=j(`)\r
              \r
            `)},l(r){n=A(r,e),t=A(r," ("),l=A(r,s),a=A(r,`)\r
              \r
            `)},m(r,f){k(r,n,f),k(r,t,f),k(r,l,f),k(r,a,f)},p(r,f){f&128&&e!==(e=r[17].name+"")&&re(n,e),f&128&&s!==(s=r[17].description+"")&&re(l,s)},d(r){r&&_(n),r&&_(t),r&&_(l),r&&_(a)}}}function st(o){let e,n,t=o[17].name!==o[0]&&tt(o);return{c(){t&&t.c(),e=H()},l(s){t&&t.l(s),e=H()},m(s,l){t&&t.m(s,l),k(s,e,l),n=!0},p(s,l){s[17].name!==s[0]?t?(t.p(s,l),l&129&&h(t,1)):(t=tt(s),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(K(),v(t,1,1,()=>{t=null}),X())},i(s){n||(h(t),n=!0)},o(s){v(t),n=!1},d(s){t&&t.d(s),s&&_(e)}}}function Yt(o){let e,n,t=o[7].enrolledClasses&&et(o);return{c(){t&&t.c(),e=H()},l(s){t&&t.l(s),e=H()},m(s,l){t&&t.m(s,l),k(s,e,l),n=!0},p(s,l){s[7].enrolledClasses?t?(t.p(s,l),l&128&&h(t,1)):(t=et(s),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(K(),v(t,1,1,()=>{t=null}),X())},i(s){n||(h(t),n=!0)},o(s){v(t),n=!1},d(s){t&&t.d(s),s&&_(e)}}}function nt(o){let e,n,t;function s(a){o[11](a)}let l={options:o[6],getOptionLabel:Xt,textfield$variant:"outlined",label:"Search class"};return o[3]!==void 0&&(l.value=o[3]),e=new wt({props:l}),pe.push(()=>Ne(e,"value",s)),{c(){F(e.$$.fragment)},l(a){U(e.$$.fragment,a)},m(a,r){q(e,a,r),t=!0},p(a,r){const f={};r&64&&(f.options=a[6]),!n&&r&8&&(n=!0,f.value=a[3],ze(()=>n=!1)),e.$set(f)},i(a){t||(h(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Gt(o){let e,n,t,s;e=new Ie({props:{$$slots:{default:[Yt]},$$scope:{ctx:o}}});let l=o[2].length>0&&nt(o);return{c(){F(e.$$.fragment),n=N(),t=R("div"),l&&l.c(),this.h()},l(a){U(e.$$.fragment,a),n=z(a),t=T(a,"DIV",{style:!0});var r=S(t);l&&l.l(r),r.forEach(_),this.h()},h(){u(t,"margin","4px")},m(a,r){q(e,a,r),k(a,n,r),k(a,t,r),l&&l.m(t,null),s=!0},p(a,r){const f={};r&1048705&&(f.$$scope={dirty:r,ctx:a}),e.$set(f),a[2].length>0?l?(l.p(a,r),r&4&&h(l,1)):(l=nt(a),l.c(),h(l,1),l.m(t,null)):l&&(K(),v(l,1,1,()=>{l=null}),X())},i(a){s||(h(e.$$.fragment,a),h(l),s=!0)},o(a){v(e.$$.fragment,a),v(l),s=!1},d(a){B(e,a),a&&_(n),a&&_(t),l&&l.d()}}}function Kt(o){let e,n,t,s,l,a,r,f,c,i,m,p,D,b,$,C;i=new $t({props:{class:"material-icons",$$slots:{default:[Jt]},$$scope:{ctx:o}}});function I(d){o[13](d)}let E={anchor:!1,anchorCorner:"BOTTOM_LEFT",style:"left: 70px; top: 65px; width: 280px; overflow: scroll;",$$slots:{default:[Gt]},$$scope:{ctx:o}};return o[4]!==void 0&&(E.anchorElement=o[4]),p=new Ae({props:E}),o[12](p),pe.push(()=>Ne(p,"anchorElement",I)),{c(){e=R("div"),n=R("div"),t=R("div"),s=R("h1"),l=j(o[0]),a=N(),r=R("div"),f=j(o[1]),c=N(),F(i.$$.fragment),m=N(),F(p.$$.fragment),this.h()},l(d){e=T(d,"DIV",{});var w=S(e);n=T(w,"DIV",{style:!0});var P=S(n);t=T(P,"DIV",{});var Q=S(t);s=T(Q,"H1",{style:!0});var O=S(s);l=A(O,o[0]),O.forEach(_),a=z(Q),r=T(Q,"DIV",{style:!0});var J=S(r);f=A(J,o[1]),J.forEach(_),Q.forEach(_),c=z(P),U(i.$$.fragment,P),P.forEach(_),m=z(w),U(p.$$.fragment,w),w.forEach(_),this.h()},h(){u(s,"font-family","Roboto, sans-serif"),u(s,"font-weight","400"),u(s,"margin-left","6px"),u(s,"margin-top","5px"),u(s,"margin-bottom","0px"),u(s,"font-size","2.0rem"),u(r,"font-family","Roboto,sans-serif"),u(r,"font-size","0.875rem"),u(r,"color","rgba(0,0,0,.6)"),u(r,"margin-left","8px"),u(r,"margin-bottom","12px"),u(n,"display","flex"),u(n,"align-items","center")},m(d,w){k(d,e,w),y(e,n),y(n,t),y(t,s),y(s,l),y(t,a),y(t,r),y(r,f),y(n,c),q(i,n,null),y(e,m),q(p,e,null),o[14](e),b=!0,$||(C=ue(n,"click",o[9]),$=!0)},p(d,[w]){(!b||w&1)&&re(l,d[0]),(!b||w&2)&&re(f,d[1]);const P={};w&1048576&&(P.$$scope={dirty:w,ctx:d}),i.$set(P);const Q={};w&1048781&&(Q.$$scope={dirty:w,ctx:d}),!D&&w&16&&(D=!0,Q.anchorElement=d[4],ze(()=>D=!1)),p.$set(Q)},i(d){b||(h(i.$$.fragment,d),h(p.$$.fragment,d),b=!0)},o(d){v(i.$$.fragment,d),v(p.$$.fragment,d),b=!1},d(d){d&&_(e),B(i),o[12](null),B(p),o[14](null),$=!1,C()}}}const Xt=o=>o?`${o.name} (${o.description})`:"";function Zt(o,e,n){let t,s;Y(o,he,d=>n(7,s=d));let{nameOfClass:l}=e,{descriptionOfClass:a}=e,r,f=[],c="",i;ye(async()=>{const d=De(G(),"/classes"),w=await Le(d),P=[];w.forEach(Q=>{P.push(ve({id:Q.id},Q.data()))}),n(2,f=[...P])});async function m({mitClass:d}){console.log("join mitClass =",d);for(const P of s.enrolledClasses)if(P.id===d.id){alert(`You are already in ${d.name}`);return}const w=G();me(x(w,`users/${s.uid}`),{enrolledClasses:vt(d),mostRecentClassID:d.id}),me(x(w,`classes/${d.id}`),{numOfMembers:Dt(1)}),be(`/${d.id}/${d.id}`)}async function p(d){const w=G(),P=x(w,`users/${s.uid}`);me(P,{mostRecentClassID:d.id}),be(`/${d.id}/${d.id}`)}const D=()=>i.setOpen(!0),b=d=>p(d);function $(d){c=d,n(3,c)}function C(d){pe[d?"unshift":"push"](()=>{i=d,n(5,i)})}function I(d){r=d,n(4,r)}function E(d){pe[d?"unshift":"push"](()=>{r=d,n(4,r)})}return o.$$set=d=>{"nameOfClass"in d&&n(0,l=d.nameOfClass),"descriptionOfClass"in d&&n(1,a=d.descriptionOfClass)},o.$$.update=()=>{o.$$.dirty&8&&c&&(console.log("selected option =",c),m({mitClass:c})),o.$$.dirty&4&&n(6,t=f)},[l,a,f,c,r,i,t,s,p,D,b,$,C,I,E]}class xt extends de{constructor(e){super();_e(this,e,Zt,Kt,ce,{nameOfClass:0,descriptionOfClass:1})}}function es(o){let e,n,t,s,l;return{c(){e=R("div"),n=j(o[0]),t=N(),s=R("div"),l=j(o[1]),this.h()},l(a){e=T(a,"DIV",{style:!0,class:!0});var r=S(e);n=A(r,o[0]),r.forEach(_),t=z(a),s=T(a,"DIV",{style:!0,class:!0});var f=S(s);l=A(f,o[1]),f.forEach(_),this.h()},h(){u(e,"font-family","Roboto, sans-serif"),u(e,"font-weight","400"),u(e,"margin-left","6px"),u(e,"margin-top","5px"),u(e,"margin-bottom","0px"),u(e,"font-size","2.0rem"),V(e,"class","svelte-ek1cfd"),u(s,"font-family","Roboto,sans-serif"),u(s,"font-size","0.875rem"),u(s,"color","rgba(0,0,0,.6)"),u(s,"margin-left","8px"),u(s,"margin-bottom","12px"),V(s,"class","svelte-ek1cfd")},m(a,r){k(a,e,r),y(e,n),k(a,t,r),k(a,s,r),y(s,l)},p(a,r){r&1&&re(n,a[0]),r&2&&re(l,a[1])},i:ae,o:ae,d(a){a&&_(e),a&&_(t),a&&_(s)}}}function ts(o){let e,n;return e=new xt({props:{nameOfClass:o[0],descriptionOfClass:o[1]}}),{c(){F(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const l={};s&1&&(l.nameOfClass=t[0]),s&2&&(l.descriptionOfClass=t[1]),e.$set(l)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function ss(o){let e;const n=o[4].default,t=Ce(n,o,o[5],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,l){t&&t.m(s,l),e=!0},p(s,l){t&&t.p&&(!e||l&32)&&Ee(t,n,s,s[5],e?Re(n,s[5],l,null):Oe(s[5]),null)},i(s){e||(h(t,s),e=!0)},o(s){v(t,s),e=!1},d(s){t&&t.d(s)}}}function ns(o){let e,n,t,s,l,a,r,f,c,i,m,p,D;const b=[ts,es],$=[];function C(I,E){return I[2].uid?0:1}return r=C(o),f=$[r]=b[r](o),i=new Ie({props:{$$slots:{default:[ss]},$$scope:{ctx:o}}}),{c(){e=R("div"),n=R("div"),t=R("img"),l=N(),a=R("div"),f.c(),c=N(),F(i.$$.fragment),this.h()},l(I){e=T(I,"DIV",{style:!0,class:!0});var E=S(e);n=T(E,"DIV",{style:!0,class:!0});var d=S(n);t=T(d,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),l=z(d),a=T(d,"DIV",{class:!0});var w=S(a);f.l(w),w.forEach(_),d.forEach(_),E.forEach(_),c=z(I),U(i.$$.fragment,I),this.h()},h(){Rt(t.src,s="/logo.png")||V(t,"src",s),V(t,"width","60"),V(t,"height","54"),V(t,"alt","web-logo"),V(t,"class","logo-image svelte-ek1cfd"),V(a,"class","svelte-ek1cfd"),u(n,"display","flex"),u(n,"align-items","center"),V(n,"class","svelte-ek1cfd"),u(e,"margin-bottom","12px"),u(e,"padding-top","2px"),u(e,"padding-bottom","0"),u(e,"padding-left","8px"),V(e,"class","mdc-elevation--z"+4+" svelte-ek1cfd")},m(I,E){k(I,e,E),y(e,n),y(n,t),y(n,l),y(n,a),$[r].m(a,null),k(I,c,E),q(i,I,E),m=!0,p||(D=ue(t,"click",o[3]),p=!0)},p(I,E){let d=r;r=C(I),r===d?$[r].p(I,E):(K(),v($[d],1,1,()=>{$[d]=null}),X(),f=$[r],f?f.p(I,E):(f=$[r]=b[r](I),f.c()),h(f,1),f.m(a,null));const w={};E&32&&(w.$$scope={dirty:E,ctx:I}),i.$set(w)},i(I){m||(h(f),h(i.$$.fragment,I),m=!0)},o(I){v(f),v(i.$$.fragment,I),m=!1},d(I){I&&_(e),$[r].d(),I&&_(c),B(i,I),p=!1,D()}}}function os(o){let e,n;return e=new Ct({props:{$$slots:{default:[ns]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const l={};s&39&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function ls(o){let e;return{c(){e=R("main"),this.h()},l(n){e=T(n,"MAIN",{class:!0,id:!0,style:!0});var t=S(e);t.forEach(_),this.h()},h(){V(e,"class","main-content svelte-ek1cfd"),V(e,"id","main-content"),u(e,"padding","0")},m(n,t){k(n,e,t)},d(n){n&&_(e)}}}function rs(o){let e,n,t,s,l;return n=new yt({props:{style:"overflow-y: scroll; height: 100%;",class:"mdc-elevation--z"+5,$$slots:{default:[os]},$$scope:{ctx:o}}}),s=new It({props:{class:"app-content",$$slots:{default:[ls]},$$scope:{ctx:o}}}),{c(){e=R("div"),F(n.$$.fragment),t=N(),F(s.$$.fragment),this.h()},l(a){e=T(a,"DIV",{class:!0});var r=S(e);U(n.$$.fragment,r),t=z(r),U(s.$$.fragment,r),r.forEach(_),this.h()},h(){V(e,"class","drawer-container svelte-ek1cfd")},m(a,r){k(a,e,r),q(n,e,null),y(e,t),q(s,e,null),l=!0},p(a,[r]){const f={};r&39&&(f.$$scope={dirty:r,ctx:a}),n.$set(f);const c={};r&32&&(c.$$scope={dirty:r,ctx:a}),s.$set(c)},i(a){l||(h(n.$$.fragment,a),h(s.$$.fragment,a),l=!0)},o(a){v(n.$$.fragment,a),v(s.$$.fragment,a),l=!1},d(a){a&&_(e),B(n),B(s)}}}function as(o,e,n){let t;Y(o,he,c=>n(2,t=c));let{$$slots:s={},$$scope:l}=e,{nameOfClass:a}=e,{descriptionOfClass:r}=e;function f(){if(t.uid){const c=Et();Ot(c)}be("/")}return o.$$set=c=>{"nameOfClass"in c&&n(0,a=c.nameOfClass),"descriptionOfClass"in c&&n(1,r=c.descriptionOfClass),"$$scope"in c&&n(5,l=c.$$scope)},[a,r,t,f,s,l]}class is extends de{constructor(e){super();_e(this,e,as,rs,ce,{nameOfClass:0,descriptionOfClass:1})}}function fs(o,e,n){let t,s,l,a;Y(o,Pe,b=>n(10,s=b)),Y(o,he,b=>n(3,l=b)),Y(o,Ve,b=>n(4,a=b));let{classID:r}=e,{roomID:f}=e,c,i,m,p,D;return Te(()=>{D&&D(),a&&(Ue(i),Ve.set(!1)),p&&p.cancel()}),ye(()=>{ne.set({}),m=qe(Be(),".info/connected"),D=Tt(m,async b=>{if(b.val()===!0){const $=Ke();c=qe(Be(),`/class/${r}/room/${f}/participants/${$}`),p=St(c),p.set({hasDisconnected:!0,userUID:l.uid}),n(2,i=x(G(),`classes/${r}/participants/${$}`)),Se(i,{uid:l.uid,browserTabID:s,currentRoomID:f,name:t}),Ve.set(!0)}})}),o.$$set=b=>{"classID"in b&&n(0,r=b.classID),"roomID"in b&&n(1,f=b.roomID)},o.$$.update=()=>{o.$$.dirty&8&&(t=l.name?l.name:"Beaver #"),o.$$.dirty&30&&a&&l.name&&me(i,{currentRoomID:f,name:l.name})},[r,f,i,l,a]}class cs extends de{constructor(e){super();_e(this,e,fs,null,ce,{classID:0,roomID:1})}}const us="0ac8a98cf9bef2827f5beef5cd36c4f42a442863ce904a2469de12caa9097fa1",ms=o=>({activeSpeakerID:o&2,firestoreIDToDailyID:o&1}),ot=o=>({toggleMic:o[2],activeSpeakerID:o[1],firestoreIDToDailyID:o[0]});function ds(o){let e;const n=o[9].default,t=Ce(n,o,o[8],ot);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,l){t&&t.m(s,l),e=!0},p(s,[l]){t&&t.p&&(!e||l&259)&&Ee(t,n,s,s[8],e?Re(n,s[8],l,ms):Oe(s[8]),ot)},i(s){e||(h(t,s),e=!0)},o(s){v(t,s),e=!1},d(s){t&&t.d(s)}}}async function _s({track:o,participant:e}){switch(o.kind){case"audio":if(e.local)return;{const n=document.createElement("audio");n.srcObject=new MediaStream([o]),n.setAttribute("id","audio"+e.user_id),n.setAttribute("playsinline",!0),n.setAttribute("autoplay",!0),document.getElementById("container-for-audio-elements").appendChild(n)}break}}async function ps({track:o,participant:e}){const n=document.getElementById(o.id);n&&(n.srcObject=null,n.remove())}function hs(o,e,n){let t,s,l,a;Y(o,ge,O=>n(11,t=O)),Y(o,Pe,O=>n(12,s=O)),Y(o,Xe,O=>n(13,l=O)),Y(o,he,O=>n(7,a=O));let{$$slots:r={},$$scope:f}=e,{roomID:c}=e,i,m,p,D,b,$="";Te(()=>{D==="connected"&&P()});async function C(){return new Promise(async(O,J)=>{if(!l)try{const Z=await navigator.mediaDevices.getUserMedia({audio:!0});Xe.set(Z)}catch{return alert(`Don't forget to enable your your mic! Click the "aA" / "i" button beside the URL bar "https://explain.mit.edu", then click "website settings" / "microphone"`),J("Can't access mic stream")}const[fe]=l.getAudioTracks();i=Pt.createCallObject({audioSource:fe,videoSource:!1});const ee=["participant-joined","participant-updated","participant-left"];for(const Z of ee)i.on(Z,()=>{ge.set(i.participants());const oe={};for(const we of Object.keys(t)){const g=t[we],L=g.user_name;L&&(oe[L]=g.user_id)}n(0,m=oe)});i.on("track-started",_s),i.on("track-stopped",ps),i.on("active-speaker-change",({activeSpeaker:Z})=>{n(1,$=Z.peerId)}),i.on("load-attempt-failed",({action:Z,errorMsg:oe})=>{alert(Z+": "+oe)}),i.on("error",({action:Z,errorMsg:oe})=>{alert(Z+": "+oe)}),O()})}async function I(){n(4,p="not_connected"),n(5,D="connecting"),n(6,b=c);const{url:O}=await E();O&&(await d(O),n(4,p="connecting"),n(5,D="connected"))}function E(){return new Promise(async O=>{try{const J=2*60*60,ee=await(await fetch("https://api.daily.co/v1/rooms",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer "+us},body:JSON.stringify({name:c,properties:{exp:Math.round(Date.now()/1e3)+J,eject_at_room_exp:!0,start_video_off:!0}})})).json();ee.error==="invalid-request-error"&&ee.info===`a room named ${c} already exists`?O({url:`https://feynman.daily.co/${c}`}):O(ee)}catch(J){console.error(J),alert(J),reject({url:""})}})}function d(O){return new Promise(async(J,fe)=>{try{await i.join({url:O,userName:s}),J()}catch(ee){console.log("error)"),alert(ee),fe()}})}function w(){i.setLocalAudio(!t.local.audio),ge.set(i.participants())}function P(){const O=document.querySelectorAll("audio");for(const J of O)J.remove();Q(),n(4,p="connected"),n(5,D="not_connected")}function Q(){i.leave(),ge.set({}),n(1,$="")}return o.$$set=O=>{"roomID"in O&&n(3,c=O.roomID),"$$scope"in O&&n(8,f=O.$$scope)},o.$$.update=()=>{if(o.$$.dirty&120&&b!==c&&D==="connected"&&p==="connecting"&&P(),o.$$.dirty&120&&b!==c&&D==="not_connected"&&p==="connected"&&I(),o.$$.dirty&128&&a.uid){async function O(){await C(),I()}O()}},[m,$,w,c,p,D,b,a,f,r]}class bs extends de{constructor(e){super();_e(this,e,hs,ds,ce,{roomID:3})}}function lt(o,e,n){const t=o.slice();return t[30]=e[n],t}function rt(o,e,n){const t=o.slice();return t[33]=e[n],t}function at(o){let e=o[0],n,t,s=it(o);return{c(){s.c(),n=H()},l(l){s.l(l),n=H()},m(l,a){s.m(l,a),k(l,n,a),t=!0},p(l,a){a[0]&1&&ce(e,e=l[0])?(K(),v(s,1,1,ae),X(),s=it(l),s.c(),h(s),s.m(n.parentNode,n)):s.p(l,a)},i(l){t||(h(s),t=!0)},o(l){v(s),t=!1},d(l){l&&_(n),s.d(l)}}}function it(o){let e,n;return e=new cs({props:{classID:o[0],roomID:o[1]}}),{c(){F(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const l={};s[0]&1&&(l.classID=t[0]),s[0]&2&&(l.roomID=t[1]),e.$set(l)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function gs(o){let e,n;return{c(){e=R("div"),n=j("(empty room)"),this.h()},l(t){e=T(t,"DIV",{style:!0});var s=S(e);n=A(s,"(empty room)"),s.forEach(_),this.h()},h(){u(e,"margin-bottom","2px")},m(t,s){k(t,e,s),y(e,n)},p:ae,d(t){t&&_(e)}}}function $s(o){let e,n=o[30].name+"",t;return{c(){e=R("div"),t=j(n),this.h()},l(s){e=T(s,"DIV",{style:!0,class:!0});var l=S(e);t=A(l,n),l.forEach(_),this.h()},h(){u(e,"white-space","nowrap"),u(e,"overflow","hidden"),u(e,"text-overflow","ellipsis margin-bottom: 2px"),V(e,"class","svelte-ms4my9"),ke(e,"question-item",o[30].name.charAt(o[30].name.length-1)==="?"&&o[30].id!==o[1])},m(s,l){k(s,e,l),y(e,t)},p(s,l){l[0]&32&&n!==(n=s[30].name+"")&&re(t,n),l[0]&34&&ke(e,"question-item",s[30].name.charAt(s[30].name.length-1)==="?"&&s[30].id!==s[1])},d(s){s&&_(e)}}}function ft(o){let e,n,t,s,l,a,r,f={style:"width: 300px",$$slots:{default:[ks]},$$scope:{ctx:o}};return s=new Ae({props:f}),o[15](s),{c(){e=R("span"),n=j("more_horiz"),t=N(),F(s.$$.fragment),this.h()},l(c){e=T(c,"SPAN",{class:!0,style:!0});var i=S(e);n=A(i,"more_horiz"),i.forEach(_),t=z(c),U(s.$$.fragment,c),this.h()},h(){V(e,"class","material-icons"),u(e,"margin-right","0px"),u(e,"margin-left","auto"),u(e,"color","white"),u(e,"font-size","1.5rem")},m(c,i){k(c,e,i),y(e,n),k(c,t,i),q(s,c,i),l=!0,a||(r=ue(e,"click",function(){We(o[6].setOpen(!0))&&o[6].setOpen(!0).apply(this,arguments)}),a=!0)},p(c,i){o=c;const m={};i[0]&131104&&(m.$$scope={dirty:i,ctx:o}),s.$set(m)},i(c){l||(h(s.$$.fragment,c),l=!0)},o(c){v(s.$$.fragment,c),l=!1},d(c){c&&_(e),c&&_(t),o[15](null),B(s,c),a=!1,r()}}}function vs(o){let e;return{c(){e=j("Delete room")},l(n){e=A(n,"Delete room")},m(n,t){k(n,e,t)},d(n){n&&_(e)}}}function Ds(o){let e,n;function t(){return o[14](o[30])}return e=new Fe({props:{$$slots:{default:[vs]},$$scope:{ctx:o}}}),e.$on("SMUI:action",t),{c(){F(e.$$.fragment)},l(s){U(e.$$.fragment,s)},m(s,l){q(e,s,l),n=!0},p(s,l){o=s;const a={};l[0]&131072&&(a.$$scope={dirty:l,ctx:o}),e.$set(a)},i(s){n||(h(e.$$.fragment,s),n=!0)},o(s){v(e.$$.fragment,s),n=!1},d(s){B(e,s)}}}function ks(o){let e,n;return e=new Ie({props:{$$slots:{default:[Ds]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const l={};s[0]&131104&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function ct(o){let e=[],n=new Map,t,s,l=o[7][o[30].id];const a=r=>r[33].browserTabID;for(let r=0;r<l.length;r+=1){let f=rt(o,l,r),c=a(f);n.set(c,e[r]=mt(c,f))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=H()},l(r){for(let f=0;f<e.length;f+=1)e[f].l(r);t=H()},m(r,f){for(let c=0;c<e.length;c+=1)e[c].m(r,f);k(r,t,f),s=!0},p(r,f){f[0]&939525024&&(l=r[7][r[30].id],K(),e=Ye(e,f,a,1,r,l,n,t.parentNode,Ge,mt,t,rt),X())},i(r){if(!s){for(let f=0;f<l.length;f+=1)h(e[f]);s=!0}},o(r){for(let f=0;f<e.length;f+=1)v(e[f]);s=!1},d(r){for(let f=0;f<e.length;f+=1)e[f].d(r);r&&_(t)}}}function ut(o){let e,n,t,s;const l=[ys,ws],a=[];function r(f,c){return f[33].browserTabID===f[9]?0:f[8][f[29][f[33].browserTabID]]?1:-1}return~(e=r(o))&&(n=a[e]=l[e](o)),{c(){n&&n.c(),t=H()},l(f){n&&n.l(f),t=H()},m(f,c){~e&&a[e].m(f,c),k(f,t,c),s=!0},p(f,c){let i=e;e=r(f),e===i?~e&&a[e].p(f,c):(n&&(K(),v(a[i],1,1,()=>{a[i]=null}),X()),~e?(n=a[e],n?n.p(f,c):(n=a[e]=l[e](f),n.c()),h(n,1),n.m(t.parentNode,t)):n=null)},i(f){s||(h(n),s=!0)},o(f){v(n),s=!1},d(f){~e&&a[e].d(f),f&&_(t)}}}function ws(o){let e;function n(l,a){return l[8][l[29][l[33].browserTabID]].audio?Cs:Is}let t=n(o),s=t(o);return{c(){s.c(),e=H()},l(l){s.l(l),e=H()},m(l,a){s.m(l,a),k(l,e,a)},p(l,a){t===(t=n(l))&&s?s.p(l,a):(s.d(1),s=t(l),s&&(s.c(),s.m(e.parentNode,e)))},i:ae,o:ae,d(l){s.d(l),l&&_(e)}}}function ys(o){let e,n,t,s,l,a,r;t=new Ft({props:{checked:o[8].local.audio,style:"margin: 0 !important"}});function f(m,p){return m[8].local.audio?Os:Es}let c=f(o),i=c(o);return{c(){e=R("div"),n=R("div"),F(t.$$.fragment),s=N(),i.c(),this.h()},l(m){e=T(m,"DIV",{style:!0});var p=S(e);n=T(p,"DIV",{style:!0});var D=S(n);U(t.$$.fragment,D),D.forEach(_),s=z(p),i.l(p),p.forEach(_),this.h()},h(){u(n,"padding-top","5px"),u(e,"display","flex"),u(e,"align-items","center"),u(e,"margin-right","6px"),u(e,"margin-left","auto")},m(m,p){k(m,e,p),y(e,n),q(t,n,null),y(e,s),i.m(e,null),l=!0,a||(r=ue(n,"click",Ut(qt(function(){We(o[28])&&o[28].apply(this,arguments)}))),a=!0)},p(m,p){o=m;const D={};p[0]&256&&(D.checked=o[8].local.audio),t.$set(D),c!==(c=f(o))&&(i.d(1),i=c(o),i&&(i.c(),i.m(e,null)))},i(m){l||(h(t.$$.fragment,m),l=!0)},o(m){v(t.$$.fragment,m),l=!1},d(m){m&&_(e),B(t),i.d(),a=!1,r()}}}function Is(o){let e,n;return{c(){e=R("span"),n=j("mic_off"),this.h()},l(t){e=T(t,"SPAN",{class:!0,style:!0});var s=S(e);n=A(s,"mic_off"),s.forEach(_),this.h()},h(){V(e,"class","material-icons"),u(e,"margin-right","0"),u(e,"margin-left","auto"),u(e,"font-size","1.1rem"),u(e,"color","red")},m(t,s){k(t,e,s),y(e,n)},p:ae,d(t){t&&_(e)}}}function Cs(o){let e,n;return{c(){e=R("span"),n=j("mic"),this.h()},l(t){e=T(t,"SPAN",{class:!0,style:!0});var s=S(e);n=A(s,"mic"),s.forEach(_),this.h()},h(){V(e,"class","material-icons"),u(e,"margin-right","0"),u(e,"margin-left","auto"),u(e,"font-size","1.1rem"),u(e,"color",o[29]&&o[29][o[33].browserTabID]&&o[29][o[33].browserTabID]===o[27]?"white":"")},m(t,s){k(t,e,s),y(e,n)},p(t,s){s[0]&671088800&&u(e,"color",t[29]&&t[29][t[33].browserTabID]&&t[29][t[33].browserTabID]===t[27]?"white":"")},d(t){t&&_(e)}}}function Es(o){let e,n;return{c(){e=R("div"),n=j("muted"),this.h()},l(t){e=T(t,"DIV",{style:!0});var s=S(e);n=A(s,"muted"),s.forEach(_),this.h()},h(){u(e,"font-size","0.7rem"),u(e,"margin-left","6px"),u(e,"color","red")},m(t,s){k(t,e,s),y(e,n)},d(t){t&&_(e)}}}function Os(o){let e,n;return{c(){e=R("div"),n=j("voice on"),this.h()},l(t){e=T(t,"DIV",{style:!0});var s=S(e);n=A(s,"voice on"),s.forEach(_),this.h()},h(){u(e,"font-size","0.7rem"),u(e,"margin-left","6px"),u(e,"color","#33ff33")},m(t,s){k(t,e,s),y(e,n)},d(t){t&&_(e)}}}function mt(o,e){let n,t,s=e[33].name+"",l,a,r=Object.keys(e[8]).length>0,f,c,i=r&&ut(e);return{key:o,first:null,c(){n=R("div"),t=R("div"),l=j(s),a=N(),i&&i.c(),f=N(),this.h()},l(m){n=T(m,"DIV",{style:!0});var p=S(n);t=T(p,"DIV",{style:!0,class:!0});var D=S(t);l=A(D,s),D.forEach(_),a=z(p),i&&i.l(p),f=z(p),p.forEach(_),this.h()},h(){u(t,"font-size","0.7rem"),u(t,"margin-left","6px"),V(t,"class","svelte-ms4my9"),ke(t,"speaking",e[29]&&e[29][e[33].browserTabID]&&e[29][e[33].browserTabID]===e[27]),u(n,"display","flex"),u(n,"align-items","center"),u(n,"padding-left","8px"),u(n,"padding-right","8px"),this.first=n},m(m,p){k(m,n,p),y(n,t),y(t,l),y(n,a),i&&i.m(n,null),y(n,f),c=!0},p(m,p){e=m,(!c||p[0]&160)&&s!==(s=e[33].name+"")&&re(l,s),p[0]&671088800&&ke(t,"speaking",e[29]&&e[29][e[33].browserTabID]&&e[29][e[33].browserTabID]===e[27]),p[0]&256&&(r=Object.keys(e[8]).length>0),r?i?(i.p(e,p),p[0]&256&&h(i,1)):(i=ut(e),i.c(),h(i,1),i.m(n,f)):i&&(K(),v(i,1,1,()=>{i=null}),X())},i(m){c||(h(i),c=!0)},o(m){v(i),c=!1},d(m){m&&_(n),i&&i.d()}}}function dt(o,e){let n,t,s,l,a,r,f,c,i,m;function p(E,d){if(E[30].name)return $s;if(E[30].name==="")return gs}let D=p(e),b=D&&D(e),$=e[30].id===e[1]&&e[2].uid&&ft(e),C=e[7][e[30].id]&&ct(e);function I(){return e[16](e[30])}return{key:o,first:null,c(){n=R("div"),t=R("div"),s=R("div"),b&&b.c(),l=N(),$&&$.c(),a=N(),C&&C.c(),f=N(),this.h()},l(E){n=T(E,"DIV",{style:!0});var d=S(n);t=T(d,"DIV",{class:!0,style:!0});var w=S(t);s=T(w,"DIV",{style:!0});var P=S(s);b&&b.l(P),l=z(P),$&&$.l(P),P.forEach(_),a=z(w),C&&C.l(w),w.forEach(_),f=z(d),d.forEach(_),this.h()},h(){u(s,"display","flex"),u(s,"align-items","center"),u(s,"padding-left","8px"),u(s,"padding-right","5px"),u(s,"padding-top","6px"),V(t,"class",r=""+(Je(e[30].id===e[1]?"selected":"")+" svelte-ms4my9")),u(t,"padding-bottom","6px"),u(t,"opacity","90%"),u(t,"border-radius","5px"),u(n,"padding","6px"),this.first=n},m(E,d){k(E,n,d),y(n,t),y(t,s),b&&b.m(s,null),y(s,l),$&&$.m(s,null),y(t,a),C&&C.m(t,null),y(n,f),c=!0,i||(m=ue(n,"click",I),i=!0)},p(E,d){e=E,D===(D=p(e))&&b?b.p(e,d):(b&&b.d(1),b=D&&D(e),b&&(b.c(),b.m(s,l))),e[30].id===e[1]&&e[2].uid?$?($.p(e,d),d[0]&38&&h($,1)):($=ft(e),$.c(),h($,1),$.m(s,null)):$&&(K(),v($,1,1,()=>{$=null}),X()),e[7][e[30].id]?C?(C.p(e,d),d[0]&160&&h(C,1)):(C=ct(e),C.c(),h(C,1),C.m(t,null)):C&&(K(),v(C,1,1,()=>{C=null}),X()),(!c||d[0]&34&&r!==(r=""+(Je(e[30].id===e[1]?"selected":"")+" svelte-ms4my9")))&&V(t,"class",r)},i(E){c||(h($),h(C),c=!0)},o(E){v($),v(C),c=!1},d(E){E&&_(n),b&&b.d(),$&&$.d(),C&&C.d(),i=!1,m()}}}function _t(o){let e,n,t,s,l,a;return{c(){e=R("div"),n=R("span"),t=j("add"),s=j(`\r
        new room`),this.h()},l(r){e=T(r,"DIV",{style:!0});var f=S(e);n=T(f,"SPAN",{class:!0,style:!0});var c=S(n);t=A(c,"add"),c.forEach(_),s=A(f,`\r
        new room`),f.forEach(_),this.h()},h(){V(n,"class","material-icons"),u(n,"margin-left","6px"),u(n,"margin-right","5px"),u(n,"margin-top","2.5px"),u(n,"font-size","1.2rem"),u(e,"padding","6px"),u(e,"display","flex"),u(e,"align-items","center")},m(r,f){k(r,e,f),y(e,n),y(n,t),y(e,s),l||(a=ue(e,"click",o[11]),l=!0)},p:ae,d(r){r&&_(e),l=!1,a()}}}function Rs(o){let e=[],n=new Map,t,s,l,a=o[5];const r=c=>c[30].id+c[1];for(let c=0;c<a.length;c+=1){let i=lt(o,a,c),m=r(i);n.set(m,e[c]=dt(m,i))}let f=o[2].uid&&_t(o);return{c(){for(let c=0;c<e.length;c+=1)e[c].c();t=N(),f&&f.c(),s=H()},l(c){for(let i=0;i<e.length;i+=1)e[i].l(c);t=z(c),f&&f.l(c),s=H()},m(c,i){for(let m=0;m<e.length;m+=1)e[m].m(c,i);k(c,t,i),f&&f.m(c,i),k(c,s,i),l=!0},p(c,i){i[0]&939530214&&(a=c[5],K(),e=Ye(e,i,r,1,c,a,n,t.parentNode,Ge,dt,t,lt),X()),c[2].uid?f?f.p(c,i):(f=_t(c),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null)},i(c){if(!l){for(let i=0;i<a.length;i+=1)h(e[i]);l=!0}},o(c){for(let i=0;i<e.length;i+=1)v(e[i]);l=!1},d(c){for(let i=0;i<e.length;i+=1)e[i].d(c);c&&_(t),f&&f.d(c),c&&_(s)}}}function Ts(o){let e,n;return e=new is({props:{nameOfClass:o[3],descriptionOfClass:o[4],$$slots:{default:[Rs]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const l={};s[0]&8&&(l.nameOfClass=t[3]),s[0]&16&&(l.descriptionOfClass=t[4]),s[0]&939656166&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Ss(o){let e,n,t,s,l,a,r=o[2].uid&&at(o);s=new bs({props:{roomID:o[1],$$slots:{default:[Ts,({activeSpeakerID:i,toggleMic:m,firestoreIDToDailyID:p})=>({27:i,28:m,29:p}),({activeSpeakerID:i,toggleMic:m,firestoreIDToDailyID:p})=>[(i?134217728:0)|(m?268435456:0)|(p?536870912:0)]]},$$scope:{ctx:o}}});const f=o[13].default,c=Ce(f,o,o[17],null);return{c(){r&&r.c(),e=N(),n=R("div"),t=N(),F(s.$$.fragment),l=N(),c&&c.c(),this.h()},l(i){r&&r.l(i),e=z(i),n=T(i,"DIV",{id:!0});var m=S(n);m.forEach(_),t=z(i),U(s.$$.fragment,i),l=z(i),c&&c.l(i),this.h()},h(){V(n,"id","container-for-audio-elements")},m(i,m){r&&r.m(i,m),k(i,e,m),k(i,n,m),k(i,t,m),q(s,i,m),k(i,l,m),c&&c.m(i,m),a=!0},p(i,m){i[2].uid?r?(r.p(i,m),m[0]&4&&h(r,1)):(r=at(i),r.c(),h(r,1),r.m(e.parentNode,e)):r&&(K(),v(r,1,1,()=>{r=null}),X());const p={};m[0]&2&&(p.roomID=i[1]),m[0]&939656190&&(p.$$scope={dirty:m,ctx:i}),s.$set(p),c&&c.p&&(!a||m[0]&131072)&&Ee(c,f,i,i[17],a?Re(f,i[17],m,null):Oe(i[17]),null)},i(i){a||(h(r),h(s.$$.fragment,i),h(c,i),a=!0)},o(i){v(r),v(s.$$.fragment,i),v(c,i),a=!1},d(i){r&&r.d(i),i&&_(e),i&&_(n),i&&_(t),B(s,i),i&&_(l),c&&c.d(i)}}}function zs({page:o}){return{props:{classID:o.params.class,roomID:o.params.room}}}function Ps(o,e,n){let t,s,l,a,r;Y(o,ne,g=>n(7,t=g)),Y(o,Ze,g=>n(19,s=g)),Y(o,he,g=>n(2,l=g)),Y(o,ge,g=>n(8,a=g)),Y(o,Pe,g=>n(9,r=g));let{$$slots:f={},$$scope:c}=e,{classID:i}=e,{roomID:m}=e;const p=`classes/${i}/`;let D=[],b="",$="",C=[],I;function E(){for(const g of D)g();D=[]}async function d(){const g=x(G(),`classes/${i}`),L=await He(g);n(3,b=L.data().name),n(4,$=L.data().description)}ye(async()=>{window.addEventListener("resize",O),O()}),Te(()=>{E(),window.removeEventListener("resize",O)});function w(g){s?window.confirm("You're still recording, are you sure you want to leave?")&&(Ze.set(!1),be(`/${i}/${g}`)):be(`/${i}/${g}`)}async function P(){for(const W of C)if(W.name===""){alert("There is still an empty room available");return}const g=Ke(),L=x(G(),p+`rooms/${g}`),te=x(G(),p+`blackboards/${g}`);await Promise.all([Se(L,{name:"",blackboards:[g],date:new Date().toISOString()}),Se(te,{recordState:"pre_record"})])}function Q(){const{height:g,width:L}=Qt();Bt.set(g),Ht.set(L)}function O(){setTimeout(Q,100)}function J(){const g=De(G(),`classes/${i}/participants`);D.push(Qe(g,L=>{L.docChanges().forEach(te=>{const W=te.doc.data(),M=W.currentRoomID;switch(te.type){case"added":t[M]||ie(ne,t[M]=[],t),ie(ne,t[M]=[...t[M],W],t);break;case"modified":for(const se of Object.keys(t))for(const $e of t[se])$e.browserTabID===W.browserTabID&&ie(ne,t[se]=t[se].filter(le=>le.browserTabID!==W.browserTabID),t);t[M]||ie(ne,t[M]=[],t),ie(ne,t[M]=[...t[M],W],t);break;case"removed":ie(ne,t[M]=t[M].filter(se=>se.browserTabID!==W.browserTabID),t);break}})}))}function fe(){const g=De(G(),`classes/${i}/rooms`),L=Vt(g,Mt("date","asc"));D.push(Qe(L,async te=>{const W=[];if(te.forEach(M=>{W.push(ve({id:M.id,ref:M.ref.path},M.data()))}),n(5,C=W),C.length===0){const M=De(G(),`classes/${i}/rooms`),se=[];(await Le(M)).docs.forEach(le=>{se.push(ve({id:le.id},le.data()))});for(const le of se){const pt=x(G(),`classes/${i}/rooms/${le.id}`);me(pt,{date:Date.now()})}}}))}async function ee(g){const L=[];for(const W of g.blackboards)L.push(He(x(G(),p+`blackboards/${W}`)));await Promise.all(L);const te=[];for(const W of L){const M=await W;(await M.data()).audioRefFullPath&&te.push(jt(At(Nt(),audioRefFullPath)));const $e=zt(),le=Lt($e,"recursiveDelete");te.push(le({path:`/classes/${i}/blackboards/${M.id}`}).then(console.log(`Deleted blackboard /classes/${i}/blackboards/${M.id}`)))}await Promise.all(te),await Ue(x(G(),p+`rooms/${g.id}`))}const Z=g=>ee(g);function oe(g){pe[g?"unshift":"push"](()=>{I=g,n(6,I)})}const we=g=>w(g.id);return o.$$set=g=>{"classID"in g&&n(0,i=g.classID),"roomID"in g&&n(1,m=g.roomID),"$$scope"in g&&n(17,c=g.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&1&&i&&(E(),ie(ne,t=[],t),d(),J(),fe()),o.$$.dirty[0]&7&&m&&l.uid){const g=x(G(),`users/${l.uid}`);me(g,{mostRecentClassAndRoomID:`/${i}/${m}`})}},[i,m,l,b,$,C,I,t,a,r,w,P,ee,f,Z,oe,we,c]}class Ls extends de{constructor(e){super();_e(this,e,Ps,Ss,ce,{classID:0,roomID:1},null,[-1,-1])}}export{Ls as default,zs as load};
