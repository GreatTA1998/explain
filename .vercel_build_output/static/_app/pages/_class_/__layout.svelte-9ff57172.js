var Be=Object.defineProperty;var _e=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var pe=(l,e,s)=>e in l?Be(l,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[e]=s,he=(l,e)=>{for(var s in e||(e={}))He.call(e,s)&&pe(l,s,e[s]);if(_e)for(var s of _e(e))Je.call(e,s)&&pe(l,s,e[s]);return l};import{S as Q,i as Y,s as X,ak as We,e as k,t as H,k as N,j,c as w,a as E,g as J,d,n as O,m as R,K as v,f as $,L as T,o as M,x as _,u as p,v as A,_ as Ge,al as $e,l as C,r as L,w as B,a9 as Ke,am as Qe,M as ee,an as Ye,ao as Xe,b as I,D as z,ap as Ze,aq as xe,ad as et,G as oe,H as se,I as ne,J as re,ae as le,ar as tt,A as ae,as as ge,at as be,au as ot,av as st,aw as nt,N as rt,O as ie,Q as lt,ax as at,U as De,af as ve,ay as te,az as Ie,aA as ke,aB as we,a4 as ye,W as Ee,h as ce,aC as it,aD as ct,a8 as ft,aE as ut,aF as mt}from"../../chunks/vendor-f8cad246.js";import{u as Te,e as fe,i as ue,f as K,g as dt,j as Z,d as Se,a as _t,c as pt}from"../../chunks/store-5bda137e.js";import{g as ht,a as $t}from"../../chunks/canvas-257efe3e.js";import"../../chunks/singletons-12a22614.js";const gt=!0;function Ce(l,e,s){const t=l.slice();return t[3]=e[s],t}function bt(l){let e=l[3].name+"",s,t;return{c(){s=H(e),t=N()},l(o){s=J(o,e),t=O(o)},m(o,n){$(o,s,n),$(o,t,n)},p:ee,d(o){o&&d(s),o&&d(t)}}}function je(l){let e,s;return e=new Qe({props:{$$slots:{default:[bt]},$$scope:{ctx:l}}}),e.$on("SMUI:action",kt),{c(){j(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){M(e,t,o),s=!0},p(t,o){const n={};o&64&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function Dt(l){let e,s,t=l[1],o=[];for(let r=0;r<t.length;r+=1)o[r]=je(Ce(l,t,r));const n=r=>p(o[r],1,1,()=>{o[r]=null});return{c(){for(let r=0;r<o.length;r+=1)o[r].c();e=C()},l(r){for(let a=0;a<o.length;a+=1)o[a].l(r);e=C()},m(r,a){for(let i=0;i<o.length;i+=1)o[i].m(r,a);$(r,e,a),s=!0},p(r,a){if(a&2){t=r[1];let i;for(i=0;i<t.length;i+=1){const f=Ce(r,t,i);o[i]?(o[i].p(f,a),_(o[i],1)):(o[i]=je(f),o[i].c(),_(o[i],1),o[i].m(e.parentNode,e))}for(L(),i=t.length;i<o.length;i+=1)n(i);B()}},i(r){if(!s){for(let a=0;a<t.length;a+=1)_(o[a]);s=!0}},o(r){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)p(o[a]);s=!1},d(r){Ke(o,r),r&&d(e)}}}function vt(l){let e,s;return e=new $e({props:{$$slots:{default:[Dt]},$$scope:{ctx:l}}}),{c(){j(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){M(e,t,o),s=!0},p(t,o){const n={};o&64&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function It(l){let e,s,t,o,n,r={style:"left: 100px; top: 50px; width: 300px",$$slots:{default:[vt]},$$scope:{ctx:l}};return o=new We({props:r}),l[2](o),{c(){e=k("h1"),s=H("6.036"),t=N(),j(o.$$.fragment),this.h()},l(a){e=w(a,"H1",{style:!0});var i=E(e);s=J(i,"6.036"),i.forEach(d),t=O(a),R(o.$$.fragment,a),this.h()},h(){v(e,"font-family","Roboto, sans-serif"),v(e,"font-weight","400"),v(e,"margin-left","8px"),v(e,"margin-top","10px"),v(e,"margin-bottom","12px"),v(e,"font-size","2.4rem")},m(a,i){$(a,e,i),T(e,s),$(a,t,i),M(o,a,i),n=!0},p(a,[i]){const f={};i&64&&(f.$$scope={dirty:i,ctx:a}),o.$set(f)},i(a){n||(_(o.$$.fragment,a),n=!0)},o(a){p(o.$$.fragment,a),n=!1},d(a){a&&d(e),a&&d(t),l[2](null),A(o,a)}}}const kt=()=>{};function wt(l,e,s){let t=[{name:"6.006"},{name:"6.036"}],o;function n(r){Ge[r?"unshift":"push"](()=>{o=r,s(0,o)})}return[o,t,n]}class yt extends Q{constructor(e){super();Y(this,e,wt,It,X,{})}}function Et(l){let e;return{c(){e=k("div"),this.h()},l(s){e=w(s,"DIV",{id:!0,class:!0});var t=E(e);t.forEach(d),this.h()},h(){I(e,"id","sign-up-area"),I(e,"class","svelte-f4hgt4")},m(s,t){$(s,e,t)},i:ee,o:ee,d(s){s&&d(e)}}}function Tt(l){let e,s;return e=new yt({}),{c(){j(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){M(e,t,o),s=!0},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function St(l){let e,s,t,o,n,r,a;const i=[Tt,Et],f=[];function c(u,m){return u[0]?0:1}return n=c(l),r=f[n]=i[n](l),{c(){e=k("div"),s=k("img"),o=N(),r.c(),this.h()},l(u){e=w(u,"DIV",{style:!0,class:!0});var m=E(e);s=w(m,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),o=O(m),r.l(m),m.forEach(d),this.h()},h(){et(s.src,t="/logo.png")||I(s,"src",t),I(s,"width","55"),I(s,"height","50"),I(s,"alt","web-logo"),I(s,"class","svelte-f4hgt4"),v(e,"display","flex"),v(e,"align-items","center"),I(e,"class","svelte-f4hgt4")},m(u,m){$(u,e,m),T(e,s),T(e,o),f[n].m(e,null),a=!0},p(u,m){let g=n;n=c(u),n!==g&&(L(),p(f[g],1,1,()=>{f[g]=null}),B(),r=f[n],r||(r=f[n]=i[n](u),r.c()),_(r,1),r.m(e,null))},i(u){a||(_(r),a=!0)},o(u){p(r),a=!1},d(u){u&&d(e),f[n].d()}}}function Ct(l){let e;const s=l[1].default,t=oe(s,l,l[2],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,n){t&&t.m(o,n),e=!0},p(o,n){t&&t.p&&(!e||n&4)&&se(t,s,o,o[2],e?re(s,o[2],n,null):ne(o[2]),null)},i(o){e||(_(t,o),e=!0)},o(o){p(t,o),e=!1},d(o){t&&t.d(o)}}}function jt(l){let e,s,t,o,n;return s=new xe({props:{padded:!0,style:"padding-top: 0; padding-bottom: 0",$$slots:{default:[St]},$$scope:{ctx:l}}}),o=new $e({props:{$$slots:{default:[Ct]},$$scope:{ctx:l}}}),{c(){e=k("div"),j(s.$$.fragment),t=N(),j(o.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=E(e);R(s.$$.fragment,a),a.forEach(d),t=O(r),R(o.$$.fragment,r),this.h()},h(){I(e,"class","card-container svelte-f4hgt4")},m(r,a){$(r,e,a),M(s,e,null),$(r,t,a),M(o,r,a),n=!0},p(r,a){const i={};a&5&&(i.$$scope={dirty:a,ctx:r}),s.$set(i);const f={};a&4&&(f.$$scope={dirty:a,ctx:r}),o.$set(f)},i(r){n||(_(s.$$.fragment,r),_(o.$$.fragment,r),n=!0)},o(r){p(s.$$.fragment,r),p(o.$$.fragment,r),n=!1},d(r){r&&d(e),A(s),r&&d(t),A(o,r)}}}function Rt(l){let e,s;return e=new Ze({props:{$$slots:{default:[jt]},$$scope:{ctx:l}}}),{c(){j(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){M(e,t,o),s=!0},p(t,o){const n={};o&5&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function Mt(l){let e,s;return{c(){e=k("main"),s=k("div"),this.h()},l(t){e=w(t,"MAIN",{class:!0,style:!0});var o=E(e);s=w(o,"DIV",{id:!0,style:!0,class:!0});var n=E(s);n.forEach(d),o.forEach(d),this.h()},h(){I(s,"id","main-content"),v(s,"height","100vh"),I(s,"class","svelte-f4hgt4"),I(e,"class","main-content svelte-f4hgt4"),v(e,"padding","0")},m(t,o){$(t,e,o),T(e,s)},d(t){t&&d(e)}}}function At(l){let e,s,t,o,n;return s=new Ye({props:{style:"overflow-y: scroll; height: 100%;",$$slots:{default:[Rt]},$$scope:{ctx:l}}}),o=new Xe({props:{class:"app-content",$$slots:{default:[Mt]},$$scope:{ctx:l}}}),{c(){e=k("div"),j(s.$$.fragment),t=N(),j(o.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=E(e);R(s.$$.fragment,a),t=O(a),R(o.$$.fragment,a),a.forEach(d),this.h()},h(){I(e,"class","drawer-container svelte-f4hgt4")},m(r,a){$(r,e,a),M(s,e,null),T(e,t),M(o,e,null),n=!0},p(r,[a]){const i={};a&5&&(i.$$scope={dirty:a,ctx:r}),s.$set(i);const f={};a&4&&(f.$$scope={dirty:a,ctx:r}),o.$set(f)},i(r){n||(_(s.$$.fragment,r),_(o.$$.fragment,r),n=!0)},o(r){p(s.$$.fragment,r),p(o.$$.fragment,r),n=!1},d(r){r&&d(e),A(s),A(o)}}}function Nt(l,e,s){let t;z(l,Te,r=>s(0,t=r));let{$$slots:o={},$$scope:n}=e;return l.$$set=r=>{"$$scope"in r&&s(2,n=r.$$scope)},[t,o,n]}class Ot extends Q{constructor(e){super();Y(this,e,Nt,At,X,{})}}function Vt(l,e,s){let t,o,n;z(l,fe,h=>s(8,t=h)),z(l,Te,h=>s(9,o=h)),z(l,ue,h=>s(3,n=h));let{classID:r}=e,{roomID:a}=e,i,f,c,u,m,g=`Beaver #${Math.floor(Math.random()*(999-100+1)+100)}`;return le(()=>{m&&m(),n&&(tt(f),ue.set(!1)),u&&u.cancel()}),ae(()=>{K.set({}),c=ge(be(),".info/connected"),m=ot(c,async h=>{if(h.val()===!0){const y=dt();i=ge(be(),`/class/${r}/room/${a}/participants/${y}`),u=nt(i),u.set({hasDisconnected:!0,userUID:o.uid}),s(2,f=rt(ie(),`classes/${r}/participants/${y}`)),lt(f,{uid:o.uid,browserTabID:t,currentRoomID:a,name:g}),ue.set(!0)}})}),l.$$set=h=>{"classID"in h&&s(0,r=h.classID),"roomID"in h&&s(1,a=h.roomID)},l.$$.update=()=>{l.$$.dirty&14&&n&&st(f,{currentRoomID:a})},[r,a,f,n]}class Pt extends Q{constructor(e){super();Y(this,e,Vt,null,X,{classID:0,roomID:1})}}const Ft="0ac8a98cf9bef2827f5beef5cd36c4f42a442863ce904a2469de12caa9097fa1",zt=l=>({activeSpeakerID:l&2,firestoreIDToDailyID:l&1}),Re=l=>({toggleMic:l[2],activeSpeakerID:l[1],firestoreIDToDailyID:l[0]});function Ut(l){let e;const s=l[8].default,t=oe(s,l,l[7],Re);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,n){t&&t.m(o,n),e=!0},p(o,[n]){t&&t.p&&(!e||n&131)&&se(t,s,o,o[7],e?re(s,o[7],n,zt):ne(o[7]),Re)},i(o){e||(_(t,o),e=!0)},o(o){p(t,o),e=!1},d(o){t&&t.d(o)}}}async function qt({track:l,participant:e}){switch(l.kind){case"audio":if(e.local)return;{const s=document.createElement("audio");s.srcObject=new MediaStream([l]),s.setAttribute("id","audio"+e.user_id),s.setAttribute("playsinline",!0),s.setAttribute("autoplay",!0),document.getElementById("container-for-audio-elements").appendChild(s)}break}}async function Lt({track:l,participant:e}){const s=document.getElementById(l.id);s&&(s.srcObject=null,s.remove())}function Bt(l,e,s){let t,o,n;z(l,Z,D=>s(10,t=D)),z(l,fe,D=>s(11,o=D)),z(l,Se,D=>s(12,n=D));let{$$slots:r={},$$scope:a}=e,{roomID:i}=e,f,c,u,m,g,h="";le(()=>{m==="connected"&&F()}),ae(async()=>{await y(),U()});async function y(){return new Promise(async D=>{if(!n){const S=await navigator.mediaDevices.getUserMedia({audio:!0});Se.set(S)}const[P]=n.getAudioTracks();f=at.createCallObject({audioSource:P,videoSource:!1});const x=["participant-joined","participant-updated","participant-left"];for(const S of x)f.on(S,()=>{Z.set(f.participants());const G={};for(const Le of Object.keys(t)){const me=t[Le],de=me.user_name;de&&(G[de]=me.user_id)}s(0,c=G)});f.on("track-started",qt),f.on("track-stopped",Lt),f.on("active-speaker-change",({activeSpeaker:S})=>{s(1,h=S.peerId)}),f.on("load-attempt-failed",({action:S,errorMsg:G})=>{alert(S+": "+G)}),f.on("error",({action:S,errorMsg:G})=>{alert(S+": "+G)}),D()})}async function U(){s(4,u="not_connected"),s(5,m="connecting"),s(6,g=i);const{url:D}=await b();D&&(await q(D),s(4,u="connecting"),s(5,m="connected"))}function b(){return new Promise(async D=>{try{const P=2*60*60,S=await(await fetch("https://api.daily.co/v1/rooms",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer "+Ft},body:JSON.stringify({name:i,properties:{exp:Math.round(Date.now()/1e3)+P,eject_at_room_exp:!0,start_video_off:!0}})})).json();S.error==="invalid-request-error"&&S.info===`a room named ${i} already exists`?D({url:`https://feynman.daily.co/${i}`}):(console.log("room =",S),D(S))}catch(P){console.error(P),alert(P),reject({url:""})}})}function q(D){return new Promise(async(P,x)=>{try{await f.join({url:D,userName:o}),P()}catch(S){console.log("error)"),alert(S),x()}})}function V(){console.log("toggling mic"),f.setLocalAudio(!t.local.audio),Z.set(f.participants())}function F(){const D=document.querySelectorAll("audio");for(const P of D)P.remove();W(),s(4,u="connected"),s(5,m="not_connected")}function W(){f.leave(),Z.set({}),s(1,h="")}return l.$$set=D=>{"roomID"in D&&s(3,i=D.roomID),"$$scope"in D&&s(7,a=D.$$scope)},l.$$.update=()=>{l.$$.dirty&120&&u==="connecting"&&m==="connected"&&g!==i&&(console.log("part 1: user moved to a different room before voice chat connected"),F()),l.$$.dirty&120&&u==="connected"&&m==="not_connected"&&g!==i&&(console.log("part 2: ready to join the new room"),U())},[c,h,V,i,u,m,g,a,r]}class Ht extends Q{constructor(e){super();Y(this,e,Bt,Ut,X,{roomID:3})}}function Me(l,e,s){const t=l.slice();return t[18]=e[s],t}function Ae(l,e,s){const t=l.slice();return t[21]=e[s],t}function Ne(l){let e=[],s=new Map,t,o,n=l[2];const r=a=>a[18].id;for(let a=0;a<n.length;a+=1){let i=Me(l,n,a),f=r(i);s.set(f,e[a]=qe(f,i))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=C()},l(a){for(let i=0;i<e.length;i+=1)e[i].l(a);t=C()},m(a,i){for(let f=0;f<e.length;f+=1)e[f].m(a,i);$(a,t,i),o=!0},p(a,i){i&196671&&(n=a[2],L(),e=Ie(e,i,r,1,a,n,s,t.parentNode,ke,qe,t,Me),B())},i(a){if(!o){for(let i=0;i<n.length;i+=1)_(e[i]);o=!0}},o(a){for(let i=0;i<e.length;i+=1)p(e[i]);o=!1},d(a){for(let i=0;i<e.length;i+=1)e[i].d(a);a&&d(t)}}}function Oe(l){let e,s,t,o,n,r,a,i;function f(h,y){if(h[18].name)return Wt;if(h[18].name==="")return Jt}let c=f(l),u=c&&c(l),m=l[3][l[18].id]&&Ve(l);function g(){return l[7](l[18])}return{c(){e=k("div"),s=k("div"),u&&u.c(),t=N(),m&&m.c(),n=N(),this.h()},l(h){e=w(h,"DIV",{style:!0});var y=E(e);s=w(y,"DIV",{class:!0,style:!0});var U=E(s);u&&u.l(U),t=O(U),m&&m.l(U),U.forEach(d),n=O(y),y.forEach(d),this.h()},h(){I(s,"class",o=""+(we(l[18].id===l[1]?"selected":"")+" svelte-ismk6d")),v(s,"padding","6px"),v(s,"opacity","90%"),v(e,"padding","6px")},m(h,y){$(h,e,y),T(e,s),u&&u.m(s,null),T(s,t),m&&m.m(s,null),T(e,n),r=!0,a||(i=ye(e,"click",g),a=!0)},p(h,y){l=h,c===(c=f(l))&&u?u.p(l,y):(u&&u.d(1),u=c&&c(l),u&&(u.c(),u.m(s,t))),l[3][l[18].id]?m?(m.p(l,y),y&12&&_(m,1)):(m=Ve(l),m.c(),_(m,1),m.m(s,null)):m&&(L(),p(m,1,1,()=>{m=null}),B()),(!r||y&6&&o!==(o=""+(we(l[18].id===l[1]?"selected":"")+" svelte-ismk6d")))&&I(s,"class",o)},i(h){r||(_(m),r=!0)},o(h){p(m),r=!1},d(h){h&&d(e),u&&u.d(),m&&m.d(),a=!1,i()}}}function Jt(l){let e,s;return{c(){e=k("div"),s=H("(no title)")},l(t){e=w(t,"DIV",{});var o=E(e);s=J(o,"(no title)"),o.forEach(d)},m(t,o){$(t,e,o),T(e,s)},p:ee,d(t){t&&d(e)}}}function Wt(l){let e,s=l[18].name+"",t;return{c(){e=k("div"),t=H(s),this.h()},l(o){e=w(o,"DIV",{class:!0});var n=E(e);t=J(n,s),n.forEach(d),this.h()},h(){I(e,"class","svelte-ismk6d"),Ee(e,"question-item",l[18].name.charAt(l[18].name.length-1)==="?")},m(o,n){$(o,e,n),T(e,t)},p(o,n){n&4&&s!==(s=o[18].name+"")&&ce(t,s),n&4&&Ee(e,"question-item",o[18].name.charAt(o[18].name.length-1)==="?")},d(o){o&&d(e)}}}function Ve(l){let e=[],s=new Map,t,o,n=l[3][l[18].id];const r=a=>a[21].browserTabID;for(let a=0;a<n.length;a+=1){let i=Ae(l,n,a),f=r(i);s.set(f,e[a]=Ue(f,i))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=C()},l(a){for(let i=0;i<e.length;i+=1)e[i].l(a);t=C()},m(a,i){for(let f=0;f<e.length;f+=1)e[f].m(a,i);$(a,t,i),o=!0},p(a,i){i&196668&&(n=a[3][a[18].id],L(),e=Ie(e,i,r,1,a,n,s,t.parentNode,ke,Ue,t,Ae),B())},i(a){if(!o){for(let i=0;i<n.length;i+=1)_(e[i]);o=!0}},o(a){for(let i=0;i<e.length;i+=1)p(e[i]);o=!1},d(a){for(let i=0;i<e.length;i+=1)e[i].d(a);a&&d(t)}}}function Pe(l){let e,s,t,o=l[21].browserTabID===l[5]&&Fe(l),n=l[4][l[17][l[21].browserTabID]]&&ze(l);return{c(){o&&o.c(),e=N(),n&&n.c(),s=C()},l(r){o&&o.l(r),e=O(r),n&&n.l(r),s=C()},m(r,a){o&&o.m(r,a),$(r,e,a),n&&n.m(r,a),$(r,s,a),t=!0},p(r,a){r[21].browserTabID===r[5]?o?(o.p(r,a),a&44&&_(o,1)):(o=Fe(r),o.c(),_(o,1),o.m(e.parentNode,e)):o&&(L(),p(o,1,1,()=>{o=null}),B()),r[4][r[17][r[21].browserTabID]]?n?n.p(r,a):(n=ze(r),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},i(r){t||(_(o),t=!0)},o(r){p(o),t=!1},d(r){o&&o.d(r),r&&d(e),n&&n.d(r),r&&d(s)}}}function Fe(l){let e,s,t,o,n;return s=new ut({props:{$$slots:{label:[Kt],default:[Gt]},$$scope:{ctx:l}}}),{c(){e=k("div"),j(s.$$.fragment),this.h()},l(r){e=w(r,"DIV",{style:!0});var a=E(e);R(s.$$.fragment,a),a.forEach(d),this.h()},h(){v(e,"margin-right","0"),v(e,"margin-left","auto")},m(r,a){$(r,e,a),M(s,e,null),t=!0,o||(n=ye(e,"click",it(ct(function(){ft(l[16])&&l[16].apply(this,arguments)}))),o=!0)},p(r,a){l=r;const i={};a&272&&(i.$$scope={dirty:a,ctx:l}),s.$set(i)},i(r){t||(_(s.$$.fragment,r),t=!0)},o(r){p(s.$$.fragment,r),t=!1},d(r){r&&d(e),A(s),o=!1,n()}}}function Gt(l){let e,s;return e=new mt({props:{checked:l[4].local.audio}}),{c(){j(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){M(e,t,o),s=!0},p(t,o){const n={};o&16&&(n.checked=t[4].local.audio),e.$set(n)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function Kt(l){let e,s=(l[4].local.audio?"voice on":"muted")+"",t;return{c(){e=k("span"),t=H(s),this.h()},l(o){e=w(o,"SPAN",{slot:!0});var n=E(e);t=J(n,s),n.forEach(d),this.h()},h(){I(e,"slot","label")},m(o,n){$(o,e,n),T(e,t)},p(o,n){n&16&&s!==(s=(o[4].local.audio?"voice on":"muted")+"")&&ce(t,s)},d(o){o&&d(e)}}}function ze(l){let e;function s(n,r){return n[4][n[17][n[21].browserTabID]].audio?Yt:Qt}let t=s(l),o=t(l);return{c(){o.c(),e=C()},l(n){o.l(n),e=C()},m(n,r){o.m(n,r),$(n,e,r)},p(n,r){t!==(t=s(n))&&(o.d(1),o=t(n),o&&(o.c(),o.m(e.parentNode,e)))},d(n){o.d(n),n&&d(e)}}}function Qt(l){let e,s;return{c(){e=k("span"),s=H("mic_off"),this.h()},l(t){e=w(t,"SPAN",{class:!0,style:!0});var o=E(e);s=J(o,"mic_off"),o.forEach(d),this.h()},h(){I(e,"class","material-icons"),v(e,"margin-right","0"),v(e,"margin-left","auto")},m(t,o){$(t,e,o),T(e,s)},d(t){t&&d(e)}}}function Yt(l){let e,s;return{c(){e=k("span"),s=H("mic"),this.h()},l(t){e=w(t,"SPAN",{class:!0,style:!0});var o=E(e);s=J(o,"mic"),o.forEach(d),this.h()},h(){I(e,"class","material-icons"),v(e,"margin-right","0"),v(e,"margin-left","auto")},m(t,o){$(t,e,o),T(e,s)},d(t){t&&d(e)}}}function Ue(l,e){let s,t,o=e[21].name+"",n,r,a=Object.keys(e[4]).length>0,i,f,c=a&&Pe(e);return{key:l,first:null,c(){s=k("div"),t=k("div"),n=H(o),r=N(),c&&c.c(),i=N(),this.h()},l(u){s=w(u,"DIV",{style:!0});var m=E(s);t=w(m,"DIV",{style:!0});var g=E(t);n=J(g,o),g.forEach(d),r=O(m),c&&c.l(m),i=O(m),m.forEach(d),this.h()},h(){v(t,"font-size","0.7rem"),v(t,"margin-left","4px"),v(s,"display","flex"),this.first=s},m(u,m){$(u,s,m),T(s,t),T(t,n),T(s,r),c&&c.m(s,null),T(s,i),f=!0},p(u,m){e=u,(!f||m&12)&&o!==(o=e[21].name+"")&&ce(n,o),m&16&&(a=Object.keys(e[4]).length>0),a?c?(c.p(e,m),m&16&&_(c,1)):(c=Pe(e),c.c(),_(c,1),c.m(s,i)):c&&(L(),p(c,1,1,()=>{c=null}),B())},i(u){f||(_(c),f=!0)},o(u){p(c),f=!1},d(u){u&&d(s),c&&c.d()}}}function qe(l,e){let s,t,o,n=e[18].name!==void 0&&Oe(e);return{key:l,first:null,c(){s=C(),n&&n.c(),t=C(),this.h()},l(r){s=C(),n&&n.l(r),t=C(),this.h()},h(){this.first=s},m(r,a){$(r,s,a),n&&n.m(r,a),$(r,t,a),o=!0},p(r,a){e=r,e[18].name!==void 0?n?(n.p(e,a),a&4&&_(n,1)):(n=Oe(e),n.c(),_(n,1),n.m(t.parentNode,t)):n&&(L(),p(n,1,1,()=>{n=null}),B())},i(r){o||(_(n),o=!0)},o(r){p(n),o=!1},d(r){r&&d(s),n&&n.d(r),r&&d(t)}}}function Xt(l){let e,s,t=l[2]&&Ne(l);return{c(){t&&t.c(),e=C()},l(o){t&&t.l(o),e=C()},m(o,n){t&&t.m(o,n),$(o,e,n),s=!0},p(o,n){o[2]?t?(t.p(o,n),n&4&&_(t,1)):(t=Ne(o),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(L(),p(t,1,1,()=>{t=null}),B())},i(o){s||(_(t),s=!0)},o(o){p(t),s=!1},d(o){t&&t.d(o),o&&d(e)}}}function Zt(l){let e,s;return e=new Ot({props:{$$slots:{default:[Xt]},$$scope:{ctx:l}}}),{c(){j(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){M(e,t,o),s=!0},p(t,o){const n={};o&196927&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){A(e,t)}}}function xt(l){let e,s,t,o,n,r,a;e=new Pt({props:{classID:l[0],roomID:l[1]}}),n=new Ht({props:{roomID:l[1],$$slots:{default:[Zt,({isMicOn:c,activeSpeakerID:u,toggleMic:m,firestoreIDToDailyID:g})=>({14:c,15:u,16:m,17:g}),({isMicOn:c,activeSpeakerID:u,toggleMic:m,firestoreIDToDailyID:g})=>(c?16384:0)|(u?32768:0)|(m?65536:0)|(g?131072:0)]},$$scope:{ctx:l}}});const i=l[6].default,f=oe(i,l,l[8],null);return{c(){j(e.$$.fragment),s=N(),t=k("div"),o=N(),j(n.$$.fragment),r=N(),f&&f.c(),this.h()},l(c){R(e.$$.fragment,c),s=O(c),t=w(c,"DIV",{id:!0});var u=E(t);u.forEach(d),o=O(c),R(n.$$.fragment,c),r=O(c),f&&f.l(c),this.h()},h(){I(t,"id","container-for-audio-elements")},m(c,u){M(e,c,u),$(c,s,u),$(c,t,u),$(c,o,u),M(n,c,u),$(c,r,u),f&&f.m(c,u),a=!0},p(c,[u]){const m={};u&1&&(m.classID=c[0]),u&2&&(m.roomID=c[1]),e.$set(m);const g={};u&2&&(g.roomID=c[1]),u&196927&&(g.$$scope={dirty:u,ctx:c}),n.$set(g),f&&f.p&&(!a||u&256)&&se(f,i,c,c[8],a?re(i,c[8],u,null):ne(c[8]),null)},i(c){a||(_(e.$$.fragment,c),_(n.$$.fragment,c),_(f,c),a=!0)},o(c){p(e.$$.fragment,c),p(n.$$.fragment,c),p(f,c),a=!1},d(c){A(e,c),c&&d(s),c&&d(t),c&&d(o),A(n,c),c&&d(r),f&&f.d(c)}}}function lo({page:l}){return console.log("__layout load(), browser =",gt),{props:{classID:l.params.class,roomID:l.params.room}}}function eo(l,e,s){let t,o,n;z(l,K,b=>s(3,t=b)),z(l,Z,b=>s(4,o=b)),z(l,fe,b=>s(5,n=b));let{$$slots:r={},$$scope:a}=e,{classID:i}=e,{roomID:f}=e,c;le(()=>{for(const b of g)b();window.removeEventListener("resize",m)}),ae(()=>{console.log("__layout mounted, but should only be done once"),window.addEventListener("resize",m),m()});function u(){const{height:b,width:q}=$t();_t.set(b),pt.set(q)}function m(){setTimeout(u,100)}let g=[];const h=De(ie(),`classes/${i}/participants`),y=De(ie(),`classes/${i}/rooms`);g.push(ve(y,b=>{const q=[];b.forEach(V=>{q.push(he({id:V.id,ref:V.ref.path},V.data()))}),s(2,c=q)})),g.push(ve(h,b=>{b.docChanges().forEach(q=>{const V=q.doc.data(),F=V.currentRoomID;switch(q.type){case"added":t[F]||te(K,t[F]=[],t),t[F].push(V);break;case"modified":for(const W of Object.keys(t))for(const D of t[W])D.browserTabID===V.browserTabID&&te(K,t[W]=t[W].filter(P=>P.browserTabID!==V.browserTabID),t);t[F]||te(K,t[F]=[],t),t[F].push(V);break;case"removed":te(K,t[F]=t[F].filter(W=>W.browserTabID!==V.browserTabID),t);break}})}));const U=b=>ht(`/${i}/${b.id}`);return l.$$set=b=>{"classID"in b&&s(0,i=b.classID),"roomID"in b&&s(1,f=b.roomID),"$$scope"in b&&s(8,a=b.$$scope)},[i,f,c,t,o,n,r,U,a]}class ao extends Q{constructor(e){super();Y(this,e,eo,xt,X,{classID:0,roomID:1})}}export{ao as default,lo as load};
