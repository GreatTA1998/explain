var Fe=Object.defineProperty;var he=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var ge=(r,e,s)=>e in r?Fe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,$e=(r,e)=>{for(var s in e||(e={}))He.call(e,s)&&ge(r,s,e[s]);if(he)for(var s of he(e))Je.call(e,s)&&ge(r,s,e[s]);return r};import{S as Y,i as Z,s as X,a6 as Ke,e as k,t as q,k as C,j as z,c as E,a as T,g as U,d as p,n as M,m as V,L as d,f as v,M as I,o as P,x as $,u as w,v as L,Z as We,a7 as be,l as F,r as W,w as G,a8 as Ge,a9 as Qe,N as se,aa as Ye,ab as Ze,b as S,ac as Xe,U as xe,H as re,I as ne,J as ae,K as le,E as B,ad as ie,ae as et,A as ce,af as ve,ag as De,ah as tt,_ as ot,ai as st,O as fe,P as x,R as ue,aj as rt,ak as we,al as nt,am as at,an as Ie,ao as te,ap as ye,a3 as ke,aq as Ee,ar as Te,a0 as lt,as as oe,h as Se,at as it,au as ct,av as ft,aw as ut}from"../../chunks/vendor-22b599bd.js";import{b as me,u as mt,i as de,r as Q,g as Re,d as ee,e as je,a as dt,c as _t}from"../../chunks/store-86428912.js";import{g as pt,c as ht}from"../../chunks/canvas-226d237d.js";import"../../chunks/singletons-12a22614.js";function Ce(r,e,s){const t=r.slice();return t[3]=e[s],t}function gt(r){let e=r[3].name+"",s,t;return{c(){s=q(e),t=C()},l(o){s=U(o,e),t=M(o)},m(o,n){v(o,s,n),v(o,t,n)},p:se,d(o){o&&p(s),o&&p(t)}}}function Me(r){let e,s;return e=new Qe({props:{$$slots:{default:[gt]},$$scope:{ctx:r}}}),e.$on("SMUI:action",Dt),{c(){z(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){P(e,t,o),s=!0},p(t,o){const n={};o&64&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){L(e,t)}}}function $t(r){let e,s,t=r[1],o=[];for(let i=0;i<t.length;i+=1)o[i]=Me(Ce(r,t,i));const n=i=>w(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=F()},l(i){for(let l=0;l<o.length;l+=1)o[l].l(i);e=F()},m(i,l){for(let a=0;a<o.length;a+=1)o[a].m(i,l);v(i,e,l),s=!0},p(i,l){if(l&2){t=i[1];let a;for(a=0;a<t.length;a+=1){const f=Ce(i,t,a);o[a]?(o[a].p(f,l),$(o[a],1)):(o[a]=Me(f),o[a].c(),$(o[a],1),o[a].m(e.parentNode,e))}for(W(),a=t.length;a<o.length;a+=1)n(a);G()}},i(i){if(!s){for(let l=0;l<t.length;l+=1)$(o[l]);s=!0}},o(i){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)w(o[l]);s=!1},d(i){Ge(o,i),i&&p(e)}}}function bt(r){let e,s;return e=new be({props:{$$slots:{default:[$t]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){P(e,t,o),s=!0},p(t,o){const n={};o&64&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){L(e,t)}}}function vt(r){let e,s,t,o,n,i={style:"left: 100px; top: 50px; width: 300px",$$slots:{default:[bt]},$$scope:{ctx:r}};return o=new Ke({props:i}),r[2](o),{c(){e=k("h1"),s=q("6.036"),t=C(),z(o.$$.fragment),this.h()},l(l){e=E(l,"H1",{style:!0});var a=T(e);s=U(a,"6.036"),a.forEach(p),t=M(l),V(o.$$.fragment,l),this.h()},h(){d(e,"font-family","Roboto, sans-serif"),d(e,"font-weight","400"),d(e,"margin-left","6px"),d(e,"margin-top","5px"),d(e,"margin-bottom","0px"),d(e,"font-size","2.0rem")},m(l,a){v(l,e,a),I(e,s),v(l,t,a),P(o,l,a),n=!0},p(l,[a]){const f={};a&64&&(f.$$scope={dirty:a,ctx:l}),o.$set(f)},i(l){n||($(o.$$.fragment,l),n=!0)},o(l){w(o.$$.fragment,l),n=!1},d(l){l&&p(e),l&&p(t),r[2](null),L(o,l)}}}const Dt=()=>{};function wt(r,e,s){let t=[{name:"6.006"},{name:"6.036"}],o;function n(i){We[i?"unshift":"push"](()=>{o=i,s(0,o)})}return[o,t,n]}class It extends Y{constructor(e){super();Z(this,e,wt,vt,X,{})}}function yt(r){let e;const s=r[0].default,t=re(s,r,r[1],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,n){t&&t.m(o,n),e=!0},p(o,n){t&&t.p&&(!e||n&2)&&ne(t,s,o,o[1],e?le(s,o[1],n,null):ae(o[1]),null)},i(o){e||($(t,o),e=!0)},o(o){w(t,o),e=!1},d(o){t&&t.d(o)}}}function kt(r){let e,s,t,o,n,i,l,a,f,c,m,u,_;return l=new It({}),u=new be({props:{$$slots:{default:[yt]},$$scope:{ctx:r}}}),{c(){e=k("div"),s=k("div"),t=k("img"),n=C(),i=k("div"),z(l.$$.fragment),a=C(),f=k("div"),c=q("Intro to Machine Learning"),m=C(),z(u.$$.fragment),this.h()},l(h){e=E(h,"DIV",{style:!0,class:!0});var b=T(e);s=E(b,"DIV",{style:!0,class:!0});var y=T(s);t=E(y,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),n=M(y),i=E(y,"DIV",{class:!0});var A=T(i);V(l.$$.fragment,A),a=M(A),f=E(A,"DIV",{style:!0,class:!0});var H=T(f);c=U(H,"Intro to Machine Learning"),H.forEach(p),A.forEach(p),y.forEach(p),b.forEach(p),m=M(h),V(u.$$.fragment,h),this.h()},h(){xe(t.src,o="/logo.png")||S(t,"src",o),S(t,"width","60"),S(t,"height","54"),S(t,"alt","web-logo"),S(t,"class","svelte-f4hgt4"),d(f,"font-family","Roboto,sans-serif"),d(f,"font-size","0.875rem"),d(f,"color","rgba(0,0,0,.6)"),d(f,"margin-left","8px"),d(f,"margin-bottom","12px"),S(f,"class","svelte-f4hgt4"),S(i,"class","svelte-f4hgt4"),d(s,"display","flex"),d(s,"align-items","center"),S(s,"class","svelte-f4hgt4"),d(e,"margin-bottom","12px"),d(e,"padding-top","2px"),d(e,"padding-bottom","0"),d(e,"padding-left","8px"),S(e,"class","mdc-elevation--z"+4+" svelte-f4hgt4")},m(h,b){v(h,e,b),I(e,s),I(s,t),I(s,n),I(s,i),P(l,i,null),I(i,a),I(i,f),I(f,c),v(h,m,b),P(u,h,b),_=!0},p(h,b){const y={};b&2&&(y.$$scope={dirty:b,ctx:h}),u.$set(y)},i(h){_||($(l.$$.fragment,h),$(u.$$.fragment,h),_=!0)},o(h){w(l.$$.fragment,h),w(u.$$.fragment,h),_=!1},d(h){h&&p(e),L(l),h&&p(m),L(u,h)}}}function Et(r){let e,s;return e=new Xe({props:{$$slots:{default:[kt]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){P(e,t,o),s=!0},p(t,o){const n={};o&2&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){L(e,t)}}}function Tt(r){let e;return{c(){e=k("main"),this.h()},l(s){e=E(s,"MAIN",{class:!0,id:!0,style:!0});var t=T(e);t.forEach(p),this.h()},h(){S(e,"class","main-content svelte-f4hgt4"),S(e,"id","main-content"),d(e,"padding","0")},m(s,t){v(s,e,t)},d(s){s&&p(e)}}}function St(r){let e,s,t,o,n;return s=new Ye({props:{style:"overflow-y: scroll; height: 100%;",class:"mdc-elevation--z"+5,$$slots:{default:[Et]},$$scope:{ctx:r}}}),o=new Ze({props:{class:"app-content",$$slots:{default:[Tt]},$$scope:{ctx:r}}}),{c(){e=k("div"),z(s.$$.fragment),t=C(),z(o.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var l=T(e);V(s.$$.fragment,l),t=M(l),V(o.$$.fragment,l),l.forEach(p),this.h()},h(){S(e,"class","drawer-container svelte-f4hgt4")},m(i,l){v(i,e,l),P(s,e,null),I(e,t),P(o,e,null),n=!0},p(i,[l]){const a={};l&2&&(a.$$scope={dirty:l,ctx:i}),s.$set(a);const f={};l&2&&(f.$$scope={dirty:l,ctx:i}),o.$set(f)},i(i){n||($(s.$$.fragment,i),$(o.$$.fragment,i),n=!0)},o(i){w(s.$$.fragment,i),w(o.$$.fragment,i),n=!1},d(i){i&&p(e),L(s),L(o)}}}function Rt(r,e,s){let{$$slots:t={},$$scope:o}=e;return r.$$set=n=>{"$$scope"in n&&s(1,o=n.$$scope)},[t,o]}class jt extends Y{constructor(e){super();Z(this,e,Rt,St,X,{})}}function Ct(r,e,s){let t,o,n,i;B(r,me,h=>s(10,o=h)),B(r,mt,h=>s(3,n=h)),B(r,de,h=>s(4,i=h));let{classID:l}=e,{roomID:a}=e,f,c,m,u,_;return ie(()=>{_&&_(),i&&(et(c),de.set(!1)),u&&u.cancel()}),ce(()=>{Q.set({}),m=ve(De(),".info/connected"),_=tt(m,async h=>{if(h.val()===!0){const b=Re();f=ve(De(),`/class/${l}/room/${a}/participants/${b}`),u=st(f),u.set({hasDisconnected:!0,userUID:n.uid}),s(2,c=fe(x(),`classes/${l}/participants/${b}`)),ue(c,{uid:n.uid,browserTabID:o,currentRoomID:a,name:t}),de.set(!0)}})}),r.$$set=h=>{"classID"in h&&s(0,l=h.classID),"roomID"in h&&s(1,a=h.roomID)},r.$$.update=()=>{r.$$.dirty&8&&(t=n.name?n.name:"Beaver #"),r.$$.dirty&30&&i&&n.name&&ot(c,{currentRoomID:a,name:n.name})},[l,a,c,n,i]}class Mt extends Y{constructor(e){super();Z(this,e,Ct,null,X,{classID:0,roomID:1})}}const Nt="0ac8a98cf9bef2827f5beef5cd36c4f42a442863ce904a2469de12caa9097fa1",At=r=>({activeSpeakerID:r&2,firestoreIDToDailyID:r&1}),Ne=r=>({toggleMic:r[2],activeSpeakerID:r[1],firestoreIDToDailyID:r[0]});function Ot(r){let e;const s=r[8].default,t=re(s,r,r[7],Ne);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,n){t&&t.m(o,n),e=!0},p(o,[n]){t&&t.p&&(!e||n&131)&&ne(t,s,o,o[7],e?le(s,o[7],n,At):ae(o[7]),Ne)},i(o){e||($(t,o),e=!0)},o(o){w(t,o),e=!1},d(o){t&&t.d(o)}}}async function zt({track:r,participant:e}){switch(r.kind){case"audio":if(e.local)return;{const s=document.createElement("audio");s.srcObject=new MediaStream([r]),s.setAttribute("id","audio"+e.user_id),s.setAttribute("playsinline",!0),s.setAttribute("autoplay",!0),document.getElementById("container-for-audio-elements").appendChild(s)}break}}async function Vt({track:r,participant:e}){const s=document.getElementById(r.id);s&&(s.srcObject=null,s.remove())}function Pt(r,e,s){let t,o,n;B(r,ee,g=>s(10,t=g)),B(r,me,g=>s(11,o=g)),B(r,je,g=>s(12,n=g));let{$$slots:i={},$$scope:l}=e,{roomID:a}=e,f,c,m,u,_,h="";ie(()=>{u==="connected"&&O()}),ce(async()=>{await b(),y()});async function b(){return new Promise(async g=>{if(!n){const j=await navigator.mediaDevices.getUserMedia({audio:!0});je.set(j)}const[R]=n.getAudioTracks();f=rt.createCallObject({audioSource:R,videoSource:!1});const J=["participant-joined","participant-updated","participant-left"];for(const j of J)f.on(j,()=>{ee.set(f.participants());const K={};for(const Be of Object.keys(t)){const _e=t[Be],pe=_e.user_name;pe&&(K[pe]=_e.user_id)}s(0,c=K)});f.on("track-started",zt),f.on("track-stopped",Vt),f.on("active-speaker-change",({activeSpeaker:j})=>{s(1,h=j.peerId)}),f.on("load-attempt-failed",({action:j,errorMsg:K})=>{alert(j+": "+K)}),f.on("error",({action:j,errorMsg:K})=>{alert(j+": "+K)}),g()})}async function y(){s(4,m="not_connected"),s(5,u="connecting"),s(6,_=a);const{url:g}=await A();g&&(await H(g),s(4,m="connecting"),s(5,u="connected"))}function A(){return new Promise(async g=>{try{const R=2*60*60,j=await(await fetch("https://api.daily.co/v1/rooms",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer "+Nt},body:JSON.stringify({name:a,properties:{exp:Math.round(Date.now()/1e3)+R,eject_at_room_exp:!0,start_video_off:!0}})})).json();j.error==="invalid-request-error"&&j.info===`a room named ${a} already exists`?g({url:`https://feynman.daily.co/${a}`}):g(j)}catch(R){console.error(R),alert(R),reject({url:""})}})}function H(g){return new Promise(async(R,J)=>{try{await f.join({url:g,userName:o}),R()}catch(j){console.log("error)"),alert(j),J()}})}function D(){console.log("toggling mic"),f.setLocalAudio(!t.local.audio),ee.set(f.participants())}function O(){const g=document.querySelectorAll("audio");for(const R of g)R.remove();N(),s(4,m="connected"),s(5,u="not_connected")}function N(){f.leave(),ee.set({}),s(1,h="")}return r.$$set=g=>{"roomID"in g&&s(3,a=g.roomID),"$$scope"in g&&s(7,l=g.$$scope)},r.$$.update=()=>{r.$$.dirty&120&&m==="connecting"&&u==="connected"&&_!==a&&(console.log("part 1: user moved to a different room before voice chat connected"),O()),r.$$.dirty&120&&m==="connected"&&u==="not_connected"&&_!==a&&(console.log("part 2: ready to join the new room"),y())},[c,h,D,a,m,u,_,l,i]}class Lt extends Y{constructor(e){super();Z(this,e,Pt,Ot,X,{roomID:3})}}function Ae(r,e,s){const t=r.slice();return t[19]=e[s],t}function Oe(r,e,s){const t=r.slice();return t[22]=e[s],t}function qt(r){let e,s;return{c(){e=k("div"),s=q("(no title)"),this.h()},l(t){e=E(t,"DIV",{style:!0});var o=T(e);s=U(o,"(no title)"),o.forEach(p),this.h()},h(){d(e,"margin-bottom","2px")},m(t,o){v(t,e,o),I(e,s)},p:se,d(t){t&&p(e)}}}function Ut(r){let e,s=r[19].name+"",t;return{c(){e=k("div"),t=q(s),this.h()},l(o){e=E(o,"DIV",{style:!0,class:!0});var n=T(e);t=U(n,s),n.forEach(p),this.h()},h(){d(e,"white-space","nowrap"),d(e,"overflow","hidden"),d(e,"text-overflow","ellipsis margin-bottom: 2px"),S(e,"class","svelte-twz7iw"),oe(e,"question-item",r[19].name.charAt(r[19].name.length-1)==="?")},m(o,n){v(o,e,n),I(e,t)},p(o,n){n&4&&s!==(s=o[19].name+"")&&Se(t,s),n&4&&oe(e,"question-item",o[19].name.charAt(o[19].name.length-1)==="?")},d(o){o&&p(e)}}}function ze(r){let e=[],s=new Map,t,o,n=r[3][r[19].id];const i=l=>l[22].browserTabID;for(let l=0;l<n.length;l+=1){let a=Oe(r,n,l),f=i(a);s.set(f,e[l]=qe(f,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=F()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);t=F()},m(l,a){for(let f=0;f<e.length;f+=1)e[f].m(l,a);v(l,t,a),o=!0},p(l,a){a&458812&&(n=l[3][l[19].id],W(),e=Ee(e,a,i,1,l,n,s,t.parentNode,Te,qe,t,Oe),G())},i(l){if(!o){for(let a=0;a<n.length;a+=1)$(e[a]);o=!0}},o(l){for(let a=0;a<e.length;a+=1)w(e[a]);o=!1},d(l){for(let a=0;a<e.length;a+=1)e[a].d(l);l&&p(t)}}}function Ve(r){let e,s,t,o=r[22].browserTabID===r[5]&&Pe(r),n=r[4][r[18][r[22].browserTabID]]&&Le(r);return{c(){o&&o.c(),e=C(),n&&n.c(),s=F()},l(i){o&&o.l(i),e=M(i),n&&n.l(i),s=F()},m(i,l){o&&o.m(i,l),v(i,e,l),n&&n.m(i,l),v(i,s,l),t=!0},p(i,l){i[22].browserTabID===i[5]?o?(o.p(i,l),l&44&&$(o,1)):(o=Pe(i),o.c(),$(o,1),o.m(e.parentNode,e)):o&&(W(),w(o,1,1,()=>{o=null}),G()),i[4][i[18][i[22].browserTabID]]?n?n.p(i,l):(n=Le(i),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},i(i){t||($(o),t=!0)},o(i){w(o),t=!1},d(i){o&&o.d(i),i&&p(e),n&&n.d(i),i&&p(s)}}}function Pe(r){let e,s,t,o,n,i,l;t=new ut({props:{checked:r[4].local.audio,style:"margin: 0 !important"}});function a(m,u){return m[4].local.audio?Ft:Bt}let f=a(r),c=f(r);return{c(){e=k("div"),s=k("div"),z(t.$$.fragment),o=C(),c.c(),this.h()},l(m){e=E(m,"DIV",{style:!0});var u=T(e);s=E(u,"DIV",{style:!0});var _=T(s);V(t.$$.fragment,_),_.forEach(p),o=M(u),c.l(u),u.forEach(p),this.h()},h(){d(s,"margin-right","0"),d(s,"margin-left","auto"),d(s,"padding-top","5px"),d(e,"display","flex"),d(e,"align-items","center"),d(e,"margin-right","0"),d(e,"margin-left","auto")},m(m,u){v(m,e,u),I(e,s),P(t,s,null),I(e,o),c.m(e,null),n=!0,i||(l=ke(s,"click",it(ct(function(){ft(r[17])&&r[17].apply(this,arguments)}))),i=!0)},p(m,u){r=m;const _={};u&16&&(_.checked=r[4].local.audio),t.$set(_),f!==(f=a(r))&&(c.d(1),c=f(r),c&&(c.c(),c.m(e,null)))},i(m){n||($(t.$$.fragment,m),n=!0)},o(m){w(t.$$.fragment,m),n=!1},d(m){m&&p(e),L(t),c.d(),i=!1,l()}}}function Bt(r){let e,s;return{c(){e=k("div"),s=q("muted"),this.h()},l(t){e=E(t,"DIV",{style:!0});var o=T(e);s=U(o,"muted"),o.forEach(p),this.h()},h(){d(e,"font-size","0.7rem"),d(e,"margin-left","6px"),d(e,"color","red")},m(t,o){v(t,e,o),I(e,s)},d(t){t&&p(e)}}}function Ft(r){let e,s;return{c(){e=k("div"),s=q("voice on"),this.h()},l(t){e=E(t,"DIV",{style:!0});var o=T(e);s=U(o,"voice on"),o.forEach(p),this.h()},h(){d(e,"font-size","0.7rem"),d(e,"margin-left","6px"),d(e,"color","green")},m(t,o){v(t,e,o),I(e,s)},d(t){t&&p(e)}}}function Le(r){let e;function s(n,i){return n[4][n[18][n[22].browserTabID]].audio?Jt:Ht}let t=s(r),o=t(r);return{c(){o.c(),e=F()},l(n){o.l(n),e=F()},m(n,i){o.m(n,i),v(n,e,i)},p(n,i){t===(t=s(n))&&o?o.p(n,i):(o.d(1),o=t(n),o&&(o.c(),o.m(e.parentNode,e)))},d(n){o.d(n),n&&p(e)}}}function Ht(r){let e,s;return{c(){e=k("span"),s=q("mic_off"),this.h()},l(t){e=E(t,"SPAN",{class:!0,style:!0});var o=T(e);s=U(o,"mic_off"),o.forEach(p),this.h()},h(){S(e,"class","material-icons"),d(e,"margin-right","0"),d(e,"margin-left","auto"),d(e,"font-size","1.2rem"),d(e,"color","red")},m(t,o){v(t,e,o),I(e,s)},p:se,d(t){t&&p(e)}}}function Jt(r){let e,s;return{c(){e=k("span"),s=q("mic"),this.h()},l(t){e=E(t,"SPAN",{class:!0,style:!0});var o=T(e);s=U(o,"mic"),o.forEach(p),this.h()},h(){S(e,"class","material-icons"),d(e,"margin-right","0"),d(e,"margin-left","auto"),d(e,"font-size","1.2rem"),d(e,"color",r[18]&&r[18][r[22].browserTabID]&&r[18][r[22].browserTabID]===r[16]?"white":"")},m(t,o){v(t,e,o),I(e,s)},p(t,o){o&327692&&d(e,"color",t[18]&&t[18][t[22].browserTabID]&&t[18][t[22].browserTabID]===t[16]?"white":"")},d(t){t&&p(e)}}}function qe(r,e){let s,t,o=e[22].name+"",n,i,l=Object.keys(e[4]).length>0,a,f,c=l&&Ve(e);return{key:r,first:null,c(){s=k("div"),t=k("div"),n=q(o),i=C(),c&&c.c(),a=C(),this.h()},l(m){s=E(m,"DIV",{style:!0});var u=T(s);t=E(u,"DIV",{style:!0,class:!0});var _=T(t);n=U(_,o),_.forEach(p),i=M(u),c&&c.l(u),a=M(u),u.forEach(p),this.h()},h(){d(t,"font-size","0.7rem"),d(t,"margin-left","6px"),S(t,"class","svelte-twz7iw"),oe(t,"speaking",e[18]&&e[18][e[22].browserTabID]&&e[18][e[22].browserTabID]===e[16]),d(s,"display","flex"),d(s,"align-items","center"),this.first=s},m(m,u){v(m,s,u),I(s,t),I(t,n),I(s,i),c&&c.m(s,null),I(s,a),f=!0},p(m,u){e=m,(!f||u&12)&&o!==(o=e[22].name+"")&&Se(n,o),u&327692&&oe(t,"speaking",e[18]&&e[18][e[22].browserTabID]&&e[18][e[22].browserTabID]===e[16]),u&16&&(l=Object.keys(e[4]).length>0),l?c?(c.p(e,u),u&16&&$(c,1)):(c=Ve(e),c.c(),$(c,1),c.m(s,a)):c&&(W(),w(c,1,1,()=>{c=null}),G())},i(m){f||($(c),f=!0)},o(m){w(c),f=!1},d(m){m&&p(s),c&&c.d()}}}function Ue(r,e){let s,t,o,n,i,l,a,f;function c(b,y){if(b[19].name)return Ut;if(b[19].name==="")return qt}let m=c(e),u=m&&m(e),_=e[3][e[19].id]&&ze(e);function h(){return e[8](e[19])}return{key:r,first:null,c(){s=k("div"),t=k("div"),u&&u.c(),o=C(),_&&_.c(),i=C(),this.h()},l(b){s=E(b,"DIV",{style:!0});var y=T(s);t=E(y,"DIV",{class:!0,style:!0});var A=T(t);u&&u.l(A),o=M(A),_&&_.l(A),A.forEach(p),i=M(y),y.forEach(p),this.h()},h(){S(t,"class",n=""+(ye(e[19].id===e[1]?"selected":"")+" svelte-twz7iw")),d(t,"padding","6px 10px 6px 8px"),d(t,"opacity","90%"),d(t,"border-radius","5px"),d(s,"padding","6px"),this.first=s},m(b,y){v(b,s,y),I(s,t),u&&u.m(t,null),I(t,o),_&&_.m(t,null),I(s,i),l=!0,a||(f=ke(s,"click",h),a=!0)},p(b,y){e=b,m===(m=c(e))&&u?u.p(e,y):(u&&u.d(1),u=m&&m(e),u&&(u.c(),u.m(t,o))),e[3][e[19].id]?_?(_.p(e,y),y&12&&$(_,1)):(_=ze(e),_.c(),$(_,1),_.m(t,null)):_&&(W(),w(_,1,1,()=>{_=null}),G()),(!l||y&6&&n!==(n=""+(ye(e[19].id===e[1]?"selected":"")+" svelte-twz7iw")))&&S(t,"class",n)},i(b){l||($(_),l=!0)},o(b){w(_),l=!1},d(b){b&&p(s),u&&u.d(),_&&_.d(),a=!1,f()}}}function Kt(r){let e,s,t;return{c(){e=k("span"),s=q("add"),t=q(`\r
      New room`),this.h()},l(o){e=E(o,"SPAN",{class:!0,style:!0});var n=T(e);s=U(n,"add"),n.forEach(p),t=U(o,`\r
      New room`),this.h()},h(){S(e,"class","material-icons"),d(e,"margin-right","4px")},m(o,n){v(o,e,n),I(e,s),v(o,t,n)},d(o){o&&p(e),o&&p(t)}}}function Wt(r){let e=[],s=new Map,t,o,n,i=r[2];const l=a=>a[19].id+a[1];for(let a=0;a<i.length;a+=1){let f=Ae(r,i,a),c=l(f);s.set(c,e[a]=Ue(c,f))}return o=new lt({props:{style:"width: 100%; margin: auto;",$$slots:{default:[Kt]},$$scope:{ctx:r}}}),o.$on("click",r[6]),{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=C(),z(o.$$.fragment)},l(a){for(let f=0;f<e.length;f+=1)e[f].l(a);t=M(a),V(o.$$.fragment,a)},m(a,f){for(let c=0;c<e.length;c+=1)e[c].m(a,f);v(a,t,f),P(o,a,f),n=!0},p(a,f){f&458815&&(i=a[2],W(),e=Ee(e,f,l,1,a,i,s,t.parentNode,Te,Ue,t,Ae),G());const c={};f&512&&(c.$$scope={dirty:f,ctx:a}),o.$set(c)},i(a){if(!n){for(let f=0;f<i.length;f+=1)$(e[f]);$(o.$$.fragment,a),n=!0}},o(a){for(let f=0;f<e.length;f+=1)w(e[f]);w(o.$$.fragment,a),n=!1},d(a){for(let f=0;f<e.length;f+=1)e[f].d(a);a&&p(t),L(o,a)}}}function Gt(r){let e,s;return e=new jt({props:{$$slots:{default:[Wt]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){P(e,t,o),s=!0},p(t,o){const n={};o&459327&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){L(e,t)}}}function Qt(r){let e,s,t,o,n,i,l;e=new Mt({props:{classID:r[0],roomID:r[1]}}),n=new Lt({props:{roomID:r[1],$$slots:{default:[Gt,({activeSpeakerID:c,toggleMic:m,firestoreIDToDailyID:u})=>({16:c,17:m,18:u}),({activeSpeakerID:c,toggleMic:m,firestoreIDToDailyID:u})=>(c?65536:0)|(m?131072:0)|(u?262144:0)]},$$scope:{ctx:r}}});const a=r[7].default,f=re(a,r,r[9],null);return{c(){z(e.$$.fragment),s=C(),t=k("div"),o=C(),z(n.$$.fragment),i=C(),f&&f.c(),this.h()},l(c){V(e.$$.fragment,c),s=M(c),t=E(c,"DIV",{id:!0});var m=T(t);m.forEach(p),o=M(c),V(n.$$.fragment,c),i=M(c),f&&f.l(c),this.h()},h(){S(t,"id","container-for-audio-elements")},m(c,m){P(e,c,m),v(c,s,m),v(c,t,m),v(c,o,m),P(n,c,m),v(c,i,m),f&&f.m(c,m),l=!0},p(c,[m]){const u={};m&1&&(u.classID=c[0]),m&2&&(u.roomID=c[1]),e.$set(u);const _={};m&2&&(_.roomID=c[1]),m&459327&&(_.$$scope={dirty:m,ctx:c}),n.$set(_),f&&f.p&&(!l||m&512)&&ne(f,a,c,c[9],l?le(a,c[9],m,null):ae(c[9]),null)},i(c){l||($(e.$$.fragment,c),$(n.$$.fragment,c),$(f,c),l=!0)},o(c){w(e.$$.fragment,c),w(n.$$.fragment,c),w(f,c),l=!1},d(c){L(e,c),c&&p(s),c&&p(t),c&&p(o),L(n,c),c&&p(i),f&&f.d(c)}}}function oo({page:r}){return{props:{classID:r.params.class,roomID:r.params.room}}}function Yt(r,e,s){let t,o,n;B(r,Q,D=>s(3,t=D)),B(r,ee,D=>s(4,o=D)),B(r,me,D=>s(5,n=D));let{$$slots:i={},$$scope:l}=e,{classID:a}=e,{roomID:f}=e,c=[];ie(()=>{for(const D of h)D();window.removeEventListener("resize",_)}),ce(()=>{console.log("__layout mounted, but should only be done once"),window.addEventListener("resize",_),_()});async function m(){for(const R of c)if(R.name===""){alert("A room is still untitled - use it before creating a new one");return}const D=Re(),O=`classes/${a}/`,N=fe(x(),O+`rooms/${D}`),g=fe(x(),O+`blackboards/${D}`);await Promise.all([ue(N,{name:"",blackboards:[D],date:new Date().toISOString()}),ue(g,{})])}function u(){const{height:D,width:O}=ht();dt.set(D),_t.set(O)}function _(){setTimeout(u,100)}let h=[];const b=we(x(),`classes/${a}/participants`),y=we(x(),`classes/${a}/rooms`),A=nt(y,at("date","asc"));h.push(Ie(A,D=>{const O=[];D.forEach(N=>{O.push($e({id:N.id,ref:N.ref.path},N.data()))}),s(2,c=O)})),h.push(Ie(b,D=>{D.docChanges().forEach(O=>{const N=O.doc.data(),g=N.currentRoomID;switch(O.type){case"added":t[g]||te(Q,t[g]=[],t),t[g].push(N);break;case"modified":for(const R of Object.keys(t))for(const J of t[R])J.browserTabID===N.browserTabID&&te(Q,t[R]=t[R].filter(j=>j.browserTabID!==N.browserTabID),t);t[g]||te(Q,t[g]=[],t),t[g].push(N);break;case"removed":te(Q,t[g]=t[g].filter(R=>R.browserTabID!==N.browserTabID),t);break}})}));const H=D=>pt(`/${a}/${D.id}`);return r.$$set=D=>{"classID"in D&&s(0,a=D.classID),"roomID"in D&&s(1,f=D.roomID),"$$scope"in D&&s(9,l=D.$$scope)},[a,f,c,t,o,n,m,i,H,l]}class so extends Y{constructor(e){super();Z(this,e,Yt,Qt,X,{classID:0,roomID:1})}}export{so as default,oo as load};
