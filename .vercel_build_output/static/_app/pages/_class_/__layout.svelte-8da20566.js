var Fe=Object.defineProperty;var he=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var ge=(r,e,o)=>e in r?Fe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o,$e=(r,e)=>{for(var o in e||(e={}))He.call(e,o)&&ge(r,o,e[o]);if(he)for(var o of he(e))Je.call(e,o)&&ge(r,o,e[o]);return r};import{S as Y,i as X,s as Z,al as We,e as k,t as O,k as M,j as V,c as E,a as T,g as P,d as p,n as A,m as L,K as _,f as v,L as w,o as q,x as b,u as y,v as U,_ as Ge,am as be,l as H,r as G,w as K,ad as Ke,an as Qe,M as oe,ao as Ye,ap as Xe,b as S,aq as Ze,aa as xe,G as re,H as ne,I as ae,J as le,D as F,af as ie,ar as et,A as ce,as as ve,at as De,au as tt,av as st,aw as ot,N as fe,O as x,Q as ue,ax as rt,U as we,ah as nt,ai as at,ag as Ie,ay as te,az as ye,a4 as ke,aA as Ee,aB as Te,a2 as lt,W as se,h as Se,aC as it,aD as ct,a8 as ft,a9 as ut}from"../../chunks/vendor-c16c1f41.js";import{e as me,u as mt,i as de,f as Q,g as Re,j as ee,d as Ce,a as dt,c as _t}from"../../chunks/store-23308dd8.js";import{g as pt,c as ht}from"../../chunks/canvas-5b7b0e82.js";import"../../chunks/singletons-12a22614.js";function je(r,e,o){const t=r.slice();return t[3]=e[o],t}function gt(r){let e=r[3].name+"",o,t;return{c(){o=O(e),t=M()},l(s){o=P(s,e),t=A(s)},m(s,n){v(s,o,n),v(s,t,n)},p:oe,d(s){s&&p(o),s&&p(t)}}}function Me(r){let e,o;return e=new Qe({props:{$$slots:{default:[gt]},$$scope:{ctx:r}}}),e.$on("SMUI:action",Dt),{c(){V(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,s){q(e,t,s),o=!0},p(t,s){const n={};s&64&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){o||(b(e.$$.fragment,t),o=!0)},o(t){y(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function $t(r){let e,o,t=r[1],s=[];for(let i=0;i<t.length;i+=1)s[i]=Me(je(r,t,i));const n=i=>y(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=H()},l(i){for(let l=0;l<s.length;l+=1)s[l].l(i);e=H()},m(i,l){for(let a=0;a<s.length;a+=1)s[a].m(i,l);v(i,e,l),o=!0},p(i,l){if(l&2){t=i[1];let a;for(a=0;a<t.length;a+=1){const f=je(i,t,a);s[a]?(s[a].p(f,l),b(s[a],1)):(s[a]=Me(f),s[a].c(),b(s[a],1),s[a].m(e.parentNode,e))}for(G(),a=t.length;a<s.length;a+=1)n(a);K()}},i(i){if(!o){for(let l=0;l<t.length;l+=1)b(s[l]);o=!0}},o(i){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)y(s[l]);o=!1},d(i){Ke(s,i),i&&p(e)}}}function bt(r){let e,o;return e=new be({props:{$$slots:{default:[$t]},$$scope:{ctx:r}}}),{c(){V(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,s){q(e,t,s),o=!0},p(t,s){const n={};s&64&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){o||(b(e.$$.fragment,t),o=!0)},o(t){y(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function vt(r){let e,o,t,s,n,i={style:"left: 100px; top: 50px; width: 300px",$$slots:{default:[bt]},$$scope:{ctx:r}};return s=new We({props:i}),r[2](s),{c(){e=k("h1"),o=O("6.036"),t=M(),V(s.$$.fragment),this.h()},l(l){e=E(l,"H1",{style:!0});var a=T(e);o=P(a,"6.036"),a.forEach(p),t=A(l),L(s.$$.fragment,l),this.h()},h(){_(e,"font-family","Roboto, sans-serif"),_(e,"font-weight","400"),_(e,"margin-left","6px"),_(e,"margin-top","5px"),_(e,"margin-bottom","0px"),_(e,"font-size","2.0rem")},m(l,a){v(l,e,a),w(e,o),v(l,t,a),q(s,l,a),n=!0},p(l,[a]){const f={};a&64&&(f.$$scope={dirty:a,ctx:l}),s.$set(f)},i(l){n||(b(s.$$.fragment,l),n=!0)},o(l){y(s.$$.fragment,l),n=!1},d(l){l&&p(e),l&&p(t),r[2](null),U(s,l)}}}const Dt=()=>{};function wt(r,e,o){let t=[{name:"6.006"},{name:"6.036"}],s;function n(i){Ge[i?"unshift":"push"](()=>{s=i,o(0,s)})}return[s,t,n]}class It extends Y{constructor(e){super();X(this,e,wt,vt,Z,{})}}function yt(r){let e;const o=r[0].default,t=re(o,r,r[1],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&2)&&ne(t,o,s,s[1],e?le(o,s[1],n,null):ae(s[1]),null)},i(s){e||(b(t,s),e=!0)},o(s){y(t,s),e=!1},d(s){t&&t.d(s)}}}function kt(r){let e,o,t,s,n,i,l,a,f,c,u,m,d,D;return l=new It({}),d=new be({props:{$$slots:{default:[yt]},$$scope:{ctx:r}}}),{c(){e=k("div"),o=k("div"),t=k("img"),n=M(),i=k("div"),V(l.$$.fragment),a=M(),f=k("div"),c=O(`Intro to Machine Learning\r
            `),u=O(">"),m=M(),V(d.$$.fragment),this.h()},l(h){e=E(h,"DIV",{style:!0,class:!0});var I=T(e);o=E(I,"DIV",{style:!0,class:!0});var j=T(o);t=E(j,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),n=A(j),i=E(j,"DIV",{class:!0});var B=T(i);L(l.$$.fragment,B),a=A(B),f=E(B,"DIV",{style:!0,class:!0});var $=T(f);c=P($,`Intro to Machine Learning\r
            `),$.forEach(p),u=P(B,">"),B.forEach(p),j.forEach(p),I.forEach(p),m=A(h),L(d.$$.fragment,h),this.h()},h(){xe(t.src,s="/logo.png")||S(t,"src",s),S(t,"width","60"),S(t,"height","54"),S(t,"alt","web-logo"),S(t,"class","svelte-f4hgt4"),_(f,"font-family","Roboto,sans-serif"),_(f,"font-size","0.875rem"),_(f,"color","rgba(0,0,0,.6)"),_(f,"margin-left","8px"),_(f,"margin-bottom","12px"),S(f,"class","svelte-f4hgt4"),S(i,"class","svelte-f4hgt4"),_(o,"display","flex"),_(o,"align-items","center"),S(o,"class","svelte-f4hgt4"),_(e,"margin-bottom","12px"),_(e,"padding-top","2px"),_(e,"padding-bottom","0"),_(e,"padding-left","8px"),S(e,"class","mdc-elevation--z"+4+" svelte-f4hgt4")},m(h,I){v(h,e,I),w(e,o),w(o,t),w(o,n),w(o,i),q(l,i,null),w(i,a),w(i,f),w(f,c),w(i,u),v(h,m,I),q(d,h,I),D=!0},p(h,I){const j={};I&2&&(j.$$scope={dirty:I,ctx:h}),d.$set(j)},i(h){D||(b(l.$$.fragment,h),b(d.$$.fragment,h),D=!0)},o(h){y(l.$$.fragment,h),y(d.$$.fragment,h),D=!1},d(h){h&&p(e),U(l),h&&p(m),U(d,h)}}}function Et(r){let e,o;return e=new Ze({props:{$$slots:{default:[kt]},$$scope:{ctx:r}}}),{c(){V(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,s){q(e,t,s),o=!0},p(t,s){const n={};s&2&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){o||(b(e.$$.fragment,t),o=!0)},o(t){y(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function Tt(r){let e,o;return{c(){e=k("main"),o=k("div"),this.h()},l(t){e=E(t,"MAIN",{class:!0,style:!0});var s=T(e);o=E(s,"DIV",{id:!0,style:!0,class:!0});var n=T(o);n.forEach(p),s.forEach(p),this.h()},h(){S(o,"id","main-content"),_(o,"height","100vh"),S(o,"class","svelte-f4hgt4"),S(e,"class","main-content svelte-f4hgt4"),_(e,"padding","0")},m(t,s){v(t,e,s),w(e,o)},d(t){t&&p(e)}}}function St(r){let e,o,t,s,n;return o=new Ye({props:{style:"overflow-y: scroll; height: 100%;",class:"mdc-elevation--z"+5,$$slots:{default:[Et]},$$scope:{ctx:r}}}),s=new Xe({props:{class:"app-content",$$slots:{default:[Tt]},$$scope:{ctx:r}}}),{c(){e=k("div"),V(o.$$.fragment),t=M(),V(s.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var l=T(e);L(o.$$.fragment,l),t=A(l),L(s.$$.fragment,l),l.forEach(p),this.h()},h(){S(e,"class","drawer-container svelte-f4hgt4")},m(i,l){v(i,e,l),q(o,e,null),w(e,t),q(s,e,null),n=!0},p(i,[l]){const a={};l&2&&(a.$$scope={dirty:l,ctx:i}),o.$set(a);const f={};l&2&&(f.$$scope={dirty:l,ctx:i}),s.$set(f)},i(i){n||(b(o.$$.fragment,i),b(s.$$.fragment,i),n=!0)},o(i){y(o.$$.fragment,i),y(s.$$.fragment,i),n=!1},d(i){i&&p(e),U(o),U(s)}}}function Rt(r,e,o){let{$$slots:t={},$$scope:s}=e;return r.$$set=n=>{"$$scope"in n&&o(1,s=n.$$scope)},[t,s]}class Ct extends Y{constructor(e){super();X(this,e,Rt,St,Z,{})}}function jt(r,e,o){let t,s,n,i;F(r,me,D=>o(10,s=D)),F(r,mt,D=>o(3,n=D)),F(r,de,D=>o(4,i=D));let{classID:l}=e,{roomID:a}=e,f,c,u,m,d;return ie(()=>{d&&d(),i&&(et(c),de.set(!1)),m&&m.cancel()}),ce(()=>{Q.set({}),u=ve(De(),".info/connected"),d=tt(u,async D=>{if(D.val()===!0){const h=Re();f=ve(De(),`/class/${l}/room/${a}/participants/${h}`),m=ot(f),m.set({hasDisconnected:!0,userUID:n.uid}),o(2,c=fe(x(),`classes/${l}/participants/${h}`)),ue(c,{uid:n.uid,browserTabID:s,currentRoomID:a,name:t}),de.set(!0)}})}),r.$$set=D=>{"classID"in D&&o(0,l=D.classID),"roomID"in D&&o(1,a=D.roomID)},r.$$.update=()=>{r.$$.dirty&8&&(t=n.name?n.name:"Beaver #"),r.$$.dirty&30&&i&&n.name&&st(c,{currentRoomID:a,name:n.name})},[l,a,c,n,i]}class Mt extends Y{constructor(e){super();X(this,e,jt,null,Z,{classID:0,roomID:1})}}const At="0ac8a98cf9bef2827f5beef5cd36c4f42a442863ce904a2469de12caa9097fa1",Nt=r=>({activeSpeakerID:r&2,firestoreIDToDailyID:r&1}),Ae=r=>({toggleMic:r[2],activeSpeakerID:r[1],firestoreIDToDailyID:r[0]});function zt(r){let e;const o=r[8].default,t=re(o,r,r[7],Ae);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,[n]){t&&t.p&&(!e||n&131)&&ne(t,o,s,s[7],e?le(o,s[7],n,Nt):ae(s[7]),Ae)},i(s){e||(b(t,s),e=!0)},o(s){y(t,s),e=!1},d(s){t&&t.d(s)}}}async function Ot({track:r,participant:e}){switch(r.kind){case"audio":if(e.local)return;{const o=document.createElement("audio");o.srcObject=new MediaStream([r]),o.setAttribute("id","audio"+e.user_id),o.setAttribute("playsinline",!0),o.setAttribute("autoplay",!0),document.getElementById("container-for-audio-elements").appendChild(o)}break}}async function Vt({track:r,participant:e}){const o=document.getElementById(r.id);o&&(o.srcObject=null,o.remove())}function Pt(r,e,o){let t,s,n;F(r,ee,g=>o(10,t=g)),F(r,me,g=>o(11,s=g)),F(r,Ce,g=>o(12,n=g));let{$$slots:i={},$$scope:l}=e,{roomID:a}=e,f,c,u,m,d,D="";ie(()=>{m==="connected"&&z()}),ce(async()=>{await h(),I()});async function h(){return new Promise(async g=>{if(!n){const C=await navigator.mediaDevices.getUserMedia({audio:!0});Ce.set(C)}const[R]=n.getAudioTracks();f=rt.createCallObject({audioSource:R,videoSource:!1});const J=["participant-joined","participant-updated","participant-left"];for(const C of J)f.on(C,()=>{ee.set(f.participants());const W={};for(const Be of Object.keys(t)){const _e=t[Be],pe=_e.user_name;pe&&(W[pe]=_e.user_id)}o(0,c=W)});f.on("track-started",Ot),f.on("track-stopped",Vt),f.on("active-speaker-change",({activeSpeaker:C})=>{o(1,D=C.peerId)}),f.on("load-attempt-failed",({action:C,errorMsg:W})=>{alert(C+": "+W)}),f.on("error",({action:C,errorMsg:W})=>{alert(C+": "+W)}),g()})}async function I(){o(4,u="not_connected"),o(5,m="connecting"),o(6,d=a);const{url:g}=await j();g&&(await B(g),o(4,u="connecting"),o(5,m="connected"))}function j(){return new Promise(async g=>{try{const R=2*60*60,C=await(await fetch("https://api.daily.co/v1/rooms",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer "+At},body:JSON.stringify({name:a,properties:{exp:Math.round(Date.now()/1e3)+R,eject_at_room_exp:!0,start_video_off:!0}})})).json();C.error==="invalid-request-error"&&C.info===`a room named ${a} already exists`?g({url:`https://feynman.daily.co/${a}`}):g(C)}catch(R){console.error(R),alert(R),reject({url:""})}})}function B(g){return new Promise(async(R,J)=>{try{await f.join({url:g,userName:s}),R()}catch(C){console.log("error)"),alert(C),J()}})}function $(){console.log("toggling mic"),f.setLocalAudio(!t.local.audio),ee.set(f.participants())}function z(){const g=document.querySelectorAll("audio");for(const R of g)R.remove();N(),o(4,u="connected"),o(5,m="not_connected")}function N(){f.leave(),ee.set({}),o(1,D="")}return r.$$set=g=>{"roomID"in g&&o(3,a=g.roomID),"$$scope"in g&&o(7,l=g.$$scope)},r.$$.update=()=>{r.$$.dirty&120&&u==="connecting"&&m==="connected"&&d!==a&&(console.log("part 1: user moved to a different room before voice chat connected"),z()),r.$$.dirty&120&&u==="connected"&&m==="not_connected"&&d!==a&&(console.log("part 2: ready to join the new room"),I())},[c,D,$,a,u,m,d,l,i]}class Lt extends Y{constructor(e){super();X(this,e,Pt,zt,Z,{roomID:3})}}function Ne(r,e,o){const t=r.slice();return t[19]=e[o],t}function ze(r,e,o){const t=r.slice();return t[22]=e[o],t}function qt(r){let e,o;return{c(){e=k("div"),o=O("(no title)"),this.h()},l(t){e=E(t,"DIV",{style:!0});var s=T(e);o=P(s,"(no title)"),s.forEach(p),this.h()},h(){_(e,"margin-bottom","2px")},m(t,s){v(t,e,s),w(e,o)},p:oe,d(t){t&&p(e)}}}function Ut(r){let e,o=r[19].name+"",t;return{c(){e=k("div"),t=O(o),this.h()},l(s){e=E(s,"DIV",{style:!0,class:!0});var n=T(e);t=P(n,o),n.forEach(p),this.h()},h(){_(e,"white-space","nowrap"),_(e,"overflow","hidden"),_(e,"text-overflow","ellipsis margin-bottom: 2px"),S(e,"class","svelte-twz7iw"),se(e,"question-item",r[19].name.charAt(r[19].name.length-1)==="?")},m(s,n){v(s,e,n),w(e,t)},p(s,n){n&4&&o!==(o=s[19].name+"")&&Se(t,o),n&4&&se(e,"question-item",s[19].name.charAt(s[19].name.length-1)==="?")},d(s){s&&p(e)}}}function Oe(r){let e=[],o=new Map,t,s,n=r[3][r[19].id];const i=l=>l[22].browserTabID;for(let l=0;l<n.length;l+=1){let a=ze(r,n,l),f=i(a);o.set(f,e[l]=qe(f,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=H()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);t=H()},m(l,a){for(let f=0;f<e.length;f+=1)e[f].m(l,a);v(l,t,a),s=!0},p(l,a){a&458812&&(n=l[3][l[19].id],G(),e=Ee(e,a,i,1,l,n,o,t.parentNode,Te,qe,t,ze),K())},i(l){if(!s){for(let a=0;a<n.length;a+=1)b(e[a]);s=!0}},o(l){for(let a=0;a<e.length;a+=1)y(e[a]);s=!1},d(l){for(let a=0;a<e.length;a+=1)e[a].d(l);l&&p(t)}}}function Ve(r){let e,o,t,s=r[22].browserTabID===r[5]&&Pe(r),n=r[4][r[18][r[22].browserTabID]]&&Le(r);return{c(){s&&s.c(),e=M(),n&&n.c(),o=H()},l(i){s&&s.l(i),e=A(i),n&&n.l(i),o=H()},m(i,l){s&&s.m(i,l),v(i,e,l),n&&n.m(i,l),v(i,o,l),t=!0},p(i,l){i[22].browserTabID===i[5]?s?(s.p(i,l),l&44&&b(s,1)):(s=Pe(i),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(G(),y(s,1,1,()=>{s=null}),K()),i[4][i[18][i[22].browserTabID]]?n?n.p(i,l):(n=Le(i),n.c(),n.m(o.parentNode,o)):n&&(n.d(1),n=null)},i(i){t||(b(s),t=!0)},o(i){y(s),t=!1},d(i){s&&s.d(i),i&&p(e),n&&n.d(i),i&&p(o)}}}function Pe(r){let e,o,t,s,n,i,l;t=new ut({props:{checked:r[4].local.audio,style:"margin: 0 !important"}});function a(u,m){return u[4].local.audio?Ft:Bt}let f=a(r),c=f(r);return{c(){e=k("div"),o=k("div"),V(t.$$.fragment),s=M(),c.c(),this.h()},l(u){e=E(u,"DIV",{style:!0});var m=T(e);o=E(m,"DIV",{style:!0});var d=T(o);L(t.$$.fragment,d),d.forEach(p),s=A(m),c.l(m),m.forEach(p),this.h()},h(){_(o,"margin-right","0"),_(o,"margin-left","auto"),_(o,"padding-top","3px"),_(e,"display","flex"),_(e,"align-items","center"),_(e,"margin-right","0"),_(e,"margin-left","auto")},m(u,m){v(u,e,m),w(e,o),q(t,o,null),w(e,s),c.m(e,null),n=!0,i||(l=ke(o,"click",it(ct(function(){ft(r[17])&&r[17].apply(this,arguments)}))),i=!0)},p(u,m){r=u;const d={};m&16&&(d.checked=r[4].local.audio),t.$set(d),f!==(f=a(r))&&(c.d(1),c=f(r),c&&(c.c(),c.m(e,null)))},i(u){n||(b(t.$$.fragment,u),n=!0)},o(u){y(t.$$.fragment,u),n=!1},d(u){u&&p(e),U(t),c.d(),i=!1,l()}}}function Bt(r){let e,o;return{c(){e=k("div"),o=O("muted"),this.h()},l(t){e=E(t,"DIV",{style:!0});var s=T(e);o=P(s,"muted"),s.forEach(p),this.h()},h(){_(e,"font-size","0.8rem"),_(e,"margin-left","6px"),_(e,"color","red")},m(t,s){v(t,e,s),w(e,o)},d(t){t&&p(e)}}}function Ft(r){let e,o;return{c(){e=k("div"),o=O("voice on"),this.h()},l(t){e=E(t,"DIV",{style:!0});var s=T(e);o=P(s,"voice on"),s.forEach(p),this.h()},h(){_(e,"font-size","0.8rem"),_(e,"margin-left","6px"),_(e,"color","green")},m(t,s){v(t,e,s),w(e,o)},d(t){t&&p(e)}}}function Le(r){let e;function o(n,i){return n[4][n[18][n[22].browserTabID]].audio?Jt:Ht}let t=o(r),s=t(r);return{c(){s.c(),e=H()},l(n){s.l(n),e=H()},m(n,i){s.m(n,i),v(n,e,i)},p(n,i){t===(t=o(n))&&s?s.p(n,i):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s.d(n),n&&p(e)}}}function Ht(r){let e,o;return{c(){e=k("span"),o=O("mic_off"),this.h()},l(t){e=E(t,"SPAN",{class:!0,style:!0});var s=T(e);o=P(s,"mic_off"),s.forEach(p),this.h()},h(){S(e,"class","material-icons"),_(e,"margin-right","0"),_(e,"margin-left","auto"),_(e,"font-size","1.2rem"),_(e,"color","red")},m(t,s){v(t,e,s),w(e,o)},p:oe,d(t){t&&p(e)}}}function Jt(r){let e,o;return{c(){e=k("span"),o=O("mic"),this.h()},l(t){e=E(t,"SPAN",{class:!0,style:!0});var s=T(e);o=P(s,"mic"),s.forEach(p),this.h()},h(){S(e,"class","material-icons"),_(e,"margin-right","0"),_(e,"margin-left","auto"),_(e,"font-size","1.2rem"),_(e,"color",r[18]&&r[18][r[22].browserTabID]&&r[18][r[22].browserTabID]===r[16]?"white":"")},m(t,s){v(t,e,s),w(e,o)},p(t,s){s&327692&&_(e,"color",t[18]&&t[18][t[22].browserTabID]&&t[18][t[22].browserTabID]===t[16]?"white":"")},d(t){t&&p(e)}}}function qe(r,e){let o,t,s=e[22].name+"",n,i,l=Object.keys(e[4]).length>0,a,f,c=l&&Ve(e);return{key:r,first:null,c(){o=k("div"),t=k("div"),n=O(s),i=M(),c&&c.c(),a=M(),this.h()},l(u){o=E(u,"DIV",{style:!0});var m=T(o);t=E(m,"DIV",{style:!0,class:!0});var d=T(t);n=P(d,s),d.forEach(p),i=A(m),c&&c.l(m),a=A(m),m.forEach(p),this.h()},h(){_(t,"font-size","0.7rem"),_(t,"margin-left","6px"),S(t,"class","svelte-twz7iw"),se(t,"speaking",e[18]&&e[18][e[22].browserTabID]&&e[18][e[22].browserTabID]===e[16]),_(o,"display","flex"),_(o,"align-items","center"),this.first=o},m(u,m){v(u,o,m),w(o,t),w(t,n),w(o,i),c&&c.m(o,null),w(o,a),f=!0},p(u,m){e=u,(!f||m&12)&&s!==(s=e[22].name+"")&&Se(n,s),m&327692&&se(t,"speaking",e[18]&&e[18][e[22].browserTabID]&&e[18][e[22].browserTabID]===e[16]),m&16&&(l=Object.keys(e[4]).length>0),l?c?(c.p(e,m),m&16&&b(c,1)):(c=Ve(e),c.c(),b(c,1),c.m(o,a)):c&&(G(),y(c,1,1,()=>{c=null}),K())},i(u){f||(b(c),f=!0)},o(u){y(c),f=!1},d(u){u&&p(o),c&&c.d()}}}function Ue(r,e){let o,t,s,n,i,l,a,f;function c(h,I){if(h[19].name)return Ut;if(h[19].name==="")return qt}let u=c(e),m=u&&u(e),d=e[3][e[19].id]&&Oe(e);function D(){return e[8](e[19])}return{key:r,first:null,c(){o=k("div"),t=k("div"),m&&m.c(),s=M(),d&&d.c(),i=M(),this.h()},l(h){o=E(h,"DIV",{style:!0});var I=T(o);t=E(I,"DIV",{class:!0,style:!0});var j=T(t);m&&m.l(j),s=A(j),d&&d.l(j),j.forEach(p),i=A(I),I.forEach(p),this.h()},h(){S(t,"class",n=""+(ye(e[19].id===e[1]?"selected":"")+" svelte-twz7iw")),_(t,"padding","6px 10px 6px 8px"),_(t,"opacity","90%"),_(t,"border-radius","5px"),_(o,"padding","6px"),this.first=o},m(h,I){v(h,o,I),w(o,t),m&&m.m(t,null),w(t,s),d&&d.m(t,null),w(o,i),l=!0,a||(f=ke(o,"click",D),a=!0)},p(h,I){e=h,u===(u=c(e))&&m?m.p(e,I):(m&&m.d(1),m=u&&u(e),m&&(m.c(),m.m(t,s))),e[3][e[19].id]?d?(d.p(e,I),I&12&&b(d,1)):(d=Oe(e),d.c(),b(d,1),d.m(t,null)):d&&(G(),y(d,1,1,()=>{d=null}),K()),(!l||I&6&&n!==(n=""+(ye(e[19].id===e[1]?"selected":"")+" svelte-twz7iw")))&&S(t,"class",n)},i(h){l||(b(d),l=!0)},o(h){y(d),l=!1},d(h){h&&p(o),m&&m.d(),d&&d.d(),a=!1,f()}}}function Wt(r){let e,o,t;return{c(){e=k("span"),o=O("add"),t=O(`\r
      New room`),this.h()},l(s){e=E(s,"SPAN",{class:!0,style:!0});var n=T(e);o=P(n,"add"),n.forEach(p),t=P(s,`\r
      New room`),this.h()},h(){S(e,"class","material-icons"),_(e,"margin-right","4px")},m(s,n){v(s,e,n),w(e,o),v(s,t,n)},d(s){s&&p(e),s&&p(t)}}}function Gt(r){let e=[],o=new Map,t,s,n,i=r[2];const l=a=>a[19].id+a[1];for(let a=0;a<i.length;a+=1){let f=Ne(r,i,a),c=l(f);o.set(c,e[a]=Ue(c,f))}return s=new lt({props:{style:"width: 100%; margin: auto;",$$slots:{default:[Wt]},$$scope:{ctx:r}}}),s.$on("click",r[6]),{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=M(),V(s.$$.fragment)},l(a){for(let f=0;f<e.length;f+=1)e[f].l(a);t=A(a),L(s.$$.fragment,a)},m(a,f){for(let c=0;c<e.length;c+=1)e[c].m(a,f);v(a,t,f),q(s,a,f),n=!0},p(a,f){f&458815&&(i=a[2],G(),e=Ee(e,f,l,1,a,i,o,t.parentNode,Te,Ue,t,Ne),K());const c={};f&512&&(c.$$scope={dirty:f,ctx:a}),s.$set(c)},i(a){if(!n){for(let f=0;f<i.length;f+=1)b(e[f]);b(s.$$.fragment,a),n=!0}},o(a){for(let f=0;f<e.length;f+=1)y(e[f]);y(s.$$.fragment,a),n=!1},d(a){for(let f=0;f<e.length;f+=1)e[f].d(a);a&&p(t),U(s,a)}}}function Kt(r){let e,o;return e=new Ct({props:{$$slots:{default:[Gt]},$$scope:{ctx:r}}}),{c(){V(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,s){q(e,t,s),o=!0},p(t,s){const n={};s&459327&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){o||(b(e.$$.fragment,t),o=!0)},o(t){y(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function Qt(r){let e,o,t,s,n,i,l;e=new Mt({props:{classID:r[0],roomID:r[1]}}),n=new Lt({props:{roomID:r[1],$$slots:{default:[Kt,({activeSpeakerID:c,toggleMic:u,firestoreIDToDailyID:m})=>({16:c,17:u,18:m}),({activeSpeakerID:c,toggleMic:u,firestoreIDToDailyID:m})=>(c?65536:0)|(u?131072:0)|(m?262144:0)]},$$scope:{ctx:r}}});const a=r[7].default,f=re(a,r,r[9],null);return{c(){V(e.$$.fragment),o=M(),t=k("div"),s=M(),V(n.$$.fragment),i=M(),f&&f.c(),this.h()},l(c){L(e.$$.fragment,c),o=A(c),t=E(c,"DIV",{id:!0});var u=T(t);u.forEach(p),s=A(c),L(n.$$.fragment,c),i=A(c),f&&f.l(c),this.h()},h(){S(t,"id","container-for-audio-elements")},m(c,u){q(e,c,u),v(c,o,u),v(c,t,u),v(c,s,u),q(n,c,u),v(c,i,u),f&&f.m(c,u),l=!0},p(c,[u]){const m={};u&1&&(m.classID=c[0]),u&2&&(m.roomID=c[1]),e.$set(m);const d={};u&2&&(d.roomID=c[1]),u&459327&&(d.$$scope={dirty:u,ctx:c}),n.$set(d),f&&f.p&&(!l||u&512)&&ne(f,a,c,c[9],l?le(a,c[9],u,null):ae(c[9]),null)},i(c){l||(b(e.$$.fragment,c),b(n.$$.fragment,c),b(f,c),l=!0)},o(c){y(e.$$.fragment,c),y(n.$$.fragment,c),y(f,c),l=!1},d(c){U(e,c),c&&p(o),c&&p(t),c&&p(s),U(n,c),c&&p(i),f&&f.d(c)}}}function ss({page:r}){return{props:{classID:r.params.class,roomID:r.params.room}}}function Yt(r,e,o){let t,s,n;F(r,Q,$=>o(3,t=$)),F(r,ee,$=>o(4,s=$)),F(r,me,$=>o(5,n=$));let{$$slots:i={},$$scope:l}=e,{classID:a}=e,{roomID:f}=e,c=[];ie(()=>{for(const $ of D)$();window.removeEventListener("resize",d)}),ce(()=>{console.log("__layout mounted, but should only be done once"),window.addEventListener("resize",d),d()});async function u(){for(const R of c)if(R.name===""){alert("A room is still untitled - use it before creating a new one");return}const $=Re(),z=`classes/${a}/`,N=fe(x(),z+`rooms/${$}`),g=fe(x(),z+`blackboards/${$}`);await Promise.all([ue(N,{name:"",blackboards:[$],date:new Date().toISOString()}),ue(g,{})])}function m(){const{height:$,width:z}=ht();dt.set($),_t.set(z)}function d(){setTimeout(m,100)}let D=[];const h=we(x(),`classes/${a}/participants`),I=we(x(),`classes/${a}/rooms`),j=nt(I,at("date","asc"));D.push(Ie(j,$=>{const z=[];$.forEach(N=>{z.push($e({id:N.id,ref:N.ref.path},N.data()))}),o(2,c=z)})),D.push(Ie(h,$=>{$.docChanges().forEach(z=>{const N=z.doc.data(),g=N.currentRoomID;switch(z.type){case"added":t[g]||te(Q,t[g]=[],t),t[g].push(N);break;case"modified":for(const R of Object.keys(t))for(const J of t[R])J.browserTabID===N.browserTabID&&te(Q,t[R]=t[R].filter(C=>C.browserTabID!==N.browserTabID),t);t[g]||te(Q,t[g]=[],t),t[g].push(N);break;case"removed":te(Q,t[g]=t[g].filter(R=>R.browserTabID!==N.browserTabID),t);break}})}));const B=$=>pt(`/${a}/${$.id}`);return r.$$set=$=>{"classID"in $&&o(0,a=$.classID),"roomID"in $&&o(1,f=$.roomID),"$$scope"in $&&o(9,l=$.$$scope)},[a,f,c,t,s,n,u,i,B,l]}class os extends Y{constructor(e){super();X(this,e,Yt,Qt,Z,{classID:0,roomID:1})}}export{os as default,ss as load};
