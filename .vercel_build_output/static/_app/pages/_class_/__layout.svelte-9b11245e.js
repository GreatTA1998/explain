var Be=Object.defineProperty;var _e=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var pe=(s,e,r)=>e in s?Be(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,he=(s,e)=>{for(var r in e||(e={}))Fe.call(e,r)&&pe(s,r,e[r]);if(_e)for(var r of _e(e))He.call(e,r)&&pe(s,r,e[r]);return s};import{S as Q,i as Y,s as X,al as Je,e as y,t as q,k as R,j as N,c as k,a as T,g as B,d as p,n as M,m as O,K as d,f as b,L as I,o as P,x as h,u as v,v as L,_ as We,am as ge,l as j,r as H,w as J,ad as Ge,an as Ke,M as oe,ao as Qe,ap as Ye,b as E,aq as Xe,aa as Ze,G as re,H as se,I as ne,J as le,D as F,af as ae,ar as xe,A as ie,as as be,at as $e,au as et,av as tt,aw as ot,N as rt,O as ce,Q as st,ax as nt,U as ve,ag as De,ay as ee,az as Ie,aA as we,aB as ye,a4 as ke,W as te,h as Te,aC as lt,aD as at,a8 as it,a9 as ct}from"../../chunks/vendor-60dbf49e.js";import{e as fe,u as ft,i as ue,f as K,g as ut,j as Z,d as Ee,a as mt,c as dt}from"../../chunks/store-cb2cb867.js";import{g as _t,c as pt}from"../../chunks/canvas-5b7b0e82.js";import"../../chunks/singletons-12a22614.js";function Se(s,e,r){const t=s.slice();return t[3]=e[r],t}function ht(s){let e=s[3].name+"",r,t;return{c(){r=q(e),t=R()},l(o){r=B(o,e),t=M(o)},m(o,n){b(o,r,n),b(o,t,n)},p:oe,d(o){o&&p(r),o&&p(t)}}}function Ce(s){let e,r;return e=new Ke({props:{$$slots:{default:[ht]},$$scope:{ctx:s}}}),e.$on("SMUI:action",vt),{c(){N(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const n={};o&64&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function gt(s){let e,r,t=s[1],o=[];for(let a=0;a<t.length;a+=1)o[a]=Ce(Se(s,t,a));const n=a=>v(o[a],1,1,()=>{o[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();e=j()},l(a){for(let l=0;l<o.length;l+=1)o[l].l(a);e=j()},m(a,l){for(let i=0;i<o.length;i+=1)o[i].m(a,l);b(a,e,l),r=!0},p(a,l){if(l&2){t=a[1];let i;for(i=0;i<t.length;i+=1){const f=Se(a,t,i);o[i]?(o[i].p(f,l),h(o[i],1)):(o[i]=Ce(f),o[i].c(),h(o[i],1),o[i].m(e.parentNode,e))}for(H(),i=t.length;i<o.length;i+=1)n(i);J()}},i(a){if(!r){for(let l=0;l<t.length;l+=1)h(o[l]);r=!0}},o(a){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)v(o[l]);r=!1},d(a){Ge(o,a),a&&p(e)}}}function bt(s){let e,r;return e=new ge({props:{$$slots:{default:[gt]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const n={};o&64&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function $t(s){let e,r,t,o,n,a={style:"left: 100px; top: 50px; width: 300px",$$slots:{default:[bt]},$$scope:{ctx:s}};return o=new Je({props:a}),s[2](o),{c(){e=y("h1"),r=q("6.036"),t=R(),N(o.$$.fragment),this.h()},l(l){e=k(l,"H1",{style:!0});var i=T(e);r=B(i,"6.036"),i.forEach(p),t=M(l),O(o.$$.fragment,l),this.h()},h(){d(e,"font-family","Roboto, sans-serif"),d(e,"font-weight","400"),d(e,"margin-left","6px"),d(e,"margin-top","5px"),d(e,"margin-bottom","0px"),d(e,"font-size","2.0rem")},m(l,i){b(l,e,i),I(e,r),b(l,t,i),P(o,l,i),n=!0},p(l,[i]){const f={};i&64&&(f.$$scope={dirty:i,ctx:l}),o.$set(f)},i(l){n||(h(o.$$.fragment,l),n=!0)},o(l){v(o.$$.fragment,l),n=!1},d(l){l&&p(e),l&&p(t),s[2](null),L(o,l)}}}const vt=()=>{};function Dt(s,e,r){let t=[{name:"6.006"},{name:"6.036"}],o;function n(a){We[a?"unshift":"push"](()=>{o=a,r(0,o)})}return[o,t,n]}class It extends Q{constructor(e){super();Y(this,e,Dt,$t,X,{})}}function wt(s){let e;const r=s[0].default,t=re(r,s,s[1],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,n){t&&t.m(o,n),e=!0},p(o,n){t&&t.p&&(!e||n&2)&&se(t,r,o,o[1],e?le(r,o[1],n,null):ne(o[1]),null)},i(o){e||(h(t,o),e=!0)},o(o){v(t,o),e=!1},d(o){t&&t.d(o)}}}function yt(s){let e,r,t,o,n,a,l,i,f,c,u,m,g;return l=new It({}),m=new ge({props:{$$slots:{default:[wt]},$$scope:{ctx:s}}}),{c(){e=y("div"),r=y("div"),t=y("img"),n=R(),a=y("div"),N(l.$$.fragment),i=R(),f=y("div"),c=q("Intro to Machine Learning"),u=R(),N(m.$$.fragment),this.h()},l(_){e=k(_,"DIV",{style:!0,class:!0});var D=T(e);r=k(D,"DIV",{style:!0,class:!0});var S=T(r);t=k(S,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),n=M(S),a=k(S,"DIV",{class:!0});var $=T(a);O(l.$$.fragment,$),i=M($),f=k($,"DIV",{style:!0,class:!0});var z=T(f);c=B(z,"Intro to Machine Learning"),z.forEach(p),$.forEach(p),S.forEach(p),D.forEach(p),u=M(_),O(m.$$.fragment,_),this.h()},h(){Ze(t.src,o="/logo.png")||E(t,"src",o),E(t,"width","60"),E(t,"height","54"),E(t,"alt","web-logo"),E(t,"class","svelte-f4hgt4"),d(f,"font-family","Roboto,sans-serif"),d(f,"font-size","0.875rem"),d(f,"color","rgba(0,0,0,.6)"),d(f,"margin-left","8px"),d(f,"margin-bottom","12px"),E(f,"class","svelte-f4hgt4"),E(a,"class","svelte-f4hgt4"),d(r,"display","flex"),d(r,"align-items","center"),E(r,"class","svelte-f4hgt4"),d(e,"margin-bottom","12px"),d(e,"padding-top","2px"),d(e,"padding-bottom","0"),d(e,"padding-left","8px"),E(e,"class","mdc-elevation--z"+4+" svelte-f4hgt4")},m(_,D){b(_,e,D),I(e,r),I(r,t),I(r,n),I(r,a),P(l,a,null),I(a,i),I(a,f),I(f,c),b(_,u,D),P(m,_,D),g=!0},p(_,D){const S={};D&2&&(S.$$scope={dirty:D,ctx:_}),m.$set(S)},i(_){g||(h(l.$$.fragment,_),h(m.$$.fragment,_),g=!0)},o(_){v(l.$$.fragment,_),v(m.$$.fragment,_),g=!1},d(_){_&&p(e),L(l),_&&p(u),L(m,_)}}}function kt(s){let e,r;return e=new Xe({props:{$$slots:{default:[yt]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const n={};o&2&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function Tt(s){let e,r;return{c(){e=y("main"),r=y("div"),this.h()},l(t){e=k(t,"MAIN",{class:!0,style:!0});var o=T(e);r=k(o,"DIV",{id:!0,style:!0,class:!0});var n=T(r);n.forEach(p),o.forEach(p),this.h()},h(){E(r,"id","main-content"),d(r,"height","100vh"),E(r,"class","svelte-f4hgt4"),E(e,"class","main-content svelte-f4hgt4"),d(e,"padding","0")},m(t,o){b(t,e,o),I(e,r)},d(t){t&&p(e)}}}function Et(s){let e,r,t,o,n;return r=new Qe({props:{style:"overflow-y: scroll; height: 100%;",class:"mdc-elevation--z"+5,$$slots:{default:[kt]},$$scope:{ctx:s}}}),o=new Ye({props:{class:"app-content",$$slots:{default:[Tt]},$$scope:{ctx:s}}}),{c(){e=y("div"),N(r.$$.fragment),t=R(),N(o.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=T(e);O(r.$$.fragment,l),t=M(l),O(o.$$.fragment,l),l.forEach(p),this.h()},h(){E(e,"class","drawer-container svelte-f4hgt4")},m(a,l){b(a,e,l),P(r,e,null),I(e,t),P(o,e,null),n=!0},p(a,[l]){const i={};l&2&&(i.$$scope={dirty:l,ctx:a}),r.$set(i);const f={};l&2&&(f.$$scope={dirty:l,ctx:a}),o.$set(f)},i(a){n||(h(r.$$.fragment,a),h(o.$$.fragment,a),n=!0)},o(a){v(r.$$.fragment,a),v(o.$$.fragment,a),n=!1},d(a){a&&p(e),L(r),L(o)}}}function St(s,e,r){let{$$slots:t={},$$scope:o}=e;return s.$$set=n=>{"$$scope"in n&&r(1,o=n.$$scope)},[t,o]}class Ct extends Q{constructor(e){super();Y(this,e,St,Et,X,{})}}function jt(s,e,r){let t,o,n;F(s,fe,_=>r(8,t=_)),F(s,ft,_=>r(9,o=_)),F(s,ue,_=>r(3,n=_));let{classID:a}=e,{roomID:l}=e,i,f,c,u,m,g=`Beaver #${Math.floor(Math.random()*(999-100+1)+100)}`;return ae(()=>{m&&m(),n&&(xe(f),ue.set(!1)),u&&u.cancel()}),ie(()=>{K.set({}),c=be($e(),".info/connected"),m=et(c,async _=>{if(_.val()===!0){const D=ut();i=be($e(),`/class/${a}/room/${l}/participants/${D}`),u=ot(i),u.set({hasDisconnected:!0,userUID:o.uid}),r(2,f=rt(ce(),`classes/${a}/participants/${D}`)),st(f,{uid:o.uid,browserTabID:t,currentRoomID:l,name:g}),ue.set(!0)}})}),s.$$set=_=>{"classID"in _&&r(0,a=_.classID),"roomID"in _&&r(1,l=_.roomID)},s.$$.update=()=>{s.$$.dirty&14&&n&&tt(f,{currentRoomID:l})},[a,l,f,n]}class Rt extends Q{constructor(e){super();Y(this,e,jt,null,X,{classID:0,roomID:1})}}const Mt="0ac8a98cf9bef2827f5beef5cd36c4f42a442863ce904a2469de12caa9097fa1",zt=s=>({activeSpeakerID:s&2,firestoreIDToDailyID:s&1}),je=s=>({toggleMic:s[2],activeSpeakerID:s[1],firestoreIDToDailyID:s[0]});function Vt(s){let e;const r=s[8].default,t=re(r,s,s[7],je);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,n){t&&t.m(o,n),e=!0},p(o,[n]){t&&t.p&&(!e||n&131)&&se(t,r,o,o[7],e?le(r,o[7],n,zt):ne(o[7]),je)},i(o){e||(h(t,o),e=!0)},o(o){v(t,o),e=!1},d(o){t&&t.d(o)}}}async function At({track:s,participant:e}){switch(s.kind){case"audio":if(e.local)return;{const r=document.createElement("audio");r.srcObject=new MediaStream([s]),r.setAttribute("id","audio"+e.user_id),r.setAttribute("playsinline",!0),r.setAttribute("autoplay",!0),document.getElementById("container-for-audio-elements").appendChild(r)}break}}async function Nt({track:s,participant:e}){const r=document.getElementById(s.id);r&&(r.srcObject=null,r.remove())}function Ot(s,e,r){let t,o,n;F(s,Z,w=>r(10,t=w)),F(s,fe,w=>r(11,o=w)),F(s,Ee,w=>r(12,n=w));let{$$slots:a={},$$scope:l}=e,{roomID:i}=e,f,c,u,m,g,_="";ae(()=>{m==="connected"&&U()}),ie(async()=>{await D(),S()});async function D(){return new Promise(async w=>{if(!n){const C=await navigator.mediaDevices.getUserMedia({audio:!0});Ee.set(C)}const[A]=n.getAudioTracks();f=nt.createCallObject({audioSource:A,videoSource:!1});const x=["participant-joined","participant-updated","participant-left"];for(const C of x)f.on(C,()=>{Z.set(f.participants());const G={};for(const qe of Object.keys(t)){const me=t[qe],de=me.user_name;de&&(G[de]=me.user_id)}r(0,c=G)});f.on("track-started",At),f.on("track-stopped",Nt),f.on("active-speaker-change",({activeSpeaker:C})=>{r(1,_=C.peerId)}),f.on("load-attempt-failed",({action:C,errorMsg:G})=>{alert(C+": "+G)}),f.on("error",({action:C,errorMsg:G})=>{alert(C+": "+G)}),w()})}async function S(){r(4,u="not_connected"),r(5,m="connecting"),r(6,g=i);const{url:w}=await $();w&&(await z(w),r(4,u="connecting"),r(5,m="connected"))}function $(){return new Promise(async w=>{try{const A=2*60*60,C=await(await fetch("https://api.daily.co/v1/rooms",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer "+Mt},body:JSON.stringify({name:i,properties:{exp:Math.round(Date.now()/1e3)+A,eject_at_room_exp:!0,start_video_off:!0}})})).json();C.error==="invalid-request-error"&&C.info===`a room named ${i} already exists`?w({url:`https://feynman.daily.co/${i}`}):(console.log("room =",C),w(C))}catch(A){console.error(A),alert(A),reject({url:""})}})}function z(w){return new Promise(async(A,x)=>{try{await f.join({url:w,userName:o}),A()}catch(C){console.log("error)"),alert(C),x()}})}function V(){console.log("toggling mic"),f.setLocalAudio(!t.local.audio),Z.set(f.participants())}function U(){const w=document.querySelectorAll("audio");for(const A of w)A.remove();W(),r(4,u="connected"),r(5,m="not_connected")}function W(){f.leave(),Z.set({}),r(1,_="")}return s.$$set=w=>{"roomID"in w&&r(3,i=w.roomID),"$$scope"in w&&r(7,l=w.$$scope)},s.$$.update=()=>{s.$$.dirty&120&&u==="connecting"&&m==="connected"&&g!==i&&(console.log("part 1: user moved to a different room before voice chat connected"),U()),s.$$.dirty&120&&u==="connected"&&m==="not_connected"&&g!==i&&(console.log("part 2: ready to join the new room"),S())},[c,_,V,i,u,m,g,l,a]}class Pt extends Q{constructor(e){super();Y(this,e,Ot,Vt,X,{roomID:3})}}function Re(s,e,r){const t=s.slice();return t[17]=e[r],t}function Me(s,e,r){const t=s.slice();return t[20]=e[r],t}function ze(s){let e=[],r=new Map,t,o,n=s[2];const a=l=>l[17].id+l[1];for(let l=0;l<n.length;l+=1){let i=Re(s,n,l),f=a(i);r.set(f,e[l]=Ue(f,i))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=j()},l(l){for(let i=0;i<e.length;i+=1)e[i].l(l);t=j()},m(l,i){for(let f=0;f<e.length;f+=1)e[f].m(l,i);b(l,t,i),o=!0},p(l,i){i&114751&&(n=l[2],H(),e=Ie(e,i,a,1,l,n,r,t.parentNode,we,Ue,t,Re),J())},i(l){if(!o){for(let i=0;i<n.length;i+=1)h(e[i]);o=!0}},o(l){for(let i=0;i<e.length;i+=1)v(e[i]);o=!1},d(l){for(let i=0;i<e.length;i+=1)e[i].d(l);l&&p(t)}}}function Ve(s){let e,r,t,o,n,a,l,i;function f(_,D){if(_[17].name)return Ut;if(_[17].name==="")return Lt}let c=f(s),u=c&&c(s),m=s[3][s[17].id]&&Ae(s);function g(){return s[7](s[17])}return{c(){e=y("div"),r=y("div"),u&&u.c(),t=R(),m&&m.c(),n=R(),this.h()},l(_){e=k(_,"DIV",{style:!0});var D=T(e);r=k(D,"DIV",{class:!0,style:!0});var S=T(r);u&&u.l(S),t=M(S),m&&m.l(S),S.forEach(p),n=M(D),D.forEach(p),this.h()},h(){E(r,"class",o=""+(ye(s[17].id===s[1]?"selected":"")+" svelte-twz7iw")),d(r,"padding","6px 10px 6px 8px"),d(r,"opacity","90%"),d(r,"border-radius","5px"),d(e,"padding","6px")},m(_,D){b(_,e,D),I(e,r),u&&u.m(r,null),I(r,t),m&&m.m(r,null),I(e,n),a=!0,l||(i=ke(e,"click",g),l=!0)},p(_,D){s=_,c===(c=f(s))&&u?u.p(s,D):(u&&u.d(1),u=c&&c(s),u&&(u.c(),u.m(r,t))),s[3][s[17].id]?m?(m.p(s,D),D&12&&h(m,1)):(m=Ae(s),m.c(),h(m,1),m.m(r,null)):m&&(H(),v(m,1,1,()=>{m=null}),J()),(!a||D&6&&o!==(o=""+(ye(s[17].id===s[1]?"selected":"")+" svelte-twz7iw")))&&E(r,"class",o)},i(_){a||(h(m),a=!0)},o(_){v(m),a=!1},d(_){_&&p(e),u&&u.d(),m&&m.d(),l=!1,i()}}}function Lt(s){let e,r;return{c(){e=y("div"),r=q("(no title)"),this.h()},l(t){e=k(t,"DIV",{style:!0});var o=T(e);r=B(o,"(no title)"),o.forEach(p),this.h()},h(){d(e,"margin-bottom","2px")},m(t,o){b(t,e,o),I(e,r)},p:oe,d(t){t&&p(e)}}}function Ut(s){let e,r=s[17].name+"",t;return{c(){e=y("div"),t=q(r),this.h()},l(o){e=k(o,"DIV",{style:!0,class:!0});var n=T(e);t=B(n,r),n.forEach(p),this.h()},h(){d(e,"white-space","nowrap"),d(e,"overflow","hidden"),d(e,"text-overflow","ellipsis margin-bottom: 2px"),E(e,"class","svelte-twz7iw"),te(e,"question-item",s[17].name.charAt(s[17].name.length-1)==="?")},m(o,n){b(o,e,n),I(e,t)},p(o,n){n&4&&r!==(r=o[17].name+"")&&Te(t,r),n&4&&te(e,"question-item",o[17].name.charAt(o[17].name.length-1)==="?")},d(o){o&&p(e)}}}function Ae(s){let e=[],r=new Map,t,o,n=s[3][s[17].id];const a=l=>l[20].browserTabID;for(let l=0;l<n.length;l+=1){let i=Me(s,n,l),f=a(i);r.set(f,e[l]=Le(f,i))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=j()},l(l){for(let i=0;i<e.length;i+=1)e[i].l(l);t=j()},m(l,i){for(let f=0;f<e.length;f+=1)e[f].m(l,i);b(l,t,i),o=!0},p(l,i){i&114748&&(n=l[3][l[17].id],H(),e=Ie(e,i,a,1,l,n,r,t.parentNode,we,Le,t,Me),J())},i(l){if(!o){for(let i=0;i<n.length;i+=1)h(e[i]);o=!0}},o(l){for(let i=0;i<e.length;i+=1)v(e[i]);o=!1},d(l){for(let i=0;i<e.length;i+=1)e[i].d(l);l&&p(t)}}}function Ne(s){let e,r,t,o=s[20].browserTabID===s[5]&&Oe(s),n=s[4][s[16][s[20].browserTabID]]&&Pe(s);return{c(){o&&o.c(),e=R(),n&&n.c(),r=j()},l(a){o&&o.l(a),e=M(a),n&&n.l(a),r=j()},m(a,l){o&&o.m(a,l),b(a,e,l),n&&n.m(a,l),b(a,r,l),t=!0},p(a,l){a[20].browserTabID===a[5]?o?(o.p(a,l),l&44&&h(o,1)):(o=Oe(a),o.c(),h(o,1),o.m(e.parentNode,e)):o&&(H(),v(o,1,1,()=>{o=null}),J()),a[4][a[16][a[20].browserTabID]]?n?n.p(a,l):(n=Pe(a),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},i(a){t||(h(o),t=!0)},o(a){v(o),t=!1},d(a){o&&o.d(a),a&&p(e),n&&n.d(a),a&&p(r)}}}function Oe(s){let e,r,t,o,n,a,l;t=new ct({props:{checked:s[4].local.audio,style:"margin: 0 !important"}});function i(u,m){return u[4].local.audio?Bt:qt}let f=i(s),c=f(s);return{c(){e=y("div"),r=y("div"),N(t.$$.fragment),o=R(),c.c(),this.h()},l(u){e=k(u,"DIV",{style:!0});var m=T(e);r=k(m,"DIV",{style:!0});var g=T(r);O(t.$$.fragment,g),g.forEach(p),o=M(m),c.l(m),m.forEach(p),this.h()},h(){d(r,"margin-right","0"),d(r,"margin-left","auto"),d(r,"padding-top","3px"),d(e,"display","flex"),d(e,"align-items","center"),d(e,"margin-right","0"),d(e,"margin-left","auto")},m(u,m){b(u,e,m),I(e,r),P(t,r,null),I(e,o),c.m(e,null),n=!0,a||(l=ke(r,"click",lt(at(function(){it(s[15])&&s[15].apply(this,arguments)}))),a=!0)},p(u,m){s=u;const g={};m&16&&(g.checked=s[4].local.audio),t.$set(g),f!==(f=i(s))&&(c.d(1),c=f(s),c&&(c.c(),c.m(e,null)))},i(u){n||(h(t.$$.fragment,u),n=!0)},o(u){v(t.$$.fragment,u),n=!1},d(u){u&&p(e),L(t),c.d(),a=!1,l()}}}function qt(s){let e,r;return{c(){e=y("div"),r=q("muted"),this.h()},l(t){e=k(t,"DIV",{style:!0});var o=T(e);r=B(o,"muted"),o.forEach(p),this.h()},h(){d(e,"font-size","0.8rem"),d(e,"margin-left","6px"),d(e,"color","red")},m(t,o){b(t,e,o),I(e,r)},d(t){t&&p(e)}}}function Bt(s){let e,r;return{c(){e=y("div"),r=q("voice on"),this.h()},l(t){e=k(t,"DIV",{style:!0});var o=T(e);r=B(o,"voice on"),o.forEach(p),this.h()},h(){d(e,"font-size","0.8rem"),d(e,"margin-left","6px"),d(e,"color","green")},m(t,o){b(t,e,o),I(e,r)},d(t){t&&p(e)}}}function Pe(s){let e;function r(n,a){return n[4][n[16][n[20].browserTabID]].audio?Ht:Ft}let t=r(s),o=t(s);return{c(){o.c(),e=j()},l(n){o.l(n),e=j()},m(n,a){o.m(n,a),b(n,e,a)},p(n,a){t===(t=r(n))&&o?o.p(n,a):(o.d(1),o=t(n),o&&(o.c(),o.m(e.parentNode,e)))},d(n){o.d(n),n&&p(e)}}}function Ft(s){let e,r;return{c(){e=y("span"),r=q("mic_off"),this.h()},l(t){e=k(t,"SPAN",{class:!0,style:!0});var o=T(e);r=B(o,"mic_off"),o.forEach(p),this.h()},h(){E(e,"class","material-icons"),d(e,"margin-right","0"),d(e,"margin-left","auto"),d(e,"font-size","1.2rem"),d(e,"color","red")},m(t,o){b(t,e,o),I(e,r)},p:oe,d(t){t&&p(e)}}}function Ht(s){let e,r;return{c(){e=y("span"),r=q("mic"),this.h()},l(t){e=k(t,"SPAN",{class:!0,style:!0});var o=T(e);r=B(o,"mic"),o.forEach(p),this.h()},h(){E(e,"class","material-icons"),d(e,"margin-right","0"),d(e,"margin-left","auto"),d(e,"font-size","1.2rem"),d(e,"color",s[16]&&s[16][s[20].browserTabID]&&s[16][s[20].browserTabID]===s[14]?"white":"")},m(t,o){b(t,e,o),I(e,r)},p(t,o){o&81932&&d(e,"color",t[16]&&t[16][t[20].browserTabID]&&t[16][t[20].browserTabID]===t[14]?"white":"")},d(t){t&&p(e)}}}function Le(s,e){let r,t,o=e[20].name+"",n,a,l=Object.keys(e[4]).length>0,i,f,c=l&&Ne(e);return{key:s,first:null,c(){r=y("div"),t=y("div"),n=q(o),a=R(),c&&c.c(),i=R(),this.h()},l(u){r=k(u,"DIV",{style:!0});var m=T(r);t=k(m,"DIV",{style:!0,class:!0});var g=T(t);n=B(g,o),g.forEach(p),a=M(m),c&&c.l(m),i=M(m),m.forEach(p),this.h()},h(){d(t,"font-size","0.7rem"),d(t,"margin-left","6px"),E(t,"class","svelte-twz7iw"),te(t,"speaking",e[16]&&e[16][e[20].browserTabID]&&e[16][e[20].browserTabID]===e[14]),d(r,"display","flex"),d(r,"align-items","center"),this.first=r},m(u,m){b(u,r,m),I(r,t),I(t,n),I(r,a),c&&c.m(r,null),I(r,i),f=!0},p(u,m){e=u,(!f||m&12)&&o!==(o=e[20].name+"")&&Te(n,o),m&81932&&te(t,"speaking",e[16]&&e[16][e[20].browserTabID]&&e[16][e[20].browserTabID]===e[14]),m&16&&(l=Object.keys(e[4]).length>0),l?c?(c.p(e,m),m&16&&h(c,1)):(c=Ne(e),c.c(),h(c,1),c.m(r,i)):c&&(H(),v(c,1,1,()=>{c=null}),J())},i(u){f||(h(c),f=!0)},o(u){v(c),f=!1},d(u){u&&p(r),c&&c.d()}}}function Ue(s,e){let r,t,o,n=e[17].name!==void 0&&Ve(e);return{key:s,first:null,c(){r=j(),n&&n.c(),t=j(),this.h()},l(a){r=j(),n&&n.l(a),t=j(),this.h()},h(){this.first=r},m(a,l){b(a,r,l),n&&n.m(a,l),b(a,t,l),o=!0},p(a,l){e=a,e[17].name!==void 0?n?(n.p(e,l),l&4&&h(n,1)):(n=Ve(e),n.c(),h(n,1),n.m(t.parentNode,t)):n&&(H(),v(n,1,1,()=>{n=null}),J())},i(a){o||(h(n),o=!0)},o(a){v(n),o=!1},d(a){a&&p(r),n&&n.d(a),a&&p(t)}}}function Jt(s){let e,r,t=s[2]&&ze(s);return{c(){t&&t.c(),e=j()},l(o){t&&t.l(o),e=j()},m(o,n){t&&t.m(o,n),b(o,e,n),r=!0},p(o,n){o[2]?t?(t.p(o,n),n&4&&h(t,1)):(t=ze(o),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(H(),v(t,1,1,()=>{t=null}),J())},i(o){r||(h(t),r=!0)},o(o){v(t),r=!1},d(o){t&&t.d(o),o&&p(e)}}}function Wt(s){let e,r;return e=new Ct({props:{$$slots:{default:[Jt]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const n={};o&115007&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function Gt(s){let e,r,t,o,n,a,l;e=new Rt({props:{classID:s[0],roomID:s[1]}}),n=new Pt({props:{roomID:s[1],$$slots:{default:[Wt,({activeSpeakerID:c,toggleMic:u,firestoreIDToDailyID:m})=>({14:c,15:u,16:m}),({activeSpeakerID:c,toggleMic:u,firestoreIDToDailyID:m})=>(c?16384:0)|(u?32768:0)|(m?65536:0)]},$$scope:{ctx:s}}});const i=s[6].default,f=re(i,s,s[8],null);return{c(){N(e.$$.fragment),r=R(),t=y("div"),o=R(),N(n.$$.fragment),a=R(),f&&f.c(),this.h()},l(c){O(e.$$.fragment,c),r=M(c),t=k(c,"DIV",{id:!0});var u=T(t);u.forEach(p),o=M(c),O(n.$$.fragment,c),a=M(c),f&&f.l(c),this.h()},h(){E(t,"id","container-for-audio-elements")},m(c,u){P(e,c,u),b(c,r,u),b(c,t,u),b(c,o,u),P(n,c,u),b(c,a,u),f&&f.m(c,u),l=!0},p(c,[u]){const m={};u&1&&(m.classID=c[0]),u&2&&(m.roomID=c[1]),e.$set(m);const g={};u&2&&(g.roomID=c[1]),u&115007&&(g.$$scope={dirty:u,ctx:c}),n.$set(g),f&&f.p&&(!l||u&256)&&se(f,i,c,c[8],l?le(i,c[8],u,null):ne(c[8]),null)},i(c){l||(h(e.$$.fragment,c),h(n.$$.fragment,c),h(f,c),l=!0)},o(c){v(e.$$.fragment,c),v(n.$$.fragment,c),v(f,c),l=!1},d(c){L(e,c),c&&p(r),c&&p(t),c&&p(o),L(n,c),c&&p(a),f&&f.d(c)}}}function eo({page:s}){return{props:{classID:s.params.class,roomID:s.params.room}}}function Kt(s,e,r){let t,o,n;F(s,K,$=>r(3,t=$)),F(s,Z,$=>r(4,o=$)),F(s,fe,$=>r(5,n=$));let{$$slots:a={},$$scope:l}=e,{classID:i}=e,{roomID:f}=e,c;ae(()=>{for(const $ of g)$();window.removeEventListener("resize",m)}),ie(()=>{console.log("__layout mounted, but should only be done once"),window.addEventListener("resize",m),m()});function u(){const{height:$,width:z}=pt();mt.set($),dt.set(z)}function m(){setTimeout(u,100)}let g=[];const _=ve(ce(),`classes/${i}/participants`),D=ve(ce(),`classes/${i}/rooms`);g.push(De(D,$=>{const z=[];$.forEach(V=>{z.push(he({id:V.id,ref:V.ref.path},V.data()))}),r(2,c=z)})),g.push(De(_,$=>{$.docChanges().forEach(z=>{const V=z.doc.data(),U=V.currentRoomID;switch(z.type){case"added":t[U]||ee(K,t[U]=[],t),t[U].push(V);break;case"modified":for(const W of Object.keys(t))for(const w of t[W])w.browserTabID===V.browserTabID&&ee(K,t[W]=t[W].filter(A=>A.browserTabID!==V.browserTabID),t);t[U]||ee(K,t[U]=[],t),t[U].push(V);break;case"removed":ee(K,t[U]=t[U].filter(W=>W.browserTabID!==V.browserTabID),t);break}})}));const S=$=>_t(`/${i}/${$.id}`);return s.$$set=$=>{"classID"in $&&r(0,i=$.classID),"roomID"in $&&r(1,f=$.roomID),"$$scope"in $&&r(8,l=$.$$scope)},[i,f,c,t,o,n,a,S,l]}class to extends Q{constructor(e){super();Y(this,e,Kt,Gt,X,{classID:0,roomID:1})}}export{to as default,eo as load};
