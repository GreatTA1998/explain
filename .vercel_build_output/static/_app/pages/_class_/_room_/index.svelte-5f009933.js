var je=Object.defineProperty;var ie=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var fe=(l,e,o)=>e in l?je(l,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[e]=o,ue=(l,e)=>{for(var o in e||(e={}))Oe.call(e,o)&&fe(l,o,e[o]);if(ie)for(var o of ie(e))ze.call(e,o)&&fe(l,o,e[o]);return l};import{S as Ce,i as Qe,s as qe,e as W,j as R,k as O,c as F,a as H,m as I,n as z,d as $,K as X,W as ce,f as h,o as y,L as K,a1 as ne,aA as Ee,aB as Ve,w as L,x as _,u as b,v as N,l as S,D as x,A as We,N as G,O as C,Z as Fe,a2 as ee,r as P,a0 as He,aE as Ke,av as Q,aF as Ge,aG as Je,U as Ye,ah as Ze,aH as Xe,T as xe,ag as et,aI as de,aJ as pe,aK as tt,aL as ot,aM as nt,Q as lt,aN as st,Y as at,_ as rt,t as v,g as D,h as te,aO as J,b as Y,a8 as q,M as le,al as it,a4 as ft,am as ut,an as ct}from"../../../chunks/vendor-c16c1f41.js";import{R as dt,T as pt,a as mt,B as _t,D as $t}from"../../../chunks/TextAreaAutoResizing-e3df78f8.js";import{a as bt}from"../../../chunks/database-8071a61f.js";import{g as ht}from"../../../chunks/canvas-5b7b0e82.js";import{g as me,k as oe,u as kt,c as gt,a as wt,r as vt}from"../../../chunks/store-23308dd8.js";import"../../../chunks/preload-helper-ec9aa979.js";import"../../../chunks/singletons-12a22614.js";function Dt(l,e){let o=document.getElementById(e);return o==null||o.appendChild(l),{destroy(){l.remove()}}}function _e(l,e){let o=new IntersectionObserver(t=>{for(const n of t)if(n.isIntersecting){e(),o.unobserve(l);return}},{root:null,threshold:.2,rootMargin:"0px"});o.observe(l)}function $e(l,e,o){const t=l.slice();return t[29]=e[o],t}function be(l){let e,o,t,n,s,a=[],r=new Map,i,f,c,u,k,M;o=new Fe({props:{disabled:B(l[1].name)&&l[1].askerUID&&l[4].uid!==l[1].askerUID,value:l[1].name,class:"room-title",style:`width: ${l[5]}px;`,$$slots:{helper:[Nt]},$$scope:{ctx:l}}}),o.$on("input",l[16]);let U=l[1].blackboards;const T=m=>m[29];for(let m=0;m<U.length;m+=1){let d=$e(l,U,m),w=T(d);r.set(w,a[m]=De(w,d))}return f=new ee({props:{variant:"unelevated",color:"#2e3131",style:`width: ${l[5]}px; margin-top: 40px`,$$slots:{default:[Wt]},$$scope:{ctx:l}}}),f.$on("click",l[13]),{c(){e=W("div"),R(o.$$.fragment),t=O(),n=W("div"),s=O();for(let m=0;m<a.length;m+=1)a[m].c();i=O(),R(f.$$.fragment),this.h()},l(m){e=F(m,"DIV",{style:!0});var d=H(e);I(o.$$.fragment,d),t=z(d),n=F(d,"DIV",{style:!0}),H(n).forEach($),s=z(d);for(let w=0;w<a.length;w+=1)a[w].l(d);i=z(d),I(f.$$.fragment,d),d.forEach($),this.h()},h(){X(n,"margin-bottom","20px"),X(e,"padding","16px"),ce(e,"question",B(l[1].name))},m(m,d){h(m,e,d),y(o,e,null),K(e,t),K(e,n),K(e,s);for(let w=0;w<a.length;w+=1)a[w].m(e,null);K(e,i),y(f,e,null),u=!0,k||(M=ne(c=Dt.call(null,e,"main-content")),k=!0)},p(m,d){const w={};d[0]&18&&(w.disabled=B(m[1].name)&&m[1].askerUID&&m[4].uid!==m[1].askerUID),d[0]&2&&(w.value=m[1].name),d[0]&32&&(w.style=`width: ${m[5]}px;`),d[0]&14|d[1]&1024&&(w.$$scope={dirty:d,ctx:m}),o.$set(w),d[0]&7651|d[1]&990&&(U=m[1].blackboards,P(),a=Ee(a,d,T,1,m,U,r,e,Ve,De,i,$e),L());const E={};d[0]&32&&(E.style=`width: ${m[5]}px; margin-top: 40px`),d[1]&1024&&(E.$$scope={dirty:d,ctx:m}),f.$set(E),d[0]&2&&ce(e,"question",B(m[1].name))},i(m){if(!u){_(o.$$.fragment,m);for(let d=0;d<U.length;d+=1)_(a[d]);_(f.$$.fragment,m),u=!0}},o(m){b(o.$$.fragment,m);for(let d=0;d<a.length;d+=1)b(a[d]);b(f.$$.fragment,m),u=!1},d(m){m&&$(e),N(o);for(let d=0;d<a.length;d+=1)a[d].d();N(f),k=!1,M()}}}function Rt(l){let e,o=l[1].askerName+"",t,n,s=oe(l[1].dateAsked)+"",a;return{c(){e=v("Marked as question by "),t=v(o),n=v(" on "),a=v(s)},l(r){e=D(r,"Marked as question by "),t=D(r,o),n=D(r," on "),a=D(r,s)},m(r,i){h(r,e,i),h(r,t,i),h(r,n,i),h(r,a,i)},p(r,i){i[0]&2&&o!==(o=r[1].askerName+"")&&te(t,o),i[0]&2&&s!==(s=oe(r[1].dateAsked)+"")&&te(a,s)},d(r){r&&$(e),r&&$(t),r&&$(n),r&&$(a)}}}function It(l){let e,o,t;return{c(){e=v("Pinging server members in "),o=v(l[3]),t=v(", cancel by backtracking the ?")},l(n){e=D(n,"Pinging server members in "),o=D(n,l[3]),t=D(n,", cancel by backtracking the ?")},m(n,s){h(n,e,s),h(n,o,s),h(n,t,s)},p(n,s){s[0]&8&&te(o,n[3])},d(n){n&&$(e),n&&$(o),n&&$(t)}}}function he(l){let e,o=oe(l[1].dateResolved)+"",t;return{c(){e=v(", resolved "),t=v(o)},l(n){e=D(n,", resolved "),t=D(n,o)},m(n,s){h(n,e,s),h(n,t,s)},p(n,s){s[0]&2&&o!==(o=oe(n[1].dateResolved)+"")&&te(t,o)},d(n){n&&$(e),n&&$(t)}}}function yt(l){let e,o;function t(r,i){if(r[2])return It;if(r[1].askerName&&r[1].askerUID&&r[1].date)return Rt}let n=t(l),s=n&&n(l),a=l[1].dateResolved&&he(l);return{c(){s&&s.c(),e=O(),a&&a.c(),o=S()},l(r){s&&s.l(r),e=z(r),a&&a.l(r),o=S()},m(r,i){s&&s.m(r,i),h(r,e,i),a&&a.m(r,i),h(r,o,i)},p(r,i){n===(n=t(r))&&s?s.p(r,i):(s&&s.d(1),s=n&&n(r),s&&(s.c(),s.m(e.parentNode,e))),r[1].dateResolved?a?a.p(r,i):(a=he(r),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},d(r){s&&s.d(r),r&&$(e),a&&a.d(r),r&&$(o)}}}function Nt(l){let e,o;return e=new He({props:{slot:"helper",persistent:!0,$$slots:{default:[yt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),o=!0},p(t,n){const s={};n[0]&14|n[1]&1024&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){o||(_(e.$$.fragment,t),o=!0)},o(t){b(e.$$.fragment,t),o=!1},d(t){N(e,t)}}}function ke(l){let e,o,t,n,s,a=l[35]&&ge(l);const r=[At,Ut],i=[];function f(c,u){return c[32].audioDownloadURL?0:1}return o=f(l),t=i[o]=r[o](l),{c(){a&&a.c(),e=O(),t.c(),n=S()},l(c){a&&a.l(c),e=z(c),t.l(c),n=S()},m(c,u){a&&a.m(c,u),h(c,e,u),i[o].m(c,u),h(c,n,u),s=!0},p(c,u){c[35]?a?(a.p(c,u),u[1]&16&&_(a,1)):(a=ge(c),a.c(),_(a,1),a.m(e.parentNode,e)):a&&(P(),b(a,1,1,()=>{a=null}),L());let k=o;o=f(c),o===k?i[o].p(c,u):(P(),b(i[k],1,1,()=>{i[k]=null}),L(),t=i[o],t?t.p(c,u):(t=i[o]=r[o](c),t.c()),_(t,1),t.m(n.parentNode,n))},i(c){s||(_(a),_(t),s=!0)},o(c){b(a),b(t),s=!1},d(c){a&&a.d(c),c&&$(e),i[o].d(c),c&&$(n)}}}function ge(l){let e,o;function t(...n){return l[17](l[29],...n)}return e=new pt({props:{value:l[32].description||""}}),e.$on("input",t),{c(){R(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,s){y(e,n,s),o=!0},p(n,s){l=n;const a={};s[1]&2&&(a.value=l[32].description||""),e.$set(a)},i(n){o||(_(e.$$.fragment,n),o=!0)},o(n){b(e.$$.fragment,n),o=!1},d(n){N(e,n)}}}function Ut(l){let e,o,t,n,s,a,r=l[35]&&we(l);return{c(){e=W("div"),r&&r.c(),this.h()},l(i){e=F(i,"DIV",{style:!0});var f=H(e);r&&r.l(f),f.forEach($),this.h()},h(){Y(e,"style",o=`width: ${l[5]}px; height: ${l[6]}px; position: relative`)},m(i,f){h(i,e,f),r&&r.m(e,null),n=!0,s||(a=ne(t=_e.call(null,e,l[34])),s=!0)},p(i,f){i[35]?r?(r.p(i,f),f[1]&16&&_(r,1)):(r=we(i),r.c(),_(r,1),r.m(e,null)):r&&(P(),b(r,1,1,()=>{r=null}),L()),(!n||f[0]&96&&o!==(o=`width: ${i[5]}px; height: ${i[6]}px; position: relative`))&&Y(e,"style",o),t&&q(t.update)&&f[1]&8&&t.update.call(null,i[34])},i(i){n||(_(r),n=!0)},o(i){b(r),n=!1},d(i){i&&$(e),r&&r.d(),s=!1,a()}}}function At(l){let e,o,t,n,s,a,r=l[35]&&ve(l);return{c(){e=W("div"),r&&r.c(),this.h()},l(i){e=F(i,"DIV",{style:!0});var f=H(e);r&&r.l(f),f.forEach($),this.h()},h(){Y(e,"style",o=`width: ${l[5]}px; height: ${l[6]+80}px; position: relative`)},m(i,f){h(i,e,f),r&&r.m(e,null),n=!0,s||(a=ne(t=_e.call(null,e,l[33])),s=!0)},p(i,f){i[35]?r?(r.p(i,f),f[1]&16&&_(r,1)):(r=ve(i),r.c(),_(r,1),r.m(e,null)):r&&(P(),b(r,1,1,()=>{r=null}),L()),(!n||f[0]&96&&o!==(o=`width: ${i[5]}px; height: ${i[6]+80}px; position: relative`))&&Y(e,"style",o),t&&q(t.update)&&f[1]&4&&t.update.call(null,i[33])},i(i){n||(_(r),n=!0)},o(i){b(r),n=!1},d(i){i&&$(e),r&&r.d(),s=!1,a()}}}function we(l){let e,o;function t(...n){return l[21](l[29],...n)}return e=new mt({props:{$$slots:{default:[Ct,({startRecording:n,stopRecording:s,currentTime:a})=>({38:n,39:s,40:a}),({startRecording:n,stopRecording:s,currentTime:a})=>[0,(n?128:0)|(s?256:0)|(a?512:0)]]},$$scope:{ctx:l}}}),e.$on("record-end",t),{c(){R(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,s){y(e,n,s),o=!0},p(n,s){l=n;const a={};s[0]&129|s[1]&2e3&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(n){o||(_(e.$$.fragment,n),o=!0)},o(n){b(e.$$.fragment,n),o=!1},d(n){N(e,n)}}}function St(l){let e;return{c(){e=v("Uploading...")},l(o){e=D(o,"Uploading...")},m(o,t){h(o,e,t)},p:le,i:le,o:le,d(o){o&&$(e)}}}function Mt(l){let e,o;return e=new ee({props:{color:"secondary",$$slots:{default:[Pt]},$$scope:{ctx:l}}}),e.$on("click",function(){q(l[39])&&l[39].apply(this,arguments)}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),o=!0},p(t,n){l=t;const s={};n[1]&1024&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(t){o||(_(e.$$.fragment,t),o=!0)},o(t){b(e.$$.fragment,t),o=!1},d(t){N(e,t)}}}function Lt(l){let e,o,t,n,s,a,r,i,f;e=new ee({props:{style:"color: #f5862c",$$slots:{default:[Bt]},$$scope:{ctx:l}}}),e.$on("click",function(){q(l[38])&&l[38].apply(this,arguments)});let c={style:"left: 100px; top: 50px; width: 300px",$$slots:{default:[Ot]},$$scope:{ctx:l}};return a=new it({props:c}),l[19](a),{c(){R(e.$$.fragment),o=O(),t=W("span"),n=v("more_horiz"),s=O(),R(a.$$.fragment),this.h()},l(u){I(e.$$.fragment,u),o=z(u),t=F(u,"SPAN",{class:!0,style:!0});var k=H(t);n=D(k,"more_horiz"),k.forEach($),s=z(u),I(a.$$.fragment,u),this.h()},h(){Y(t,"class","material-icons"),X(t,"margin-right","10px"),X(t,"color","white")},m(u,k){y(e,u,k),h(u,o,k),h(u,t,k),K(t,n),h(u,s,k),y(a,u,k),r=!0,i||(f=ft(t,"click",l[18]),i=!0)},p(u,k){l=u;const M={};k[1]&1024&&(M.$$scope={dirty:k,ctx:l}),e.$set(M);const U={};k[1]&1088&&(U.$$scope={dirty:k,ctx:l}),a.$set(U)},i(u){r||(_(e.$$.fragment,u),_(a.$$.fragment,u),r=!0)},o(u){b(e.$$.fragment,u),b(a.$$.fragment,u),r=!1},d(u){N(e,u),u&&$(o),u&&$(t),u&&$(s),l[19](null),N(a,u),i=!1,f()}}}function Pt(l){let e;return{c(){e=v("Stop")},l(o){e=D(o,"Stop")},m(o,t){h(o,e,t)},d(o){o&&$(e)}}}function Bt(l){let e;return{c(){e=v("Record")},l(o){e=D(o,"Record")},m(o,t){h(o,e,t)},d(o){o&&$(e)}}}function Tt(l){let e;return{c(){e=v("Wipe board")},l(o){e=D(o,"Wipe board")},m(o,t){h(o,e,t)},d(o){o&&$(e)}}}function jt(l){let e,o;return e=new ct({props:{$$slots:{default:[Tt]},$$scope:{ctx:l}}}),e.$on("SMUI:action",function(){q(l[37])&&l[37].apply(this,arguments)}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),o=!0},p(t,n){l=t;const s={};n[1]&1024&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(t){o||(_(e.$$.fragment,t),o=!0)},o(t){b(e.$$.fragment,t),o=!1},d(t){N(e,t)}}}function Ot(l){let e,o;return e=new ut({props:{$$slots:{default:[jt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),o=!0},p(t,n){const s={};n[1]&1088&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){o||(_(e.$$.fragment,t),o=!0)},o(t){b(e.$$.fragment,t),o=!1},d(t){N(e,t)}}}function zt(l){let e,o,t,n;const s=[Lt,Mt,St],a=[];function r(i,f){return i[7]==="pre_record"?0:i[7]==="mid_record"?1:2}return e=r(l),o=a[e]=s[e](l),{c(){o.c(),t=S()},l(i){o.l(i),t=S()},m(i,f){a[e].m(i,f),h(i,t,f),n=!0},p(i,f){let c=e;e=r(i),e===c?a[e].p(i,f):(P(),b(a[c],1,1,()=>{a[c]=null}),L(),o=a[e],o?o.p(i,f):(o=a[e]=s[e](i),o.c()),_(o,1),o.m(t.parentNode,t))},i(i){n||(_(o),n=!0)},o(i){b(o),n=!1},d(i){a[e].d(i),i&&$(t)}}}function Ct(l){let e,o;function t(...n){return l[20](l[36],...n)}return e=new _t({props:{strokesArray:l[35],currentTime:l[40],$$slots:{default:[zt]},$$scope:{ctx:l}}}),e.$on("stroke-drawn",t),{c(){R(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,s){y(e,n,s),o=!0},p(n,s){l=n;const a={};s[1]&16&&(a.strokesArray=l[35]),s[1]&512&&(a.currentTime=l[40]),s[0]&129|s[1]&1472&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(n){o||(_(e.$$.fragment,n),o=!0)},o(n){b(e.$$.fragment,n),o=!1},d(n){N(e,n)}}}function ve(l){let e,o;return e=new $t({props:{strokesArray:l[35],audioDownloadURL:l[32].audioDownloadURL,$$slots:{default:[qt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),o=!0},p(t,n){const s={};n[1]&16&&(s.strokesArray=t[35]),n[1]&2&&(s.audioDownloadURL=t[32].audioDownloadURL),n[1]&1026&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){o||(_(e.$$.fragment,t),o=!0)},o(t){b(e.$$.fragment,t),o=!1},d(t){N(e,t)}}}function Qt(l){let e;return{c(){e=v("Revert to board")},l(o){e=D(o,"Revert to board")},m(o,t){h(o,e,t)},d(o){o&&$(e)}}}function qt(l){let e,o;return e=new ee({props:{$$slots:{default:[Qt]},$$scope:{ctx:l}}}),e.$on("click",function(){q(l[12](l[32]))&&l[12](l[32]).apply(this,arguments)}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),o=!0},p(t,n){l=t;const s={};n[1]&1024&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(t){o||(_(e.$$.fragment,t),o=!0)},o(t){b(e.$$.fragment,t),o=!1},d(t){N(e,t)}}}function Et(l){let e,o,t=l[32]&&ke(l);return{c(){t&&t.c(),e=S()},l(n){t&&t.l(n),e=S()},m(n,s){t&&t.m(n,s),h(n,e,s),o=!0},p(n,s){n[32]?t?(t.p(n,s),s[1]&2&&_(t,1)):(t=ke(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(P(),b(t,1,1,()=>{t=null}),L())},i(n){o||(_(t),o=!0)},o(n){b(t),o=!1},d(n){t&&t.d(n),n&&$(e)}}}function De(l,e){let o,t,n;return t=new dt({props:{dbPath:e[8]+e[29],$$slots:{default:[Et,({boardDoc:s,fetchStrokes:a,listenToStrokes:r,strokesArray:i,handleNewlyDrawnStroke:f,deleteAllStrokesFromDb:c})=>({32:s,33:a,34:r,35:i,36:f,37:c}),({boardDoc:s,fetchStrokes:a,listenToStrokes:r,strokesArray:i,handleNewlyDrawnStroke:f,deleteAllStrokesFromDb:c})=>[0,(s?2:0)|(a?4:0)|(r?8:0)|(i?16:0)|(f?32:0)|(c?64:0)]]},$$scope:{ctx:e}}}),{key:l,first:null,c(){o=S(),R(t.$$.fragment),this.h()},l(s){o=S(),I(t.$$.fragment,s),this.h()},h(){this.first=o},m(s,a){h(s,o,a),y(t,s,a),n=!0},p(s,a){e=s;const r={};a[0]&2&&(r.dbPath=e[8]+e[29]),a[0]&227|a[1]&1118&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){b(t.$$.fragment,s),n=!1},d(s){s&&$(o),N(t,s)}}}function Vt(l){let e;return{c(){e=v("New blackboard")},l(o){e=D(o,"New blackboard")},m(o,t){h(o,e,t)},d(o){o&&$(e)}}}function Wt(l){let e,o;return e=new Ke({props:{$$slots:{default:[Vt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),o=!0},p(t,n){const s={};n[1]&1024&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){o||(_(e.$$.fragment,t),o=!0)},o(t){b(e.$$.fragment,t),o=!1},d(t){N(e,t)}}}function Ft(l){let e,o,t=l[1]&&be(l);return{c(){t&&t.c(),e=S()},l(n){t&&t.l(n),e=S()},m(n,s){t&&t.m(n,s),h(n,e,s),o=!0},p(n,s){n[1]?t?(t.p(n,s),s[0]&2&&_(t,1)):(t=be(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(P(),b(t,1,1,()=>{t=null}),L())},i(n){o||(_(t),o=!0)},o(n){b(t),o=!1},d(n){t&&t.d(n),n&&$(e)}}}async function to({page:l}){return{props:{classID:l.params.class,roomID:l.params.room}}}function B(l){return l.charAt(l.length-1)==="?"}function Re(l){return l.askerName&&l.dateAsked&&l.askerUID}function Ht(l,e,o){let t,n,s,a,r;x(l,kt,p=>o(4,n=p)),x(l,gt,p=>o(5,s=p)),x(l,wt,p=>o(6,a=p)),x(l,vt,p=>o(7,r=p));let{classID:i}=e,{roomID:f}=e,c,u;const k=`classes/${i}/blackboards/`,M=`classes/${i}/rooms/`;let U="",T=5;n.uid||ht("/");async function m({srcElement:p}){const{value:g}=p,A={name:g};!B(u.name)&&B(g)&&!Re(u)?d():U&&!B(g)?w():!B(g)&&Re(u)&&(A.dateResolved=new Date().toISOString()),await Q(t,A)}function d(){o(3,T=5),o(2,U=setInterval(()=>{o(3,T-=1),T===0&&(E(),Ie(),w())},1e3))}function w(){clearTimeout(U),o(2,U="")}function E(){Q(t,{askerName:n.name||"Beaver #999",askerUID:n.uid,dateAsked:new Date().toISOString()})}async function Ie(){const p=[],g=Ge(),A=Je(g,"sendTextMessage"),j=Ye(C(),"users"),V=Ze(j,Xe("willReceiveText","==",!0)),Z=await xe(V);if(Z.docs)for(const re of Z.docs){console.log("phoneNumber =",re.data().phoneNumber);try{p.push(A({content:`${n.name} asked: "${u.name||"Fake question here"}"`,toWho:re.data().phoneNumber}))}catch(Te){alert(Te)}}await Promise.all(p),console.log("success, sent all texts.")}async function se({detail:p},g){const A=G(C(),k+g);await Q(A,{description:p})}We(async()=>{et(t,p=>{o(1,u=ue({id:p.id},p.data()))})});async function ye(){o(1,u=await bt(M+f))}async function ae(p,g){const A=de(),j=pe(A,`audio/${me()}`);await tt(j,p);const V=await ot(j),Z=G(C(),k+g);await Q(Z,{creatorUID:n.uid,creatorPhoneNumber:n.phoneNumber,date:new Date().toISOString(),audioDownloadURL:V,audioRefFullPath:j.fullPath})}async function Ne({id:p,audioRefFullPath:g}){const A=[],j=G(C(),k+p);if(g){const V=pe(de(),g);A.push(nt(V))}A.push(Q(j,{creator:J(),creatorPhoneNumber:J(),date:J(),audioDownloadURL:J(),audioRefFullPath:J()})),await Promise.all(A)}async function Ue(){const p=me(),g=G(C(),k+p);await Promise.all([lt(g,{}),Q(t,{blackboards:st(p)})]),await at()}const Ae=p=>m(p),Se=(p,g)=>se(g,p),Me=()=>c.setOpen(!0);function Le(p){rt[p?"unshift":"push"](()=>{c=p,o(0,c)})}const Pe=(p,g)=>p(g.detail.newStroke),Be=(p,g)=>ae(g.detail.audioBlob,p);return l.$$set=p=>{"classID"in p&&o(14,i=p.classID),"roomID"in p&&o(15,f=p.roomID)},l.$$.update=()=>{l.$$.dirty[0]&32768&&(t=G(C(),M+f)),l.$$.dirty[0]&32768&&ye()},[c,u,U,T,n,s,a,r,k,m,se,ae,Ne,Ue,i,f,Ae,Se,Me,Le,Pe,Be]}class oo extends Ce{constructor(e){super();Qe(this,e,Ht,Ft,qe,{classID:14,roomID:15},null,[-1,-1])}}export{oo as default,to as load};
