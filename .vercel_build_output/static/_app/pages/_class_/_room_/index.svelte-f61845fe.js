var Ee=Object.defineProperty;var de=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var pe=(s,e,o)=>e in s?Ee(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,me=(s,e)=>{for(var o in e||(e={}))Qe.call(e,o)&&pe(s,o,e[o]);if(de)for(var o of de(e))qe.call(e,o)&&pe(s,o,e[o]);return s};import{S as Oe,i as Ve,s as Fe,e as L,j as N,k as q,t as y,c as j,a as z,m as U,n as O,d as p,g as I,K as k,U as _e,f as h,o as A,L as B,a0 as se,aD as We,aE as He,w as W,x as b,u as g,v as S,l as M,D as ee,A as Ke,N as te,O as X,X as Ge,r as H,$ as Je,_ as K,aF as Xe,aG as Ye,ai as Ze,aj as xe,aH as et,am as tt,al as rt,aI as $e,aJ as he,aK as ot,aL as st,aM as lt,Y as nt,h as Y,aN as Z,b as V,a8 as x,a1 as at,aO as it,M as le,a3 as ne,ap as ut,a4 as ft,aq as ct,ar as dt}from"../../../chunks/vendor-a41a25f2.js";import{R as pt,T as mt,a as _t,D as $t,B as ht}from"../../../chunks/TextAreaAutoResizing-87522a85.js";import{f as bt}from"../../../chunks/database-a3300b05.js";import{g as kt}from"../../../chunks/canvas-5b7b0e82.js";import{g as gt,r as be,k as re,u as vt,c as wt,a as Dt}from"../../../chunks/store-30c23496.js";import"../../../chunks/preload-helper-ec9aa979.js";import"../../../chunks/singletons-12a22614.js";function yt(s,e){let o=document.getElementById(e);return o==null||o.appendChild(s),{destroy(){s.remove()}}}function ke(s,e){let o=new IntersectionObserver(r=>{for(const t of r)if(t.isIntersecting){e(),o.unobserve(s);return}},{root:null,threshold:.2,rootMargin:"0px"});o.observe(s)}function ge(s,e,o){const r=s.slice();return r[35]=e[o],r}function ve(s){let e,o,r,t,l,n=[],a=new Map,i,u,d,f,c,w,D;o=new Ge({props:{disabled:E(s[1].name)&&s[1].askerUID&&s[6].uid!==s[1].askerUID,value:s[1].name,class:"room-title",style:`width: ${s[7]}px;`,$$slots:{helper:[At]},$$scope:{ctx:s}}}),o.$on("input",s[17]);let P=s[1].blackboards;const Q=$=>$[35];for(let $=0;$<P.length;$+=1){let m=ge(s,P,$),R=Q(m);a.set(R,n[$]=Ie(R,m))}return{c(){e=L("div"),N(o.$$.fragment),r=q(),t=L("div"),l=q();for(let $=0;$<n.length;$+=1)n[$].c();i=q(),u=L("div"),d=y("New blackboard"),this.h()},l($){e=j($,"DIV",{style:!0});var m=z(e);U(o.$$.fragment,m),r=O(m),t=j(m,"DIV",{style:!0}),z(t).forEach(p),l=O(m);for(let G=0;G<n.length;G+=1)n[G].l(m);i=O(m),u=j(m,"DIV",{style:!0});var R=z(u);d=I(R,"New blackboard"),R.forEach(p),m.forEach(p),this.h()},h(){k(t,"margin-bottom","20px"),k(u,"display","flex"),k(u,"justify-content","center"),k(u,"align-items","center"),k(u,"margin-top","40px"),k(u,"background-color","#2e3131"),k(u,"font-family","Roboto, sans-serif"),k(u,"text-transform","uppercase"),k(u,"height","35px"),k(e,"padding","16px"),_e(e,"question",E(s[1].name))},m($,m){h($,e,m),A(o,e,null),B(e,r),B(e,t),B(e,l);for(let R=0;R<n.length;R+=1)n[R].m(e,null);B(e,i),B(e,u),B(u,d),c=!0,w||(D=se(f=yt.call(null,e,"main-content")),w=!0)},p($,m){const R={};m[0]&66&&(R.disabled=E($[1].name)&&$[1].askerUID&&$[6].uid!==$[1].askerUID),m[0]&2&&(R.value=$[1].name),m[0]&128&&(R.style=`width: ${$[7]}px;`),m[0]&62|m[1]&65536&&(R.$$scope={dirty:m,ctx:$}),o.$set(R),m[0]&30659|m[1]&63360&&(P=$[1].blackboards,H(),n=We(n,m,Q,1,$,P,a,e,He,Ie,i,ge),W()),m[0]&2&&_e(e,"question",E($[1].name))},i($){if(!c){b(o.$$.fragment,$);for(let m=0;m<P.length;m+=1)b(n[m]);c=!0}},o($){g(o.$$.fragment,$);for(let m=0;m<n.length;m+=1)g(n[m]);c=!1},d($){$&&p(e),S(o);for(let m=0;m<n.length;m+=1)n[m].d();w=!1,D()}}}function It(s){let e,o=s[1].askerName+"",r,t,l=re(s[1].dateAsked)+"",n;return{c(){e=y("Marked as question by "),r=y(o),t=y(" on "),n=y(l)},l(a){e=I(a,"Marked as question by "),r=I(a,o),t=I(a," on "),n=I(a,l)},m(a,i){h(a,e,i),h(a,r,i),h(a,t,i),h(a,n,i)},p(a,i){i[0]&2&&o!==(o=a[1].askerName+"")&&Y(r,o),i[0]&2&&l!==(l=re(a[1].dateAsked)+"")&&Y(n,l)},d(a){a&&p(e),a&&p(r),a&&p(t),a&&p(n)}}}function Rt(s){let e,o,r;return{c(){e=y("Resolving this question in "),o=y(s[5]),r=y(", cancel by re-adding ?")},l(t){e=I(t,"Resolving this question in "),o=I(t,s[5]),r=I(t,", cancel by re-adding ?")},m(t,l){h(t,e,l),h(t,o,l),h(t,r,l)},p(t,l){l[0]&32&&Y(o,t[5])},d(t){t&&p(e),t&&p(o),t&&p(r)}}}function Nt(s){let e,o,r;return{c(){e=y("Pinging server members in "),o=y(s[3]),r=y(", cancel by backtracking the ?")},l(t){e=I(t,"Pinging server members in "),o=I(t,s[3]),r=I(t,", cancel by backtracking the ?")},m(t,l){h(t,e,l),h(t,o,l),h(t,r,l)},p(t,l){l[0]&8&&Y(o,t[3])},d(t){t&&p(e),t&&p(o),t&&p(r)}}}function we(s){let e,o=re(s[1].dateResolved)+"",r;return{c(){e=y(", resolved "),r=y(o)},l(t){e=I(t,", resolved "),r=I(t,o)},m(t,l){h(t,e,l),h(t,r,l)},p(t,l){l[0]&2&&o!==(o=re(t[1].dateResolved)+"")&&Y(r,o)},d(t){t&&p(e),t&&p(r)}}}function Ut(s){let e,o;function r(a,i){if(a[2])return Nt;if(a[4])return Rt;if(a[1].askerName&&a[1].askerUID&&a[1].date)return It}let t=r(s),l=t&&t(s),n=s[1].dateResolved&&we(s);return{c(){l&&l.c(),e=q(),n&&n.c(),o=M()},l(a){l&&l.l(a),e=O(a),n&&n.l(a),o=M()},m(a,i){l&&l.m(a,i),h(a,e,i),n&&n.m(a,i),h(a,o,i)},p(a,i){t===(t=r(a))&&l?l.p(a,i):(l&&l.d(1),l=t&&t(a),l&&(l.c(),l.m(e.parentNode,e))),a[1].dateResolved?n?n.p(a,i):(n=we(a),n.c(),n.m(o.parentNode,o)):n&&(n.d(1),n=null)},d(a){l&&l.d(a),a&&p(e),n&&n.d(a),a&&p(o)}}}function At(s){let e,o;return e=new Je({props:{slot:"helper",persistent:!0,$$slots:{default:[Ut]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},l(r){U(e.$$.fragment,r)},m(r,t){A(e,r,t),o=!0},p(r,t){const l={};t[0]&62|t[1]&65536&&(l.$$scope={dirty:t,ctx:r}),e.$set(l)},i(r){o||(b(e.$$.fragment,r),o=!0)},o(r){g(e.$$.fragment,r),o=!1},d(r){S(e,r)}}}function De(s){let e,o,r,t,l,n;function a(...f){return s[18](s[35],...f)}e=new mt({props:{value:s[38].description||""}}),e.$on("input",a);const i=[Mt,St],u=[];function d(f,c){return f[38].audioDownloadURL?0:1}return r=d(s),t=u[r]=i[r](s),{c(){N(e.$$.fragment),o=q(),t.c(),l=M()},l(f){U(e.$$.fragment,f),o=O(f),t.l(f),l=M()},m(f,c){A(e,f,c),h(f,o,c),u[r].m(f,c),h(f,l,c),n=!0},p(f,c){s=f;const w={};c[1]&128&&(w.value=s[38].description||""),e.$set(w);let D=r;r=d(s),r===D?u[r].p(s,c):(H(),g(u[D],1,1,()=>{u[D]=null}),W(),t=u[r],t?t.p(s,c):(t=u[r]=i[r](s),t.c()),b(t,1),t.m(l.parentNode,l))},i(f){n||(b(e.$$.fragment,f),b(t),n=!0)},o(f){g(e.$$.fragment,f),g(t),n=!1},d(f){S(e,f),f&&p(o),u[r].d(f),f&&p(l)}}}function St(s){let e,o,r,t,l,n,a;function i(...u){return s[23](s[35],...u)}return o=new _t({props:{$$slots:{default:[Et,({startRecording:u,stopRecording:d,currentTime:f})=>({44:u,45:d,46:f}),({startRecording:u,stopRecording:d,currentTime:f})=>[0,(u?8192:0)|(d?16384:0)|(f?32768:0)]]},$$scope:{ctx:s}}}),o.$on("record-end",i),{c(){e=L("div"),N(o.$$.fragment),this.h()},l(u){e=j(u,"DIV",{style:!0});var d=z(e);U(o.$$.fragment,d),d.forEach(p),this.h()},h(){V(e,"style",r=`width: ${s[7]}px; height: ${s[8]}px; position: relative`)},m(u,d){h(u,e,d),A(o,e,null),l=!0,n||(a=se(t=ke.call(null,e,s[40])),n=!0)},p(u,d){s=u;const f={};d[0]&513|d[1]&128e3&&(f.$$scope={dirty:d,ctx:s}),o.$set(f),(!l||d[0]&384&&r!==(r=`width: ${s[7]}px; height: ${s[8]}px; position: relative`))&&V(e,"style",r),t&&x(t.update)&&d[1]&512&&t.update.call(null,s[40])},i(u){l||(b(o.$$.fragment,u),l=!0)},o(u){g(o.$$.fragment,u),l=!1},d(u){u&&p(e),S(o),n=!1,a()}}}function Mt(s){let e,o,r,t,l,n,a;return o=new $t({props:{strokesArray:s[41],audioDownloadURL:s[38].audioDownloadURL,$$slots:{default:[qt]},$$scope:{ctx:s}}}),{c(){e=L("div"),N(o.$$.fragment),this.h()},l(i){e=j(i,"DIV",{style:!0});var u=z(e);U(o.$$.fragment,u),u.forEach(p),this.h()},h(){V(e,"style",r=`width: ${s[7]}px; height: ${s[8]+80}px; position: relative`)},m(i,u){h(i,e,u),A(o,e,null),l=!0,n||(a=se(t=ke.call(null,e,s[39])),n=!0)},p(i,u){const d={};u[1]&1024&&(d.strokesArray=i[41]),u[1]&128&&(d.audioDownloadURL=i[38].audioDownloadURL),u[0]&64|u[1]&65664&&(d.$$scope={dirty:u,ctx:i}),o.$set(d),(!l||u[0]&384&&r!==(r=`width: ${i[7]}px; height: ${i[8]+80}px; position: relative`))&&V(e,"style",r),t&&x(t.update)&&u[1]&256&&t.update.call(null,i[39])},i(i){l||(b(o.$$.fragment,i),l=!0)},o(i){g(o.$$.fragment,i),l=!1},d(i){i&&p(e),S(o),n=!1,a()}}}function Pt(s){let e,o,r;return o=new it({props:{class:"my-four-colors",style:"height: 32px; width: 32px;",indeterminate:!0,fourColor:!0}}),{c(){e=L("div"),N(o.$$.fragment),this.h()},l(t){e=j(t,"DIV",{style:!0});var l=z(e);U(o.$$.fragment,l),l.forEach(p),this.h()},h(){k(e,"display","flex"),k(e,"justify-content","center"),k(e,"margin-left","20px"),k(e,"margin-right","20px")},m(t,l){h(t,e,l),A(o,e,null),r=!0},p:le,i(t){r||(b(o.$$.fragment,t),r=!0)},o(t){g(o.$$.fragment,t),r=!1},d(t){t&&p(e),S(o)}}}function Ct(s){let e,o,r,t;return{c(){e=L("span"),o=y("stop_circle"),this.h()},l(l){e=j(l,"SPAN",{class:!0,style:!0});var n=z(e);o=I(n,"stop_circle"),n.forEach(p),this.h()},h(){V(e,"class","material-icons"),k(e,"font-size","2.5rem"),k(e,"color","cyan"),k(e,"margin-left","24px"),k(e,"margin-right","20px")},m(l,n){h(l,e,n),B(e,o),r||(t=ne(e,"click",function(){x(s[45])&&s[45].apply(this,arguments)}),r=!0)},p(l,n){s=l},i:le,o:le,d(l){l&&p(e),r=!1,t()}}}function Tt(s){let e,o,r,t,l,n,a,i,u,d,f={style:"left: 100px; top: 50px; width: 300px",$$slots:{default:[zt]},$$scope:{ctx:s}};return a=new ut({props:f}),s[21](a),{c(){e=L("span"),o=y("radio_button_checked"),r=q(),t=L("span"),l=y("more_horiz"),n=q(),N(a.$$.fragment),this.h()},l(c){e=j(c,"SPAN",{class:!0,style:!0});var w=z(e);o=I(w,"radio_button_checked"),w.forEach(p),r=O(c),t=j(c,"SPAN",{class:!0,style:!0});var D=z(t);l=I(D,"more_horiz"),D.forEach(p),n=O(c),U(a.$$.fragment,c),this.h()},h(){V(e,"class","material-icons"),k(e,"font-size","2.5rem"),k(e,"color","cyan"),k(e,"margin-left","24px"),k(e,"margin-right","20px"),V(t,"class","material-icons"),k(t,"margin-right","10px"),k(t,"color","white"),k(t,"font-size","2rem")},m(c,w){h(c,e,w),B(e,o),h(c,r,w),h(c,t,w),B(t,l),h(c,n,w),A(a,c,w),i=!0,u||(d=[ne(e,"click",function(){x(s[44])&&s[44].apply(this,arguments)}),ne(t,"click",s[20])],u=!0)},p(c,w){s=c;const D={};w[1]&69632&&(D.$$scope={dirty:w,ctx:s}),a.$set(D)},i(c){i||(b(a.$$.fragment,c),i=!0)},o(c){g(a.$$.fragment,c),i=!1},d(c){c&&p(e),c&&p(r),c&&p(t),c&&p(n),s[21](null),S(a,c),u=!1,ft(d)}}}function Lt(s){let e;return{c(){e=y("Wipe board")},l(o){e=I(o,"Wipe board")},m(o,r){h(o,e,r)},d(o){o&&p(e)}}}function jt(s){let e,o;return e=new dt({props:{$$slots:{default:[Lt]},$$scope:{ctx:s}}}),e.$on("SMUI:action",function(){x(s[43])&&s[43].apply(this,arguments)}),{c(){N(e.$$.fragment)},l(r){U(e.$$.fragment,r)},m(r,t){A(e,r,t),o=!0},p(r,t){s=r;const l={};t[1]&65536&&(l.$$scope={dirty:t,ctx:s}),e.$set(l)},i(r){o||(b(e.$$.fragment,r),o=!0)},o(r){g(e.$$.fragment,r),o=!1},d(r){S(e,r)}}}function zt(s){let e,o;return e=new ct({props:{$$slots:{default:[jt]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},l(r){U(e.$$.fragment,r)},m(r,t){A(e,r,t),o=!0},p(r,t){const l={};t[1]&69632&&(l.$$scope={dirty:t,ctx:r}),e.$set(l)},i(r){o||(b(e.$$.fragment,r),o=!0)},o(r){g(e.$$.fragment,r),o=!1},d(r){S(e,r)}}}function Bt(s){let e,o,r,t;const l=[Tt,Ct,Pt],n=[];function a(i,u){return i[9]==="pre_record"?0:i[9]==="mid_record"?1:2}return e=a(s),o=n[e]=l[e](s),{c(){o.c(),r=M()},l(i){o.l(i),r=M()},m(i,u){n[e].m(i,u),h(i,r,u),t=!0},p(i,u){let d=e;e=a(i),e===d?n[e].p(i,u):(H(),g(n[d],1,1,()=>{n[d]=null}),W(),o=n[e],o?o.p(i,u):(o=n[e]=l[e](i),o.c()),b(o,1),o.m(r.parentNode,r))},i(i){t||(b(o),t=!0)},o(i){g(o),t=!1},d(i){n[e].d(i),i&&p(r)}}}function Et(s){let e,o;function r(...t){return s[22](s[42],...t)}return e=new ht({props:{strokesArray:s[41],currentTime:s[46],$$slots:{default:[Bt]},$$scope:{ctx:s}}}),e.$on("stroke-drawn",r),{c(){N(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,l){A(e,t,l),o=!0},p(t,l){s=t;const n={};l[1]&1024&&(n.strokesArray=s[41]),l[1]&32768&&(n.currentTime=s[46]),l[0]&513|l[1]&94208&&(n.$$scope={dirty:l,ctx:s}),e.$set(n)},i(t){o||(b(e.$$.fragment,t),o=!0)},o(t){g(e.$$.fragment,t),o=!1},d(t){S(e,t)}}}function ye(s){let e,o;function r(){return s[19](s[38],s[43])}return e=new at({props:{color:"primary",$$slots:{default:[Qt]},$$scope:{ctx:s}}}),e.$on("click",r),{c(){N(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,l){A(e,t,l),o=!0},p(t,l){s=t;const n={};l[1]&65536&&(n.$$scope={dirty:l,ctx:s}),e.$set(n)},i(t){o||(b(e.$$.fragment,t),o=!0)},o(t){g(e.$$.fragment,t),o=!1},d(t){S(e,t)}}}function Qt(s){let e;return{c(){e=y("Delete video")},l(o){e=I(o,"Delete video")},m(o,r){h(o,e,r)},d(o){o&&p(e)}}}function qt(s){let e,o,r=s[6].uid===s[38].creatorUID&&ye(s);return{c(){r&&r.c(),e=M()},l(t){r&&r.l(t),e=M()},m(t,l){r&&r.m(t,l),h(t,e,l),o=!0},p(t,l){t[6].uid===t[38].creatorUID?r?(r.p(t,l),l[0]&64|l[1]&128&&b(r,1)):(r=ye(t),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(H(),g(r,1,1,()=>{r=null}),W())},i(t){o||(b(r),o=!0)},o(t){g(r),o=!1},d(t){r&&r.d(t),t&&p(e)}}}function Ot(s){let e,o,r=s[38]&&De(s);return{c(){r&&r.c(),e=q()},l(t){r&&r.l(t),e=O(t)},m(t,l){r&&r.m(t,l),h(t,e,l),o=!0},p(t,l){t[38]?r?(r.p(t,l),l[1]&128&&b(r,1)):(r=De(t),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(H(),g(r,1,1,()=>{r=null}),W())},i(t){o||(b(r),o=!0)},o(t){g(r),o=!1},d(t){r&&r.d(t),t&&p(e)}}}function Ie(s,e){let o,r,t;return r=new pt({props:{dbPath:e[10]+e[35],$$slots:{default:[Ot,({boardDoc:l,fetchStrokes:n,listenToStrokes:a,strokesArray:i,handleNewlyDrawnStroke:u,deleteAllStrokesFromDb:d})=>({38:l,39:n,40:a,41:i,42:u,43:d}),({boardDoc:l,fetchStrokes:n,listenToStrokes:a,strokesArray:i,handleNewlyDrawnStroke:u,deleteAllStrokesFromDb:d})=>[0,(l?128:0)|(n?256:0)|(a?512:0)|(i?1024:0)|(u?2048:0)|(d?4096:0)]]},$$scope:{ctx:e}}}),{key:s,first:null,c(){o=M(),N(r.$$.fragment),this.h()},l(l){o=M(),U(r.$$.fragment,l),this.h()},h(){this.first=o},m(l,n){h(l,o,n),A(r,l,n),t=!0},p(l,n){e=l;const a={};n[0]&2&&(a.dbPath=e[10]+e[35]),n[0]&963|n[1]&71552&&(a.$$scope={dirty:n,ctx:e}),r.$set(a)},i(l){t||(b(r.$$.fragment,l),t=!0)},o(l){g(r.$$.fragment,l),t=!1},d(l){l&&p(o),S(r,l)}}}function Vt(s){let e,o,r=s[1]&&ve(s);return{c(){r&&r.c(),e=M()},l(t){r&&r.l(t),e=M()},m(t,l){r&&r.m(t,l),h(t,e,l),o=!0},p(t,l){t[1]?r?(r.p(t,l),l[0]&2&&b(r,1)):(r=ve(t),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(H(),g(r,1,1,()=>{r=null}),W())},i(t){o||(b(r),o=!0)},o(t){g(r),o=!1},d(t){r&&r.d(t),t&&p(e)}}}async function xt({page:s}){return{props:{classID:s.params.class,roomID:s.params.room}}}function E(s){return s.charAt(s.length-1)==="?"}function ae(s){return s.askerName&&s.dateAsked&&s.askerUID}function Ft(s,e,o){let r,t,l,n,a;ee(s,vt,_=>o(6,t=_)),ee(s,wt,_=>o(7,l=_)),ee(s,Dt,_=>o(8,n=_)),ee(s,be,_=>o(9,a=_));let{classID:i}=e,{roomID:u}=e,d,f;const c=`classes/${i}/blackboards/`,w=`classes/${i}/rooms/`;let D="",P=5,Q,$=5;t.uid||kt("/");async function m({srcElement:_}){const{value:v}=_,T={name:v};!E(f.name)&&E(v)&&!ae(f)?R():D&&!E(v)?ie():!E(v)&&ae(f)?G():Q&&E(v)&&ae(f)&&Ne(),await K(r,T)}function R(){o(3,P=5),o(2,D=setInterval(()=>{o(3,P-=1),P===0&&(Ue(),Ae(),ie())},1e3))}function G(){o(5,$=5),o(4,Q=setInterval(()=>{o(5,$-=1),$===0&&Re()},1e3))}function Re(){K(r,{dateResolved:new Date().toISOString()})}function Ne(){clearTimeout(Q),o(4,Q="")}function ie(){clearTimeout(D),o(2,D="")}function Ue(){K(r,{askerName:t.name||"Beaver #999",askerUID:t.uid,dateAsked:new Date().toISOString()})}async function Ae(){const _=[],v=Xe(),T=Ye(v,"sendTextMessage"),C=Ze(X(),"users"),J=xe(C,et("willReceiveText","==",!0)),F=await tt(J);if(F.docs)for(const oe of F.docs){console.log("phoneNumber =",oe.data().phoneNumber);try{oe.id!==t.uid&&_.push(T({content:`${t.name} asked: "${f.name||"Fake question here"}"`,toWho:oe.data().phoneNumber}))}catch(Be){alert(Be)}}await Promise.all(_),console.log("success, sent all texts.")}async function ue({detail:_},v){const T=te(X(),c+v);await K(T,{description:_})}Ke(async()=>{rt(r,_=>{o(1,f=me({id:_.id},_.data()))})});async function Se(){o(1,f=await bt(w+u))}async function fe(_,v){const T=$e(),C=he(T,`audio/${gt()}`);await ot(C,_);const J=await st(C),F=te(X(),c+v);await K(F,{creatorUID:t.uid,creatorPhoneNumber:t.phoneNumber,date:new Date().toISOString(),audioDownloadURL:J,audioRefFullPath:C.fullPath}),be.set("pre_record")}async function ce({id:_,audioRefFullPath:v},T){const C=[],J=te(X(),c+_);if(v){const F=he($e(),v);C.push(lt(F))}C.push(K(J,{creator:Z(),creatorPhoneNumber:Z(),date:Z(),audioDownloadURL:Z(),audioRefFullPath:Z()})),C.push(T()),await Promise.all(C)}const Me=_=>m(_),Pe=(_,v)=>ue(v,_),Ce=(_,v)=>ce(_,v),Te=()=>d.setOpen(!0);function Le(_){nt[_?"unshift":"push"](()=>{d=_,o(0,d)})}const je=(_,v)=>_(v.detail.newStroke),ze=(_,v)=>fe(v.detail.audioBlob,_);return s.$$set=_=>{"classID"in _&&o(15,i=_.classID),"roomID"in _&&o(16,u=_.roomID)},s.$$.update=()=>{s.$$.dirty[0]&65536&&(r=te(X(),w+u)),s.$$.dirty[0]&65536&&Se()},[d,f,D,P,Q,$,t,l,n,a,c,m,ue,fe,ce,i,u,Me,Pe,Ce,Te,Le,je,ze]}class er extends Oe{constructor(e){super();Ve(this,e,Ft,Vt,Fe,{classID:15,roomID:16},null,[-1,-1])}}export{er as default,xt as load};
