var Be=Object.defineProperty;var ae=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var se=(o,e,l)=>e in o?Be(o,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[e]=l,ie=(o,e)=>{for(var l in e||(e={}))Me.call(e,l)&&se(o,l,e[l]);if(ae)for(var l of ae(e))je.call(e,l)&&se(o,l,e[l]);return o};import{S as ze,i as Te,s as Oe,e as V,j as R,k as z,c as q,a as W,m as I,n as T,d as $,K as Y,W as fe,f as k,o as y,L as H,a1 as le,az as Ce,aA as Qe,w as P,x as m,u as b,v as U,l as A,D as Z,A as Ee,N as F,O as K,Z as Ve,a2 as X,r as B,a0 as qe,aE as We,av as O,ag as He,aF as ue,aG as ce,aH as Fe,aI as Ke,aJ as Ge,Q as Je,aK as Ye,Y as Ze,_ as Xe,t as w,g as D,h as x,aL as G,b as J,a8 as C,M as ne,al as xe,a4 as et,am as tt,an as lt}from"../../../chunks/vendor-60dbf49e.js";import{R as nt,T as ot,a as rt,B as at,D as st}from"../../../chunks/TextAreaAutoResizing-1a438244.js";import{a as it}from"../../../chunks/database-63c5af1e.js";import{g as ft}from"../../../chunks/canvas-5b7b0e82.js";import{g as pe,k as ee,u as ut,c as ct,a as pt,r as dt}from"../../../chunks/store-cb2cb867.js";import"../../../chunks/preload-helper-ec9aa979.js";import"../../../chunks/singletons-12a22614.js";function _t(o,e){let l=document.getElementById(e);return l==null||l.appendChild(o),{destroy(){o.remove()}}}function de(o,e){let l=new IntersectionObserver(t=>{for(const n of t)if(n.isIntersecting){e(),l.unobserve(o);return}},{root:null,threshold:.2,rootMargin:"0px"});l.observe(o)}function _e(o,e,l){const t=o.slice();return t[28]=e[l],t}function me(o){let e,l,t,n,r,a=[],s=new Map,i,f,c,u,h,L;l=new Ve({props:{disabled:M(o[1].name)&&o[1].askerUID&&o[4].uid!==o[1].askerUID,value:o[1].name,class:"room-title",style:`width: ${o[5]}px;`,$$slots:{helper:[kt]},$$scope:{ctx:o}}}),l.$on("input",o[16]);let N=o[1].blackboards;const j=d=>d[28];for(let d=0;d<N.length;d+=1){let p=_e(o,N,d),g=j(p);s.set(g,a[d]=ve(g,p))}return f=new X({props:{variant:"unelevated",color:"#2e3131",style:`width: ${o[5]}px; margin-top: 40px`,$$slots:{default:[jt]},$$scope:{ctx:o}}}),f.$on("click",o[13]),{c(){e=V("div"),R(l.$$.fragment),t=z(),n=V("div"),r=z();for(let d=0;d<a.length;d+=1)a[d].c();i=z(),R(f.$$.fragment),this.h()},l(d){e=q(d,"DIV",{style:!0});var p=W(e);I(l.$$.fragment,p),t=T(p),n=q(p,"DIV",{style:!0}),W(n).forEach($),r=T(p);for(let g=0;g<a.length;g+=1)a[g].l(p);i=T(p),I(f.$$.fragment,p),p.forEach($),this.h()},h(){Y(n,"margin-bottom","20px"),Y(e,"padding","16px"),fe(e,"question",M(o[1].name))},m(d,p){k(d,e,p),y(l,e,null),H(e,t),H(e,n),H(e,r);for(let g=0;g<a.length;g+=1)a[g].m(e,null);H(e,i),y(f,e,null),u=!0,h||(L=le(c=_t.call(null,e,"main-content")),h=!0)},p(d,p){const g={};p[0]&18&&(g.disabled=M(d[1].name)&&d[1].askerUID&&d[4].uid!==d[1].askerUID),p[0]&2&&(g.value=d[1].name),p[0]&32&&(g.style=`width: ${d[5]}px;`),p[0]&14|p[1]&512&&(g.$$scope={dirty:p,ctx:d}),l.$set(g),p[0]&7651|p[1]&495&&(N=d[1].blackboards,B(),a=Ce(a,p,j,1,d,N,s,e,Qe,ve,i,_e),P());const Q={};p[0]&32&&(Q.style=`width: ${d[5]}px; margin-top: 40px`),p[1]&512&&(Q.$$scope={dirty:p,ctx:d}),f.$set(Q),p[0]&2&&fe(e,"question",M(d[1].name))},i(d){if(!u){m(l.$$.fragment,d);for(let p=0;p<N.length;p+=1)m(a[p]);m(f.$$.fragment,d),u=!0}},o(d){b(l.$$.fragment,d);for(let p=0;p<a.length;p+=1)b(a[p]);b(f.$$.fragment,d),u=!1},d(d){d&&$(e),U(l);for(let p=0;p<a.length;p+=1)a[p].d();U(f),h=!1,L()}}}function mt(o){let e,l=o[1].askerName+"",t,n,r=ee(o[1].dateAsked)+"",a;return{c(){e=w("Marked as question by "),t=w(l),n=w(" on "),a=w(r)},l(s){e=D(s,"Marked as question by "),t=D(s,l),n=D(s," on "),a=D(s,r)},m(s,i){k(s,e,i),k(s,t,i),k(s,n,i),k(s,a,i)},p(s,i){i[0]&2&&l!==(l=s[1].askerName+"")&&x(t,l),i[0]&2&&r!==(r=ee(s[1].dateAsked)+"")&&x(a,r)},d(s){s&&$(e),s&&$(t),s&&$(n),s&&$(a)}}}function $t(o){let e,l,t;return{c(){e=w("Pinging server members in "),l=w(o[3]),t=w(", cancel by backtracking the ?")},l(n){e=D(n,"Pinging server members in "),l=D(n,o[3]),t=D(n,", cancel by backtracking the ?")},m(n,r){k(n,e,r),k(n,l,r),k(n,t,r)},p(n,r){r[0]&8&&x(l,n[3])},d(n){n&&$(e),n&&$(l),n&&$(t)}}}function $e(o){let e,l=ee(o[1].dateResolved)+"",t;return{c(){e=w(", resolved "),t=w(l)},l(n){e=D(n,", resolved "),t=D(n,l)},m(n,r){k(n,e,r),k(n,t,r)},p(n,r){r[0]&2&&l!==(l=ee(n[1].dateResolved)+"")&&x(t,l)},d(n){n&&$(e),n&&$(t)}}}function bt(o){let e,l;function t(s,i){if(s[2])return $t;if(s[1].askerName&&s[1].askerUID&&s[1].date)return mt}let n=t(o),r=n&&n(o),a=o[1].dateResolved&&$e(o);return{c(){r&&r.c(),e=z(),a&&a.c(),l=A()},l(s){r&&r.l(s),e=T(s),a&&a.l(s),l=A()},m(s,i){r&&r.m(s,i),k(s,e,i),a&&a.m(s,i),k(s,l,i)},p(s,i){n===(n=t(s))&&r?r.p(s,i):(r&&r.d(1),r=n&&n(s),r&&(r.c(),r.m(e.parentNode,e))),s[1].dateResolved?a?a.p(s,i):(a=$e(s),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},d(s){r&&r.d(s),s&&$(e),a&&a.d(s),s&&$(l)}}}function kt(o){let e,l;return e=new qe({props:{slot:"helper",persistent:!0,$$slots:{default:[bt]},$$scope:{ctx:o}}}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),l=!0},p(t,n){const r={};n[0]&14|n[1]&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function be(o){let e,l,t,n,r,a=o[34]&&ke(o);const s=[gt,ht],i=[];function f(c,u){return c[31].audioDownloadURL?0:1}return l=f(o),t=i[l]=s[l](o),{c(){a&&a.c(),e=z(),t.c(),n=A()},l(c){a&&a.l(c),e=T(c),t.l(c),n=A()},m(c,u){a&&a.m(c,u),k(c,e,u),i[l].m(c,u),k(c,n,u),r=!0},p(c,u){c[34]?a?(a.p(c,u),u[1]&8&&m(a,1)):(a=ke(c),a.c(),m(a,1),a.m(e.parentNode,e)):a&&(B(),b(a,1,1,()=>{a=null}),P());let h=l;l=f(c),l===h?i[l].p(c,u):(B(),b(i[h],1,1,()=>{i[h]=null}),P(),t=i[l],t?t.p(c,u):(t=i[l]=s[l](c),t.c()),m(t,1),t.m(n.parentNode,n))},i(c){r||(m(a),m(t),r=!0)},o(c){b(a),b(t),r=!1},d(c){a&&a.d(c),c&&$(e),i[l].d(c),c&&$(n)}}}function ke(o){let e,l;function t(...n){return o[17](o[28],...n)}return e=new ot({props:{value:o[31].description||""}}),e.$on("input",t),{c(){R(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){y(e,n,r),l=!0},p(n,r){o=n;const a={};r[1]&1&&(a.value=o[31].description||""),e.$set(a)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),l=!1},d(n){U(e,n)}}}function ht(o){let e,l,t,n,r,a,s=o[34]&&he(o);return{c(){e=V("div"),s&&s.c(),this.h()},l(i){e=q(i,"DIV",{style:!0});var f=W(e);s&&s.l(f),f.forEach($),this.h()},h(){J(e,"style",l=`width: ${o[5]}px; height: ${o[6]}px; position: relative`)},m(i,f){k(i,e,f),s&&s.m(e,null),n=!0,r||(a=le(t=de.call(null,e,o[33])),r=!0)},p(i,f){i[34]?s?(s.p(i,f),f[1]&8&&m(s,1)):(s=he(i),s.c(),m(s,1),s.m(e,null)):s&&(B(),b(s,1,1,()=>{s=null}),P()),(!n||f[0]&96&&l!==(l=`width: ${i[5]}px; height: ${i[6]}px; position: relative`))&&J(e,"style",l),t&&C(t.update)&&f[1]&4&&t.update.call(null,i[33])},i(i){n||(m(s),n=!0)},o(i){b(s),n=!1},d(i){i&&$(e),s&&s.d(),r=!1,a()}}}function gt(o){let e,l,t,n,r,a,s=o[34]&&ge(o);return{c(){e=V("div"),s&&s.c(),this.h()},l(i){e=q(i,"DIV",{style:!0});var f=W(e);s&&s.l(f),f.forEach($),this.h()},h(){J(e,"style",l=`width: ${o[5]}px; height: ${o[6]+80}px; position: relative`)},m(i,f){k(i,e,f),s&&s.m(e,null),n=!0,r||(a=le(t=de.call(null,e,o[32])),r=!0)},p(i,f){i[34]?s?(s.p(i,f),f[1]&8&&m(s,1)):(s=ge(i),s.c(),m(s,1),s.m(e,null)):s&&(B(),b(s,1,1,()=>{s=null}),P()),(!n||f[0]&96&&l!==(l=`width: ${i[5]}px; height: ${i[6]+80}px; position: relative`))&&J(e,"style",l),t&&C(t.update)&&f[1]&2&&t.update.call(null,i[32])},i(i){n||(m(s),n=!0)},o(i){b(s),n=!1},d(i){i&&$(e),s&&s.d(),r=!1,a()}}}function he(o){let e,l;function t(...n){return o[21](o[28],...n)}return e=new rt({props:{$$slots:{default:[St,({startRecording:n,stopRecording:r,currentTime:a})=>({37:n,38:r,39:a}),({startRecording:n,stopRecording:r,currentTime:a})=>[0,(n?64:0)|(r?128:0)|(a?256:0)]]},$$scope:{ctx:o}}}),e.$on("record-end",t),{c(){R(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){y(e,n,r),l=!0},p(n,r){o=n;const a={};r[0]&129|r[1]&1e3&&(a.$$scope={dirty:r,ctx:o}),e.$set(a)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),l=!1},d(n){U(e,n)}}}function vt(o){let e;return{c(){e=w("Uploading...")},l(l){e=D(l,"Uploading...")},m(l,t){k(l,e,t)},p:ne,i:ne,o:ne,d(l){l&&$(e)}}}function wt(o){let e,l;return e=new X({props:{color:"secondary",$$slots:{default:[Rt]},$$scope:{ctx:o}}}),e.$on("click",function(){C(o[38])&&o[38].apply(this,arguments)}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),l=!0},p(t,n){o=t;const r={};n[1]&512&&(r.$$scope={dirty:n,ctx:o}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Dt(o){let e,l,t,n,r,a,s,i,f;e=new X({props:{style:"color: #f5862c",$$slots:{default:[It]},$$scope:{ctx:o}}}),e.$on("click",function(){C(o[37])&&o[37].apply(this,arguments)});let c={style:"left: 100px; top: 50px; width: 300px",$$slots:{default:[Nt]},$$scope:{ctx:o}};return a=new xe({props:c}),o[19](a),{c(){R(e.$$.fragment),l=z(),t=V("span"),n=w("more_horiz"),r=z(),R(a.$$.fragment),this.h()},l(u){I(e.$$.fragment,u),l=T(u),t=q(u,"SPAN",{class:!0,style:!0});var h=W(t);n=D(h,"more_horiz"),h.forEach($),r=T(u),I(a.$$.fragment,u),this.h()},h(){J(t,"class","material-icons"),Y(t,"margin-right","10px"),Y(t,"color","white")},m(u,h){y(e,u,h),k(u,l,h),k(u,t,h),H(t,n),k(u,r,h),y(a,u,h),s=!0,i||(f=et(t,"click",o[18]),i=!0)},p(u,h){o=u;const L={};h[1]&512&&(L.$$scope={dirty:h,ctx:o}),e.$set(L);const N={};h[1]&544&&(N.$$scope={dirty:h,ctx:o}),a.$set(N)},i(u){s||(m(e.$$.fragment,u),m(a.$$.fragment,u),s=!0)},o(u){b(e.$$.fragment,u),b(a.$$.fragment,u),s=!1},d(u){U(e,u),u&&$(l),u&&$(t),u&&$(r),o[19](null),U(a,u),i=!1,f()}}}function Rt(o){let e;return{c(){e=w("Stop")},l(l){e=D(l,"Stop")},m(l,t){k(l,e,t)},d(l){l&&$(e)}}}function It(o){let e;return{c(){e=w("Record")},l(l){e=D(l,"Record")},m(l,t){k(l,e,t)},d(l){l&&$(e)}}}function yt(o){let e;return{c(){e=w("Wipe board")},l(l){e=D(l,"Wipe board")},m(l,t){k(l,e,t)},d(l){l&&$(e)}}}function Ut(o){let e,l;return e=new lt({props:{$$slots:{default:[yt]},$$scope:{ctx:o}}}),e.$on("SMUI:action",function(){C(o[36])&&o[36].apply(this,arguments)}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),l=!0},p(t,n){o=t;const r={};n[1]&512&&(r.$$scope={dirty:n,ctx:o}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Nt(o){let e,l;return e=new tt({props:{$$slots:{default:[Ut]},$$scope:{ctx:o}}}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),l=!0},p(t,n){const r={};n[1]&544&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function At(o){let e,l,t,n;const r=[Dt,wt,vt],a=[];function s(i,f){return i[7]==="pre_record"?0:i[7]==="mid_record"?1:2}return e=s(o),l=a[e]=r[e](o),{c(){l.c(),t=A()},l(i){l.l(i),t=A()},m(i,f){a[e].m(i,f),k(i,t,f),n=!0},p(i,f){let c=e;e=s(i),e===c?a[e].p(i,f):(B(),b(a[c],1,1,()=>{a[c]=null}),P(),l=a[e],l?l.p(i,f):(l=a[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t))},i(i){n||(m(l),n=!0)},o(i){b(l),n=!1},d(i){a[e].d(i),i&&$(t)}}}function St(o){let e,l;function t(...n){return o[20](o[35],...n)}return e=new at({props:{strokesArray:o[34],currentTime:o[39],$$slots:{default:[At]},$$scope:{ctx:o}}}),e.$on("stroke-drawn",t),{c(){R(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,r){y(e,n,r),l=!0},p(n,r){o=n;const a={};r[1]&8&&(a.strokesArray=o[34]),r[1]&256&&(a.currentTime=o[39]),r[0]&129|r[1]&736&&(a.$$scope={dirty:r,ctx:o}),e.$set(a)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),l=!1},d(n){U(e,n)}}}function ge(o){let e,l;return e=new st({props:{strokesArray:o[34],audioDownloadURL:o[31].audioDownloadURL,$$slots:{default:[Pt]},$$scope:{ctx:o}}}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),l=!0},p(t,n){const r={};n[1]&8&&(r.strokesArray=t[34]),n[1]&1&&(r.audioDownloadURL=t[31].audioDownloadURL),n[1]&513&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Lt(o){let e;return{c(){e=w("Revert to board")},l(l){e=D(l,"Revert to board")},m(l,t){k(l,e,t)},d(l){l&&$(e)}}}function Pt(o){let e,l;return e=new X({props:{$$slots:{default:[Lt]},$$scope:{ctx:o}}}),e.$on("click",function(){C(o[12](o[31]))&&o[12](o[31]).apply(this,arguments)}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),l=!0},p(t,n){o=t;const r={};n[1]&512&&(r.$$scope={dirty:n,ctx:o}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Bt(o){let e,l,t=o[31]&&be(o);return{c(){t&&t.c(),e=A()},l(n){t&&t.l(n),e=A()},m(n,r){t&&t.m(n,r),k(n,e,r),l=!0},p(n,r){n[31]?t?(t.p(n,r),r[1]&1&&m(t,1)):(t=be(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(B(),b(t,1,1,()=>{t=null}),P())},i(n){l||(m(t),l=!0)},o(n){b(t),l=!1},d(n){t&&t.d(n),n&&$(e)}}}function ve(o,e){let l,t,n;return t=new nt({props:{dbPath:e[8]+e[28],$$slots:{default:[Bt,({boardDoc:r,fetchStrokes:a,listenToStrokes:s,strokesArray:i,handleNewlyDrawnStroke:f,deleteAllStrokesFromDb:c})=>({31:r,32:a,33:s,34:i,35:f,36:c}),({boardDoc:r,fetchStrokes:a,listenToStrokes:s,strokesArray:i,handleNewlyDrawnStroke:f,deleteAllStrokesFromDb:c})=>[0,(r?1:0)|(a?2:0)|(s?4:0)|(i?8:0)|(f?16:0)|(c?32:0)]]},$$scope:{ctx:e}}}),{key:o,first:null,c(){l=A(),R(t.$$.fragment),this.h()},l(r){l=A(),I(t.$$.fragment,r),this.h()},h(){this.first=l},m(r,a){k(r,l,a),y(t,r,a),n=!0},p(r,a){e=r;const s={};a[0]&2&&(s.dbPath=e[8]+e[28]),a[0]&227|a[1]&559&&(s.$$scope={dirty:a,ctx:e}),t.$set(s)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){b(t.$$.fragment,r),n=!1},d(r){r&&$(l),U(t,r)}}}function Mt(o){let e;return{c(){e=w("New blackboard")},l(l){e=D(l,"New blackboard")},m(l,t){k(l,e,t)},d(l){l&&$(e)}}}function jt(o){let e,l;return e=new We({props:{$$slots:{default:[Mt]},$$scope:{ctx:o}}}),{c(){R(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){y(e,t,n),l=!0},p(t,n){const r={};n[1]&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function zt(o){let e,l,t=o[1]&&me(o);return{c(){t&&t.c(),e=A()},l(n){t&&t.l(n),e=A()},m(n,r){t&&t.m(n,r),k(n,e,r),l=!0},p(n,r){n[1]?t?(t.p(n,r),r[0]&2&&m(t,1)):(t=me(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(B(),b(t,1,1,()=>{t=null}),P())},i(n){l||(m(t),l=!0)},o(n){b(t),l=!1},d(n){t&&t.d(n),n&&$(e)}}}async function Ft({page:o}){return{props:{classID:o.params.class,roomID:o.params.room}}}function M(o){return o.charAt(o.length-1)==="?"}function we(o){return o.askerName&&o.dateAsked&&o.askerUID}function Tt(o,e,l){let t,n,r,a,s;Z(o,ut,_=>l(4,n=_)),Z(o,ct,_=>l(5,r=_)),Z(o,pt,_=>l(6,a=_)),Z(o,dt,_=>l(7,s=_));let{classID:i}=e,{roomID:f}=e,c,u;const h=`classes/${i}/blackboards/`,L=`classes/${i}/rooms/`;let N="",j=5;n.uid||ft("/");async function d({srcElement:_}){const{value:v}=_,S={name:v};!M(u.name)&&M(v)&&!we(u)?p():N&&!M(v)?g():!M(v)&&we(u)&&(console.log("resolving"),S.dateResolved=new Date().toISOString()),await O(t,S)}function p(){l(3,j=5),l(2,N=setInterval(()=>{l(3,j-=1),j===0&&(Q(),g())},1e3))}function g(){clearTimeout(N),l(2,N="")}function Q(){O(t,{askerName:n.name||"Beaver #999",askerUID:n.uid,dateAsked:new Date().toISOString()})}async function oe({detail:_},v){const S=F(K(),h+v);await O(S,{description:_})}Ee(async()=>{He(t,_=>{l(1,u=ie({id:_.id},_.data()))})});async function De(){l(1,u=await it(L+f))}async function re(_,v){const S=ue(),E=ce(S,`audio/${pe()}`);await Fe(E,_);const te=await Ke(E),Pe=F(K(),h+v);await O(Pe,{creatorUID:n.uid,creatorPhoneNumber:n.phoneNumber,date:new Date().toISOString(),audioDownloadURL:te,audioRefFullPath:E.fullPath})}async function Re({id:_,audioRefFullPath:v}){const S=[],E=F(K(),h+_);if(v){const te=ce(ue(),v);S.push(Ge(te))}S.push(O(E,{creator:G(),creatorPhoneNumber:G(),date:G(),audioDownloadURL:G(),audioRefFullPath:G()})),await Promise.all(S)}async function Ie(){const _=pe(),v=F(K(),h+_);await Promise.all([Je(v,{}),O(t,{blackboards:Ye(_)})]),await Ze()}const ye=_=>d(_),Ue=(_,v)=>oe(v,_),Ne=()=>c.setOpen(!0);function Ae(_){Xe[_?"unshift":"push"](()=>{c=_,l(0,c)})}const Se=(_,v)=>_(v.detail.newStroke),Le=(_,v)=>re(v.detail.audioBlob,_);return o.$$set=_=>{"classID"in _&&l(14,i=_.classID),"roomID"in _&&l(15,f=_.roomID)},o.$$.update=()=>{o.$$.dirty[0]&32768&&(t=F(K(),L+f)),o.$$.dirty[0]&32768&&De()},[c,u,N,j,n,r,a,s,h,d,oe,re,Re,Ie,i,f,ye,Ue,Ne,Ae,Se,Le]}class Kt extends ze{constructor(e){super();Te(this,e,Tt,zt,Oe,{classID:14,roomID:15},null,[-1,-1])}}export{Kt as default,Ft as load};
