var Fe=Object.defineProperty;var he=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var ge=(r,e,o)=>e in r?Fe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o,$e=(r,e)=>{for(var o in e||(e={}))He.call(e,o)&&ge(r,o,e[o]);if(he)for(var o of he(e))Je.call(e,o)&&ge(r,o,e[o]);return r};import{S as Y,i as X,s as Z,al as We,e as k,t as q,k as j,j as O,c as T,a as E,g as U,d as _,n as M,m as z,b as S,K as p,f as v,L as I,o as P,x as $,u as w,v as L,_ as Ge,am as be,l as F,r as G,w as K,ad as Ke,an as Qe,M as oe,ao as Ye,ap as Xe,aq as Ze,aa as xe,G as re,H as ne,I as ae,J as le,D as B,af as ie,ar as et,A as ce,as as ve,at as De,au as tt,av as st,aw as ot,N as fe,O as x,Q as ue,ax as rt,U as Ie,ah as nt,ai as at,ag as we,ay as te,az as ye,a4 as ke,aA as Te,aB as Ee,a2 as lt,W as se,h as Se,aC as it,aD as ct,a8 as ft,a9 as ut}from"../../chunks/vendor-f3fe4aa6.js";import{e as me,u as mt,i as de,f as Q,g as Ce,j as ee,d as Re,a as dt,c as _t}from"../../chunks/store-35e1e792.js";import{g as pt,c as ht}from"../../chunks/canvas-5b7b0e82.js";import"../../chunks/singletons-12a22614.js";function je(r,e,o){const t=r.slice();return t[3]=e[o],t}function gt(r){let e=r[3].name+"",o,t;return{c(){o=q(e),t=j()},l(s){o=U(s,e),t=M(s)},m(s,n){v(s,o,n),v(s,t,n)},p:oe,d(s){s&&_(o),s&&_(t)}}}function Me(r){let e,o;return e=new Qe({props:{$$slots:{default:[gt]},$$scope:{ctx:r}}}),e.$on("SMUI:action",Dt),{c(){O(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){P(e,t,s),o=!0},p(t,s){const n={};s&64&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){o||($(e.$$.fragment,t),o=!0)},o(t){w(e.$$.fragment,t),o=!1},d(t){L(e,t)}}}function $t(r){let e,o,t=r[1],s=[];for(let i=0;i<t.length;i+=1)s[i]=Me(je(r,t,i));const n=i=>w(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=F()},l(i){for(let l=0;l<s.length;l+=1)s[l].l(i);e=F()},m(i,l){for(let a=0;a<s.length;a+=1)s[a].m(i,l);v(i,e,l),o=!0},p(i,l){if(l&2){t=i[1];let a;for(a=0;a<t.length;a+=1){const f=je(i,t,a);s[a]?(s[a].p(f,l),$(s[a],1)):(s[a]=Me(f),s[a].c(),$(s[a],1),s[a].m(e.parentNode,e))}for(G(),a=t.length;a<s.length;a+=1)n(a);K()}},i(i){if(!o){for(let l=0;l<t.length;l+=1)$(s[l]);o=!0}},o(i){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)w(s[l]);o=!1},d(i){Ke(s,i),i&&_(e)}}}function bt(r){let e,o;return e=new be({props:{$$slots:{default:[$t]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){P(e,t,s),o=!0},p(t,s){const n={};s&64&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){o||($(e.$$.fragment,t),o=!0)},o(t){w(e.$$.fragment,t),o=!1},d(t){L(e,t)}}}function vt(r){let e,o,t,s,n,i={style:"left: 100px; top: 50px; width: 300px",$$slots:{default:[bt]},$$scope:{ctx:r}};return s=new We({props:i}),r[2](s),{c(){e=k("div"),o=q("6.036"),t=j(),O(s.$$.fragment),this.h()},l(l){e=T(l,"DIV",{class:!0,style:!0});var a=E(e);o=U(a,"6.036"),a.forEach(_),t=M(l),z(s.$$.fragment,l),this.h()},h(){S(e,"class","mdc-typography--headline4"),p(e,"margin-left","6px"),p(e,"margin-top","5px"),p(e,"margin-bottom","0px"),p(e,"font-size","2.0rem")},m(l,a){v(l,e,a),I(e,o),v(l,t,a),P(s,l,a),n=!0},p(l,[a]){const f={};a&64&&(f.$$scope={dirty:a,ctx:l}),s.$set(f)},i(l){n||($(s.$$.fragment,l),n=!0)},o(l){w(s.$$.fragment,l),n=!1},d(l){l&&_(e),l&&_(t),r[2](null),L(s,l)}}}const Dt=()=>{};function It(r,e,o){let t=[{name:"6.006"},{name:"6.036"}],s;function n(i){Ge[i?"unshift":"push"](()=>{s=i,o(0,s)})}return[s,t,n]}class wt extends Y{constructor(e){super();X(this,e,It,vt,Z,{})}}function yt(r){let e;const o=r[0].default,t=re(o,r,r[1],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&2)&&ne(t,o,s,s[1],e?le(o,s[1],n,null):ae(s[1]),null)},i(s){e||($(t,s),e=!0)},o(s){w(t,s),e=!1},d(s){t&&t.d(s)}}}function kt(r){let e,o,t,s,n,i,l,a,f,c,m,u,d;return l=new wt({}),u=new be({props:{$$slots:{default:[yt]},$$scope:{ctx:r}}}),{c(){e=k("div"),o=k("div"),t=k("img"),n=j(),i=k("div"),O(l.$$.fragment),a=j(),f=k("div"),c=q("Intro to Machine Learning"),m=j(),O(u.$$.fragment),this.h()},l(h){e=T(h,"DIV",{style:!0,class:!0});var b=E(e);o=T(b,"DIV",{style:!0,class:!0});var y=E(o);t=T(y,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),n=M(y),i=T(y,"DIV",{class:!0});var N=E(i);z(l.$$.fragment,N),a=M(N),f=T(N,"DIV",{class:!0,style:!0});var H=E(f);c=U(H,"Intro to Machine Learning"),H.forEach(_),N.forEach(_),y.forEach(_),b.forEach(_),m=M(h),z(u.$$.fragment,h),this.h()},h(){xe(t.src,s="/logo.png")||S(t,"src",s),S(t,"width","60"),S(t,"height","54"),S(t,"alt","web-logo"),S(t,"class","svelte-f4hgt4"),S(f,"class","mdc-typography--caption svelte-f4hgt4"),p(f,"margin-left","8px"),p(f,"margin-bottom","12px"),p(f,"opacity","70%"),S(i,"class","svelte-f4hgt4"),p(o,"display","flex"),p(o,"align-items","center"),S(o,"class","svelte-f4hgt4"),p(e,"margin-bottom","12px"),p(e,"padding-top","2px"),p(e,"padding-bottom","0"),p(e,"padding-left","8px"),S(e,"class","mdc-elevation--z"+4+" svelte-f4hgt4")},m(h,b){v(h,e,b),I(e,o),I(o,t),I(o,n),I(o,i),P(l,i,null),I(i,a),I(i,f),I(f,c),v(h,m,b),P(u,h,b),d=!0},p(h,b){const y={};b&2&&(y.$$scope={dirty:b,ctx:h}),u.$set(y)},i(h){d||($(l.$$.fragment,h),$(u.$$.fragment,h),d=!0)},o(h){w(l.$$.fragment,h),w(u.$$.fragment,h),d=!1},d(h){h&&_(e),L(l),h&&_(m),L(u,h)}}}function Tt(r){let e,o;return e=new Ze({props:{$$slots:{default:[kt]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){P(e,t,s),o=!0},p(t,s){const n={};s&2&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){o||($(e.$$.fragment,t),o=!0)},o(t){w(e.$$.fragment,t),o=!1},d(t){L(e,t)}}}function Et(r){let e,o;return{c(){e=k("main"),o=k("div"),this.h()},l(t){e=T(t,"MAIN",{class:!0,style:!0});var s=E(e);o=T(s,"DIV",{id:!0,style:!0,class:!0});var n=E(o);n.forEach(_),s.forEach(_),this.h()},h(){S(o,"id","main-content"),p(o,"height","100vh"),S(o,"class","svelte-f4hgt4"),S(e,"class","main-content svelte-f4hgt4"),p(e,"padding","0")},m(t,s){v(t,e,s),I(e,o)},d(t){t&&_(e)}}}function St(r){let e,o,t,s,n;return o=new Ye({props:{style:"overflow-y: scroll; height: 100%;",class:"mdc-elevation--z"+5,$$slots:{default:[Tt]},$$scope:{ctx:r}}}),s=new Xe({props:{class:"app-content",$$slots:{default:[Et]},$$scope:{ctx:r}}}),{c(){e=k("div"),O(o.$$.fragment),t=j(),O(s.$$.fragment),this.h()},l(i){e=T(i,"DIV",{class:!0});var l=E(e);z(o.$$.fragment,l),t=M(l),z(s.$$.fragment,l),l.forEach(_),this.h()},h(){S(e,"class","drawer-container svelte-f4hgt4")},m(i,l){v(i,e,l),P(o,e,null),I(e,t),P(s,e,null),n=!0},p(i,[l]){const a={};l&2&&(a.$$scope={dirty:l,ctx:i}),o.$set(a);const f={};l&2&&(f.$$scope={dirty:l,ctx:i}),s.$set(f)},i(i){n||($(o.$$.fragment,i),$(s.$$.fragment,i),n=!0)},o(i){w(o.$$.fragment,i),w(s.$$.fragment,i),n=!1},d(i){i&&_(e),L(o),L(s)}}}function Ct(r,e,o){let{$$slots:t={},$$scope:s}=e;return r.$$set=n=>{"$$scope"in n&&o(1,s=n.$$scope)},[t,s]}class Rt extends Y{constructor(e){super();X(this,e,Ct,St,Z,{})}}function jt(r,e,o){let t,s,n,i;B(r,me,h=>o(10,s=h)),B(r,mt,h=>o(3,n=h)),B(r,de,h=>o(4,i=h));let{classID:l}=e,{roomID:a}=e,f,c,m,u,d;return ie(()=>{d&&d(),i&&(et(c),de.set(!1)),u&&u.cancel()}),ce(()=>{Q.set({}),m=ve(De(),".info/connected"),d=tt(m,async h=>{if(h.val()===!0){const b=Ce();f=ve(De(),`/class/${l}/room/${a}/participants/${b}`),u=ot(f),u.set({hasDisconnected:!0,userUID:n.uid}),o(2,c=fe(x(),`classes/${l}/participants/${b}`)),ue(c,{uid:n.uid,browserTabID:s,currentRoomID:a,name:t}),de.set(!0)}})}),r.$$set=h=>{"classID"in h&&o(0,l=h.classID),"roomID"in h&&o(1,a=h.roomID)},r.$$.update=()=>{r.$$.dirty&8&&(t=n.name?n.name:"Beaver #"),r.$$.dirty&30&&i&&n.name&&st(c,{currentRoomID:a,name:n.name})},[l,a,c,n,i]}class Mt extends Y{constructor(e){super();X(this,e,jt,null,Z,{classID:0,roomID:1})}}const At="0ac8a98cf9bef2827f5beef5cd36c4f42a442863ce904a2469de12caa9097fa1",Nt=r=>({activeSpeakerID:r&2,firestoreIDToDailyID:r&1}),Ae=r=>({toggleMic:r[2],activeSpeakerID:r[1],firestoreIDToDailyID:r[0]});function Vt(r){let e;const o=r[8].default,t=re(o,r,r[7],Ae);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,[n]){t&&t.p&&(!e||n&131)&&ne(t,o,s,s[7],e?le(o,s[7],n,Nt):ae(s[7]),Ae)},i(s){e||($(t,s),e=!0)},o(s){w(t,s),e=!1},d(s){t&&t.d(s)}}}async function Ot({track:r,participant:e}){switch(r.kind){case"audio":if(e.local)return;{const o=document.createElement("audio");o.srcObject=new MediaStream([r]),o.setAttribute("id","audio"+e.user_id),o.setAttribute("playsinline",!0),o.setAttribute("autoplay",!0),document.getElementById("container-for-audio-elements").appendChild(o)}break}}async function zt({track:r,participant:e}){const o=document.getElementById(r.id);o&&(o.srcObject=null,o.remove())}function Pt(r,e,o){let t,s,n;B(r,ee,g=>o(10,t=g)),B(r,me,g=>o(11,s=g)),B(r,Re,g=>o(12,n=g));let{$$slots:i={},$$scope:l}=e,{roomID:a}=e,f,c,m,u,d,h="";ie(()=>{u==="connected"&&V()}),ce(async()=>{await b(),y()});async function b(){return new Promise(async g=>{if(!n){const R=await navigator.mediaDevices.getUserMedia({audio:!0});Re.set(R)}const[C]=n.getAudioTracks();f=rt.createCallObject({audioSource:C,videoSource:!1});const J=["participant-joined","participant-updated","participant-left"];for(const R of J)f.on(R,()=>{ee.set(f.participants());const W={};for(const Be of Object.keys(t)){const _e=t[Be],pe=_e.user_name;pe&&(W[pe]=_e.user_id)}o(0,c=W)});f.on("track-started",Ot),f.on("track-stopped",zt),f.on("active-speaker-change",({activeSpeaker:R})=>{o(1,h=R.peerId)}),f.on("load-attempt-failed",({action:R,errorMsg:W})=>{alert(R+": "+W)}),f.on("error",({action:R,errorMsg:W})=>{alert(R+": "+W)}),g()})}async function y(){o(4,m="not_connected"),o(5,u="connecting"),o(6,d=a);const{url:g}=await N();g&&(await H(g),o(4,m="connecting"),o(5,u="connected"))}function N(){return new Promise(async g=>{try{const C=2*60*60,R=await(await fetch("https://api.daily.co/v1/rooms",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer "+At},body:JSON.stringify({name:a,properties:{exp:Math.round(Date.now()/1e3)+C,eject_at_room_exp:!0,start_video_off:!0}})})).json();R.error==="invalid-request-error"&&R.info===`a room named ${a} already exists`?g({url:`https://feynman.daily.co/${a}`}):g(R)}catch(C){console.error(C),alert(C),reject({url:""})}})}function H(g){return new Promise(async(C,J)=>{try{await f.join({url:g,userName:s}),C()}catch(R){console.log("error)"),alert(R),J()}})}function D(){console.log("toggling mic"),f.setLocalAudio(!t.local.audio),ee.set(f.participants())}function V(){const g=document.querySelectorAll("audio");for(const C of g)C.remove();A(),o(4,m="connected"),o(5,u="not_connected")}function A(){f.leave(),ee.set({}),o(1,h="")}return r.$$set=g=>{"roomID"in g&&o(3,a=g.roomID),"$$scope"in g&&o(7,l=g.$$scope)},r.$$.update=()=>{r.$$.dirty&120&&m==="connecting"&&u==="connected"&&d!==a&&(console.log("part 1: user moved to a different room before voice chat connected"),V()),r.$$.dirty&120&&m==="connected"&&u==="not_connected"&&d!==a&&(console.log("part 2: ready to join the new room"),y())},[c,h,D,a,m,u,d,l,i]}class Lt extends Y{constructor(e){super();X(this,e,Pt,Vt,Z,{roomID:3})}}function Ne(r,e,o){const t=r.slice();return t[19]=e[o],t}function Ve(r,e,o){const t=r.slice();return t[22]=e[o],t}function qt(r){let e,o;return{c(){e=k("div"),o=q("(no title)"),this.h()},l(t){e=T(t,"DIV",{style:!0});var s=E(e);o=U(s,"(no title)"),s.forEach(_),this.h()},h(){p(e,"margin-bottom","2px")},m(t,s){v(t,e,s),I(e,o)},p:oe,d(t){t&&_(e)}}}function Ut(r){let e,o=r[19].name+"",t;return{c(){e=k("div"),t=q(o),this.h()},l(s){e=T(s,"DIV",{style:!0,class:!0});var n=E(e);t=U(n,o),n.forEach(_),this.h()},h(){p(e,"white-space","nowrap"),p(e,"overflow","hidden"),p(e,"text-overflow","ellipsis margin-bottom: 2px"),S(e,"class","svelte-twz7iw"),se(e,"question-item",r[19].name.charAt(r[19].name.length-1)==="?")},m(s,n){v(s,e,n),I(e,t)},p(s,n){n&4&&o!==(o=s[19].name+"")&&Se(t,o),n&4&&se(e,"question-item",s[19].name.charAt(s[19].name.length-1)==="?")},d(s){s&&_(e)}}}function Oe(r){let e=[],o=new Map,t,s,n=r[3][r[19].id];const i=l=>l[22].browserTabID;for(let l=0;l<n.length;l+=1){let a=Ve(r,n,l),f=i(a);o.set(f,e[l]=qe(f,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=F()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);t=F()},m(l,a){for(let f=0;f<e.length;f+=1)e[f].m(l,a);v(l,t,a),s=!0},p(l,a){a&458812&&(n=l[3][l[19].id],G(),e=Te(e,a,i,1,l,n,o,t.parentNode,Ee,qe,t,Ve),K())},i(l){if(!s){for(let a=0;a<n.length;a+=1)$(e[a]);s=!0}},o(l){for(let a=0;a<e.length;a+=1)w(e[a]);s=!1},d(l){for(let a=0;a<e.length;a+=1)e[a].d(l);l&&_(t)}}}function ze(r){let e,o,t,s=r[22].browserTabID===r[5]&&Pe(r),n=r[4][r[18][r[22].browserTabID]]&&Le(r);return{c(){s&&s.c(),e=j(),n&&n.c(),o=F()},l(i){s&&s.l(i),e=M(i),n&&n.l(i),o=F()},m(i,l){s&&s.m(i,l),v(i,e,l),n&&n.m(i,l),v(i,o,l),t=!0},p(i,l){i[22].browserTabID===i[5]?s?(s.p(i,l),l&44&&$(s,1)):(s=Pe(i),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(G(),w(s,1,1,()=>{s=null}),K()),i[4][i[18][i[22].browserTabID]]?n?n.p(i,l):(n=Le(i),n.c(),n.m(o.parentNode,o)):n&&(n.d(1),n=null)},i(i){t||($(s),t=!0)},o(i){w(s),t=!1},d(i){s&&s.d(i),i&&_(e),n&&n.d(i),i&&_(o)}}}function Pe(r){let e,o,t,s,n,i,l;t=new ut({props:{checked:r[4].local.audio,style:"margin: 0 !important"}});function a(m,u){return m[4].local.audio?Ft:Bt}let f=a(r),c=f(r);return{c(){e=k("div"),o=k("div"),O(t.$$.fragment),s=j(),c.c(),this.h()},l(m){e=T(m,"DIV",{style:!0});var u=E(e);o=T(u,"DIV",{style:!0});var d=E(o);z(t.$$.fragment,d),d.forEach(_),s=M(u),c.l(u),u.forEach(_),this.h()},h(){p(o,"margin-right","0"),p(o,"margin-left","auto"),p(o,"padding-top","3px"),p(e,"display","flex"),p(e,"align-items","center"),p(e,"margin-right","0"),p(e,"margin-left","auto")},m(m,u){v(m,e,u),I(e,o),P(t,o,null),I(e,s),c.m(e,null),n=!0,i||(l=ke(o,"click",it(ct(function(){ft(r[17])&&r[17].apply(this,arguments)}))),i=!0)},p(m,u){r=m;const d={};u&16&&(d.checked=r[4].local.audio),t.$set(d),f!==(f=a(r))&&(c.d(1),c=f(r),c&&(c.c(),c.m(e,null)))},i(m){n||($(t.$$.fragment,m),n=!0)},o(m){w(t.$$.fragment,m),n=!1},d(m){m&&_(e),L(t),c.d(),i=!1,l()}}}function Bt(r){let e,o;return{c(){e=k("div"),o=q("muted"),this.h()},l(t){e=T(t,"DIV",{style:!0});var s=E(e);o=U(s,"muted"),s.forEach(_),this.h()},h(){p(e,"font-size","0.8rem"),p(e,"margin-left","6px"),p(e,"color","red")},m(t,s){v(t,e,s),I(e,o)},d(t){t&&_(e)}}}function Ft(r){let e,o;return{c(){e=k("div"),o=q("voice on"),this.h()},l(t){e=T(t,"DIV",{style:!0});var s=E(e);o=U(s,"voice on"),s.forEach(_),this.h()},h(){p(e,"font-size","0.8rem"),p(e,"margin-left","6px"),p(e,"color","green")},m(t,s){v(t,e,s),I(e,o)},d(t){t&&_(e)}}}function Le(r){let e;function o(n,i){return n[4][n[18][n[22].browserTabID]].audio?Jt:Ht}let t=o(r),s=t(r);return{c(){s.c(),e=F()},l(n){s.l(n),e=F()},m(n,i){s.m(n,i),v(n,e,i)},p(n,i){t===(t=o(n))&&s?s.p(n,i):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s.d(n),n&&_(e)}}}function Ht(r){let e,o;return{c(){e=k("span"),o=q("mic_off"),this.h()},l(t){e=T(t,"SPAN",{class:!0,style:!0});var s=E(e);o=U(s,"mic_off"),s.forEach(_),this.h()},h(){S(e,"class","material-icons"),p(e,"margin-right","0"),p(e,"margin-left","auto"),p(e,"font-size","1.2rem"),p(e,"color","red")},m(t,s){v(t,e,s),I(e,o)},p:oe,d(t){t&&_(e)}}}function Jt(r){let e,o;return{c(){e=k("span"),o=q("mic"),this.h()},l(t){e=T(t,"SPAN",{class:!0,style:!0});var s=E(e);o=U(s,"mic"),s.forEach(_),this.h()},h(){S(e,"class","material-icons"),p(e,"margin-right","0"),p(e,"margin-left","auto"),p(e,"font-size","1.2rem"),p(e,"color",r[18]&&r[18][r[22].browserTabID]&&r[18][r[22].browserTabID]===r[16]?"white":"")},m(t,s){v(t,e,s),I(e,o)},p(t,s){s&327692&&p(e,"color",t[18]&&t[18][t[22].browserTabID]&&t[18][t[22].browserTabID]===t[16]?"white":"")},d(t){t&&_(e)}}}function qe(r,e){let o,t,s=e[22].name+"",n,i,l=Object.keys(e[4]).length>0,a,f,c=l&&ze(e);return{key:r,first:null,c(){o=k("div"),t=k("div"),n=q(s),i=j(),c&&c.c(),a=j(),this.h()},l(m){o=T(m,"DIV",{style:!0});var u=E(o);t=T(u,"DIV",{style:!0,class:!0});var d=E(t);n=U(d,s),d.forEach(_),i=M(u),c&&c.l(u),a=M(u),u.forEach(_),this.h()},h(){p(t,"font-size","0.7rem"),p(t,"margin-left","6px"),S(t,"class","svelte-twz7iw"),se(t,"speaking",e[18]&&e[18][e[22].browserTabID]&&e[18][e[22].browserTabID]===e[16]),p(o,"display","flex"),p(o,"align-items","center"),this.first=o},m(m,u){v(m,o,u),I(o,t),I(t,n),I(o,i),c&&c.m(o,null),I(o,a),f=!0},p(m,u){e=m,(!f||u&12)&&s!==(s=e[22].name+"")&&Se(n,s),u&327692&&se(t,"speaking",e[18]&&e[18][e[22].browserTabID]&&e[18][e[22].browserTabID]===e[16]),u&16&&(l=Object.keys(e[4]).length>0),l?c?(c.p(e,u),u&16&&$(c,1)):(c=ze(e),c.c(),$(c,1),c.m(o,a)):c&&(G(),w(c,1,1,()=>{c=null}),K())},i(m){f||($(c),f=!0)},o(m){w(c),f=!1},d(m){m&&_(o),c&&c.d()}}}function Ue(r,e){let o,t,s,n,i,l,a,f;function c(b,y){if(b[19].name)return Ut;if(b[19].name==="")return qt}let m=c(e),u=m&&m(e),d=e[3][e[19].id]&&Oe(e);function h(){return e[8](e[19])}return{key:r,first:null,c(){o=k("div"),t=k("div"),u&&u.c(),s=j(),d&&d.c(),i=j(),this.h()},l(b){o=T(b,"DIV",{style:!0});var y=E(o);t=T(y,"DIV",{class:!0,style:!0});var N=E(t);u&&u.l(N),s=M(N),d&&d.l(N),N.forEach(_),i=M(y),y.forEach(_),this.h()},h(){S(t,"class",n=""+(ye(e[19].id===e[1]?"selected":"")+" svelte-twz7iw")),p(t,"padding","6px 10px 6px 8px"),p(t,"opacity","90%"),p(t,"border-radius","5px"),p(o,"padding","6px"),this.first=o},m(b,y){v(b,o,y),I(o,t),u&&u.m(t,null),I(t,s),d&&d.m(t,null),I(o,i),l=!0,a||(f=ke(o,"click",h),a=!0)},p(b,y){e=b,m===(m=c(e))&&u?u.p(e,y):(u&&u.d(1),u=m&&m(e),u&&(u.c(),u.m(t,s))),e[3][e[19].id]?d?(d.p(e,y),y&12&&$(d,1)):(d=Oe(e),d.c(),$(d,1),d.m(t,null)):d&&(G(),w(d,1,1,()=>{d=null}),K()),(!l||y&6&&n!==(n=""+(ye(e[19].id===e[1]?"selected":"")+" svelte-twz7iw")))&&S(t,"class",n)},i(b){l||($(d),l=!0)},o(b){w(d),l=!1},d(b){b&&_(o),u&&u.d(),d&&d.d(),a=!1,f()}}}function Wt(r){let e,o,t;return{c(){e=k("span"),o=q("add"),t=q(`\r
      New room`),this.h()},l(s){e=T(s,"SPAN",{class:!0,style:!0});var n=E(e);o=U(n,"add"),n.forEach(_),t=U(s,`\r
      New room`),this.h()},h(){S(e,"class","material-icons"),p(e,"margin-right","4px")},m(s,n){v(s,e,n),I(e,o),v(s,t,n)},d(s){s&&_(e),s&&_(t)}}}function Gt(r){let e=[],o=new Map,t,s,n,i=r[2];const l=a=>a[19].id+a[1];for(let a=0;a<i.length;a+=1){let f=Ne(r,i,a),c=l(f);o.set(c,e[a]=Ue(c,f))}return s=new lt({props:{style:"width: 100%; margin: auto;",$$slots:{default:[Wt]},$$scope:{ctx:r}}}),s.$on("click",r[6]),{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=j(),O(s.$$.fragment)},l(a){for(let f=0;f<e.length;f+=1)e[f].l(a);t=M(a),z(s.$$.fragment,a)},m(a,f){for(let c=0;c<e.length;c+=1)e[c].m(a,f);v(a,t,f),P(s,a,f),n=!0},p(a,f){f&458815&&(i=a[2],G(),e=Te(e,f,l,1,a,i,o,t.parentNode,Ee,Ue,t,Ne),K());const c={};f&512&&(c.$$scope={dirty:f,ctx:a}),s.$set(c)},i(a){if(!n){for(let f=0;f<i.length;f+=1)$(e[f]);$(s.$$.fragment,a),n=!0}},o(a){for(let f=0;f<e.length;f+=1)w(e[f]);w(s.$$.fragment,a),n=!1},d(a){for(let f=0;f<e.length;f+=1)e[f].d(a);a&&_(t),L(s,a)}}}function Kt(r){let e,o;return e=new Rt({props:{$$slots:{default:[Gt]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){P(e,t,s),o=!0},p(t,s){const n={};s&459327&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){o||($(e.$$.fragment,t),o=!0)},o(t){w(e.$$.fragment,t),o=!1},d(t){L(e,t)}}}function Qt(r){let e,o,t,s,n,i,l;e=new Mt({props:{classID:r[0],roomID:r[1]}}),n=new Lt({props:{roomID:r[1],$$slots:{default:[Kt,({activeSpeakerID:c,toggleMic:m,firestoreIDToDailyID:u})=>({16:c,17:m,18:u}),({activeSpeakerID:c,toggleMic:m,firestoreIDToDailyID:u})=>(c?65536:0)|(m?131072:0)|(u?262144:0)]},$$scope:{ctx:r}}});const a=r[7].default,f=re(a,r,r[9],null);return{c(){O(e.$$.fragment),o=j(),t=k("div"),s=j(),O(n.$$.fragment),i=j(),f&&f.c(),this.h()},l(c){z(e.$$.fragment,c),o=M(c),t=T(c,"DIV",{id:!0});var m=E(t);m.forEach(_),s=M(c),z(n.$$.fragment,c),i=M(c),f&&f.l(c),this.h()},h(){S(t,"id","container-for-audio-elements")},m(c,m){P(e,c,m),v(c,o,m),v(c,t,m),v(c,s,m),P(n,c,m),v(c,i,m),f&&f.m(c,m),l=!0},p(c,[m]){const u={};m&1&&(u.classID=c[0]),m&2&&(u.roomID=c[1]),e.$set(u);const d={};m&2&&(d.roomID=c[1]),m&459327&&(d.$$scope={dirty:m,ctx:c}),n.$set(d),f&&f.p&&(!l||m&512)&&ne(f,a,c,c[9],l?le(a,c[9],m,null):ae(c[9]),null)},i(c){l||($(e.$$.fragment,c),$(n.$$.fragment,c),$(f,c),l=!0)},o(c){w(e.$$.fragment,c),w(n.$$.fragment,c),w(f,c),l=!1},d(c){L(e,c),c&&_(o),c&&_(t),c&&_(s),L(n,c),c&&_(i),f&&f.d(c)}}}function ss({page:r}){return{props:{classID:r.params.class,roomID:r.params.room}}}function Yt(r,e,o){let t,s,n;B(r,Q,D=>o(3,t=D)),B(r,ee,D=>o(4,s=D)),B(r,me,D=>o(5,n=D));let{$$slots:i={},$$scope:l}=e,{classID:a}=e,{roomID:f}=e,c=[];ie(()=>{for(const D of h)D();window.removeEventListener("resize",d)}),ce(()=>{console.log("__layout mounted, but should only be done once"),window.addEventListener("resize",d),d()});async function m(){for(const C of c)if(C.name===""){alert("A room is still untitled - use it before creating a new one");return}const D=Ce(),V=`classes/${a}/`,A=fe(x(),V+`rooms/${D}`),g=fe(x(),V+`blackboards/${D}`);await Promise.all([ue(A,{name:"",blackboards:[D],date:new Date().toISOString()}),ue(g,{})])}function u(){const{height:D,width:V}=ht();dt.set(D),_t.set(V)}function d(){setTimeout(u,100)}let h=[];const b=Ie(x(),`classes/${a}/participants`),y=Ie(x(),`classes/${a}/rooms`),N=nt(y,at("date","asc"));h.push(we(N,D=>{const V=[];D.forEach(A=>{V.push($e({id:A.id,ref:A.ref.path},A.data()))}),o(2,c=V)})),h.push(we(b,D=>{D.docChanges().forEach(V=>{const A=V.doc.data(),g=A.currentRoomID;switch(V.type){case"added":t[g]||te(Q,t[g]=[],t),t[g].push(A);break;case"modified":for(const C of Object.keys(t))for(const J of t[C])J.browserTabID===A.browserTabID&&te(Q,t[C]=t[C].filter(R=>R.browserTabID!==A.browserTabID),t);t[g]||te(Q,t[g]=[],t),t[g].push(A);break;case"removed":te(Q,t[g]=t[g].filter(C=>C.browserTabID!==A.browserTabID),t);break}})}));const H=D=>pt(`/${a}/${D.id}`);return r.$$set=D=>{"classID"in D&&o(0,a=D.classID),"roomID"in D&&o(1,f=D.roomID),"$$scope"in D&&o(9,l=D.$$scope)},[a,f,c,t,s,n,m,i,H,l]}class os extends Y{constructor(e){super();X(this,e,Yt,Qt,Z,{classID:0,roomID:1})}}export{os as default,ss as load};
