var w=Object.defineProperty;var b=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var k=(i,e,t)=>e in i?w(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,f=(i,e)=>{for(var t in e||(e={}))v.call(e,t)&&k(i,t,e[t]);if(b)for(var t of b(e))A.call(e,t)&&k(i,t,e[t]);return i};import{S as E,i as S,s as $,l as g,f as y,u as _,w as C,x as p,d as h,D as j,A as D,r as H,E as M,F as O,G as q,H as x,I as z,J as B,e as G,t as I,c as J,a as K,g as L,K as P,L as m,M as R,O as Q,N as F,P as T}from"../chunks/vendor-6cbcc546.js";import{i as V}from"../chunks/database-07664a5b.js";import{h as N,u}from"../chunks/store-f9fd671f.js";function W(i){let e;const t=i[2].default,s=q(t,i,i[1],null);return{c(){s&&s.c()},l(a){s&&s.l(a)},m(a,l){s&&s.m(a,l),e=!0},p(a,l){s&&s.p&&(!e||l&2)&&x(s,t,a,a[1],e?B(t,a[1],l,null):z(a[1]),null)},i(a){e||(p(s,a),e=!0)},o(a){_(s,a),e=!1},d(a){s&&s.d(a)}}}function X(i){let e,t;return{c(){e=G("h2"),t=I("Fetching user data...")},l(s){e=J(s,"H2",{});var a=K(e);t=L(a,"Fetching user data..."),a.forEach(h)},m(s,a){y(s,e,a),P(e,t)},p:m,i:m,o:m,d(s){s&&h(e)}}}function Y(i){let e,t,s,a;const l=[X,W],o=[];function c(n,r){return n[0]?1:0}return e=c(i),t=o[e]=l[e](i),{c(){t.c(),s=g()},l(n){t.l(n),s=g()},m(n,r){o[e].m(n,r),y(n,s,r),a=!0},p(n,[r]){let d=e;e=c(n),e===d?o[e].p(n,r):(H(),_(o[d],1,1,()=>{o[d]=null}),C(),t=o[e],t?t.p(n,r):(t=o[e]=l[e](n),t.c()),p(t,1),t.m(s.parentNode,s))},i(n){a||(p(t),a=!0)},o(n){_(t),a=!1},d(n){o[e].d(n),n&&h(s)}}}function Z(i,e,t){let s;j(i,N,o=>t(0,s=o));let{$$slots:a={},$$scope:l}=e;return D(()=>{V(),M(O(),async o=>{if(N.set(!0),o){u.set({phoneNumber:o.phoneNumber,uid:o.uid,pencilColors:[]});const c=R(Q(),"users/"+o.uid);let n=await F(c);if(n.exists())console.log("user exists, data =",n.data()),u.set(f({id:n.id},n.data()));else{await T(c,{name:o.displayName,uid:o.uid,phoneNumber:o.phoneNumber,pencilColors:["white","#F69637","#A9F8BD","#6EE2EA"]});let r=await F(c);u.set(f({id:r.id},r.data()))}}else u.set({}),console.log("user is not logged in")})}),i.$$set=o=>{"$$scope"in o&&t(1,l=o.$$scope)},[s,l,a]}class ae extends E{constructor(e){super();S(this,e,Z,Y,$,{})}}export{ae as default};
