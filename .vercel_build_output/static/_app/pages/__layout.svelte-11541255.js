var w=Object.defineProperty;var b=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var k=(i,e,t)=>e in i?w(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,_=(i,e)=>{for(var t in e||(e={}))v.call(e,t)&&k(i,t,e[t]);if(b)for(var t of b(e))A.call(e,t)&&k(i,t,e[t]);return i};import{S as E,i as S,s as $,l as g,f as y,u as f,w as C,x as p,d as h,D as j,A as D,r as H,E as M,F as O,G as q,H as x,I as z,J as B,e as G,t as I,c as J,a as K,g as L,K as P,L as m,M as R,O as Q,N as F,P as T}from"../chunks/vendor-2c66186c.js";import{i as V}from"../chunks/database-2896136c.js";import{h as N,u}from"../chunks/store-addbe31a.js";function W(i){let e;const t=i[2].default,a=q(t,i,i[1],null);return{c(){a&&a.c()},l(s){a&&a.l(s)},m(s,l){a&&a.m(s,l),e=!0},p(s,l){a&&a.p&&(!e||l&2)&&x(a,t,s,s[1],e?B(t,s[1],l,null):z(s[1]),null)},i(s){e||(p(a,s),e=!0)},o(s){f(a,s),e=!1},d(s){a&&a.d(s)}}}function X(i){let e,t;return{c(){e=G("h3"),t=I("Fetching user data...")},l(a){e=J(a,"H3",{});var s=K(e);t=L(s,"Fetching user data..."),s.forEach(h)},m(a,s){y(a,e,s),P(e,t)},p:m,i:m,o:m,d(a){a&&h(e)}}}function Y(i){let e,t,a,s;const l=[X,W],o=[];function c(n,r){return n[0]?1:0}return e=c(i),t=o[e]=l[e](i),{c(){t.c(),a=g()},l(n){t.l(n),a=g()},m(n,r){o[e].m(n,r),y(n,a,r),s=!0},p(n,[r]){let d=e;e=c(n),e===d?o[e].p(n,r):(H(),f(o[d],1,1,()=>{o[d]=null}),C(),t=o[e],t?t.p(n,r):(t=o[e]=l[e](n),t.c()),p(t,1),t.m(a.parentNode,a))},i(n){s||(p(t),s=!0)},o(n){f(t),s=!1},d(n){o[e].d(n),n&&h(a)}}}function Z(i,e,t){let a;j(i,N,o=>t(0,a=o));let{$$slots:s={},$$scope:l}=e;return D(()=>{V(),M(O(),async o=>{if(N.set(!0),o){u.set({phoneNumber:o.phoneNumber,uid:o.uid,pencilColors:[]});const c=R(Q(),"users/"+o.uid);let n=await F(c);if(n.exists())console.log("user exists, data =",n.data()),u.set(_({id:n.id},n.data()));else{await T(c,{name:o.displayName,uid:o.uid,phoneNumber:o.phoneNumber,pencilColors:["white","#F69637","#A9F8BD","#6EE2EA"]});let r=await F(c);u.set(_({id:r.id},r.data()))}}else u.set({})})}),i.$$set=o=>{"$$scope"in o&&t(1,l=o.$$scope)},[a,l,s]}class se extends E{constructor(e){super();S(this,e,Z,Y,$,{})}}export{se as default};
