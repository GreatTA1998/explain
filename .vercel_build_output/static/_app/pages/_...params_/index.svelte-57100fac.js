var ee=Object.defineProperty;var z=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var E=(s,e,t)=>e in s?ee(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,R=(s,e)=>{for(var t in e||(e={}))te.call(e,t)&&E(s,t,e[t]);if(z)for(var t of z(e))oe.call(e,t)&&E(s,t,e[t]);return s};import{S as le,i as re,s as ne,e as V,c as U,a as B,d as p,f as b,E as N,x as _,l as k,j as v,m as y,o as D,u as m,v as w,w as $,a3 as se,Y as F,an as ae,k as I,n as A,A as ie,T as S,U as q,r as g,a4 as ce,t as fe,g as ue,h as _e,ar as me,a0 as P,ae as de}from"../../chunks/vendor-0c80fc2b.js";import{a as M,f as pe,d as T}from"../../chunks/database-54ba85fa.js";import he from"../components/FetchBlackboard.svelte-08ddb26e.js";import Y from"../components/Blackboard.svelte-d3faf034.js";import be from"../components/DoodleVideo.svelte-2e05eedc.js";import ke from"../components/DoodleAnimation.svelte-91020a8a.js";import{p as Q}from"../../chunks/actions-c4e01d0d.js";import{s as $e}from"../../chunks/store-0b3d8ee1.js";import{r as ge}from"../../chunks/singletons-12a22614.js";import"../../chunks/canvasHelpers-a780b7c6.js";const ve=ge,ye=De;async function De(s,e){return ve.goto(s,e,[])}function Z(s,e,t){const o=s.slice();return o[11]=e[t],o}function C(s,e,t){const o=s.slice();return o[2]=e[t],o}function H(s){let e,t,o,l,r,n=s[1],f=[];for(let i=0;i<n.length;i+=1)f[i]=G(C(s,n,i));const a=i=>m(f[i],1,1,()=>{f[i]=null});return{c(){e=V("div");for(let i=0;i<f.length;i+=1)f[i].c()},l(i){e=U(i,"DIV",{});var c=B(e);for(let u=0;u<f.length;u+=1)f[u].l(c);c.forEach(p)},m(i,c){b(i,e,c);for(let u=0;u<f.length;u+=1)f[u].m(e,null);o=!0,l||(r=N(t=Q.call(null,e,"side-drawer-list")),l=!0)},p(i,c){if(c&11){n=i[1];let u;for(u=0;u<n.length;u+=1){const d=C(i,n,u);f[u]?(f[u].p(d,c),_(f[u],1)):(f[u]=G(d),f[u].c(),_(f[u],1),f[u].m(e,null))}for(g(),u=n.length;u<f.length;u+=1)a(u);$()}},i(i){if(!o){for(let c=0;c<n.length;c+=1)_(f[c]);o=!0}},o(i){f=f.filter(Boolean);for(let c=0;c<f.length;c+=1)m(f[c]);o=!1},d(i){i&&p(e),se(f,i),l=!1,r()}}}function O(s){let e,t;function o(){return s[5](s[2])}return e=new ce({props:{selected:s[2].id===s[0],$$slots:{default:[we]},$$scope:{ctx:s}}}),e.$on("click",o),{c(){v(e.$$.fragment)},l(l){y(e.$$.fragment,l)},m(l,r){D(e,l,r),t=!0},p(l,r){s=l;const n={};r&3&&(n.selected=s[2].id===s[0]),r&1048578&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){m(e.$$.fragment,l),t=!1},d(l){w(e,l)}}}function we(s){let e=s[2].name+"",t,o;return{c(){t=fe(e),o=I()},l(l){t=ue(l,e),o=A(l)},m(l,r){b(l,t,r),b(l,o,r)},p(l,r){r&2&&e!==(e=l[2].name+"")&&_e(t,e)},d(l){l&&p(t),l&&p(o)}}}function G(s){let e,t,o=s[2].name&&O(s);return{c(){o&&o.c(),e=k()},l(l){o&&o.l(l),e=k()},m(l,r){o&&o.m(l,r),b(l,e,r),t=!0},p(l,r){l[2].name?o?(o.p(l,r),r&2&&_(o,1)):(o=O(l),o.c(),_(o,1),o.m(e.parentNode,e)):o&&(g(),m(o,1,1,()=>{o=null}),$())},i(l){t||(_(o),t=!0)},o(l){m(o),t=!1},d(l){o&&o.d(l),l&&p(e)}}}function J(s){let e,t=[],o=new Map,l,r,n,f,a=s[2].blackboards;const i=c=>c[11];for(let c=0;c<a.length;c+=1){let u=Z(s,a,c),d=i(u);o.set(d,t[c]=W(d,u))}return{c(){e=V("div");for(let c=0;c<t.length;c+=1)t[c].c();this.h()},l(c){e=U(c,"DIV",{style:!0});var u=B(e);for(let d=0;d<t.length;d+=1)t[d].l(u);u.forEach(p),this.h()},h(){F(e,"height","100vh")},m(c,u){b(c,e,u);for(let d=0;d<t.length;d+=1)t[d].m(e,null);r=!0,n||(f=N(l=Q.call(null,e,"main-content")),n=!0)},p(c,u){u&245764&&(a=c[2].blackboards,g(),t=ae(t,u,i,1,c,a,o,e,me,W,null,Z),$())},i(c){if(!r){for(let u=0;u<a.length;u+=1)_(t[u]);r=!0}},o(c){for(let u=0;u<t.length;u+=1)m(t[u]);r=!1},d(c){c&&p(e);for(let u=0;u<t.length;u+=1)t[u].d();n=!1,f()}}}function je(s){let e,t,o,l;const r=[Re,Pe,Ae],n=[];function f(a,i){return a[14].audioDownloadURL?0:a[14].creator?1:2}return e=f(s),t=n[e]=r[e](s),{c(){t.c(),o=k()},l(a){t.l(a),o=k()},m(a,i){n[e].m(a,i),b(a,o,i),l=!0},p(a,i){let c=e;e=f(a),e===c?n[e].p(a,i):(g(),m(n[c],1,1,()=>{n[c]=null}),$(),t=n[e],t?t.p(a,i):(t=n[e]=r[e](a),t.c()),_(t,1),t.m(o.parentNode,o))},i(a){l||(_(t),l=!0)},o(a){m(t),l=!1},d(a){n[e].d(a),a&&p(o)}}}function Ie(s){let e,t,o,l,r,n,f,a=s[16]&&K();return o=new Y({props:{strokesArray:[]}}),{c(){a&&a.c(),e=I(),t=V("div"),v(o.$$.fragment),this.h()},l(i){a&&a.l(i),e=A(i),t=U(i,"DIV",{style:!0});var c=B(t);y(o.$$.fragment,c),c.forEach(p),this.h()},h(){F(t,"height","500px")},m(i,c){a&&a.m(i,c),b(i,e,c),b(i,t,c),D(o,t,null),r=!0,n||(f=N(l=Be.call(null,t,s[15])),n=!0)},p(i,c){i[16]?a||(a=K(),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),l&&de(l.update)&&c&32768&&l.update.call(null,i[15])},i(i){r||(_(o.$$.fragment,i),r=!0)},o(i){m(o.$$.fragment,i),r=!1},d(i){a&&a.d(i),i&&p(e),i&&p(t),w(o),n=!1,f()}}}function Ae(s){let e,t;return e=new Y({props:{strokesArray:s[17]}}),{c(){v(e.$$.fragment)},l(o){y(e.$$.fragment,o)},m(o,l){D(e,o,l),t=!0},p(o,l){const r={};l&131072&&(r.strokesArray=o[17]),e.$set(r)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){m(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function Pe(s){let e,t;return e=new ke({props:{strokesArray:s[17]}}),{c(){v(e.$$.fragment)},l(o){y(e.$$.fragment,o)},m(o,l){D(e,o,l),t=!0},p(o,l){const r={};l&131072&&(r.strokesArray=o[17]),e.$set(r)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){m(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function Re(s){let e,t;return e=new be({props:{strokesArray:s[17],audioDownloadURL:s[14].audioDownloadURL}}),{c(){v(e.$$.fragment)},l(o){y(e.$$.fragment,o)},m(o,l){D(e,o,l),t=!0},p(o,l){const r={};l&131072&&(r.strokesArray=o[17]),l&16384&&(r.audioDownloadURL=o[14].audioDownloadURL),e.$set(r)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){m(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function K(s){return{c:P,l:P,m:P,d:P}}function Ve(s){let e,t,o,l;const r=[Ie,je],n=[];function f(a,i){return a[17]?a[14]?1:-1:0}return~(e=f(s))&&(t=n[e]=r[e](s)),{c(){t&&t.c(),o=I()},l(a){t&&t.l(a),o=A(a)},m(a,i){~e&&n[e].m(a,i),b(a,o,i),l=!0},p(a,i){let c=e;e=f(a),e===c?~e&&n[e].p(a,i):(t&&(g(),m(n[c],1,1,()=>{n[c]=null}),$()),~e?(t=n[e],t?t.p(a,i):(t=n[e]=r[e](a),t.c()),_(t,1),t.m(o.parentNode,o)):t=null)},i(a){l||(_(t),l=!0)},o(a){m(t),l=!1},d(a){~e&&n[e].d(a),a&&p(o)}}}function W(s,e){let t,o,l;return o=new he({props:{dbPath:X+e[11],$$slots:{default:[Ve,({boardDoc:r,fetchStrokes:n,isFetchingStrokes:f,strokesArray:a})=>({14:r,15:n,16:f,17:a}),({boardDoc:r,fetchStrokes:n,isFetchingStrokes:f,strokesArray:a})=>(r?16384:0)|(n?32768:0)|(f?65536:0)|(a?131072:0)]},$$scope:{ctx:e}}}),{key:s,first:null,c(){t=k(),v(o.$$.fragment),this.h()},l(r){t=k(),y(o.$$.fragment,r),this.h()},h(){this.first=t},m(r,n){b(r,t,n),D(o,r,n),l=!0},p(r,n){e=r;const f={};n&4&&(f.dbPath=X+e[11]),n&1294336&&(f.$$scope={dirty:n,ctx:e}),o.$set(f)},i(r){l||(_(o.$$.fragment,r),l=!0)},o(r){m(o.$$.fragment,r),l=!1},d(r){r&&p(t),w(o,r)}}}function Ue(s){let e,t,o,l=s[1].length>0&&H(s),r=s[2]&&J(s);return{c(){l&&l.c(),e=I(),r&&r.c(),t=k()},l(n){l&&l.l(n),e=A(n),r&&r.l(n),t=k()},m(n,f){l&&l.m(n,f),b(n,e,f),r&&r.m(n,f),b(n,t,f),o=!0},p(n,[f]){n[1].length>0?l?(l.p(n,f),f&2&&_(l,1)):(l=H(n),l.c(),_(l,1),l.m(e.parentNode,e)):l&&(g(),m(l,1,1,()=>{l=null}),$()),n[2]?r?(r.p(n,f),f&4&&_(r,1)):(r=J(n),r.c(),_(r,1),r.m(t.parentNode,t)):r&&(g(),m(r,1,1,()=>{r=null}),$())},i(n){o||(_(l),_(r),o=!0)},o(n){m(l),m(r),o=!1},d(n){l&&l.d(n),n&&p(e),r&&r.d(n),n&&p(t)}}}function Ce({page:s}){return{props:{myProps:s.params}}}const X="classes/lvzQqyZIV1wjwYnRV9hn/blackboards/",L="classes/lvzQqyZIV1wjwYnRV9hn/rooms/";function Be(s,e){new IntersectionObserver(o=>{for(const l of o)if(l.isIntersecting){e();return}},{root:null,threshold:.1,rootMargin:"0px"}).observe(s)}function Ne(s,e,t){let{myProps:o}=e,l,r,n,f,a;[l,r,n]=o.params.split("/"),console.log("classID =",l,r,n),ie(async()=>{f=await pe("classes/"+l),a=await M(`classes/${l}/roomTypes)`),console.log("classDoc =",f),console.log("areaDocs =",a)});let i,c=[];function u(h,j=!1){ye(`/${h}`,{replaceState:j})}$e.subscribe(async h=>{if(console.log("new user value was set =",h),h){t(1,c=await M(L));const j=await S(q(T,L+n));t(2,i=R({id:j.id},j.data())),console.log("roomDoc =",i)}});async function d(){const h=await S(q(T,L+n));t(2,i=R({id:h.id},h.data()))}const x=h=>u(`room/${h.id}`);return s.$$set=h=>{"myProps"in h&&t(4,o=h.myProps)},s.$$.update=()=>{s.$$.dirty&1&&d()},[n,c,i,u,o,x]}class He extends le{constructor(e){super();re(this,e,Ne,Ue,ne,{myProps:4})}}export{He as default,Ce as load};
