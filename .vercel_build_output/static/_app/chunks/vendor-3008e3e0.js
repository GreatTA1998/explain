var Ow=Object.defineProperty;var Ap=Object.getOwnPropertySymbols;var Rw=Object.prototype.hasOwnProperty,Lw=Object.prototype.propertyIsEnumerable;var kp=(t,e,n)=>e in t?Ow(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,at=(t,e)=>{for(var n in e||(e={}))Rw.call(e,n)&&kp(t,n,e[n]);if(Ap)for(var n of Ap(e))Lw.call(e,n)&&kp(t,n,e[n]);return t};function Bt(){}function U(t,e){for(const n in e)t[n]=e[n];return t}function Op(t){return t()}function Rp(){return Object.create(null)}function Ge(t){t.forEach(Op)}function qe(t){return typeof t=="function"}function We(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ha;function Gj(t,e){return Ha||(Ha=document.createElement("a")),Ha.href=e,t===Ha.href}function Nw(t){return Object.keys(t).length===0}function Mw(t,...e){if(t==null)return Bt;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Pw(t,e,n){t.$$.on_destroy.push(Mw(e,n))}function we(t,e,n,i){if(t){const r=Lp(t,e,n,i);return t[0](r)}}function Lp(t,e,n,i){return t[1]&&i?U(n.ctx.slice(),t[1](i(e))):n.ctx}function Te(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function Ce(t,e,n,i,r,s){if(r){const o=Lp(e,n,i,s);t.p(o,r)}}function Se(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function ze(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function ne(t,e){const n={};e=new Set(e);for(const i in t)!e.has(i)&&i[0]!=="$"&&(n[i]=t[i]);return n}function Dw(t){const e={};for(const n in t)e[n]=!0;return e}function zj(t){return t==null?"":t}function Fw(t,e,n){return t.set(n),e}function oe(t){return t&&qe(t.destroy)?t.destroy:Bt}let qa=!1;function Uw(){qa=!0}function xw(){qa=!1}function Vw(t,e,n,i){for(;t<e;){const r=t+(e-t>>1);n(r)<=i?t=r+1:e=r}return t}function jw(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const l=[];for(let c=0;c<e.length;c++){const u=e[c];u.claim_order!==void 0&&l.push(u)}e=l}const n=new Int32Array(e.length+1),i=new Int32Array(e.length);n[0]=-1;let r=0;for(let l=0;l<e.length;l++){const c=e[l].claim_order,u=(r>0&&e[n[r]].claim_order<=c?r+1:Vw(1,r,d=>e[n[d]].claim_order,c))-1;i[l]=n[u]+1;const h=u+1;n[h]=l,r=Math.max(h,r)}const s=[],o=[];let a=e.length-1;for(let l=n[r]+1;l!=0;l=i[l-1]){for(s.push(e[l-1]);a>=l;a--)o.push(e[a]);a--}for(;a>=0;a--)o.push(e[a]);s.reverse(),o.sort((l,c)=>l.claim_order-c.claim_order);for(let l=0,c=0;l<o.length;l++){for(;c<s.length&&o[l].claim_order>=s[c].claim_order;)c++;const u=c<s.length?s[c]:null;t.insertBefore(o[l],u)}}function me(t,e){if(qa){for(jw(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function Z(t,e,n){qa&&!n?me(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function N(t){t.parentNode.removeChild(t)}function Np(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _e(t){return document.createElement(t)}function vn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Kn(t){return document.createTextNode(t)}function Ke(){return Kn(" ")}function vt(){return Kn("")}function Ze(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Bw(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Hw(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function $(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ce(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set?t[i]=e[i]:$(t,i,e[i])}function Wa(t,e){for(const n in e)$(t,n,e[n])}function ie(t){return Array.from(t.childNodes)}function qw(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function Mp(t,e,n,i,r=!1){qw(t);const s=(()=>{for(let o=t.claim_info.last_index;o<t.length;o++){const a=t[o];if(e(a)){const l=n(a);return l===void 0?t.splice(o,1):t[o]=l,r||(t.claim_info.last_index=o),a}}for(let o=t.claim_info.last_index-1;o>=0;o--){const a=t[o];if(e(a)){const l=n(a);return l===void 0?t.splice(o,1):t[o]=l,r?l===void 0&&t.claim_info.last_index--:t.claim_info.last_index=o,a}}return i()})();return s.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,s}function Pp(t,e,n,i){return Mp(t,r=>r.nodeName===e,r=>{const s=[];for(let o=0;o<r.attributes.length;o++){const a=r.attributes[o];n[a.name]||s.push(a.name)}s.forEach(o=>r.removeAttribute(o))},()=>i(e))}function ve(t,e,n){return Pp(t,e,n,_e)}function On(t,e,n){return Pp(t,e,n,vn)}function ri(t,e){return Mp(t,n=>n.nodeType===3,n=>{const i=""+e;if(n.data.startsWith(i)){if(n.data.length!==i.length)return n.splitText(i.length)}else n.data=i},()=>Kn(e),!0)}function Xe(t){return ri(t," ")}function is(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Dp(t,e){t.value=e==null?"":e}function Kj(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}function Xj(t,e,n){t.classList[n?"add":"remove"](e)}function Ww(t,e,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,!1,e),i}let Ga;function za(t){Ga=t}function Ue(){if(!Ga)throw new Error("Function called outside component initialization");return Ga}function Rn(t){Ue().$$.on_mount.push(t)}function Qj(t){Ue().$$.after_update.push(t)}function ur(t){Ue().$$.on_destroy.push(t)}function Yj(){const t=Ue();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const r=Ww(e,n);i.slice().forEach(s=>{s.call(t,r)})}}}function Ht(t,e){Ue().$$.context.set(t,e)}function cn(t){return Ue().$$.context.get(t)}function uo(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const ho=[],ue=[],Ka=[],Tu=[],Fp=Promise.resolve();let Cu=!1;function Up(){Cu||(Cu=!0,Fp.then(xp))}function Gw(){return Up(),Fp}function Su(t){Ka.push(t)}function si(t){Tu.push(t)}let Au=!1;const ku=new Set;function xp(){if(!Au){Au=!0;do{for(let t=0;t<ho.length;t+=1){const e=ho[t];za(e),zw(e.$$)}for(za(null),ho.length=0;ue.length;)ue.pop()();for(let t=0;t<Ka.length;t+=1){const e=Ka[t];ku.has(e)||(ku.add(e),e())}Ka.length=0}while(ho.length);for(;Tu.length;)Tu.pop()();Cu=!1,Au=!1,ku.clear()}}function zw(t){if(t.fragment!==null){t.update(),Ge(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Su)}}const Xa=new Set;let hr;function Ft(){hr={r:0,c:[],p:hr}}function Ut(){hr.r||Ge(hr.c),hr=hr.p}function P(t,e){t&&t.i&&(Xa.delete(t),t.i(e))}function F(t,e,n,i){if(t&&t.o){if(Xa.has(t))return;Xa.add(t),hr.c.push(()=>{Xa.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}const Kw=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Jj(t,e){F(t,1,1,()=>{e.delete(t.key)})}function Zj(t,e,n,i,r,s,o,a,l,c,u,h){let d=t.length,f=s.length,p=d;const g={};for(;p--;)g[t[p].key]=p;const m=[],y=new Map,w=new Map;for(p=f;p--;){const C=h(r,s,p),_=n(C);let I=o.get(_);I?i&&I.p(C,e):(I=c(_,C),I.c()),y.set(_,m[p]=I),_ in g&&w.set(_,Math.abs(p-g[_]))}const b=new Set,v=new Set;function O(C){P(C,1),C.m(a,u),o.set(C.key,C),u=C.first,f--}for(;d&&f;){const C=m[f-1],_=t[d-1],I=C.key,K=_.key;C===_?(u=C.first,d--,f--):y.has(K)?!o.has(I)||b.has(I)?O(C):v.has(K)?d--:w.get(I)>w.get(K)?(v.add(I),O(C)):(b.add(K),d--):(l(_,o),d--)}for(;d--;){const C=t[d];y.has(C.key)||l(C,o)}for(;f;)O(m[f-1]);return m}function Ae(t,e){const n={},i={},r={$$scope:1};let s=t.length;for(;s--;){const o=t[s],a=e[s];if(a){for(const l in o)l in a||(i[l]=1);for(const l in a)r[l]||(n[l]=a[l],r[l]=1);t[s]=a}else for(const l in o)r[l]=1}for(const o in i)o in n||(n[o]=void 0);return n}function ht(t){return typeof t=="object"&&t!==null?t:{}}function oi(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function Be(t){t&&t.c()}function it(t,e){t&&t.l(e)}function Ve(t,e,n,i){const{fragment:r,on_mount:s,on_destroy:o,after_update:a}=t.$$;r&&r.m(e,n),i||Su(()=>{const l=s.map(Op).filter(qe);o?o.push(...l):Ge(l),t.$$.on_mount=[]}),a.forEach(Su)}function je(t,e){const n=t.$$;n.fragment!==null&&(Ge(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Xw(t,e){t.$$.dirty[0]===-1&&(ho.push(t),Up(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Qe(t,e,n,i,r,s,o,a=[-1]){const l=Ga;za(t);const c=t.$$={fragment:null,ctx:null,props:s,update:Bt,not_equal:r,bound:Rp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Rp(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(h,d,...f)=>{const p=f.length?f[0]:d;return c.ctx&&r(c.ctx[h],c.ctx[h]=p)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](p),u&&Xw(t,h)),d}):[],c.update(),u=!0,Ge(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){Uw();const h=ie(e.target);c.fragment&&c.fragment.l(h),h.forEach(N)}else c.fragment&&c.fragment.c();e.intro&&P(t.$$.fragment),Ve(t,e.target,e.anchor,e.customElement),xw(),xp()}za(l)}class Ye{$destroy(){je(this,1),this.$destroy=Bt}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Nw(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const rs=[];function $j(t,e){return{subscribe:Vp(t,e).subscribe}}function Vp(t,e=Bt){let n;const i=new Set;function r(a){if(We(t,a)&&(t=a,n)){const l=!rs.length;for(const c of i)c[1](),rs.push(c,t);if(l){for(let c=0;c<rs.length;c+=2)rs[c][0](rs[c+1]);rs.length=0}}}function s(a){r(a(t))}function o(a,l=Bt){const c=[a,l];return i.add(c),i.size===1&&(n=e(r)||Bt),a(t),()=>{i.delete(c),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z=function(t,e){if(!t)throw ss(e)},ss=function(t){return new Error("Firebase Database ("+jp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)==55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)==56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Qw=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ou={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Qw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||h==null)throw Error();const d=s<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const p=c<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Yw=function(t){const e=Bp(t);return Ou.encodeByteArray(e,!0)},Ru=function(t){try{return Ou.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t){return Hp(void 0,t)}function Hp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Zw(n)||(t[n]=Hp(t[n],e[n]));return t}function Zw(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qa(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function qp(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Lu(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $w(){return Xt().indexOf("Electron/")>=0}function Wp(){const t=Xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function e1(){return Xt().indexOf("MSAppHost/")>=0}function Gp(){return jp.NODE_ADMIN===!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="FirebaseError";class Ni extends Error{constructor(e,n,i){super(n);this.code=e,this.customData=i,this.name=t1,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fo.prototype.create)}}class fo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?n1(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ni(r,a,i)}}function n1(t,e){return t.replace(i1,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const i1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t){return JSON.parse(t)}function Qt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=po(Ru(s[0])||""),n=po(Ru(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},r1=function(t){const e=zp(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},s1=function(t){const e=zp(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function os(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ya(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ja(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Za(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Kp(s)&&Kp(o)){if(!Za(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Kp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(d<<1|d>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const d=(r<<5|r>>>27)+c+l+u+i[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=d}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function a1(t,e){const n=new l1(t,e);return n.subscribe.bind(n)}class l1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");c1(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Nu),r.error===void 0&&(r.error=Nu),r.complete===void 0&&(r.complete=Nu);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function c1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nu(){}function as(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,z(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},$a=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class fi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Li;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f1(e))try{this.getOrInitializeService({instanceIdentifier:fr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=fr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fr){return this.instances.has(e)}getOptions(e=fr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(!!i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:d1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fr){return this.component?this.component.multipleInstances?e:fr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function d1(t){return t===fr?void 0:t}function f1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new h1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Je||(Je={}));const m1={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},g1=Je.INFO,_1={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},v1=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=_1[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class el{constructor(e){this.name=e,this._logLevel=g1,this._logHandler=v1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?m1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(b1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function b1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mu="@firebase/app",Xp="0.7.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new el("@firebase/app"),E1="@firebase/app-compat",I1="@firebase/analytics-compat",w1="@firebase/analytics",T1="@firebase/app-check-compat",C1="@firebase/app-check",S1="@firebase/auth",A1="@firebase/auth-compat",k1="@firebase/database",O1="@firebase/database-compat",R1="@firebase/functions",L1="@firebase/functions-compat",N1="@firebase/installations",M1="@firebase/installations-compat",P1="@firebase/messaging",D1="@firebase/messaging-compat",F1="@firebase/performance",U1="@firebase/performance-compat",x1="@firebase/remote-config",V1="@firebase/remote-config-compat",j1="@firebase/storage",B1="@firebase/storage-compat",H1="@firebase/firestore",q1="@firebase/firestore-compat",W1="firebase",G1="9.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="[DEFAULT]",z1={[Mu]:"fire-core",[E1]:"fire-core-compat",[w1]:"fire-analytics",[I1]:"fire-analytics-compat",[C1]:"fire-app-check",[T1]:"fire-app-check-compat",[S1]:"fire-auth",[A1]:"fire-auth-compat",[k1]:"fire-rtdb",[O1]:"fire-rtdb-compat",[R1]:"fire-fn",[L1]:"fire-fn-compat",[N1]:"fire-iid",[M1]:"fire-iid-compat",[P1]:"fire-fcm",[D1]:"fire-fcm-compat",[F1]:"fire-perf",[U1]:"fire-perf-compat",[x1]:"fire-rc",[V1]:"fire-rc-compat",[j1]:"fire-gcs",[B1]:"fire-gcs-compat",[H1]:"fire-fst",[q1]:"fire-fst-compat","fire-js":"fire-js",[W1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new Map,Du=new Map;function K1(t,e){try{t.container.addComponent(e)}catch(n){Pu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mi(t){const e=t.name;if(Du.has(e))return Pu.debug(`There were multiple attempts to register component ${e}.`),!1;Du.set(e,t);for(const n of tl.values())K1(n,t);return!0}function ls(t,e){return t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},nl=new fo("app","Firebase",X1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=G1;function eB(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:Qp,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw nl.create("bad-app-name",{appName:String(i)});const r=tl.get(i);if(r){if(Za(t,r.options)&&Za(n,r.config))return r;throw nl.create("duplicate-app",{appName:i})}const s=new p1(i);for(const a of Du.values())s.addComponent(a);const o=new Q1(t,n,s);return tl.set(i,o),o}function mo(t=Qp){const e=tl.get(t);if(!e)throw nl.create("no-app",{appName:t});return e}function Ln(t,e,n){var i;let r=(i=z1[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pu.warn(a.join(" "));return}Mi(new fi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t){Mi(new fi("platform-logger",e=>new y1(e),"PRIVATE")),Ln(Mu,Xp,t),Ln(Mu,Xp,"esm2017"),Ln("fire-js","")}Y1("");var J1="firebase",Z1="9.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(J1,Z1,"app");var $1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},te,Fu=Fu||{},ke=$1||self;function il(){}function Uu(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function go(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function eT(t){return Object.prototype.hasOwnProperty.call(t,xu)&&t[xu]||(t[xu]=++tT)}var xu="closure_uid_"+(1e9*Math.random()>>>0),tT=0;function nT(t,e,n){return t.call.apply(t.bind,arguments)}function iT(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function nn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?nn=nT:nn=iT,nn.apply(null,arguments)}function rl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function rn(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Pi(){this.s=this.s,this.o=this.o}var rT=0,sT={};Pi.prototype.s=!1;Pi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),rT!=0)){var t=eT(this);delete sT[t]}};Pi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Yp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Jp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const i=t.length,r=typeof t=="string"?t.split(""):t;for(let s=0;s<i;s++)s in r&&e.call(n,r[s],s,t)};function oT(t){e:{var e=JT;const n=t.length,i=typeof t=="string"?t.split(""):t;for(let r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function Zp(t){return Array.prototype.concat.apply([],arguments)}function Vu(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function sl(t){return/^[\s\xa0]*$/.test(t)}var $p=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function yn(t,e){return t.indexOf(e)!=-1}function ju(t,e){return t<e?-1:t>e?1:0}var bn;e:{var em=ke.navigator;if(em){var tm=em.userAgent;if(tm){bn=tm;break e}}bn=""}function Bu(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function nm(t){const e={};for(const n in t)e[n]=t[n];return e}var im="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rm(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<im.length;s++)n=im[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Hu(t){return Hu[" "](t),t}Hu[" "]=il;function aT(t){var e=uT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var lT=yn(bn,"Opera"),cs=yn(bn,"Trident")||yn(bn,"MSIE"),sm=yn(bn,"Edge"),qu=sm||cs,om=yn(bn,"Gecko")&&!(yn(bn.toLowerCase(),"webkit")&&!yn(bn,"Edge"))&&!(yn(bn,"Trident")||yn(bn,"MSIE"))&&!yn(bn,"Edge"),cT=yn(bn.toLowerCase(),"webkit")&&!yn(bn,"Edge");function am(){var t=ke.document;return t?t.documentMode:void 0}var ol;e:{var Wu="",Gu=function(){var t=bn;if(om)return/rv:([^\);]+)(\)|;)/.exec(t);if(sm)return/Edge\/([\d\.]+)/.exec(t);if(cs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(cT)return/WebKit\/(\S+)/.exec(t);if(lT)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Gu&&(Wu=Gu?Gu[1]:""),cs){var zu=am();if(zu!=null&&zu>parseFloat(Wu)){ol=String(zu);break e}}ol=Wu}var uT={};function hT(){return aT(function(){let t=0;const e=$p(String(ol)).split("."),n=$p("9").split("."),i=Math.max(e.length,n.length);for(let o=0;t==0&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r[0].length==0&&s[0].length==0)break;t=ju(r[1].length==0?0:parseInt(r[1],10),s[1].length==0?0:parseInt(s[1],10))||ju(r[2].length==0,s[2].length==0)||ju(r[2],s[2]),r=r[3],s=s[3]}while(t==0)}return 0<=t})}var Ku;if(ke.document&&cs){var lm=am();Ku=lm||parseInt(ol,10)||void 0}else Ku=void 0;var dT=Ku,fT=function(){if(!ke.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ke.addEventListener("test",il,e),ke.removeEventListener("test",il,e)}catch{}return t}();function un(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}un.prototype.h=function(){this.defaultPrevented=!0};function _o(t,e){if(un.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(om){e:{try{Hu(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:pT[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&_o.Z.h.call(this)}}rn(_o,un);var pT={2:"touch",3:"pen",4:"mouse"};_o.prototype.h=function(){_o.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var vo="closure_listenable_"+(1e6*Math.random()|0),mT=0;function gT(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ia=r,this.key=++mT,this.ca=this.fa=!1}function al(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ll(t){this.src=t,this.g={},this.h=0}ll.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Qu(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new gT(e,this.src,s,!!i,r),e.fa=n,t.push(e)),e};function Xu(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=Yp(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(al(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Qu(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==i)return r}return-1}var Yu="closure_lm_"+(1e6*Math.random()|0),Ju={};function cm(t,e,n,i,r){if(i&&i.once)return hm(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)cm(t,e[s],n,i,r);return null}return n=th(n),t&&t[vo]?t.N(e,n,go(i)?!!i.capture:!!i,r):um(t,e,n,!1,i,r)}function um(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=go(r)?!!r.capture:!!r,a=$u(t);if(a||(t[Yu]=a=new ll(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=_T(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)fT||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(fm(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function _T(){function t(n){return e.call(t.src,t.listener,n)}var e=vT;return t}function hm(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)hm(t,e[s],n,i,r);return null}return n=th(n),t&&t[vo]?t.O(e,n,go(i)?!!i.capture:!!i,r):um(t,e,n,!0,i,r)}function dm(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)dm(t,e[s],n,i,r);else i=go(i)?!!i.capture:!!i,n=th(n),t&&t[vo]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Qu(s,n,i,r),-1<n&&(al(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=$u(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Qu(e,n,i,r)),(n=-1<t?e[t]:null)&&Zu(n))}function Zu(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[vo])Xu(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(fm(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=$u(e))?(Xu(n,t),n.h==0&&(n.src=null,e[Yu]=null)):al(t)}}}function fm(t){return t in Ju?Ju[t]:Ju[t]="on"+t}function vT(t,e){if(t.ca)t=!0;else{e=new _o(e,this);var n=t.listener,i=t.ia||t.src;t.fa&&Zu(t),t=n.call(i,e)}return t}function $u(t){return t=t[Yu],t instanceof ll?t:null}var eh="__closure_events_fn_"+(1e9*Math.random()>>>0);function th(t){return typeof t=="function"?t:(t[eh]||(t[eh]=function(e){return t.handleEvent(e)}),t[eh])}function Yt(){Pi.call(this),this.i=new ll(this),this.P=this,this.I=null}rn(Yt,Pi);Yt.prototype[vo]=!0;Yt.prototype.removeEventListener=function(t,e,n,i){dm(this,t,e,n,i)};function sn(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,typeof e=="string")e=new un(e,t);else if(e instanceof un)e.target=e.target||t;else{var r=e;e=new un(i,t),rm(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=cl(o,i,!0,e)&&r}if(o=e.g=t,r=cl(o,i,!0,e)&&r,r=cl(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=cl(o,i,!1,e)&&r}Yt.prototype.M=function(){if(Yt.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)al(n[i]);delete t.g[e],t.h--}}this.I=null};Yt.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Yt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function cl(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Xu(t.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var nh=ke.JSON.stringify;function yT(){var t=mm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class bT{constructor(){this.h=this.g=null}add(e,n){const i=pm.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var pm=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new ET,t=>t.reset());class ET{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function IT(t){ke.setTimeout(()=>{throw t},0)}function ih(t,e){rh||wT(),sh||(rh(),sh=!0),mm.add(t,e)}var rh;function wT(){var t=ke.Promise.resolve(void 0);rh=function(){t.then(TT)}}var sh=!1,mm=new bT;function TT(){for(var t;t=yT();){try{t.h.call(t.g)}catch(n){IT(n)}var e=pm;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}sh=!1}function ul(t,e){Yt.call(this),this.h=t||1,this.g=e||ke,this.j=nn(this.kb,this),this.l=Date.now()}rn(ul,Yt);te=ul.prototype;te.da=!1;te.S=null;te.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),sn(this,"tick"),this.da&&(oh(this),this.start()))}};te.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function oh(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}te.M=function(){ul.Z.M.call(this),oh(this),delete this.g};function ah(t,e,n){if(typeof t=="function")n&&(t=nn(t,n));else if(t&&typeof t.handleEvent=="function")t=nn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ke.setTimeout(t,e||0)}function gm(t){t.g=ah(()=>{t.g=null,t.i&&(t.i=!1,gm(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class CT extends Pi{constructor(e,n){super();this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gm(this)}M(){super.M(),this.g&&(ke.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yo(t){Pi.call(this),this.h=t,this.g={}}rn(yo,Pi);var _m=[];function vm(t,e,n,i){Array.isArray(n)||(n&&(_m[0]=n.toString()),n=_m);for(var r=0;r<n.length;r++){var s=cm(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function ym(t){Bu(t.g,function(e,n){this.g.hasOwnProperty(n)&&Zu(e)},t),t.g={}}yo.prototype.M=function(){yo.Z.M.call(this),ym(this)};yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function hl(){this.g=!0}hl.prototype.Aa=function(){this.g=!1};function ST(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function AT(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function us(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+OT(t,n)+(i?" "+i:"")})}function kT(t,e){t.info(function(){return"TIMEOUT: "+e})}hl.prototype.info=function(){};function OT(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return nh(n)}catch{return e}}var mr={},bm=null;function dl(){return bm=bm||new Yt}mr.Ma="serverreachability";function Em(t){un.call(this,mr.Ma,t)}rn(Em,un);function bo(t){const e=dl();sn(e,new Em(e,t))}mr.STAT_EVENT="statevent";function Im(t,e){un.call(this,mr.STAT_EVENT,t),this.stat=e}rn(Im,un);function En(t){const e=dl();sn(e,new Im(e,t))}mr.Na="timingevent";function wm(t,e){un.call(this,mr.Na,t),this.size=e}rn(wm,un);function Eo(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ke.setTimeout(function(){t()},e)}var fl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Tm={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function lh(){}lh.prototype.h=null;function Cm(t){return t.h||(t.h=t.i())}function Sm(){}var Io={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ch(){un.call(this,"d")}rn(ch,un);function uh(){un.call(this,"c")}rn(uh,un);var hh;function pl(){}rn(pl,lh);pl.prototype.g=function(){return new XMLHttpRequest};pl.prototype.i=function(){return{}};hh=new pl;function wo(t,e,n,i){this.l=t,this.j=e,this.m=n,this.X=i||1,this.V=new yo(this),this.P=RT,t=qu?125:void 0,this.W=new ul(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Am}function Am(){this.i=null,this.g="",this.h=!1}var RT=45e3,dh={},ml={};te=wo.prototype;te.setTimeout=function(t){this.P=t};function fh(t,e,n){t.K=1,t.v=bl(pi(e)),t.s=n,t.U=!0,km(t,null)}function km(t,e){t.F=Date.now(),To(t),t.A=pi(t.v);var n=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),Um(n.h,"t",i),t.C=0,n=t.l.H,t.h=new Am,t.g=og(t.l,n?e:null,!t.s),0<t.O&&(t.L=new CT(nn(t.Ia,t,t.g),t.O)),vm(t.V,t.g,"readystatechange",t.gb),e=t.H?nm(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),bo(1),ST(t.j,t.u,t.A,t.m,t.X,t.s)}te.gb=function(t){t=t.target;const e=this.L;e&&mi(t)==3?e.l():this.Ia(t)};te.Ia=function(t){try{if(t==this.g)e:{const u=mi(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>u)&&(u!=3||qu||this.g&&(this.h.h||this.g.ga()||Qm(this.g)))){this.I||u!=4||e==7||(e==8||0>=h?bo(3):bo(2)),gl(this);var n=this.g.ba();this.N=n;t:if(Om(this)){var i=Qm(this.g);t="";var r=i.length,s=mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){gr(this),Co(this);var o="";break t}this.h.i=new ke.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,AT(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sl(a)){var c=a;break t}}c=null}if(n=c)us(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ph(this,n);else{this.i=!1,this.o=3,En(12),gr(this),Co(this);break e}}this.U?(Rm(this,u,o),qu&&this.i&&u==3&&(vm(this.V,this.W,"tick",this.fb),this.W.start())):(us(this.j,this.m,o,null),ph(this,o)),u==4&&gr(this),this.i&&!this.I&&(u==4?ng(this.l,this):(this.i=!1,To(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,En(12)):(this.o=0,En(13)),gr(this),Co(this)}}}catch{}finally{}};function Om(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function Rm(t,e,n){let i=!0,r;for(;!t.I&&t.C<n.length;)if(r=LT(t,n),r==ml){e==4&&(t.o=4,En(14),i=!1),us(t.j,t.m,null,"[Incomplete Response]");break}else if(r==dh){t.o=4,En(15),us(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else us(t.j,t.m,r,null),ph(t,r);Om(t)&&r!=ml&&r!=dh&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,En(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ch(e),e.L=!0,En(11))):(us(t.j,t.m,n,"[Invalid Chunked Response]"),gr(t),Co(t))}te.fb=function(){if(this.g){var t=mi(this.g),e=this.g.ga();this.C<e.length&&(gl(this),Rm(this,t,e),this.i&&t!=4&&To(this))}};function LT(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?ml:(n=Number(e.substring(n,i)),isNaN(n)?dh:(i+=1,i+n>e.length?ml:(e=e.substr(i,n),t.C=i+n,e)))}te.cancel=function(){this.I=!0,gr(this)};function To(t){t.Y=Date.now()+t.P,Lm(t,t.P)}function Lm(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Eo(nn(t.eb,t),e)}function gl(t){t.B&&(ke.clearTimeout(t.B),t.B=null)}te.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(kT(this.j,this.A),this.K!=2&&(bo(3),En(17)),gr(this),this.o=2,Co(this)):Lm(this,this.Y-t)};function Co(t){t.l.G==0||t.I||ng(t.l,t)}function gr(t){gl(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,oh(t.W),ym(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function ph(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||_h(n.i,t))){if(n.I=t.N,!t.J&&_h(n.i,t)&&n.G==3){try{var i=n.Ca.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0)e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Sl(n),Tl(n);else break e;Th(n),En(18)}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&n.A==0&&!n.v&&(n.v=Eo(nn(n.ab,n),6e3));if(1>=jm(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else yr(n,11)}else if((t.J||n.g==t)&&Sl(n),!sl(e))for(r=n.Ca.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.U=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.J=c[1],n.la=c[2];const u=c[3];u!=null&&(n.ma=u,n.h.info("VER="+n.ma));const h=c[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.i;!s.g&&(yn(p,"spdy")||yn(p,"quic")||yn(p,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(vh(s,s.h),s.h=null))}if(i.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.sa=g,Ct(i.F,i.D,g))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),i=n;var o=t;if(i.oa=sg(i,i.H?i.la:null,i.W),o.J){Bm(i.i,o);var a=o,l=i.K;l&&a.setTimeout(l),a.B&&(gl(a),To(a)),i.g=o}else eg(i);0<n.l.length&&Cl(n)}else c[0]!="stop"&&c[0]!="close"||yr(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?yr(n,7):Ih(n):c[0]!="noop"&&n.j&&n.j.wa(c),n.A=0)}}bo(4)}catch{}}function NT(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Uu(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function mh(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Uu(t)||typeof t=="string")Jp(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Uu(t)||typeof t=="string"){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;i=NT(t),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}}function hs(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof hs)for(n=t.T(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}te=hs.prototype;te.R=function(){gh(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};te.T=function(){return gh(this),this.g.concat()};function gh(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var i=t.g[e];_r(t.h,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.i!=t.g.length){var r={};for(n=e=0;e<t.g.length;)i=t.g[e],_r(r,i)||(t.g[n++]=i,r[i]=1),e++;t.g.length=n}}te.get=function(t,e){return _r(this.h,t)?this.h[t]:e};te.set=function(t,e){_r(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};te.forEach=function(t,e){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);t.call(e,s,r,this)}};function _r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Nm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function MT(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function vr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof vr){this.g=e!==void 0?e:t.g,_l(this,t.j),this.s=t.s,vl(this,t.i),yl(this,t.m),this.l=t.l,e=t.h;var n=new ko;n.i=e.i,e.g&&(n.g=new hs(e.g),n.h=e.h),Mm(this,n),this.o=t.o}else t&&(n=String(t).match(Nm))?(this.g=!!e,_l(this,n[1]||"",!0),this.s=So(n[2]||""),vl(this,n[3]||"",!0),yl(this,n[4]),this.l=So(n[5]||"",!0),Mm(this,n[6]||"",!0),this.o=So(n[7]||"")):(this.g=!!e,this.h=new ko(null,this.g))}vr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ao(e,Pm,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ao(e,Pm,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(Ao(n,n.charAt(0)=="/"?xT:UT,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ao(n,jT)),t.join("")};function pi(t){return new vr(t)}function _l(t,e,n){t.j=n?So(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function vl(t,e,n){t.i=n?So(e,!0):e}function yl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Mm(t,e,n){e instanceof ko?(t.h=e,BT(t.h,t.g)):(n||(e=Ao(e,VT)),t.h=new ko(e,t.g))}function Ct(t,e,n){t.h.set(e,n)}function bl(t){return Ct(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function PT(t){return t instanceof vr?pi(t):new vr(t,void 0)}function DT(t,e,n,i){var r=new vr(null,void 0);return t&&_l(r,t),e&&vl(r,e),n&&yl(r,n),i&&(r.l=i),r}function So(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ao(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,FT),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function FT(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Pm=/[#\/\?@]/g,UT=/[#\?:]/g,xT=/[#\?]/g,VT=/[#\?@]/g,jT=/#/g;function ko(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Di(t){t.g||(t.g=new hs,t.h=0,t.i&&MT(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}te=ko.prototype;te.add=function(t,e){Di(this),this.i=null,t=ds(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Dm(t,e){Di(t),e=ds(t,e),_r(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,_r(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&gh(t)))}function Fm(t,e){return Di(t),e=ds(t,e),_r(t.g.h,e)}te.forEach=function(t,e){Di(this),this.g.forEach(function(n,i){Jp(n,function(r){t.call(e,r,i,this)},this)},this)};te.T=function(){Di(this);for(var t=this.g.R(),e=this.g.T(),n=[],i=0;i<e.length;i++)for(var r=t[i],s=0;s<r.length;s++)n.push(e[i]);return n};te.R=function(t){Di(this);var e=[];if(typeof t=="string")Fm(this,t)&&(e=Zp(e,this.g.get(ds(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Zp(e,t[n])}return e};te.set=function(t,e){return Di(this),this.i=null,t=ds(this,t),Fm(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};te.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function Um(t,e,n){Dm(t,e),0<n.length&&(t.i=null,t.g.set(ds(t,e),Vu(n)),t.h+=n.length)}te.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;i[s]!==""&&(o+="="+encodeURIComponent(String(i[s]))),t.push(o)}}return this.i=t.join("&")};function ds(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function BT(t,e){e&&!t.j&&(Di(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(Dm(this,i),Um(this,r,n))},t)),t.j=e}var HT=class{constructor(t,e){this.h=t,this.g=e}};function xm(t){this.l=t||qT,ke.PerformanceNavigationTiming?(t=ke.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ke.g&&ke.g.Ea&&ke.g.Ea()&&ke.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qT=10;function Vm(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function jm(t){return t.h?1:t.g?t.g.size:0}function _h(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function vh(t,e){t.g?t.g.add(e):t.h=e}function Bm(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}xm.prototype.cancel=function(){if(this.i=Hm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Hm(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Vu(t.i)}function yh(){}yh.prototype.stringify=function(t){return ke.JSON.stringify(t,void 0)};yh.prototype.parse=function(t){return ke.JSON.parse(t,void 0)};function WT(){this.g=new yh}function GT(t,e,n){const i=n||"";try{mh(t,function(r,s){let o=r;go(r)&&(o=nh(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function zT(t,e){const n=new hl;if(ke.Image){const i=new Image;i.onload=rl(El,n,i,"TestLoadImage: loaded",!0,e),i.onerror=rl(El,n,i,"TestLoadImage: error",!1,e),i.onabort=rl(El,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=rl(El,n,i,"TestLoadImage: timeout",!1,e),ke.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function El(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Oo(t){this.l=t.$b||null,this.j=t.ib||!1}rn(Oo,lh);Oo.prototype.g=function(){return new Il(this.l,this.j)};Oo.prototype.i=function(t){return function(){return t}}({});function Il(t,e){Yt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=bh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rn(Il,Yt);var bh=0;te=Il.prototype;te.open=function(t,e){if(this.readyState!=bh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Lo(this)};te.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ke).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ro(this)),this.readyState=bh};te.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof ke.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qm(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function qm(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}te.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ro(this):Lo(this),this.readyState==3&&qm(this)}};te.Ua=function(t){this.g&&(this.response=this.responseText=t,Ro(this))};te.Ta=function(t){this.g&&(this.response=t,Ro(this))};te.ha=function(){this.g&&Ro(this)};function Ro(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Lo(t)}te.setRequestHeader=function(t,e){this.v.append(t,e)};te.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};te.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Lo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Il.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var KT=ke.JSON.parse;function xt(t){Yt.call(this),this.headers=new hs,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Wm,this.K=this.L=!1}rn(xt,Yt);var Wm="",XT=/^https?$/i,QT=["POST","PUT"];te=xt.prototype;te.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hh.g(),this.C=this.u?Cm(this.u):Cm(hh),this.g.onreadystatechange=nn(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){Gm(this,s);return}t=n||"";const r=new hs(this.headers);i&&mh(i,function(s,o){r.set(o,s)}),i=oT(r.T()),n=ke.FormData&&t instanceof ke.FormData,!(0<=Yp(QT,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xm(this),0<this.B&&((this.K=YT(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nn(this.pa,this)):this.A=ah(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Gm(this,s)}};function YT(t){return cs&&hT()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function JT(t){return t.toLowerCase()=="content-type"}te.pa=function(){typeof Fu!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,sn(this,"timeout"),this.abort(8))};function Gm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,zm(t),wl(t)}function zm(t){t.D||(t.D=!0,sn(t,"complete"),sn(t,"error"))}te.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,sn(this,"complete"),sn(this,"abort"),wl(this))};te.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wl(this,!0)),xt.Z.M.call(this)};te.Fa=function(){this.s||(this.F||this.v||this.l?Km(this):this.cb())};te.cb=function(){Km(this)};function Km(t){if(t.h&&typeof Fu!="undefined"&&(!t.C[1]||mi(t)!=4||t.ba()!=2)){if(t.v&&mi(t)==4)ah(t.Fa,0,t);else if(sn(t,"readystatechange"),mi(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=a===0){var r=String(t.H).match(Nm)[1]||null;if(!r&&ke.self&&ke.self.location){var s=ke.self.location.protocol;r=s.substr(0,s.length-1)}i=!XT.test(r?r.toLowerCase():"")}n=i}if(n)sn(t,"complete"),sn(t,"success");else{t.m=6;try{var o=2<mi(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",zm(t)}}finally{wl(t)}}}}function wl(t,e){if(t.g){Xm(t);const n=t.g,i=t.C[0]?il:null;t.g=null,t.C=null,e||sn(t,"ready");try{n.onreadystatechange=i}catch{}}}function Xm(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ke.clearTimeout(t.A),t.A=null)}function mi(t){return t.g?t.g.readyState:0}te.ba=function(){try{return 2<mi(this)?this.g.status:-1}catch{return-1}};te.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};te.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),KT(e)}};function Qm(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Wm:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}te.Da=function(){return this.m};te.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function ZT(t){let e="";return Bu(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function Eh(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=ZT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ct(t,e,n))}function No(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ym(t){this.za=0,this.l=[],this.h=new hl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=No("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=No("baseRetryDelayMs",5e3,t),this.$a=No("retryDelaySeedMs",1e4,t),this.Ya=No("forwardChannelMaxRetries",2,t),this.ra=No("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new xm(t&&t.concurrentRequestLimit),this.Ca=new WT,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}te=Ym.prototype;te.ma=8;te.G=1;function Ih(t){if(Jm(t),t.G==3){var e=t.V++,n=pi(t.F);Ct(n,"SID",t.J),Ct(n,"RID",e),Ct(n,"TYPE","terminate"),Mo(t,n),e=new wo(t,t.h,e,void 0),e.K=2,e.v=bl(pi(n)),n=!1,ke.navigator&&ke.navigator.sendBeacon&&(n=ke.navigator.sendBeacon(e.v.toString(),"")),!n&&ke.Image&&(new Image().src=e.v,n=!0),n||(e.g=og(e.l,null),e.g.ea(e.v)),e.F=Date.now(),To(e)}rg(t)}te.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Tl(t){t.g&&(Ch(t),t.g.cancel(),t.g=null)}function Jm(t){Tl(t),t.u&&(ke.clearTimeout(t.u),t.u=null),Sl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ke.clearTimeout(t.m),t.m=null)}function wh(t,e){t.l.push(new HT(t.Za++,e)),t.G==3&&Cl(t)}function Cl(t){Vm(t.i)||t.m||(t.m=!0,ih(t.Ha,t),t.C=0)}function $T(t,e){return jm(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=Eo(nn(t.Ha,t,e),ig(t,t.C)),t.C++,!0)}te.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const r=new wo(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=nm(s),rm(s,this.P)):s=this.P),this.o===null&&(r.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var i=this.l[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=$m(this,r,e),n=pi(this.F),Ct(n,"RID",t),Ct(n,"CVER",22),this.D&&Ct(n,"X-HTTP-Session-Id",this.D),Mo(this,n),this.o&&s&&Eh(n,this.o,s),vh(this.i,r),this.Ra&&Ct(n,"TYPE","init"),this.ja?(Ct(n,"$req",e),Ct(n,"SID","null"),r.$=!0,fh(r,n,null)):fh(r,n,e),this.G=2}}else this.G==3&&(t?Zm(this,t):this.l.length==0||Vm(this.i)||Zm(this))};function Zm(t,e){var n;e?n=e.m:n=t.V++;const i=pi(t.F);Ct(i,"SID",t.J),Ct(i,"RID",n),Ct(i,"AID",t.U),Mo(t,i),t.o&&t.s&&Eh(i,t.o,t.s),n=new wo(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=$m(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),vh(t.i,n),fh(n,i,e)}function Mo(t,e){t.j&&mh({},function(n,i){Ct(e,i,n)})}function $m(t,e,n){n=Math.min(t.l.length,n);var i=t.j?nn(t.j.Oa,t.j,t):null;e:{var r=t.l;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=r[l].h;const u=r[l].g;if(c-=s,0>c)s=Math.max(0,r[l].h-100),a=!1;else try{GT(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,i}function eg(t){t.g||t.u||(t.Y=1,ih(t.Ga,t),t.A=0)}function Th(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=Eo(nn(t.Ga,t),ig(t,t.A)),t.A++,!0)}te.Ga=function(){if(this.u=null,tg(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Eo(nn(this.bb,this),t)}};te.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,En(10),Tl(this),tg(this))};function Ch(t){t.B!=null&&(ke.clearTimeout(t.B),t.B=null)}function tg(t){t.g=new wo(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=pi(t.oa);Ct(e,"RID","rpc"),Ct(e,"SID",t.J),Ct(e,"CI",t.N?"0":"1"),Ct(e,"AID",t.U),Mo(t,e),Ct(e,"TYPE","xmlhttp"),t.o&&t.s&&Eh(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=bl(pi(e)),n.s=null,n.U=!0,km(n,t)}te.ab=function(){this.v!=null&&(this.v=null,Tl(this),Th(this),En(19))};function Sl(t){t.v!=null&&(ke.clearTimeout(t.v),t.v=null)}function ng(t,e){var n=null;if(t.g==e){Sl(t),Ch(t),t.g=null;var i=2}else if(_h(t.i,e))n=e.D,Bm(t.i,e),i=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;i=dl(),sn(i,new wm(i,n,e,r)),Cl(t)}else eg(t);else if(r=e.o,r==3||r==0&&0<t.I||!(i==1&&$T(t,e)||i==2&&Th(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:yr(t,5);break;case 4:yr(t,10);break;case 3:yr(t,6);break;default:yr(t,2)}}}function ig(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function yr(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var i=nn(t.jb,t);n||(n=new vr("//www.google.com/images/cleardot.gif"),ke.location&&ke.location.protocol=="http"||_l(n,"https"),bl(n)),zT(n.toString(),i)}else En(2);t.G=0,t.j&&t.j.va(e),rg(t),Jm(t)}te.jb=function(t){t?(this.h.info("Successfully pinged google.com"),En(2)):(this.h.info("Failed to ping google.com"),En(1))};function rg(t){t.G=0,t.I=-1,t.j&&((Hm(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,Vu(t.l),t.l.length=0),t.j.ua())}function sg(t,e,n){let i=PT(n);if(i.i!="")e&&vl(i,e+"."+i.i),yl(i,i.m);else{const r=ke.location;i=DT(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,n)}return t.aa&&Bu(t.aa,function(r,s){Ct(i,s,r)}),e=t.D,n=t.sa,e&&n&&Ct(i,e,n),Ct(i,"VER",t.ma),Mo(t,i),i}function og(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new xt(new Oo({ib:!0})):new xt(t.qa),e.L=t.H,e}function ag(){}te=ag.prototype;te.xa=function(){};te.wa=function(){};te.va=function(){};te.ua=function(){};te.Oa=function(){};function Al(){if(cs&&!(10<=Number(dT)))throw Error("Environmental error: no available transport.")}Al.prototype.g=function(t,e){return new xn(t,e)};function xn(t,e){Yt.call(this),this.g=new Ym(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!sl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!sl(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new fs(this)}rn(xn,Yt);xn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),ih(nn(t.hb,t,e))),En(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=sg(t,null,t.W),Cl(t)};xn.prototype.close=function(){Ih(this.g)};xn.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,wh(this.g,e)}else this.v?(e={},e.__data__=nh(t),wh(this.g,e)):wh(this.g,t)};xn.prototype.M=function(){this.g.j=null,delete this.j,Ih(this.g),delete this.g,xn.Z.M.call(this)};function lg(t){ch.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}rn(lg,ch);function cg(){uh.call(this),this.status=1}rn(cg,uh);function fs(t){this.g=t}rn(fs,ag);fs.prototype.xa=function(){sn(this.g,"a")};fs.prototype.wa=function(t){sn(this.g,new lg(t))};fs.prototype.va=function(t){sn(this.g,new cg(t))};fs.prototype.ua=function(){sn(this.g,"b")};Al.prototype.createWebChannel=Al.prototype.g;xn.prototype.send=xn.prototype.u;xn.prototype.open=xn.prototype.m;xn.prototype.close=xn.prototype.close;fl.NO_ERROR=0;fl.TIMEOUT=8;fl.HTTP_ERROR=6;Tm.COMPLETE="complete";Sm.EventType=Io;Io.OPEN="a";Io.CLOSE="b";Io.ERROR="c";Io.MESSAGE="d";Yt.prototype.listen=Yt.prototype.N;xt.prototype.listenOnce=xt.prototype.O;xt.prototype.getLastError=xt.prototype.La;xt.prototype.getLastErrorCode=xt.prototype.Da;xt.prototype.getStatus=xt.prototype.ba;xt.prototype.getResponseJson=xt.prototype.Qa;xt.prototype.getResponseText=xt.prototype.ga;xt.prototype.send=xt.prototype.ea;var eC=function(){return new Al},tC=function(){return dl()},Sh=fl,nC=Tm,iC=mr,ug={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},rC=Oo,kl=Sm,sC=xt;const hg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ps="9.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new el("@firebase/firestore");function dg(){return br.logLevel}function de(t,...e){if(br.logLevel<=Je.DEBUG){const n=e.map(Ah);br.debug(`Firestore (${ps}): ${t}`,...n)}}function Fi(t,...e){if(br.logLevel<=Je.ERROR){const n=e.map(Ah);br.error(`Firestore (${ps}): ${t}`,...n)}}function fg(t,...e){if(br.logLevel<=Je.WARN){const n=e.map(Ah);br.warn(`Firestore (${ps}): ${t}`,...n)}}function Ah(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t="Unexpected state"){const e=`FIRESTORE (${ps}) INTERNAL ASSERTION FAILED: `+t;throw Fi(e),new Error(e)}function yt(t,e){t||Re()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class aC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nn.UNAUTHENTICATED))}shutdown(){}}class lC{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new gi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gi,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{de("FirebaseCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(de("FirebaseCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(de("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(yt(typeof i.accessToken=="string"),new oC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string"),new Nn(e)}}class cC{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=Nn.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},n=this.h.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class uC{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new cC(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.g(i),this.p=i=>n.writeSequenceNumber(i))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kh.T=-1;class pg{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=hC(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function ct(t,e){return t<e?-1:t>e?1:0}function ms(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Vn(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rt(e)}static min(){return new rt(new Vn(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Er(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,i){n===void 0?n=0:n>e.length&&Re(),i===void 0?i=e.length-n:i>e.length-n&&Re(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Po.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Po?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class St extends Po{construct(e,n,i){return new St(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ee(x.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new St(n)}static emptyPath(){return new St([])}}const dC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends Po{construct(e,n,i){return new Mn(e,n,i)}static isValidIdentifier(e){return dC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mn(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new ee(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new ee(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new ee(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(n)}static emptyPath(){return new Mn([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.fields=e,e.sort(Mn.comparator)}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ms(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new hn(n)}static fromUint8Array(e){const n=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new hn(n)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const fC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(t){if(yt(!!t),typeof t=="string"){let e=0;const n=fC.exec(t);if(yt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gs(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vg(t){const e=t.mapValue.fields.__previous_value__;return _g(e)?vg(e):e}function Fo(t){const e=Ui(t.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t){return t==null}function Ol(t){return t===0&&1/t==-1/0}function pC(t){return typeof t=="number"&&Number.isInteger(t)&&!Ol(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(St.fromString(e))}static fromName(e){return new Ee(St.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return St.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new St(e.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_g(t)?4:10:Re()}function li(t,e){const n=Ir(t);if(n!==Ir(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fo(t).isEqual(Fo(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Ui(i.timestampValue),o=Ui(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return gs(i.bytesValue).isEqual(gs(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return Vt(i.geoPointValue.latitude)===Vt(r.geoPointValue.latitude)&&Vt(i.geoPointValue.longitude)===Vt(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Vt(i.integerValue)===Vt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Vt(i.doubleValue),o=Vt(r.doubleValue);return s===o?Ol(s)===Ol(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return ms(t.arrayValue.values||[],e.arrayValue.values||[],li);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(mg(s)!==mg(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!li(s[a],o[a])))return!1;return!0}(t,e);default:return Re()}}function Uo(t,e){return(t.values||[]).find(n=>li(n,e))!==void 0}function vs(t,e){const n=Ir(t),i=Ir(e);if(n!==i)return ct(n,i);switch(n){case 0:return 0;case 1:return ct(t.booleanValue,e.booleanValue);case 2:return function(r,s){const o=Vt(r.integerValue||r.doubleValue),a=Vt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return yg(t.timestampValue,e.timestampValue);case 4:return yg(Fo(t),Fo(e));case 5:return ct(t.stringValue,e.stringValue);case 6:return function(r,s){const o=gs(r),a=gs(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=ct(o[l],a[l]);if(c!==0)return c}return ct(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,s){const o=ct(Vt(r.latitude),Vt(s.latitude));return o!==0?o:ct(Vt(r.longitude),Vt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=vs(o[l],a[l]);if(c)return c}return ct(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,s){const o=r.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=ct(a[u],c[u]);if(h!==0)return h;const d=vs(o[a[u]],l[c[u]]);if(d!==0)return d}return ct(a.length,c.length)}(t.mapValue,e.mapValue);default:throw Re()}}function yg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ct(t,e);const n=Ui(t),i=Ui(e),r=ct(n.seconds,i.seconds);return r!==0?r:ct(n.nanos,i.nanos)}function Oh(t){return Rh(t)}function Rh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const r=Ui(i);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?gs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ee.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=Rh(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${Rh(i.fields[a])}`;return s+"}"}(t.mapValue):Re();var e,n}function bg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lh(t){return!!t&&"integerValue"in t}function Nh(t){return!!t&&"arrayValue"in t}function Eg(t){return!!t&&"nullValue"in t}function Ig(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rl(t){return!!t&&"mapValue"in t}function xo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Er(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=xo(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xo(t.arrayValue.values[n]);return e}return Object.assign({},t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Rl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xo(n)}setAll(e){let n=Mn.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=xo(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Rl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Rl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Er(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new jn(xo(this.value))}}function wg(t){const e=[];return Er(t.fields,(n,i)=>{const r=new Mn([n]);if(Rl(i)){const s=wg(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Do(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n,i,r,s){this.key=e,this.documentType=n,this.version=i,this.data=r,this.documentState=s}static newInvalidDocument(e){return new dn(e,0,rt.min(),jn.empty(),0)}static newFoundDocument(e,n,i){return new dn(e,1,n,i,0)}static newNoDocument(e,n){return new dn(e,2,n,jn.empty(),0)}static newUnknownDocument(e,n){return new dn(e,3,n,jn.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new dn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.A=null}}function Tg(t,e=null,n=[],i=[],r=null,s=null,o=null){return new mC(t,e,n,i,r,s,o)}function Mh(t){const e=Le(t);if(e.A===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>_C(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),_s(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ll(e.startAt)),e.endAt&&(n+="|ub:",n+=Ll(e.endAt)),e.A=n}return e.A}function gC(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(i=n).field.canonicalString()} ${i.op} ${Oh(i.value)}`;var i}).join(", ")}]`),_s(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: "+Ll(t.startAt)),t.endAt&&(e+=", endAt: "+Ll(t.endAt)),`Target(${e})`}function Ph(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!CC(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],i=e.filters[r],n.op!==i.op||!n.field.isEqual(i.field)||!li(n.value,i.value))return!1;var n,i;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ag(t.startAt,e.startAt)&&Ag(t.endAt,e.endAt)}function Dh(t){return Ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class In extends class{}{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.R(e,n,i):new vC(e,n,i):n==="array-contains"?new EC(e,i):n==="in"?new IC(e,i):n==="not-in"?new wC(e,i):n==="array-contains-any"?new TC(e,i):new In(e,n,i)}static R(e,n,i){return n==="in"?new yC(e,i):new bC(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.P(vs(n,this.value)):n!==null&&Ir(this.value)===Ir(n)&&this.P(vs(n,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}function _C(t){return t.field.canonicalString()+t.op.toString()+Oh(t.value)}class vC extends In{constructor(e,n,i){super(e,n,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.P(n)}}class yC extends In{constructor(e,n){super(e,"in",n),this.keys=Cg("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class bC extends In{constructor(e,n){super(e,"not-in",n),this.keys=Cg("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Cg(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ee.fromName(i.referenceValue))}class EC extends In{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nh(n)&&Uo(n.arrayValue,this.value)}}class IC extends In{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uo(this.value.arrayValue,n)}}class wC extends In{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uo(this.value.arrayValue,n)}}class TC extends In{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Uo(this.value.arrayValue,i))}}class Fh{constructor(e,n){this.position=e,this.before=n}}function Ll(t){return`${t.before?"b":"a"}:${t.position.map(e=>Oh(e)).join(",")}`}class ys{constructor(e,n="asc"){this.field=e,this.dir=n}}function CC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Sg(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=Ee.comparator(Ee.fromName(o.referenceValue),n.key):i=vs(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return t.before?i<=0:i<0}function Ag(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!li(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.V=null,this.S=null,this.startAt,this.endAt}}function SC(t,e,n,i,r,s,o,a){return new bs(t,e,n,i,r,s,o,a)}function Nl(t){return new bs(t)}function Ml(t){return!_s(t.limit)&&t.limitType==="F"}function Pl(t){return!_s(t.limit)&&t.limitType==="L"}function Uh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function xh(t){for(const e of t.filters)if(e.v())return e.field;return null}function kg(t){return t.collectionGroup!==null}function Vo(t){const e=Le(t);if(e.V===null){e.V=[];const n=xh(e),i=Uh(e);if(n!==null&&i===null)n.isKeyField()||e.V.push(new ys(n)),e.V.push(new ys(Mn.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.V.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new ys(Mn.keyField(),s))}}}return e.V}function wr(t){const e=Le(t);if(!e.S)if(e.limitType==="F")e.S=Tg(e.path,e.collectionGroup,Vo(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Vo(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new ys(s.field,o))}const i=e.endAt?new Fh(e.endAt.position,!e.endAt.before):null,r=e.startAt?new Fh(e.startAt.position,!e.startAt.before):null;e.S=Tg(e.path,e.collectionGroup,n,e.filters,e.limit,i,r)}return e.S}function AC(t,e,n){return new bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dl(t,e){return Ph(wr(t),wr(e))&&t.limitType===e.limitType}function Og(t){return`${Mh(wr(t))}|lt:${t.limitType}`}function Vh(t){return`Query(target=${gC(wr(t))}; limitType=${t.limitType})`}function Fl(t,e){return e.isFoundDocument()&&function(n,i){const r=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Ee.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,i){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const r of n.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!Sg(n.startAt,Vo(n),i)||n.endAt&&Sg(n.endAt,Vo(n),i))}(t,e)}function Rg(t){return(e,n)=>{let i=!1;for(const r of Vo(t)){const s=kC(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function kC(t,e,n){const i=t.field.isKeyField()?Ee.comparator(e.key,n.key):function(r,s,o){const a=s.data.field(r),l=o.data.field(r);return a!==null&&l!==null?vs(a,l):Re()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ol(e)?"-0":e}}function Ng(t){return{integerValue:""+t}}function Mg(t,e){return pC(e)?Ng(e):Lg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this._=void 0}}function OC(t,e,n){return t instanceof jo?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(n,e):t instanceof Es?Dg(t,e):t instanceof Bo?Fg(t,e):function(i,r){const s=Pg(i,r),o=Ug(s)+Ug(i.C);return Lh(s)&&Lh(i.C)?Ng(o):Lg(i.N,o)}(t,e)}function RC(t,e,n){return t instanceof Es?Dg(t,e):t instanceof Bo?Fg(t,e):n}function Pg(t,e){return t instanceof Ho?Lh(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class jo extends Ul{}class Es extends Ul{constructor(e){super(),this.elements=e}}function Dg(t,e){const n=xg(e);for(const i of t.elements)n.some(r=>li(r,i))||n.push(i);return{arrayValue:{values:n}}}class Bo extends Ul{constructor(e){super(),this.elements=e}}function Fg(t,e){let n=xg(e);for(const i of t.elements)n=n.filter(r=>!li(r,i));return{arrayValue:{values:n}}}class Ho extends Ul{constructor(e,n){super(),this.N=e,this.C=n}}function Ug(t){return Vt(t.integerValue||t.doubleValue)}function xg(t){return Nh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n){this.field=e,this.transform=n}}function LC(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Es&&i instanceof Es||n instanceof Bo&&i instanceof Bo?ms(n.elements,i.elements,li):n instanceof Ho&&i instanceof Ho?li(n.C,i.C):n instanceof jo&&i instanceof jo}(t.transform,e.transform)}class NC{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vl{}function MC(t,e,n){t instanceof jl?function(i,r,s){const o=i.value.clone(),a=Hg(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Tr?function(i,r,s){if(!xl(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=Hg(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(Bg(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Bh(t,e,n){t instanceof jl?function(i,r,s){if(!xl(i.precondition,r))return;const o=i.value.clone(),a=qg(i.fieldTransforms,s,r);o.setAll(a),r.convertToFoundDocument(jg(r),o).setHasLocalMutations()}(t,e,n):t instanceof Tr?function(i,r,s){if(!xl(i.precondition,r))return;const o=qg(i.fieldTransforms,s,r),a=r.data;a.setAll(Bg(i)),a.setAll(o),r.convertToFoundDocument(jg(r),a).setHasLocalMutations()}(t,e,n):function(i,r){xl(i.precondition,r)&&r.convertToNoDocument(rt.min())}(t,e)}function PC(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=Pg(i.transform,r||null);s!=null&&(n==null&&(n=jn.empty()),n.set(i.field,s))}return n||null}function Vg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&ms(n,i,(r,s)=>LC(r,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function jg(t){return t.isFoundDocument()?t.version:rt.min()}class jl extends Vl{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}}class Tr extends Vl{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}}function Bg(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Hg(t,e,n){const i=new Map;yt(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,RC(o,a,n[r]))}return i}function qg(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,OC(s,o,e))}return i}class Hh extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class DC extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,He;function UC(t){switch(t){default:return Re();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function Wg(t){if(t===void 0)return Fi("GRPC error has no .code"),x.UNKNOWN;switch(t){case jt.OK:return x.OK;case jt.CANCELLED:return x.CANCELLED;case jt.UNKNOWN:return x.UNKNOWN;case jt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case jt.INTERNAL:return x.INTERNAL;case jt.UNAVAILABLE:return x.UNAVAILABLE;case jt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case jt.NOT_FOUND:return x.NOT_FOUND;case jt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case jt.ABORTED:return x.ABORTED;case jt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case jt.DATA_LOSS:return x.DATA_LOSS;default:return Re()}}(He=jt||(jt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n){this.comparator=e,this.root=n||on.EMPTY}insert(e,n){return new fn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i!=null?i:on.RED,this.left=r!=null?r:on.EMPTY,this.right=s!=null?s:on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new on(e!=null?e:this.key,n!=null?n:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return on.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(t,e,n,i,r){return this}insert(t,e,n){return new on(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.comparator=e,this.data=new fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gg(this.data.getIterator())}getIteratorFrom(e){return new Gg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new an(this.comparator);return n.data=e,n}}class Gg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new fn(Ee.comparator);function Cr(){return xC}const VC=new fn(Ee.comparator);function qh(){return VC}const jC=new fn(Ee.comparator);function BC(){return jC}const HC=new an(Ee.comparator);function It(...t){let e=HC;for(const n of t)e=e.add(n);return e}const qC=new an(ct);function zg(){return qC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const i=new Map;return i.set(e,qo.createSynthesizedTargetChangeForCurrentChange(e,n)),new Hl(rt.min(),i,zg(),Cr(),It())}}class qo{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new qo(hn.EMPTY_BYTE_STRING,n,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n,i,r){this.k=e,this.removedTargetIds=n,this.key=i,this.$=r}}class Kg{constructor(e,n){this.targetId=e,this.O=n}}class Xg{constructor(e,n,i=hn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Qg{constructor(){this.F=0,this.M=Jg(),this.L=hn.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return this.F!==0}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=It(),n=It(),i=It();return this.M.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Re()}}),new qo(this.L,this.B,e,n,i)}G(){this.U=!1,this.M=Jg()}H(e,n){this.U=!0,this.M=this.M.insert(e,n)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class WC{constructor(e){this.tt=e,this.et=new Map,this.nt=Cr(),this.st=Yg(),this.it=new an(ct)}rt(e){for(const n of e.k)e.$&&e.$.isFoundDocument()?this.ot(n,e.$):this.ct(n,e.key,e.$);for(const n of e.removedTargetIds)this.ct(n,e.key,e.$)}at(e){this.forEachTarget(e,n=>{const i=this.ut(n);switch(e.state){case 0:this.ht(n)&&i.j(e.resumeToken);break;case 1:i.X(),i.q||i.G(),i.j(e.resumeToken);break;case 2:i.X(),i.q||this.removeTarget(n);break;case 3:this.ht(n)&&(i.Z(),i.j(e.resumeToken));break;case 4:this.ht(n)&&(this.lt(n),i.j(e.resumeToken));break;default:Re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.et.forEach((i,r)=>{this.ht(r)&&n(r)})}ft(e){const n=e.targetId,i=e.O.count,r=this.dt(n);if(r){const s=r.target;if(Dh(s))if(i===0){const o=new Ee(s.path);this.ct(n,o,dn.newNoDocument(o,rt.min()))}else yt(i===1);else this.wt(n)!==i&&(this.lt(n),this.it=this.it.add(n))}}_t(e){const n=new Map;this.et.forEach((s,o)=>{const a=this.dt(o);if(a){if(s.current&&Dh(a.target)){const l=new Ee(a.target.path);this.nt.get(l)!==null||this.gt(o,l)||this.ct(o,l,dn.newNoDocument(l,e))}s.K&&(n.set(o,s.W()),s.G())}});let i=It();this.st.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.dt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(i=i.add(s))});const r=new Hl(e,n,this.it,this.nt,i);return this.nt=Cr(),this.st=Yg(),this.it=new an(ct),r}ot(e,n){if(!this.ht(e))return;const i=this.gt(e,n.key)?2:0;this.ut(e).H(n.key,i),this.nt=this.nt.insert(n.key,n),this.st=this.st.insert(n.key,this.yt(n.key).add(e))}ct(e,n,i){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,n)?r.H(n,1):r.J(n),this.st=this.st.insert(n,this.yt(n).delete(e)),i&&(this.nt=this.nt.insert(n,i))}removeTarget(e){this.et.delete(e)}wt(e){const n=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let n=this.et.get(e);return n||(n=new Qg,this.et.set(e,n)),n}yt(e){let n=this.st.get(e);return n||(n=new an(ct),this.st=this.st.insert(e,n)),n}ht(e){const n=this.dt(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}dt(e){const n=this.et.get(e);return n&&n.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new Qg),this.tt.getRemoteKeysForTarget(e).forEach(n=>{this.ct(e,n,null)})}gt(e,n){return this.tt.getRemoteKeysForTarget(e).has(n)}}function Yg(){return new fn(Ee.comparator)}function Jg(){return new fn(Ee.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),zC=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class KC{constructor(e,n){this.databaseId=e,this.D=n}}function Wl(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zg(t,e){return t.D?e.toBase64():e.toUint8Array()}function XC(t,e){return Wl(t,e.toTimestamp())}function _i(t){return yt(!!t),rt.fromTimestamp(function(e){const n=Ui(e);return new Vn(n.seconds,n.nanos)}(t))}function Wh(t,e){return function(n){return new St(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function $g(t){const e=St.fromString(t);return yt(s_(e)),e}function Gh(t,e){return Wh(t.databaseId,e.path)}function zh(t,e){const n=$g(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ee(e_(n))}function Kh(t,e){return Wh(t.databaseId,e)}function QC(t){const e=$g(t);return e.length===4?St.emptyPath():e_(e)}function Xh(t){return new St(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function e_(t){return yt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function t_(t,e,n){return{name:Gh(t,e),fields:n.value.mapValue.fields}}function YC(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,c){return l.D?(yt(c===void 0||typeof c=="string"),hn.fromBase64String(c||"")):(yt(c===void 0||c instanceof Uint8Array),hn.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?x.UNKNOWN:Wg(l.code);return new ee(c,l.message||"")}(o);n=new Xg(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=zh(t,i.document.name),s=_i(i.document.updateTime),o=new jn({mapValue:{fields:i.document.fields}}),a=dn.newFoundDocument(r,s,o),l=i.targetIds||[],c=i.removedTargetIds||[];n=new ql(l,c,a.key,a)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=zh(t,i.document),s=i.readTime?_i(i.readTime):rt.min(),o=dn.newNoDocument(r,s),a=i.removedTargetIds||[];n=new ql([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=zh(t,i.document),s=i.removedTargetIds||[];n=new ql([],s,r,null)}else{if(!("filter"in e))return Re();{e.filter;const i=e.filter;i.targetId;const r=i.count||0,s=new FC(r),o=i.targetId;n=new Kg(o,s)}}return n}function JC(t,e){let n;if(e instanceof jl)n={update:t_(t,e.key,e.value)};else if(e instanceof Hh)n={delete:Gh(t,e.key)};else if(e instanceof Tr)n={update:t_(t,e.key,e.data),updateMask:aS(e.fieldMask)};else{if(!(e instanceof DC))return Re();n={verify:Gh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof jo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Es)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Bo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ho)return{fieldPath:s.field.canonicalString(),increment:o.C};throw Re()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:XC(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Re()}(t,e.precondition)),n}function ZC(t,e){return t&&t.length>0?(yt(e!==void 0),t.map(n=>function(i,r){let s=i.updateTime?_i(i.updateTime):_i(r);return s.isEqual(rt.min())&&(s=_i(r)),new NC(s,i.transformResults||[])}(n,e))):[]}function $C(t,e){return{documents:[Kh(t,e.path)]}}function eS(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Kh(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Kh(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(a){if(a.length===0)return;const l=a.map(c=>function(u){if(u.op==="=="){if(Ig(u.value))return{unaryFilter:{field:Is(u.field),op:"IS_NAN"}};if(Eg(u.value))return{unaryFilter:{field:Is(u.field),op:"IS_NULL"}}}else if(u.op==="!="){if(Ig(u.value))return{unaryFilter:{field:Is(u.field),op:"IS_NOT_NAN"}};if(Eg(u.value))return{unaryFilter:{field:Is(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(u.field),op:rS(u.op),value:u.value}}}(c));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);r&&(n.structuredQuery.where=r);const s=function(a){if(a.length!==0)return a.map(l=>function(c){return{field:Is(c.field),direction:iS(c.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(a,l){return a.D||_s(l)?l:{value:l}}(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=i_(e.startAt)),e.endAt&&(n.structuredQuery.endAt=i_(e.endAt)),n}function tS(t){let e=QC(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){yt(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=n_(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new ys(ws(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,_s(h)?null:h}(n.limit));let l=null;n.startAt&&(l=r_(n.startAt));let c=null;return n.endAt&&(c=r_(n.endAt)),SC(e,r,o,s,a,"F",l,c)}function nS(t,e){const n=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Re()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function n_(t){return t?t.unaryFilter!==void 0?[oS(t)]:t.fieldFilter!==void 0?[sS(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>n_(e)).reduce((e,n)=>e.concat(n)):Re():[]}function i_(t){return{before:t.before,values:t.position}}function r_(t){const e=!!t.before,n=t.values||[];return new Fh(n,e)}function iS(t){return GC[t]}function rS(t){return zC[t]}function Is(t){return{fieldPath:t.canonicalString()}}function ws(t){return Mn.fromServerFormat(t.fieldPath)}function sS(t){return In.create(ws(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value)}function oS(t){switch(t.unaryFilter.op){case"IS_NAN":const e=ws(t.unaryFilter.field);return In.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=ws(t.unaryFilter.field);return In.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ws(t.unaryFilter.field);return In.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=ws(t.unaryFilter.field);return In.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}function aS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function s_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}const lS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,i)=>{n(e)})}static reject(e){return new J((n,i)=>{i(e)})}static waitFor(e){return new J((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=J.resolve(!1);for(const i of e)n=n.next(r=>r?J.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}}function Wo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&MC(s,e,i[r])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&Bh(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&Bh(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const i=e.get(n.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(rt.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),It())}isEqual(e){return this.batchId===e.batchId&&ms(this.mutations,e.mutations,(n,i)=>Vg(n,i))&&ms(this.baseMutations,e.baseMutations,(n,i)=>Vg(n,i))}}class Qh{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){yt(e.mutations.length===i.length);let r=BC();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Qh(e,n,i,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,i,r,s=rt.min(),o=rt.min(),a=hn.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.Wt=e}}function dS(t){const e=tS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?AC(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.Gt=new pS}addToCollectionParentIndex(e,n){return this.Gt.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Gt.getEntries(n))}}class pS{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new an(St.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new an(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Ts(0)}static ie(){return new Ts(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==lS)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r!==void 0){for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n])}else this.inner[i]=[[e,n]]}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),!0;return!1}forEach(e){Er(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return gg(this.inner)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.changes=new zo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}getReadTime(e){const n=this.changes.get(e);return n?n.readTime:rt.min()}addEntry(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})}removeEntry(e,n=null){this.assertNotApplied(),this.changes.set(e,{document:dn.newInvalidDocument(e),readTime:n})}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?J.resolve(i.document):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,n,i){this.He=e,this.In=n,this.Ht=i}An(e,n){return this.In.getAllMutationBatchesAffectingDocumentKey(e,n).next(i=>this.Rn(e,n,i))}Rn(e,n,i){return this.He.getEntry(e,n).next(r=>{for(const s of i)s.applyToLocalView(r);return r})}bn(e,n){e.forEach((i,r)=>{for(const s of n)s.applyToLocalView(r)})}Pn(e,n){return this.He.getEntries(e,n).next(i=>this.vn(e,i).next(()=>i))}vn(e,n){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>this.bn(n,i))}getDocumentsMatchingQuery(e,n,i){return function(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.Vn(e,n.path):kg(n)?this.Sn(e,n,i):this.Dn(e,n,i)}Vn(e,n){return this.An(e,new Ee(n)).next(i=>{let r=qh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Sn(e,n,i){const r=n.collectionGroup;let s=qh();return this.Ht.getCollectionParents(e,r).next(o=>J.forEach(o,a=>{const l=function(c,u){return new bs(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(r));return this.Dn(e,l,i).next(c=>{c.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}Dn(e,n,i){let r,s;return this.He.getDocumentsMatchingQuery(e,n,i).next(o=>(r=o,this.In.getAllMutationBatchesAffectingQuery(e,n))).next(o=>(s=o,this.Cn(e,s,r).next(a=>{r=a;for(const l of s)for(const c of l.mutations){const u=c.key;let h=r.get(u);h==null&&(h=dn.newInvalidDocument(u),r=r.insert(u,h)),Bh(c,h,l.localWriteTime),h.isFoundDocument()||(r=r.remove(u))}}))).next(()=>(r.forEach((o,a)=>{Fl(n,a)||(r=r.remove(o))}),r))}Cn(e,n,i){let r=It();for(const o of n)for(const a of o.mutations)a instanceof Tr&&i.get(a.key)===null&&(r=r.add(a.key));let s=i;return this.He.getEntries(e,r).next(o=>(o.forEach((a,l)=>{l.isFoundDocument()&&(s=s.insert(a,l))}),s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Nn=i,this.xn=r}static kn(e,n){let i=It(),r=It();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Yh(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{$n(e){this.On=e}getDocumentsMatchingQuery(e,n,i,r){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||i.isEqual(rt.min())?this.Fn(e,n):this.On.Pn(e,r).next(s=>{const o=this.Mn(n,s);return(Ml(n)||Pl(n))&&this.Ln(n.limitType,o,r,i)?this.Fn(e,n):(dg()<=Je.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vh(n)),this.On.getDocumentsMatchingQuery(e,n,i).next(a=>(o.forEach(l=>{a=a.insert(l.key,l)}),a)))})}Mn(e,n){let i=new an(Rg(e));return n.forEach((r,s)=>{Fl(e,s)&&(i=i.add(s))}),i}Ln(e,n,i,r){if(i.size!==n.size)return!0;const s=e==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Fn(e,n){return dg()<=Je.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Vh(n)),this.On.getDocumentsMatchingQuery(e,n,rt.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n,i,r){this.persistence=e,this.Bn=n,this.N=r,this.Un=new fn(ct),this.qn=new zo(s=>Mh(s),Ph),this.Kn=rt.min(),this.In=e.getMutationQueue(i),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new o_(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Un))}}function vS(t,e,n,i){return new _S(t,e,n,i)}async function a_(t,e){const n=Le(t);let i=n.In,r=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",o=>{let a;return n.In.getAllMutationBatches(o).next(l=>(a=l,i=n.persistence.getMutationQueue(e),r=new o_(n.jn,i,n.persistence.getIndexManager()),i.getAllMutationBatches(o))).next(l=>{const c=[],u=[];let h=It();for(const d of a){c.push(d.batchId);for(const f of d.mutations)h=h.add(f.key)}for(const d of l){u.push(d.batchId);for(const f of d.mutations)h=h.add(f.key)}return r.Pn(o,h).next(d=>({Wn:d,removedBatchIds:c,addedBatchIds:u}))})});return n.In=i,n.Qn=r,n.Bn.$n(n.Qn),s}function yS(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.jn.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,h=u.keys();let d=J.resolve();return h.forEach(f=>{d=d.next(()=>c.getEntry(a,f)).next(p=>{const g=l.docVersions.get(f);yt(g!==null),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&c.addEntry(p,l.commitVersion))})}),d.next(()=>o.In.removeMutationBatch(a,u))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.In.performConsistencyCheck(i)).next(()=>n.Qn.Pn(i,r))})}function l_(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ze.getLastRemoteSnapshotVersion(n))}function bS(t,e){const n=Le(t),i=e.snapshotVersion;let r=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.jn.newChangeBuffer({trackRemovals:!0});r=n.Un;const a=[];e.targetChanges.forEach((c,u)=>{const h=r.get(u);if(!h)return;a.push(n.ze.removeMatchingKeys(s,c.removedDocuments,u).next(()=>n.ze.addMatchingKeys(s,c.addedDocuments,u)));const d=c.resumeToken;if(d.approximateByteSize()>0){const f=h.withResumeToken(d,i).withSequenceNumber(s.currentSequenceNumber);r=r.insert(u,f),function(p,g,m){return yt(g.resumeToken.approximateByteSize()>0),p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(h,f,c)&&a.push(n.ze.updateTargetData(s,f))}});let l=Cr();if(e.documentUpdates.forEach((c,u)=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(ES(s,o,e.documentUpdates,i,void 0).next(c=>{l=c})),!i.isEqual(rt.min())){const c=n.ze.getLastRemoteSnapshotVersion(s).next(u=>n.ze.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(c)}return J.waitFor(a).next(()=>o.apply(s)).next(()=>n.Qn.vn(s,l)).next(()=>l)}).then(s=>(n.Un=r,s))}function ES(t,e,n,i,r){let s=It();return n.forEach(o=>s=s.add(o)),e.getEntries(t,s).next(o=>{let a=Cr();return n.forEach((l,c)=>{const u=o.get(l),h=(r==null?void 0:r.get(l))||i;c.isNoDocument()&&c.version.isEqual(rt.min())?(e.removeEntry(l,h),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c,h),a=a.insert(l,c)):de("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),a})}function IS(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.In.getNextMutationBatchAfterBatchId(i,e)))}function wS(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.ze.getTargetData(i,e).next(s=>s?(r=s,J.resolve(r)):n.ze.allocateTargetId(i).next(o=>(r=new Sr(e,o,0,i.currentSequenceNumber),n.ze.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Un.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(i.targetId,i),n.qn.set(e,i.targetId)),i})}async function Jh(t,e,n){const i=Le(t),r=i.Un.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Wo(o))throw o;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Un=i.Un.remove(e),i.qn.delete(r.target)}function c_(t,e,n){const i=Le(t);let r=rt.min(),s=It();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=Le(a),h=u.qn.get(c);return h!==void 0?J.resolve(u.Un.get(h)):u.ze.getTargetData(l,c)}(i,o,wr(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.ze.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Bn.getDocumentsMatchingQuery(o,e,n?r:rt.min(),n?s:It())).next(a=>({documents:a,Gn:s})))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,n){return J.resolve(this.Yn.get(n))}saveBundleMetadata(e,n){var i;return this.Yn.set(n.id,{id:(i=n).id,version:i.version,createTime:_i(i.createTime)}),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Xn.get(n))}saveNamedQuery(e,n){return this.Xn.set(n.name,function(i){return{name:i.name,query:dS(i.bundledQuery),readTime:_i(i.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(){this.Zn=new an(Jt.ts),this.es=new an(Jt.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const i=new Jt(e,n);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.rs(new Jt(e,n))}os(e,n){e.forEach(i=>this.removeReference(i,n))}cs(e){const n=new Ee(new St([])),i=new Jt(n,e),r=new Jt(n,e+1),s=[];return this.es.forEachInRange([i,r],o=>{this.rs(o),s.push(o.key)}),s}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new Ee(new St([])),i=new Jt(n,e),r=new Jt(n,e+1);let s=It();return this.es.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Jt(e,0),i=this.Zn.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Jt{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return Ee.comparator(e.key,n.key)||ct(e.ls,n.ls)}static ns(e,n){return ct(e.ls,n.ls)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this.Ht=e,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new an(Jt.ts)}checkEmpty(e){return J.resolve(this.In.length===0)}addMutationBatch(e,n,i,r){const s=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const o=new uS(s,n,i,r);this.In.push(o);for(const a of r)this.ds=this.ds.add(new Jt(a.key,s)),this.Ht.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,n){return J.resolve(this.ws(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this._s(i),s=r<0?0:r;return J.resolve(this.In.length>s?this.In[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.In.length===0?-1:this.fs-1)}getAllMutationBatches(e){return J.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Jt(n,0),r=new Jt(n,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([i,r],o=>{const a=this.ws(o.ls);s.push(a)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new an(ct);return n.forEach(r=>{const s=new Jt(r,0),o=new Jt(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{i=i.add(a.ls)})}),J.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Ee.isDocumentKey(s)||(s=s.child(""));const o=new Jt(new Ee(s),0);let a=new an(ct);return this.ds.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.ls)),!0)},o),J.resolve(this.gs(a))}gs(e){const n=[];return e.forEach(i=>{const r=this.ws(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){yt(this.ys(n.batchId,"removed")===0),this.In.shift();let i=this.ds;return J.forEach(n.mutations,r=>{const s=new Jt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=i})}te(e){}containsKey(e,n){const i=new Jt(n,0),r=this.ds.firstAfterOrEqual(i);return J.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.In.length,J.resolve()}ys(e,n){return this._s(e)}_s(e){return this.In.length===0?0:e-this.In[0].batchId}ws(e){const n=this._s(e);return n<0||n>=this.In.length?null:this.In[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n){this.Ht=e,this.ps=n,this.docs=new fn(Ee.comparator),this.size=0}addEntry(e,n,i){const r=n.key,s=this.docs.get(r),o=s?s.size:0,a=this.ps(n);return this.docs=this.docs.insert(r,{document:n.clone(),size:a,readTime:i}),this.size+=a-o,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return J.resolve(i?i.document.clone():dn.newInvalidDocument(n))}getEntries(e,n){let i=Cr();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.clone():dn.newInvalidDocument(r))}),J.resolve(i)}getDocumentsMatchingQuery(e,n,i){let r=Cr();const s=new Ee(n.path.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l,readTime:c}}=o.getNext();if(!n.path.isPrefixOf(a.path))break;c.compareTo(i)<=0||Fl(n,l)&&(r=r.insert(l.key,l.clone()))}return J.resolve(r)}Ts(e,n){return J.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new AS(this)}getSize(e){return J.resolve(this.size)}}class AS extends mS{constructor(e){super(),this.Se=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.document.isValidDocument()?n.push(this.Se.addEntry(e,r.document,this.getReadTime(i))):this.Se.removeEntry(i)}),J.waitFor(n)}getFromCache(e,n){return this.Se.getEntry(e,n)}getAllFromCache(e,n){return this.Se.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.persistence=e,this.Es=new zo(n=>Mh(n),Ph),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.Is=0,this.As=new Zh,this.targetCount=0,this.Rs=Ts.se()}forEachTarget(e,n){return this.Es.forEach((i,r)=>n(r)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Is&&(this.Is=n),J.resolve()}ce(e){this.Es.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new Ts(n),this.highestTargetId=n),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,n){return this.ce(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.ce(n),J.resolve()}removeTargetData(e,n){return this.Es.delete(n.target),this.As.cs(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Es.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Es.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),J.waitFor(s).next(()=>r)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const i=this.Es.get(n)||null;return J.resolve(i)}addMatchingKeys(e,n,i){return this.As.ss(n,i),J.resolve()}removeMatchingKeys(e,n,i){this.As.os(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.As.cs(n),J.resolve()}getMatchingKeysForTargetId(e,n){const i=this.As.hs(n);return J.resolve(i)}containsKey(e,n){return J.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.bs={},this.Le=new kh(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new kS(this),this.Ht=new fS,this.He=function(i,r){return new SS(i,r)}(this.Ht,i=>this.referenceDelegate.Ps(i)),this.N=new hS(n),this.Je=new TS(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let n=this.bs[e.toKey()];return n||(n=new CS(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=n),n}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,n,i){de("MemoryPersistence","Starting transaction:",e);const r=new RS(this.Le.next());return this.referenceDelegate.vs(),i(r).next(s=>this.referenceDelegate.Vs(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ss(e,n){return J.or(Object.values(this.bs).map(i=>()=>i.containsKey(e,n)))}}class RS extends cS{constructor(e){super(),this.currentSequenceNumber=e}}class $h{constructor(e){this.persistence=e,this.Ds=new Zh,this.Cs=null}static Ns(e){return new $h(e)}get xs(){if(this.Cs)return this.Cs;throw Re()}addReference(e,n,i){return this.Ds.addReference(i,n),this.xs.delete(i.toString()),J.resolve()}removeReference(e,n,i){return this.Ds.removeReference(i,n),this.xs.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.xs.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ds.cs(n.targetId).forEach(r=>this.xs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.xs.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}vs(){this.Cs=new Set}Vs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.xs,i=>{const r=Ee.fromPath(i);return this.ks(e,r).next(s=>{s||n.removeEntry(r)})}).next(()=>(this.Cs=null,n.apply(e)))}updateLimboDocument(e,n){return this.ks(e,n).next(i=>{i?this.xs.delete(n.toString()):this.xs.add(n.toString())})}Ps(e){return 0}ks(e,n){return J.or([()=>J.resolve(this.Ds.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ss(e,n)])}}class u_{constructor(){this.activeTargetIds=zg()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LS{constructor(){this.yi=new u_,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,n,i){this.pi[e]=n}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new u_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{Ti(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.Fi=n+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,n,i,r){const s=this.Bi(e,n);de("RestConnection","Sending: ",s,i);const o={};return this.Ui(o,r),this.qi(e,s,o,i).then(a=>(de("RestConnection","Received: ",a),a),a=>{throw fg("RestConnection",`${e} failed with error: `,a,"url: ",s,"request:",i),a})}Ki(e,n,i,r){return this.Li(e,n,i,r)}Ui(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+ps,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(const i in n.authHeaders)n.authHeaders.hasOwnProperty(i)&&(e[i]=n.authHeaders[i])}Bi(e,n){const i=MS[e];return`${this.Fi}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,n,i,r){return new Promise((s,o)=>{const a=new sC;a.listenOnce(nC.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Sh.NO_ERROR:const c=a.getResponseJson();de("Connection","XHR received:",JSON.stringify(c)),s(c);break;case Sh.TIMEOUT:de("Connection",'RPC "'+e+'" timed out'),o(new ee(x.DEADLINE_EXCEEDED,"Request time out"));break;case Sh.HTTP_ERROR:const u=a.getStatus();if(de("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(p)>=0?p:x.UNKNOWN}(h.status);o(new ee(d,h.message))}else o(new ee(x.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ee(x.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{de("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(r);a.send(n,"POST",l,i,15)})}ji(e,n){const i=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=eC(),s=tC(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new rC({})),this.Ui(o.initMessageHeaders,n),Qa()||Lu()||$w()||Wp()||e1()||qp()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=i.join("");de("Connection","Creating WebChannel: "+a,o);const l=r.createWebChannel(a,o);let c=!1,u=!1;const h=new PS({vi:f=>{u?de("Connection","Not sending because WebChannel is closed:",f):(c||(de("Connection","Opening WebChannel transport."),l.open(),c=!0),de("Connection","WebChannel sending:",f),l.send(f))},Vi:()=>l.close()}),d=(f,p,g)=>{f.listen(p,m=>{try{g(m)}catch(y){setTimeout(()=>{throw y},0)}})};return d(l,kl.EventType.OPEN,()=>{u||de("Connection","WebChannel transport opened.")}),d(l,kl.EventType.CLOSE,()=>{u||(u=!0,de("Connection","WebChannel transport closed"),h.$i())}),d(l,kl.EventType.ERROR,f=>{u||(u=!0,fg("Connection","WebChannel transport errored:",f),h.$i(new ee(x.UNAVAILABLE,"The operation could not be completed")))}),d(l,kl.EventType.MESSAGE,f=>{var p;if(!u){const g=f.data[0];yt(!!g);const m=g,y=m.error||((p=m[0])===null||p===void 0?void 0:p.error);if(y){de("Connection","WebChannel received error:",y);const w=y.status;let b=function(O){const C=jt[O];if(C!==void 0)return Wg(C)}(w),v=y.message;b===void 0&&(b=x.INTERNAL,v="Unknown error status: "+w+" with message "+y.message),u=!0,h.$i(new ee(b,v)),l.close()}else de("Connection","WebChannel received:",g),h.Oi(g)}}),d(s,iC.STAT_EVENT,f=>{f.stat===ug.PROXY?de("Connection","Detected buffering proxy"):f.stat===ug.NOPROXY&&de("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.ki()},0),h}}function ed(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t){return new KC(t,!0)}class d_{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Oe=e,this.timerId=n,this.Qi=i,this.Wi=r,this.Gi=s,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const n=Math.floor(this.zi+this.Zi()),i=Math.max(0,Date.now()-this.Ji),r=Math.max(0,n-i);r>0&&de("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){this.Hi!==null&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){this.Hi!==null&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,n,i,r,s,o,a){this.Oe=e,this.er=i,this.nr=r,this.sr=s,this.credentialsProvider=o,this.listener=a,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new d_(e,n)}ur(){return this.state===1||this.state===5||this.hr()}hr(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.lr()}async stop(){this.ur()&&await this.close(0)}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&this.rr===null&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}async _r(){if(this.hr())return this.close(0)}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(e,n){this.gr(),this.yr(),this.ar.cancel(),this.ir++,e!==4?this.ar.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Fi(n.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.ar.Yi()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&this.credentialsProvider.invalidateToken(),this.stream!==null&&(this.pr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ci(n)}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),n=this.ir;this.credentialsProvider.getToken().then(i=>{this.ir===n&&this.Er(i)},i=>{e(()=>{const r=new ee(x.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Ir(r)})})}Er(e){const n=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{n(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(i=>{n(()=>this.Ir(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}lr(){this.state=5,this.ar.Xi(async()=>{this.state=0,this.start()})}Ir(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return n=>{this.Oe.enqueueAndForget(()=>this.ir===e?n():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FS extends f_{constructor(e,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s),this.N=r}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const n=YC(this.N,e),i=function(r){if(!("targetChange"in r))return rt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?rt.min():s.readTime?_i(s.readTime):rt.min()}(e);return this.listener.Rr(n,i)}br(e){const n={};n.database=Xh(this.N),n.addTarget=function(r,s){let o;const a=s.target;return o=Dh(a)?{documents:$C(r,a)}:{query:eS(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=Zg(r,s.resumeToken):s.snapshotVersion.compareTo(rt.min())>0&&(o.readTime=Wl(r,s.snapshotVersion.toTimestamp())),o}(this.N,e);const i=nS(this.N,e);i&&(n.labels=i),this.mr(n)}Pr(e){const n={};n.database=Xh(this.N),n.removeTarget=e,this.mr(n)}}class US extends f_{constructor(e,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s),this.N=r,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(e){return this.sr.ji("Write",e)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.vr){this.ar.reset();const n=ZC(e.writeResults,e.commitTime),i=_i(e.commitTime);return this.listener.Dr(i,n)}return yt(!e.writeResults||e.writeResults.length===0),this.vr=!0,this.listener.Cr()}Nr(){const e={};e.database=Xh(this.N),this.mr(e)}Sr(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>JC(this.N,i))};this.mr(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends class{}{constructor(e,n,i){super(),this.credentials=e,this.sr=n,this.N=i,this.kr=!1}$r(){if(this.kr)throw new ee(x.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,n,i){return this.$r(),this.credentials.getToken().then(r=>this.sr.Li(e,n,i,r)).catch(r=>{throw r.name==="FirebaseError"?(r.code===x.UNAUTHENTICATED&&this.credentials.invalidateToken(),r):new ee(x.UNKNOWN,r.toString())})}Ki(e,n,i){return this.$r(),this.credentials.getToken().then(r=>this.sr.Ki(e,n,i,r)).catch(r=>{throw r.name==="FirebaseError"?(r.code===x.UNAUTHENTICATED&&this.credentials.invalidateToken(),r):new ee(x.UNKNOWN,r.toString())})}terminate(){this.kr=!0}}class VS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){this.Or===0&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){this.state==="Online"?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,e==="Online"&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(Fi(n),this.Mr=!1):de("OnlineStateTracker",n)}Kr(){this.Fr!==null&&(this.Fr.cancel(),this.Fr=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=s,this.zr.Ti(o=>{i.enqueueAndForget(async()=>{Ar(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=Le(a);l.Wr.add(4),await Ko(l),l.Hr.set("Unknown"),l.Wr.delete(4),await zl(l)}(this))})}),this.Hr=new VS(i,r)}}async function zl(t){if(Ar(t))for(const e of t.Gr)await e(!0)}async function Ko(t){for(const e of t.Gr)await e(!1)}function p_(t,e){const n=Le(t);n.Qr.has(e.targetId)||(n.Qr.set(e.targetId,e),id(n)?nd(n):Cs(n).hr()&&td(n,e))}function m_(t,e){const n=Le(t),i=Cs(n);n.Qr.delete(e),i.hr()&&g_(n,e),n.Qr.size===0&&(i.hr()?i.wr():Ar(n)&&n.Hr.set("Unknown"))}function td(t,e){t.Jr.Y(e.targetId),Cs(t).br(e)}function g_(t,e){t.Jr.Y(e),Cs(t).Pr(e)}function nd(t){t.Jr=new WC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>t.Qr.get(e)||null}),Cs(t).start(),t.Hr.Lr()}function id(t){return Ar(t)&&!Cs(t).ur()&&t.Qr.size>0}function Ar(t){return Le(t).Wr.size===0}function __(t){t.Jr=void 0}async function BS(t){t.Qr.forEach((e,n)=>{td(t,e)})}async function HS(t,e){__(t),id(t)?(t.Hr.qr(e),nd(t)):t.Hr.set("Unknown")}async function qS(t,e,n){if(t.Hr.set("Online"),e instanceof Xg&&e.state===2&&e.cause)try{await async function(i,r){const s=r.cause;for(const o of r.targetIds)i.Qr.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Qr.delete(o),i.Jr.removeTarget(o))}(t,e)}catch(i){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Kl(t,i)}else if(e instanceof ql?t.Jr.rt(e):e instanceof Kg?t.Jr.ft(e):t.Jr.at(e),!n.isEqual(rt.min()))try{const i=await l_(t.localStore);n.compareTo(i)>=0&&await function(r,s){const o=r.Jr._t(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.Qr.get(l);c&&r.Qr.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=r.Qr.get(a);if(!l)return;r.Qr.set(a,l.withResumeToken(hn.EMPTY_BYTE_STRING,l.snapshotVersion)),g_(r,a);const c=new Sr(l.target,a,1,l.sequenceNumber);td(r,c)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){de("RemoteStore","Failed to raise snapshot:",i),await Kl(t,i)}}async function Kl(t,e,n){if(!Wo(e))throw e;t.Wr.add(1),await Ko(t),t.Hr.set("Offline"),n||(n=()=>l_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await n(),t.Wr.delete(1),await zl(t)})}function v_(t,e){return e().catch(n=>Kl(t,n,e))}async function Xl(t){const e=Le(t),n=xi(e);let i=e.jr.length>0?e.jr[e.jr.length-1].batchId:-1;for(;WS(e);)try{const r=await IS(e.localStore,i);if(r===null){e.jr.length===0&&n.wr();break}i=r.batchId,GS(e,r)}catch(r){await Kl(e,r)}y_(e)&&b_(e)}function WS(t){return Ar(t)&&t.jr.length<10}function GS(t,e){t.jr.push(e);const n=xi(t);n.hr()&&n.Vr&&n.Sr(e.mutations)}function y_(t){return Ar(t)&&!xi(t).ur()&&t.jr.length>0}function b_(t){xi(t).start()}async function zS(t){xi(t).Nr()}async function KS(t){const e=xi(t);for(const n of t.jr)e.Sr(n.mutations)}async function XS(t,e,n){const i=t.jr.shift(),r=Qh.from(i,e,n);await v_(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Xl(t)}async function QS(t,e){e&&xi(t).Vr&&await async function(n,i){if(r=i.code,UC(r)&&r!==x.ABORTED){const s=n.jr.shift();xi(n).dr(),await v_(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Xl(n)}var r}(t,e),y_(t)&&b_(t)}async function YS(t,e){const n=Le(t);e?(n.Wr.delete(2),await zl(n)):e||(n.Wr.add(2),await Ko(n),n.Hr.set("Unknown"))}function Cs(t){return t.Yr||(t.Yr=function(e,n,i){const r=Le(e);return r.$r(),new FS(n,r.sr,r.credentials,r.N,i)}(t.datastore,t.asyncQueue,{Si:BS.bind(null,t),Ci:HS.bind(null,t),Rr:qS.bind(null,t)}),t.Gr.push(async e=>{e?(t.Yr.dr(),id(t)?nd(t):t.Hr.set("Unknown")):(await t.Yr.stop(),__(t))})),t.Yr}function xi(t){return t.Xr||(t.Xr=function(e,n,i){const r=Le(e);return r.$r(),new US(n,r.sr,r.credentials,r.N,i)}(t.datastore,t.asyncQueue,{Si:zS.bind(null,t),Ci:QS.bind(null,t),Cr:KS.bind(null,t),Dr:XS.bind(null,t)}),t.Gr.push(async e=>{e?(t.Xr.dr(),await Xl(t)):(await t.Xr.stop(),t.jr.length>0&&(de("RemoteStore",`Stopping write stream with ${t.jr.length} pending writes`),t.jr=[]))})),t.Xr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new rd(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sd(t,e){if(Fi("AsyncQueue",`${e}: ${t}`),Wo(t))return new ee(x.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ee.comparator(n.key,i.key):(n,i)=>Ee.comparator(n.key,i.key),this.keyedMap=qh(),this.sortedSet=new fn(this.comparator)}static emptySet(e){return new Ss(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ss)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ss;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(){this.Zr=new fn(Ee.comparator)}track(e){const n=e.doc.key,i=this.Zr.get(n);i?e.type!==0&&i.type===3?this.Zr=this.Zr.insert(n,e):e.type===3&&i.type!==1?this.Zr=this.Zr.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Zr=this.Zr.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Zr=this.Zr.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Zr=this.Zr.remove(n):e.type===1&&i.type===2?this.Zr=this.Zr.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Zr=this.Zr.insert(n,{type:2,doc:e.doc}):Re():this.Zr=this.Zr.insert(n,e)}eo(){const e=[];return this.Zr.inorderTraversal((n,i)=>{e.push(i)}),e}}class As{constructor(e,n,i,r,s,o,a,l){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,i,r){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new As(e,n,Ss.emptySet(n),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(){this.no=void 0,this.listeners=[]}}class ZS{constructor(){this.queries=new zo(e=>Og(e),Dl),this.onlineState="Unknown",this.so=new Set}}async function od(t,e){const n=Le(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new JS),r)try{s.no=await n.onListen(i)}catch(o){const a=sd(o,`Initialization of query '${Vh(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.listeners.push(e),e.io(n.onlineState),s.no&&e.ro(s.no)&&ld(n)}async function ad(t,e){const n=Le(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function $S(t,e){const n=Le(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.ro(r)&&(i=!0);o.no=r}}i&&ld(n)}function eA(t,e,n){const i=Le(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function ld(t){t.so.forEach(e=>{e.next()})}class cd{constructor(e,n,i){this.query=e,this.oo=n,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=i||{}}ro(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new As(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.co?this.uo(e)&&(this.oo.next(e),n=!0):this.ho(e,this.onlineState)&&(this.lo(e),n=!0),this.ao=e,n}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let n=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),n=!0),n}ho(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.fo||!i)&&(!e.docs.isEmpty()||n==="Offline")}uo(e){if(e.docChanges.length>0)return!0;const n=this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}lo(e){e=As.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.key=e}}class w_{constructor(e){this.key=e}}class tA{constructor(e,n){this.query=e,this.po=n,this.To=null,this.current=!1,this.Eo=It(),this.mutatedKeys=It(),this.Io=Rg(e),this.Ao=new Ss(this.Io)}get Ro(){return this.po}bo(e,n){const i=n?n.Po:new E_,r=n?n.Ao:this.Ao;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=Ml(this.query)&&r.size===this.query.limit?r.last():null,c=Pl(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const d=r.get(u),f=Fl(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;d&&f?d.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),m=!0):this.vo(d,f)||(i.track({type:2,doc:f}),m=!0,(l&&this.Io(f,l)>0||c&&this.Io(f,c)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),m=!0):d&&!f&&(i.track({type:1,doc:d}),m=!0,(l||c)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),Ml(this.query)||Pl(this.query))for(;o.size>this.query.limit;){const u=Ml(this.query)?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Ao:o,Po:i,Ln:a,mutatedKeys:s}}vo(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const s=e.Po.eo();s.sort((c,u)=>function(h,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return f(h)-f(d)}(c.type,u.type)||this.Io(c.doc,u.doc)),this.Vo(i);const o=n?this.So():[],a=this.Eo.size===0&&this.current?1:0,l=a!==this.To;return this.To=a,s.length!==0||l?{snapshot:new As(this.query,e.Ao,r,s,e.mutatedKeys,a===0,l,!1),Do:o}:{Do:o}}io(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new E_,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(n=>this.po=this.po.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.po=this.po.delete(n)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=It(),this.Ao.forEach(i=>{this.Co(i.key)&&(this.Eo=this.Eo.add(i.key))});const n=[];return e.forEach(i=>{this.Eo.has(i)||n.push(new w_(i))}),this.Eo.forEach(i=>{e.has(i)||n.push(new I_(i))}),n}No(e){this.po=e.Gn,this.Eo=It();const n=this.bo(e.documents);return this.applyChanges(n,!0)}xo(){return As.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,this.To===0)}}class nA{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class iA{constructor(e){this.key=e,this.ko=!1}}class rA{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.$o={},this.Oo=new zo(a=>Og(a),Dl),this.Fo=new Map,this.Mo=new Set,this.Lo=new fn(Ee.comparator),this.Bo=new Map,this.Uo=new Zh,this.qo={},this.Ko=new Map,this.jo=Ts.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return this.Qo===!0}}async function sA(t,e){const n=mA(t);let i,r;const s=n.Oo.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.xo();else{const o=await wS(n.localStore,wr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await oA(n,e,i,a==="current"),n.isPrimaryClient&&p_(n.remoteStore,o)}return r}async function oA(t,e,n,i){t.Wo=(u,h,d)=>async function(f,p,g,m){let y=p.view.bo(g);y.Ln&&(y=await c_(f.localStore,p.query,!1).then(({documents:v})=>p.view.bo(v,y)));const w=m&&m.targetChanges.get(p.targetId),b=p.view.applyChanges(y,f.isPrimaryClient,w);return O_(f,p.targetId,b.Do),b.snapshot}(t,u,h,d);const r=await c_(t.localStore,e,!0),s=new tA(e,r.Gn),o=s.bo(r.documents),a=qo.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline"),l=s.applyChanges(o,t.isPrimaryClient,a);O_(t,n,l.Do);const c=new nA(e,n,s);return t.Oo.set(e,c),t.Fo.has(n)?t.Fo.get(n).push(e):t.Fo.set(n,[e]),l.snapshot}async function aA(t,e){const n=Le(t),i=n.Oo.get(e),r=n.Fo.get(i.targetId);if(r.length>1)return n.Fo.set(i.targetId,r.filter(s=>!Dl(s,e))),void n.Oo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Jh(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),m_(n.remoteStore,i.targetId),ud(n,i.targetId)}).catch(Go)):(ud(n,i.targetId),await Jh(n.localStore,i.targetId,!0))}async function lA(t,e,n){const i=gA(t);try{const r=await function(s,o){const a=Le(s),l=Vn.now(),c=o.reduce((h,d)=>h.add(d.key),It());let u;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>a.Qn.Pn(h,c).next(d=>{u=d;const f=[];for(const p of o){const g=PC(p,u.get(p.key));g!=null&&f.push(new Tr(p.key,g,wg(g.value.mapValue),$n.exists(!0)))}return a.In.addMutationBatch(h,l,f,o)})).then(h=>(h.applyToLocalDocumentSet(u),{batchId:h.batchId,changes:u}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let l=s.qo[s.currentUser.toKey()];l||(l=new fn(ct)),l=l.insert(o,a),s.qo[s.currentUser.toKey()]=l}(i,r.batchId,n),await Xo(i,r.changes),await Xl(i.remoteStore)}catch(r){const s=sd(r,"Failed to persist write");n.reject(s)}}async function T_(t,e){const n=Le(t);try{const i=await bS(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Bo.get(s);o&&(yt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.ko=!0:r.modifiedDocuments.size>0?yt(o.ko):r.removedDocuments.size>0&&(yt(o.ko),o.ko=!1))}),await Xo(n,i,e)}catch(i){await Go(i)}}function C_(t,e,n){const i=Le(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Oo.forEach((s,o)=>{const a=o.view.io(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=Le(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const h of u.listeners)h.io(o)&&(l=!0)}),l&&ld(a)}(i.eventManager,e),r.length&&i.$o.Rr(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function cA(t,e,n){const i=Le(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Bo.get(e),s=r&&r.key;if(s){let o=new fn(Ee.comparator);o=o.insert(s,dn.newNoDocument(s,rt.min()));const a=It().add(s),l=new Hl(rt.min(),new Map,new an(ct),o,a);await T_(i,l),i.Lo=i.Lo.remove(s),i.Bo.delete(e),hd(i)}else await Jh(i.localStore,e,!1).then(()=>ud(i,e,n)).catch(Go)}async function uA(t,e){const n=Le(t),i=e.batch.batchId;try{const r=await yS(n.localStore,e);A_(n,i,null),S_(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Xo(n,r)}catch(r){await Go(r)}}async function hA(t,e,n){const i=Le(t);try{const r=await function(s,o){const a=Le(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.In.lookupMutationBatch(l,o).next(u=>(yt(u!==null),c=u.keys(),a.In.removeMutationBatch(l,u))).next(()=>a.In.performConsistencyCheck(l)).next(()=>a.Qn.Pn(l,c))})}(i.localStore,e);A_(i,e,n),S_(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Xo(i,r)}catch(r){await Go(r)}}function S_(t,e){(t.Ko.get(e)||[]).forEach(n=>{n.resolve()}),t.Ko.delete(e)}function A_(t,e,n){const i=Le(t);let r=i.qo[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.qo[i.currentUser.toKey()]=r}}function ud(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Fo.get(e))t.Oo.delete(i),n&&t.$o.Go(i,n);t.Fo.delete(e),t.isPrimaryClient&&t.Uo.cs(e).forEach(i=>{t.Uo.containsKey(i)||k_(t,i)})}function k_(t,e){t.Mo.delete(e.path.canonicalString());const n=t.Lo.get(e);n!==null&&(m_(t.remoteStore,n),t.Lo=t.Lo.remove(e),t.Bo.delete(n),hd(t))}function O_(t,e,n){for(const i of n)i instanceof I_?(t.Uo.addReference(i.key,e),dA(t,i)):i instanceof w_?(de("SyncEngine","Document no longer in limbo: "+i.key),t.Uo.removeReference(i.key,e),t.Uo.containsKey(i.key)||k_(t,i.key)):Re()}function dA(t,e){const n=e.key,i=n.path.canonicalString();t.Lo.get(n)||t.Mo.has(i)||(de("SyncEngine","New document in limbo: "+n),t.Mo.add(i),hd(t))}function hd(t){for(;t.Mo.size>0&&t.Lo.size<t.maxConcurrentLimboResolutions;){const e=t.Mo.values().next().value;t.Mo.delete(e);const n=new Ee(St.fromString(e)),i=t.jo.next();t.Bo.set(i,new iA(n)),t.Lo=t.Lo.insert(n,i),p_(t.remoteStore,new Sr(wr(Nl(n.path)),i,2,kh.T))}}async function Xo(t,e,n){const i=Le(t),r=[],s=[],o=[];i.Oo.isEmpty()||(i.Oo.forEach((a,l)=>{o.push(i.Wo(l,e,n).then(c=>{if(c){i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),r.push(c);const u=Yh.kn(l.targetId,c);s.push(u)}}))}),await Promise.all(o),i.$o.Rr(r),await async function(a,l){const c=Le(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>J.forEach(l,h=>J.forEach(h.Nn,d=>c.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>J.forEach(h.xn,d=>c.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!Wo(u))throw u;de("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const d=c.Un.get(h),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);c.Un=c.Un.insert(h,p)}}}(i.localStore,s))}async function fA(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const i=await a_(n.localStore,e);n.currentUser=e,function(r,s){r.Ko.forEach(o=>{o.forEach(a=>{a.reject(new ee(x.CANCELLED,s))})}),r.Ko.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Xo(n,i.Wn)}}function pA(t,e){const n=Le(t),i=n.Bo.get(e);if(i&&i.ko)return It().add(i.key);{let r=It();const s=n.Fo.get(e);if(!s)return r;for(const o of s){const a=n.Oo.get(o);r=r.unionWith(a.view.Ro)}return r}}function mA(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=T_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cA.bind(null,e),e.$o.Rr=$S.bind(null,e.eventManager),e.$o.Go=eA.bind(null,e.eventManager),e}function gA(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hA.bind(null,e),e}class _A{constructor(){this.synchronizeTabs=!1}async initialize(e){this.N=Gl(e.databaseInfo.databaseId),this.sharedClientState=this.Ho(e),this.persistence=this.Jo(e),await this.persistence.start(),this.gcScheduler=this.Yo(e),this.localStore=this.Xo(e)}Yo(e){return null}Xo(e){return vS(this.persistence,new gS,e.initialUser,this.N)}Jo(e){return new OS($h.Ns,this.N)}Ho(e){return new LS}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class vA{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>C_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fA.bind(null,this.syncEngine),await YS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ZS}createDatastore(e){const n=Gl(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new DS(r));var r;return function(s,o,a){return new xS(s,o,a)}(e.credentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,r=e.asyncQueue,s=a=>C_(this.syncEngine,a,0),o=h_.bt()?new h_:new NS,new jS(n,i,r,s,o);var n,i,r,s,o}createSyncEngine(e,n){return function(i,r,s,o,a,l,c){const u=new rA(i,r,s,o,a,l);return c&&(u.Qo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=Le(e);de("RemoteStore","RemoteStore shutting down."),n.Wr.add(5),await Ko(n),n.zr.shutdown(),n.Hr.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n,i){this.credentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Nn.UNAUTHENTICATED,this.clientId=pg.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(n,async r=>{de("FirestoreClient","Received user=",r.uid),await this.credentialListener(r),this.user=r})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ee(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),e.resolve()}catch(n){const i=sd(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function bA(t,e){t.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await a_(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function EA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IA(t);de("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>async function(s,o){const a=Le(s);a.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const l=Ar(a);a.Wr.add(3),await Ko(a),l&&a.Hr.set("Unknown"),await a.remoteSyncer.handleCredentialChange(o),a.Wr.delete(3),await zl(a)}(e.remoteStore,r)),t.onlineComponents=e}async function IA(t){return t.offlineComponents||(de("FirestoreClient","Using default OfflineComponentProvider"),await bA(t,new _A)),t.offlineComponents}async function R_(t){return t.onlineComponents||(de("FirestoreClient","Using default OnlineComponentProvider"),await EA(t,new vA)),t.onlineComponents}function wA(t){return R_(t).then(e=>e.syncEngine)}async function Ql(t){const e=await R_(t),n=e.eventManager;return n.onListen=sA.bind(null,e.syncEngine),n.onUnlisten=aA.bind(null,e.syncEngine),n}function TA(t,e,n={}){const i=new gi;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,l){const c=new dd({next:h=>{s.enqueueAndForget(()=>ad(r,u));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new ee(x.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new ee(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new cd(Nl(o.path),c,{includeMetadataChanges:!0,fo:!0});return od(r,u)}(await Ql(t),t.asyncQueue,e,n,i)),i.promise}function CA(t,e,n={}){const i=new gi;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,l){const c=new dd({next:h=>{s.enqueueAndForget(()=>ad(r,u)),h.fromCache&&a.source==="server"?l.reject(new ee(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new cd(o,c,{includeMetadataChanges:!0,fo:!0});return od(r,u)}(await Ql(t),t.asyncQueue,e,n,i)),i.promise}class SA{constructor(e,n,i,r,s,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Qo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Qo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t,e,n){if(!n)throw new ee(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AA(t,e,n,i){if(e===!0&&i===!0)throw new ee(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function M_(t){if(!Ee.isDocumentKey(t))throw new ee(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function P_(t){if(Ee.isDocumentKey(t))throw new ee(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re()}function Bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yl(t);throw new ee(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,AA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n){this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D_({}),this._settingsFrozen=!1,e instanceof Qo?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ee(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qo(i.options.projectId)}(e))}get app(){if(!this._app)throw new ee(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ee(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D_(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new aC;switch(n.type){case"gapi":const i=n.client;return yt(!(typeof i!="object"||i===null||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new uC(i,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new ee(x.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=L_.get(e);n&&(de("ComponentProvider","Removing Datastore"),L_.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}}class kr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new kr(this.firestore,e,this._query)}}class Vi extends kr{constructor(e,n,i){super(e,n,Nl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Ee(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function tB(t,e,...n){if(t=lt(t),N_("collection","path",e),t instanceof fd){const i=St.fromString(e,...n);return P_(i),new Vi(t,null,i)}{if(!(t instanceof pn||t instanceof Vi))throw new ee(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(St.fromString(e,...n));return P_(i),new Vi(t.firestore,null,i)}}function nB(t,e,...n){if(t=lt(t),arguments.length===1&&(e=pg.I()),N_("doc","path",e),t instanceof fd){const i=St.fromString(e,...n);return M_(i),new pn(t,null,new Ee(i))}{if(!(t instanceof pn||t instanceof Vi))throw new ee(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(St.fromString(e,...n));return M_(i),new pn(t.firestore,t instanceof Vi?t.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new d_(this,"async_queue_retry"),this.Rc=()=>{const n=ed();n&&de("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ar.tr()};const e=ed();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const n=ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const n=new gi;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}async vc(){if(this.mc.length!==0){try{await this.mc[0](),this.mc.shift(),this.ar.reset()}catch(e){if(!Wo(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.mc.length>0&&this.ar.Xi(()=>this.vc())}}Pc(e){const n=this._c.then(()=>(this.Ec=!0,e().catch(i=>{this.Tc=i,this.Ec=!1;const r=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(i);throw Fi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Ec=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.bc(),this.Ac.indexOf(e)>-1&&(n=0);const r=rd.createAndSchedule(this,e,n,i,s=>this.Vc(s));return this.yc.push(r),r}bc(){this.Tc&&Re()}verifyOperationInProgress(){}async Sc(){let e;do e=this._c,await e;while(e!==this._c)}Dc(e){for(const n of this.yc)if(n.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.yc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const n=this.yc.indexOf(e);this.yc.splice(n,1)}}function F_(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const i=e;for(const r of n)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}class vi extends fd{constructor(e,n){super(e,n),this.type="firestore",this._queue=new kA,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||U_(this),this._firestoreClient.terminate()}}function iB(t=mo()){return ls(t,"firestore").getImmediate()}function Yo(t){return t._firestoreClient||U_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function U_(t){var e;const n=t._freezeSettings(),i=function(r,s,o,a){return new SA(r,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new yA(t._credentials,t._queue,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ks(hn.fromBase64String(e))}catch(n){throw new ee(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ks(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=/^__.*__$/;class RA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new jl(e,this.data,n,this.fieldTransforms)}}class x_{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function V_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Jl{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.N=i,this.ignoreUndefinedProperties=r,s===void 0&&this.xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(e){return new Jl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.$c({path:i,Fc:!1});return r.Mc(e),r}Lc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.$c({path:i,Fc:!1});return r.xc(),r}Bc(e){return this.$c({path:void 0,Fc:!0})}Uc(e){return $l(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(e.length===0)throw this.Uc("Document fields must not be empty");if(V_(this.kc)&&OA.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}class LA{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.N=i||Gl(e)}jc(e,n,i,r=!1){return new Jl({kc:e,methodName:n,Kc:i,path:Mn.emptyPath(),Fc:!1,qc:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Zl(t){const e=t._freezeSettings(),n=Gl(t._databaseId);return new LA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function j_(t,e,n,i,r,s={}){const o=t.jc(s.merge||s.mergeFields?2:0,e,n,r);gd("Data must be an object, but it was:",o,i);const a=q_(i,o);let l,c;if(s.merge)l=new Do(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=_d(e,h,n);if(!o.contains(d))throw new ee(x.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);G_(u,d)||u.push(d)}l=new Do(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new RA(new jn(a),l,c)}class Zo extends Os{_toFieldTransform(e){if(e.kc!==2)throw e.kc===1?e.Uc(`${this._methodName}() can only appear at the top level of your update data`):e.Uc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zo}}function NA(t,e,n){return new Jl({kc:3,Kc:e.settings.Kc,methodName:t._methodName,Fc:n},e.databaseId,e.N,e.ignoreUndefinedProperties)}class md extends Os{_toFieldTransform(e){return new jh(e.path,new jo)}isEqual(e){return e instanceof md}}class MA extends Os{constructor(e,n){super(e),this.Qc=n}_toFieldTransform(e){const n=NA(this,e,!0),i=this.Qc.map(s=>Rs(s,n)),r=new Es(i);return new jh(e.path,r)}isEqual(e){return this===e}}class PA extends Os{constructor(e,n){super(e),this.Wc=n}_toFieldTransform(e){const n=new Ho(e.N,Mg(e.N,this.Wc));return new jh(e.path,n)}isEqual(e){return this===e}}function B_(t,e,n,i){const r=t.jc(1,e,n);gd("Data must be an object, but it was:",r,i);const s=[],o=jn.empty();Er(i,(l,c)=>{const u=vd(e,l,n);c=lt(c);const h=r.Lc(u);if(c instanceof Zo)s.push(u);else{const d=Rs(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new Do(s);return new x_(o,a,r.fieldTransforms)}function H_(t,e,n,i,r,s){const o=t.jc(1,e,n),a=[_d(e,i,n)],l=[r];if(s.length%2!=0)throw new ee(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(_d(e,s[d])),l.push(s[d+1]);const c=[],u=jn.empty();for(let d=a.length-1;d>=0;--d)if(!G_(c,a[d])){const f=a[d];let p=l[d];p=lt(p);const g=o.Lc(f);if(p instanceof Zo)c.push(f);else{const m=Rs(p,g);m!=null&&(c.push(f),u.set(f,m))}}const h=new Do(c);return new x_(u,h,o.fieldTransforms)}function DA(t,e,n,i=!1){return Rs(n,t.jc(i?4:3,e))}function Rs(t,e){if(W_(t=lt(t)))return gd("Unsupported field value:",e,t),q_(t,e);if(t instanceof Os)return function(n,i){if(!V_(i.kc))throw i.Uc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Uc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&e.kc!==4)throw e.Uc("Nested arrays are not supported");return function(n,i){const r=[];let s=0;for(const o of n){let a=Rs(o,i.Bc(s));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(t,e)}return function(n,i){if((n=lt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Mg(i.N,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Vn.fromDate(n);return{timestampValue:Wl(i.N,r)}}if(n instanceof Vn){const r=new Vn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Wl(i.N,r)}}if(n instanceof pd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ks)return{bytesValue:Zg(i.N,n._byteString)};if(n instanceof pn){const r=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(r))throw i.Uc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Wh(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.Uc(`Unsupported field value: ${Yl(n)}`)}(t,e)}function q_(t,e){const n={};return gg(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(t,(i,r)=>{const s=Rs(r,e.Oc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function W_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vn||t instanceof pd||t instanceof ks||t instanceof pn||t instanceof Os)}function gd(t,e,n){if(!W_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=Yl(n);throw i==="an object"?e.Uc(t+" a custom object"):e.Uc(t+" "+i)}}function _d(t,e,n){if((e=lt(e))instanceof Jo)return e._internalPath;if(typeof e=="string")return vd(t,e);throw $l("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const FA=new RegExp("[~\\*/\\[\\]]");function vd(t,e,n){if(e.search(FA)>=0)throw $l(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jo(...e.split("."))._internalPath}catch{throw $l(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $l(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new ee(x.INVALID_ARGUMENT,a+t+l)}function G_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ec("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UA extends z_{data(){return super.data()}}function ec(t,e){return typeof e=="string"?vd(t,e):e instanceof Jo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class K_ extends z_{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ec("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class tc extends K_{data(e={}){return super.data(e)}}class X_{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new $o(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new tc(this._firestore,this._userDataWriter,i.key,i,new $o(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new tc(i._firestore,i._userDataWriter,o.doc.key,o.doc,new $o(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new tc(i._firestore,i._userDataWriter,o.doc.key,o.doc,new $o(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:xA(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){if(Pl(t)&&t.explicitOrderBy.length===0)throw new ee(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Y_{}function rB(t,...e){for(const n of e)t=n._apply(t);return t}class VA extends Y_{constructor(e,n,i){super(),this.Gc=e,this.zc=n,this.Hc=i,this.type="where"}_apply(e){const n=Zl(e.firestore),i=function(r,s,o,a,l,c,u){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ee(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on FieldPath.documentId().`);if(c==="in"||c==="not-in"){Z_(u,c);const f=[];for(const p of u)f.push(J_(a,r,p));h={arrayValue:{values:f}}}else h=J_(a,r,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Z_(u,c),h=DA(o,s,u,c==="in"||c==="not-in");const d=In.create(l,c,h);return function(f,p){if(p.v()){const m=xh(f);if(m!==null&&!m.isEqual(p.field))throw new ee(x.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${m.toString()}' and '${p.field.toString()}'`);const y=Uh(f);y!==null&&$_(f,p.field,y)}const g=function(m,y){for(const w of m.filters)if(y.indexOf(w.op)>=0)return w.op;return null}(f,function(m){switch(m){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(g!==null)throw g===p.op?new ee(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`):new ee(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${p.op.toString()}' filters with '${g.toString()}' filters.`)}(r,d),d}(e._query,"where",n,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new kr(e.firestore,e.converter,function(r,s){const o=r.filters.concat([s]);return new bs(r.path,r.collectionGroup,r.explicitOrderBy.slice(),o,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}function sB(t,e,n){const i=e,r=ec("where",t);return new VA(r,i,n)}class jA extends Y_{constructor(e,n){super(),this.Gc=e,this.Jc=n,this.type="orderBy"}_apply(e){const n=function(i,r,s){if(i.startAt!==null)throw new ee(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new ys(r,s);return function(a,l){if(Uh(a)===null){const c=xh(a);c!==null&&$_(a,c,l.field)}}(i,o),o}(e._query,this.Gc,this.Jc);return new kr(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new bs(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function oB(t,e="asc"){const n=e,i=ec("orderBy",t);return new jA(i,n)}function J_(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new ee(x.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!kg(e)&&n.indexOf("/")!==-1)throw new ee(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(St.fromString(n));if(!Ee.isDocumentKey(i))throw new ee(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return bg(t,new Ee(i))}if(n instanceof pn)return bg(t,n._key);throw new ee(x.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yl(n)}.`)}function Z_(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new ee(x.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function $_(t,e,n){if(!n.isEqual(e))throw new ee(x.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{convertValue(e,n="none"){switch(Ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Re()}}convertObject(e,n){const i={};return Er(e.fields,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new pd(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=vg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Fo(e));default:return null}}convertTimestamp(e){const n=Ui(e);return new Vn(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=St.fromString(e);yt(s_(i));const r=new Qo(i.get(1),i.get(3)),s=new Ee(i.popFirst(5));return r.isEqual(n)||Fi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Zl(e)}set(e,n,i){this._verifyNotCommitted();const r=yd(e,this._firestore),s=ev(r.converter,n,i),o=j_(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,$n.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=yd(e,this._firestore);let o;return o=typeof(n=lt(n))=="string"||n instanceof Jo?H_(this._dataReader,"WriteBatch.update",s._key,n,i,r):B_(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,$n.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=yd(e,this._firestore);return this._mutations=this._mutations.concat(new Hh(n._key,$n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yd(t,e){if((t=lt(t)).firestore!==e)throw new ee(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aB(t){t=Bn(t,pn);const e=Bn(t.firestore,vi);return TA(Yo(e),t._key).then(n=>tv(e,t,n))}class bd extends BA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function lB(t){t=Bn(t,kr);const e=Bn(t.firestore,vi),n=Yo(e),i=new bd(e);return Q_(t._query),CA(n,t._query).then(r=>new X_(e,i,t,r))}function cB(t,e,n){t=Bn(t,pn);const i=Bn(t.firestore,vi),r=ev(t.converter,e,n);return nc(i,[j_(Zl(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,$n.none())])}function uB(t,e,n,...i){t=Bn(t,pn);const r=Bn(t.firestore,vi),s=Zl(r);let o;return o=typeof(e=lt(e))=="string"||e instanceof Jo?H_(s,"updateDoc",t._key,e,n,i):B_(s,"updateDoc",t._key,e),nc(r,[o.toMutation(t._key,$n.exists(!0))])}function hB(t){return nc(Bn(t.firestore,vi),[new Hh(t._key,$n.none())])}function dB(t,...e){var n,i,r;t=lt(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||F_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(F_(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,u;if(t instanceof pn)c=Bn(t.firestore,vi),u=Nl(t._key.path),l={next:h=>{e[o]&&e[o](tv(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Bn(t,kr);c=Bn(h.firestore,vi),u=h._query;const d=new bd(c);l={next:f=>{e[o]&&e[o](new X_(c,d,h,f))},error:e[o+1],complete:e[o+2]},Q_(t._query)}return function(h,d,f,p){const g=new dd(p),m=new cd(d,g,f);return h.asyncQueue.enqueueAndForget(async()=>od(await Ql(h),m)),()=>{g.ec(),h.asyncQueue.enqueueAndForget(async()=>ad(await Ql(h),m))}}(Yo(c),u,a,l)}function nc(t,e){return function(n,i){const r=new gi;return n.asyncQueue.enqueueAndForget(async()=>lA(await wA(n),i,r)),r.promise}(Yo(t),e)}function tv(t,e,n){const i=n.docs.get(e._key),r=new bd(t);return new K_(t,r,e._key,i,new $o(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(){return new Zo("deleteField")}function pB(){return new md("serverTimestamp")}function mB(...t){return new MA("arrayUnion",t)}function gB(t){return new PA("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _B(t){return Yo(t=Bn(t,vi)),new HA(t,e=>nc(t,e))}(function(t,e=!0){(function(n){ps=n})(pr),Mi(new fi("firestore",(n,{options:i})=>{const r=n.getProvider("app").getImmediate(),s=new vi(r,new lC(n.getProvider("auth-internal")));return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC")),Ln(hg,"3.3.1",t),Ln(hg,"3.3.1","esm2017")})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ed=function(t,e){return Ed=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},Ed(t,e)};function wn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ed(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var bt=function(){return bt=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},bt.apply(this,arguments)};function Id(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Hn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qA(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function WA(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}function nv(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GA=nv,iv=new fo("auth","Firebase",nv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new el("@firebase/auth");function ic(t,...e){rv.logLevel<=Je.ERROR&&rv.error(`Auth (${pr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t,...e){throw wd(t,...e)}function qn(t,...e){return wd(t,...e)}function zA(t,e,n){const i=Object.assign(Object.assign({},GA()),{[e]:n});return new fo("auth","Firebase",i).create(e,{appName:t.name})}function wd(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return iv.create(t,...e)}function ae(t,e,...n){if(!t)throw wd(e,...n)}function bi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ic(e),new Error(e)}function Ei(t,e){t||bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=new Map;function Ii(t){Ei(t instanceof Function,"Expected a class definition");let e=sv.get(t);return e?(Ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sv.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t,e){const n=ls(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Za(s,e!=null?e:{}))return r;yi(r,"already-initialized")}return n.initialize({options:e})}function XA(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ii);(e==null?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ov(){return av()==="http:"||av()==="https:"}function av(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ov()||qp()||"connection"in navigator)?navigator.onLine:!0}function YA(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ei(n>e,"Short delay should be less than long delay!"),this.isMobile=Qa()||Lu()}get(){return QA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t,e){Ei(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new ea(3e4,6e4);function Or(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ji(t,e,n,i,r={}){return lv(t,r,()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=dr(Object.assign({key:t.config.apiKey},o)).slice(1),l=new(Sd.headers());return l.set("Content-Type","application/json"),l.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&l.set("X-Firebase-Locale",t.languageCode),Sd.fetch()(cv(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function lv(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},JA),e);try{const r=new $A(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw sc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw sc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw sc(t,"email-already-in-use",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zA(t,u,c);yi(t,u)}}catch(r){if(r instanceof Ni)throw r;yi(t,"network-request-failed")}}async function rc(t,e,n,i,r={}){const s=await ji(t,e,n,i,r);return"mfaPendingCredential"in s&&yi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function cv(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Cd(t.config,r):`${t.config.apiScheme}://${r}`}class $A{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(qn(this.auth,"timeout")),ZA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=qn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(t,e){return ji(t,"POST","/v1/accounts:delete",e)}async function tk(t,e){return ji(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nk(t,e=!1){const n=lt(t),i=await n.getIdToken(e),r=kd(i);ae(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ta(Ad(r.auth_time)),issuedAtTime:ta(Ad(r.iat)),expirationTime:ta(Ad(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ad(t){return Number(t)*1e3}function kd(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ic("JWT malformed, contained fewer than 3 sections"),null;try{const r=Ru(n);return r?JSON.parse(r):(ic("Failed to decode base64 JWT payload"),null)}catch(r){return ic("Caught error parsing JWT payload as JSON",r),null}}function ik(t){const e=kd(t);return ae(e,"internal-error"),ae(typeof e.exp!="undefined","internal-error"),ae(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ni&&rk(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function rk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ta(this.lastLoginAt),this.creationTime=ta(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await na(t,tk(n,{idToken:i}));ae(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=((e=s.providerUserInfo)===null||e===void 0?void 0:e.length)?lk(s.providerUserInfo):[],a=ak(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a==null?void 0:a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new uv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function ok(t){const e=lt(t);await oc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ak(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function lk(t){return t.map(e=>{var{providerId:n}=e,i=Id(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(t,e){const n=await lv(t,{},()=>{const i=dr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=cv(t,r,"/v1/token",`key=${s}`);return Sd.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken!="undefined","internal-error"),ae(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):ik(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ae(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await ck(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new ia;return i&&(ae(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ae(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,e){ae(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Rr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Id(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new sk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.metadata=new uv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await na(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nk(this,e)}reload(){return ok(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await oc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await na(this,ek(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:v,isAnonymous:O,providerData:C,stsTokenManager:_}=n;ae(b&&_,e,"internal-error");const I=ia.fromJSON(this.name,_);ae(typeof b=="string",e,"internal-error"),Bi(h,e.name),Bi(d,e.name),ae(typeof v=="boolean",e,"internal-error"),ae(typeof O=="boolean",e,"internal-error"),Bi(f,e.name),Bi(p,e.name),Bi(g,e.name),Bi(m,e.name),Bi(y,e.name),Bi(w,e.name);const K=new Rr({uid:b,auth:e,email:d,emailVerified:v,displayName:h,isAnonymous:O,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:I,createdAt:y,lastLoginAt:w});return C&&Array.isArray(C)&&(K.providerData=C.map(L=>Object.assign({},L))),m&&(K._redirectEventId=m),K}static async _fromIdTokenResponse(e,n,i=!1){const r=new ia;r.updateFromServerResponse(n);const s=new Rr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await oc(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hv.type="NONE";const dv=hv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t,e,n){return`firebase:${t}:${e}:${n}`}class Ls{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=ac(this.userKey,r.apiKey,s),this.fullPersistenceKey=ac("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ls(Ii(dv),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Ii(dv);const o=ac(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Rr._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ls(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ls(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vv(e))return"Blackberry";if(yv(e))return"Webos";if(Od(e))return"Safari";if((e.includes("chrome/")||mv(e))&&!e.includes("edge/"))return"Chrome";if(_v(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function pv(t=Xt()){return/firefox\//i.test(t)}function Od(t=Xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mv(t=Xt()){return/crios\//i.test(t)}function gv(t=Xt()){return/iemobile/i.test(t)}function _v(t=Xt()){return/android/i.test(t)}function vv(t=Xt()){return/blackberry/i.test(t)}function yv(t=Xt()){return/webos/i.test(t)}function lc(t=Xt()){return/iphone|ipad|ipod/i.test(t)}function uk(t=Xt()){var e;return lc(t)&&!!((e=window.navigator)===null||e===void 0?void 0:e.standalone)}function hk(){return Wp()&&document.documentMode===10}function bv(t=Xt()){return lc(t)||_v(t)||yv(t)||vv(t)||/windows phone/i.test(t)||gv(t)}function dk(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t,e=[]){let n;switch(t){case"Browser":n=fv(Xt());break;case"Worker":n=`${fv(Xt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pr}/${i}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iv(this),this.idTokenSubscription=new Iv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iv,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ii(n)),this._initializationPromise=this.queue(async()=>{var i,r;this._deleted||(this.persistenceManager=await Ls.create(this,e),!this._deleted&&(((i=this._popupRedirectResolver)===null||i===void 0?void 0:i._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)))}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var n;let i=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=i==null?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);(!r||r===s)&&(o==null?void 0:o.user)&&(i=o.user)}return i?i._redirectEventId?(ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)):this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oc(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?lt(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ii(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ii(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await Ls.create(this,[Ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ev(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function ra(t){return lt(t)}class Iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=a1(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bi("not implemented")}_getIdTokenResponse(e){return bi("not implemented")}_linkToIdToken(e,n){return bi("not implemented")}_getReauthenticationResolver(e){return bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ns(t,e){return rc(t,"POST","/v1/accounts:signInWithIdp",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="http://localhost";class Lr extends Rd{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){const n=new Lr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Id(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Lr(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ns(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ns(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ns(e,n)}buildRequest(){const e={requestUri:pk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dr(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(t,e){return ji(t,"POST","/v1/accounts:sendVerificationCode",Or(t,e))}async function gk(t,e){return rc(t,"POST","/v1/accounts:signInWithPhoneNumber",Or(t,e))}async function _k(t,e){const n=await rc(t,"POST","/v1/accounts:signInWithPhoneNumber",Or(t,e));if(n.temporaryProof)throw sc(t,"account-exists-with-different-credential",n);return n}const vk={USER_NOT_FOUND:"user-not-found"};async function yk(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return rc(t,"POST","/v1/accounts:signInWithPhoneNumber",Or(t,n),vk)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Rd{constructor(e){super("phone","phone");this.params=e}static _fromVerification(e,n){return new sa({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new sa({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return gk(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return _k(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return yk(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new sa({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends wv{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends oa{constructor(){super("facebook.com")}static credential(e){return Lr._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends oa{constructor(){super("google.com");this.addScope("profile")}static credential(e,n){return Lr._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return qi.credential(n,i)}catch{return null}}}qi.GOOGLE_SIGN_IN_METHOD="google.com";qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends oa{constructor(){super("github.com")}static credential(e){return Lr._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends oa{constructor(){super("twitter.com")}static credential(e,n){return Lr._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Gi.credential(n,i)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Rr._fromIdTokenResponse(e,i,r),o=Tv(i);return new Ms({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Tv(i);return new Ms({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Tv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends Ni{constructor(e,n,i,r){var s;super(n.code,n.message);this.operationType=i,this.user=r,Object.setPrototypeOf(this,cc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new cc(e,n,i,r)}}function Cv(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cc._fromErrorAndOperation(t,s,e,i):s})}async function bk(t,e,n=!1){const i=await na(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ms._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await na(t,Cv(i,r,e,t),n);ae(s.idToken,i,"internal-error");const o=kd(s.idToken);ae(o,i,"internal-error");const{sub:a}=o;return ae(t.uid===a,i,"user-mismatch"),Ms._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&yi(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sv(t,e,n=!1){const i="signIn",r=await Cv(t,i,e),s=await Ms._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function Ik(t,e){return Sv(ra(t),e)}function vB(t,e,n,i){return lt(t).onAuthStateChanged(e,n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t,e){return ji(t,"POST","/v2/accounts/mfaEnrollment:start",Or(t,e))}const uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uc,"1"),this.storage.removeItem(uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(){const t=Xt();return Od(t)||lc(t)}const Ck=1e3,Sk=10;class kv extends Av{constructor(){super(()=>window.localStorage,"LOCAL");this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Tk()&&dk(),this.fallbackToPolling=bv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);hk()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Sk):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Ck)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kv.type="LOCAL";const Ak=kv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends Av{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ov.type="SESSION";const Rv=Ov;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new hc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o==null?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await kk(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Ld("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return window}function Rk(t){qt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(){return typeof qt().WorkerGlobalScope!="undefined"&&typeof qt().importScripts=="function"}async function Lk(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Mk(){return Nd()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="firebaseLocalStorageDb",Pk=1,dc="firebaseLocalStorage",Nv="fbase_key";class aa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fc(t,e){return t.transaction([dc],e?"readwrite":"readonly").objectStore(dc)}function Dk(){const t=indexedDB.deleteDatabase(Lv);return new aa(t).toPromise()}function Md(){const t=indexedDB.open(Lv,Pk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(dc,{keyPath:Nv})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(dc)?e(i):(i.close(),await Dk(),e(await Md()))})})}async function Mv(t,e,n){const i=fc(t,!0).put({[Nv]:e,value:n});return new aa(i).toPromise()}async function Fk(t,e){const n=fc(t,!1).get(e),i=await new aa(n).toPromise();return i===void 0?null:i.value}function Pv(t,e){const n=fc(t,!0).delete(e);return new aa(n).toPromise()}const Uk=800,xk=3;class Dv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Md(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>xk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hc._getInstance(Mk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Lk(),!this.activeServiceWorker)return;this.sender=new Ok(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);!i||((e=i[0])===null||e===void 0?void 0:e.fulfilled)&&((n=i[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Md();return await Mv(e,uc,"1"),await Pv(e,uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Mv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Fk(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=fc(r,!1).getAll();return new aa(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Uk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dv.type="LOCAL";const Vk=Dv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t,e){return ji(t,"POST","/v2/accounts/mfaSignIn:start",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(t){return(await ji(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Fv(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=qn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",Hk().appendChild(i)})}function Uv(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=500,Wk=6e4,pc=1e12;class Gk{constructor(e){this.auth=e,this.counter=pc,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new zk(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;const i=e||pc;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;const i=e||pc;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const i=e||pc;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""}}class zk{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;ae(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Kk(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Wk)},qk))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Kk(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=Uv("rcb"),Xk=new ea(3e4,6e4),Qk="https://www.google.com/recaptcha/api.js?";class Yk{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!qt().grecaptcha}load(e,n=""){return ae(Jk(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(qt().grecaptcha):new Promise((i,r)=>{const s=qt().setTimeout(()=>{r(qn(e,"network-request-failed"))},Xk.get());qt()[Pd]=()=>{qt().clearTimeout(s),delete qt()[Pd];const a=qt().grecaptcha;if(!a){r(qn(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const h=l(c,u);return this.counter++,h},this.hostLanguage=n,i(a)};const o=`${Qk}?${dr({onload:Pd,render:"explicit",hl:n})}`;Fv(o).catch(()=>{clearTimeout(s),r(qn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!qt().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Jk(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Zk{async load(e){return new Gk(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="recaptcha",$k={theme:"light",type:"image"};class yB{constructor(e,n=Object.assign({},$k),i){this.parameters=n,this.type=xv,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ra(i),this.isInvisible=this.parameters.size==="invisible",ae(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment");const r=typeof e=="string"?document.getElementById(e):e;ae(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zk:new Yk,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=o=>{!o||(this.tokenChangeListeners.delete(s),r(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=qt()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ae(ov()&&!Nd(),this.auth,"internal-error"),await eO(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Bk(this.auth);ae(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function eO(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=sa._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function bB(t,e,n){const i=ra(t),r=await nO(i,e,lt(n));return new tO(r,s=>Ik(i,s))}async function nO(t,e,n){var i;const r=await n.verify();try{ae(typeof r=="string",t,"argument-error"),ae(n.type===xv,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return ae(o.type==="enroll",t,"internal-error"),(await wk(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{ae(o.type==="signin",t,"internal-error");const a=((i=s.multiFactorHint)===null||i===void 0?void 0:i.uid)||s.multiFactorUid;return ae(a,t,"missing-multi-factor-info"),(await jk(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await mk(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t,e){return e?Ii(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends Rd{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return Ns(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ns(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ns(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rO(t){return Sv(t.auth,new Dd(t),t.bypassAuthState)}function sO(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),Ek(n,new Dd(t),t.bypassAuthState)}async function oO(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),bk(n,new Dd(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rO;case"linkViaPopup":case"linkViaRedirect":return oO;case"reauthViaPopup":case"reauthViaRedirect":return sO;default:yi(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=new ea(2e3,1e4);class Ps extends Vv{constructor(e,n,i,r,s){super(e,n,r,s);this.provider=i,this.authWindow=null,this.pollId=null,Ps.currentPopupAction&&Ps.currentPopupAction.cancel(),Ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=Ld();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0?void 0:i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,aO.get())};e()}}Ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="pendingRedirect",Fd=new Map;class cO extends Vv{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i);this.eventId=null}async execute(){let e=Fd.get(this.auth._key());if(!e){try{const i=await uO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Fd.set(this.auth._key(),e)}return this.bypassAuthState||Fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uO(t,e){const n=dO(e),i=hO(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function hO(t){return Ii(t._redirectPersistence)}function dO(t){return ac(lO,t.config.apiKey,t.name)}async function fO(t,e,n=!1){const i=ra(t),r=iO(i,e),o=await new cO(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=10*60*1e3;class mO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Bv(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pO&&this.cachedEventUids.clear(),this.cachedEventUids.has(jv(e))}saveEventToCache(e){this.cachedEventUids.add(jv(e)),this.lastProcessedEventTime=Date.now()}}function jv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Bv({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(t,e={}){return ji(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yO=/^https?/;async function bO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _O(t);for(const n of e)try{if(EO(n))return}catch{}yi(t,"unauthorized-domain")}function EO(t){const e=Td(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!yO.test(n))return!1;if(vO.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=new ea(3e4,6e4);function Hv(){const t=qt().___jsl;if(t==null?void 0:t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wO(t){return new Promise((e,n)=>{var i,r,s;function o(){Hv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hv(),n(qn(t,"network-request-failed"))},timeout:IO.get()})}if((r=(i=qt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0?void 0:r.Iframe)e(gapi.iframes.getContext());else if((s=qt().gapi)===null||s===void 0?void 0:s.load)o();else{const a=Uv("iframefcb");return qt()[a]=()=>{gapi.load?o():n(qn(t,"network-request-failed"))},Fv(`https://apis.google.com/js/api.js?onload=${a}`)}}).catch(e=>{throw mc=null,e})}let mc=null;function TO(t){return mc=mc||wO(t),mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new ea(5e3,15e3),SO="__/auth/iframe",AO="emulator/auth/iframe",kO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RO(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Cd(e,AO):`https://${t.config.authDomain}/${SO}`,i={apiKey:e.apiKey,appName:t.name,v:pr},r=OO.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${dr(i).slice(1)}`}async function LO(t){const e=await TO(t),n=qt().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:RO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kO,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=qn(t,"network-request-failed"),a=qt().setTimeout(()=>{s(o)},CO.get());function l(){qt().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MO=500,PO=600,DO="_blank",FO="http://localhost";class qv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UO(t,e,n,i=MO,r=PO){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},NO),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Xt().toLowerCase();n&&(a=mv(c)?DO:n),pv(c)&&(e=e||FO,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(uk(c)&&a!=="_self")return xO(e||"",a),new qv(null);const h=window.open(e||"",a,u);ae(h,t,"popup-blocked");try{h.focus()}catch{}return new qv(h)}function xO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO="__/auth/handler",jO="emulator/auth/handler";function Wv(t,e,n,i,r,s){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:pr,eventId:r};if(e instanceof wv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ya(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof oa){const l=e.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${BO(t)}?${dr(a).slice(1)}`}function BO({config:t}){return t.emulator?Cd(t,jO):`https://${t.authDomain}/${VO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="webStorageSupport";class HO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rv,this._completeRedirectFn=fO}async _openPopup(e,n,i,r){var s;Ei((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=Wv(e,n,i,Td(),r);return UO(e,o,Ld())}async _openRedirect(e,n,i,r){return await this._originValidation(e),Rk(Wv(e,n,i,Td(),r)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ei(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i}async initAndGetManager(e){const n=await LO(e),i=new mO(e);return n.register("authEvent",r=>(ae(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ud,{type:Ud},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Ud];o!==void 0&&n(!!o),yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bv()||Od()||lc()}}const qO=HO;var Gv="@firebase/auth",zv="0.19.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{var r;e(((r=i)===null||r===void 0?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function zO(t){Mi(new fi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:s}=i.options;return(o=>{ae(r&&!r.includes(":"),"invalid-api-key",{appName:o.name}),ae(!(s==null?void 0:s.includes(":")),"argument-error",{appName:o.name});const a={apiKey:r,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ev(t)},l=new fk(o,a);return XA(l,n),l})(i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Mi(new fi("auth-internal",e=>{const n=ra(e.getProvider("auth").getImmediate());return(i=>new WO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(Gv,zv,GO(t)),Ln(Gv,zv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t=mo()){const e=ls(t,"auth");return e.isInitialized()?e.getImmediate():KA(t,{popupRedirectResolver:qO,persistence:[Vk,Ak,Rv]})}zO("Browser");function ge(t){return Object.entries(t).filter(([e,n])=>e!==""&&n).map(([e])=>e).join(" ")}function st(t,e,n,i={bubbles:!0},r=!1){if(typeof Event!="undefined"&&t){const s=new CustomEvent(e,Object.assign(Object.assign({},i),{detail:n}));if(t==null||t.dispatchEvent(s),r&&e.startsWith("SMUI")){const o=new CustomEvent(e.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},i),{detail:n}));t==null||t.dispatchEvent(o),o.defaultPrevented&&s.preventDefault()}return s}}function zi(t,e){let n=Object.getOwnPropertyNames(t);const i={};for(let r=0;r<n.length;r++){const s=n[r],o=s.indexOf("$");o!==-1&&e.indexOf(s.substring(0,o+1))!==-1||e.indexOf(s)===-1&&(i[s]=t[s])}return i}const Kv=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,KO=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function $e(t){let e,n=[];t.$on=(r,s)=>{let o=r,a=()=>{};return e?a=e(o,s):n.push([o,s]),o.match(Kv)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',o),()=>{a()}};function i(r){uo(t,r)}return r=>{const s=[],o={};e=(a,l)=>{let c=a,u=l,h=!1;const d=c.match(Kv),f=c.match(KO),p=d||f;if(c.match(/^SMUI:\w+:/)){const y=c.split(":");let w="";for(let b=0;b<y.length;b++)w+=b===y.length-1?":"+y[b]:y[b].split("-").map(v=>v.slice(0,1).toUpperCase()+v.slice(1)).join("");console.warn(`The event ${c.split("$")[0]} has been renamed to ${w.split("$")[0]}.`),c=w}if(p){const y=c.split(d?":":"$");c=y[0];const w=Object.fromEntries(y.slice(1).map(b=>[b,!0]));w.passive&&(h=h||{},h.passive=!0),w.nonpassive&&(h=h||{},h.passive=!1),w.capture&&(h=h||{},h.capture=!0),w.once&&(h=h||{},h.once=!0),w.preventDefault&&(u=Bw(u)),w.stopPropagation&&(u=Hw(u))}const g=Ze(r,c,u,h),m=()=>{g();const y=s.indexOf(m);y>-1&&s.splice(y,1)};return s.push(m),c in o||(o[c]=Ze(r,c,i)),m};for(let a=0;a<n.length;a++)e(n[a][0],n[a][1]);return{destroy:()=>{for(let a=0;a<s.length;a++)s[a]();for(let a of Object.entries(o))a[1]()}}}}function kt(t,e){let n=Object.getOwnPropertyNames(t);const i={};for(let r=0;r<n.length;r++){const s=n[r];s.substring(0,e.length)===e&&(i[s.substring(e.length)]=t[s])}return i}function dt(t,e){let n=[];if(e)for(let i=0;i<e.length;i++){const r=e[i],s=Array.isArray(r)?r[0]:r;Array.isArray(r)&&r.length>1?n.push(s(t,r[1])):n.push(s(t))}return{update(i){if((i&&i.length||0)!=n.length)throw new Error("You must not change the length of an actions array.");if(i)for(let r=0;r<i.length;r++){const s=n[r];if(s&&s.update){const o=i[r];Array.isArray(o)&&o.length>1?s.update(o[1]):s.update()}}},destroy(){for(let i=0;i<n.length;i++){const r=n[i];r&&r.destroy&&r.destroy()}}}}var gc;function XO(t,e){e===void 0&&(e=!1);var n=t.CSS,i=gc;if(typeof gc=="boolean"&&!e)return gc;var r=n&&typeof n.supports=="function";if(!r)return!1;var s=n.supports("--css-vars","yes"),o=n.supports("(--css-vars: yes)")&&n.supports("color","#00000000");return i=s||o,e||(gc=i),i}function QO(t,e,n){if(!t)return{x:0,y:0};var i=e.x,r=e.y,s=i+n.left,o=r+n.top,a,l;if(t.type==="touchstart"){var c=t;a=c.changedTouches[0].pageX-s,l=c.changedTouches[0].pageY-o}else{var u=t;a=u.pageX-s,l=u.pageY-o}return{x:a,y:l}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Xn=function(){function t(e){e===void 0&&(e={}),this.adapter=e}return Object.defineProperty(t,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.destroy=function(){},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function YO(t){return t===void 0&&(t=window),JO(t)?{passive:!0}:!1}function JO(t){t===void 0&&(t=window);var e=!1;try{var n={get passive(){return e=!0,!1}},i=function(){};t.document.addEventListener("test",i,n),t.document.removeEventListener("test",i,n)}catch{e=!1}return e}var Xv=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",applyPassive:YO});/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function ZO(t,e){if(t.closest)return t.closest(e);for(var n=t;n;){if(Qv(n,e))return n;n=n.parentElement}return null}function Qv(t,e){var n=t.matches||t.webkitMatchesSelector||t.msMatchesSelector;return n.call(t,e)}function $O(t){var e=t;if(e.offsetParent!==null)return e.scrollWidth;var n=e.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);var i=n.scrollWidth;return document.documentElement.removeChild(n),i}var xd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",closest:ZO,matches:Qv,estimateScrollWidth:$O});/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var eR={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},tR={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},Yv={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Jv=["touchstart","pointerdown","mousedown","keydown"],Zv=["touchend","pointerup","mouseup","contextmenu"],_c=[],nR=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.activationAnimationHasEnded=!1,i.activationTimer=0,i.fgDeactivationRemovalTimer=0,i.fgScale="0",i.frame={width:0,height:0},i.initialSize=0,i.layoutFrame=0,i.maxRadius=0,i.unboundedCoords={left:0,top:0},i.activationState=i.defaultActivationState(),i.activationTimerCallback=function(){i.activationAnimationHasEnded=!0,i.runDeactivationUXLogicIfReady()},i.activateHandler=function(r){i.activateImpl(r)},i.deactivateHandler=function(){i.deactivateImpl()},i.focusHandler=function(){i.handleFocus()},i.blurHandler=function(){i.handleBlur()},i.resizeHandler=function(){i.layout()},i}return Object.defineProperty(e,"cssClasses",{get:function(){return eR},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return tR},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Yv},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=this,i=this.supportsPressRipple();if(this.registerRootHandlers(i),i){var r=e.cssClasses,s=r.ROOT,o=r.UNBOUNDED;requestAnimationFrame(function(){n.adapter.addClass(s),n.adapter.isUnbounded()&&(n.adapter.addClass(o),n.layoutInternal())})}},e.prototype.destroy=function(){var n=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(e.cssClasses.FG_DEACTIVATION));var i=e.cssClasses,r=i.ROOT,s=i.UNBOUNDED;requestAnimationFrame(function(){n.adapter.removeClass(r),n.adapter.removeClass(s),n.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},e.prototype.activate=function(n){this.activateImpl(n)},e.prototype.deactivate=function(){this.deactivateImpl()},e.prototype.layout=function(){var n=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){n.layoutInternal(),n.layoutFrame=0})},e.prototype.setUnbounded=function(n){var i=e.cssClasses.UNBOUNDED;n?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.handleFocus=function(){var n=this;requestAnimationFrame(function(){return n.adapter.addClass(e.cssClasses.BG_FOCUSED)})},e.prototype.handleBlur=function(){var n=this;requestAnimationFrame(function(){return n.adapter.removeClass(e.cssClasses.BG_FOCUSED)})},e.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},e.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers=function(n){var i,r;if(n){try{for(var s=Hn(Jv),o=s.next();!o.done;o=s.next()){var a=o.value;this.adapter.registerInteractionHandler(a,this.activateHandler)}}catch(l){i={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},e.prototype.registerDeactivationHandlers=function(n){var i,r;if(n.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var s=Hn(Zv),o=s.next();!o.done;o=s.next()){var a=o.value;this.adapter.registerDocumentInteractionHandler(a,this.deactivateHandler)}}catch(l){i={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}},e.prototype.deregisterRootHandlers=function(){var n,i;try{for(var r=Hn(Jv),s=r.next();!s.done;s=r.next()){var o=s.value;this.adapter.deregisterInteractionHandler(o,this.activateHandler)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},e.prototype.deregisterDeactivationHandlers=function(){var n,i;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var r=Hn(Zv),s=r.next();!s.done;s=r.next()){var o=s.value;this.adapter.deregisterDocumentInteractionHandler(o,this.deactivateHandler)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},e.prototype.removeCssVars=function(){var n=this,i=e.strings,r=Object.keys(i);r.forEach(function(s){s.indexOf("VAR_")===0&&n.adapter.updateCssVariable(i[s],null)})},e.prototype.activateImpl=function(n){var i=this;if(!this.adapter.isSurfaceDisabled()){var r=this.activationState;if(!r.isActivated){var s=this.previousActivationEvent,o=s&&n!==void 0&&s.type!==n.type;if(!o){r.isActivated=!0,r.isProgrammatic=n===void 0,r.activationEvent=n,r.wasActivatedByPointer=r.isProgrammatic?!1:n!==void 0&&(n.type==="mousedown"||n.type==="touchstart"||n.type==="pointerdown");var a=n!==void 0&&_c.length>0&&_c.some(function(l){return i.adapter.containsEventTarget(l)});if(a){this.resetActivationState();return}n!==void 0&&(_c.push(n.target),this.registerDeactivationHandlers(n)),r.wasElementMadeActive=this.checkElementMadeActive(n),r.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){_c=[],!r.wasElementMadeActive&&n!==void 0&&(n.key===" "||n.keyCode===32)&&(r.wasElementMadeActive=i.checkElementMadeActive(n),r.wasElementMadeActive&&i.animateActivation()),r.wasElementMadeActive||(i.activationState=i.defaultActivationState())})}}}},e.prototype.checkElementMadeActive=function(n){return n!==void 0&&n.type==="keydown"?this.adapter.isSurfaceActive():!0},e.prototype.animateActivation=function(){var n=this,i=e.strings,r=i.VAR_FG_TRANSLATE_START,s=i.VAR_FG_TRANSLATE_END,o=e.cssClasses,a=o.FG_DEACTIVATION,l=o.FG_ACTIVATION,c=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var u="",h="";if(!this.adapter.isUnbounded()){var d=this.getFgTranslationCoordinates(),f=d.startPoint,p=d.endPoint;u=f.x+"px, "+f.y+"px",h=p.x+"px, "+p.y+"px"}this.adapter.updateCssVariable(r,u),this.adapter.updateCssVariable(s,h),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(a),this.adapter.computeBoundingRect(),this.adapter.addClass(l),this.activationTimer=setTimeout(function(){n.activationTimerCallback()},c)},e.prototype.getFgTranslationCoordinates=function(){var n=this.activationState,i=n.activationEvent,r=n.wasActivatedByPointer,s;r?s=QO(i,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):s={x:this.frame.width/2,y:this.frame.height/2},s={x:s.x-this.initialSize/2,y:s.y-this.initialSize/2};var o={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:s,endPoint:o}},e.prototype.runDeactivationUXLogicIfReady=function(){var n=this,i=e.cssClasses.FG_DEACTIVATION,r=this.activationState,s=r.hasDeactivationUXRun,o=r.isActivated,a=s||!o;a&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(i),this.fgDeactivationRemovalTimer=setTimeout(function(){n.adapter.removeClass(i)},Yv.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses=function(){var n=e.cssClasses.FG_ACTIVATION;this.adapter.removeClass(n),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},e.prototype.resetActivationState=function(){var n=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return n.previousActivationEvent=void 0},e.numbers.TAP_DELAY_MS)},e.prototype.deactivateImpl=function(){var n=this,i=this.activationState;if(!!i.isActivated){var r=bt({},i);i.isProgrammatic?(requestAnimationFrame(function(){n.animateDeactivation(r)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){n.activationState.hasDeactivationUXRun=!0,n.animateDeactivation(r),n.resetActivationState()}))}},e.prototype.animateDeactivation=function(n){var i=n.wasActivatedByPointer,r=n.wasElementMadeActive;(i||r)&&this.runDeactivationUXLogicIfReady()},e.prototype.layoutInternal=function(){var n=this;this.frame=this.adapter.computeBoundingRect();var i=Math.max(this.frame.height,this.frame.width),r=function(){var o=Math.sqrt(Math.pow(n.frame.width,2)+Math.pow(n.frame.height,2));return o+e.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?i:r();var s=Math.floor(i*e.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&s%2!=0?this.initialSize=s-1:this.initialSize=s,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},e.prototype.updateLayoutCssVars=function(){var n=e.strings,i=n.VAR_FG_SIZE,r=n.VAR_LEFT,s=n.VAR_TOP,o=n.VAR_FG_SCALE;this.adapter.updateCssVariable(i,this.initialSize+"px"),this.adapter.updateCssVariable(o,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(r,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(s,this.unboundedCoords.top+"px"))},e}(Xn);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Vd="mdc-dom-focus-sentinel",iR=function(){function t(e,n){n===void 0&&(n={}),this.root=e,this.options=n,this.elFocusedBeforeTrapFocus=null}return t.prototype.trapFocus=function(){var e=this.getFocusableElements(this.root);if(e.length===0)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root),this.options.skipInitialFocus||this.focusInitialElement(e,this.options.initialFocusEl)},t.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+Vd)).forEach(function(e){e.parentElement.removeChild(e)}),!this.options.skipRestoreFocus&&this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},t.prototype.wrapTabFocus=function(e){var n=this,i=this.createSentinel(),r=this.createSentinel();i.addEventListener("focus",function(){var s=n.getFocusableElements(e);s.length>0&&s[s.length-1].focus()}),r.addEventListener("focus",function(){var s=n.getFocusableElements(e);s.length>0&&s[0].focus()}),e.insertBefore(i,e.children[0]),e.appendChild(r)},t.prototype.focusInitialElement=function(e,n){var i=0;n&&(i=Math.max(e.indexOf(n),0)),e[i].focus()},t.prototype.getFocusableElements=function(e){var n=[].slice.call(e.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button"));return n.filter(function(i){var r=i.getAttribute("aria-disabled")==="true"||i.getAttribute("disabled")!=null||i.getAttribute("hidden")!=null||i.getAttribute("aria-hidden")==="true",s=i.tabIndex>=0&&i.getBoundingClientRect().width>0&&!i.classList.contains(Vd)&&!r,o=!1;if(s){var a=getComputedStyle(i);o=a.display==="none"||a.visibility==="hidden"}return s&&!o})},t.prototype.createSentinel=function(){var e=document.createElement("div");return e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","true"),e.classList.add(Vd),e},t}(),rR=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",FocusTrap:iR});/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var xe={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},Tn=new Set;Tn.add(xe.BACKSPACE);Tn.add(xe.ENTER);Tn.add(xe.SPACEBAR);Tn.add(xe.PAGE_UP);Tn.add(xe.PAGE_DOWN);Tn.add(xe.END);Tn.add(xe.HOME);Tn.add(xe.ARROW_LEFT);Tn.add(xe.ARROW_UP);Tn.add(xe.ARROW_RIGHT);Tn.add(xe.ARROW_DOWN);Tn.add(xe.DELETE);Tn.add(xe.ESCAPE);Tn.add(xe.TAB);var Pn={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Cn=new Map;Cn.set(Pn.BACKSPACE,xe.BACKSPACE);Cn.set(Pn.ENTER,xe.ENTER);Cn.set(Pn.SPACEBAR,xe.SPACEBAR);Cn.set(Pn.PAGE_UP,xe.PAGE_UP);Cn.set(Pn.PAGE_DOWN,xe.PAGE_DOWN);Cn.set(Pn.END,xe.END);Cn.set(Pn.HOME,xe.HOME);Cn.set(Pn.ARROW_LEFT,xe.ARROW_LEFT);Cn.set(Pn.ARROW_UP,xe.ARROW_UP);Cn.set(Pn.ARROW_RIGHT,xe.ARROW_RIGHT);Cn.set(Pn.ARROW_DOWN,xe.ARROW_DOWN);Cn.set(Pn.DELETE,xe.DELETE);Cn.set(Pn.ESCAPE,xe.ESCAPE);Cn.set(Pn.TAB,xe.TAB);var Ki=new Set;Ki.add(xe.PAGE_UP);Ki.add(xe.PAGE_DOWN);Ki.add(xe.END);Ki.add(xe.HOME);Ki.add(xe.ARROW_LEFT);Ki.add(xe.ARROW_UP);Ki.add(xe.ARROW_RIGHT);Ki.add(xe.ARROW_DOWN);function mn(t){var e=t.key;if(Tn.has(e))return e;var n=Cn.get(t.keyCode);return n||xe.UNKNOWN}const{applyPassive:vc}=Xv,{matches:sR}=xd;function Nr(t,{ripple:e=!0,surface:n=!1,unbounded:i=!1,disabled:r=!1,color:s,active:o,rippleElement:a,eventTarget:l,activeTarget:c,addClass:u=p=>t.classList.add(p),removeClass:h=p=>t.classList.remove(p),addStyle:d=(p,g)=>t.style.setProperty(p,g),initPromise:f=Promise.resolve()}={}){let p,g=cn("SMUI:addLayoutListener"),m,y=o,w=l,b=c;function v(){n?(u("mdc-ripple-surface"),s==="primary"?(u("smui-ripple-surface--primary"),h("smui-ripple-surface--secondary")):s==="secondary"?(h("smui-ripple-surface--primary"),u("smui-ripple-surface--secondary")):(h("smui-ripple-surface--primary"),h("smui-ripple-surface--secondary"))):(h("mdc-ripple-surface"),h("smui-ripple-surface--primary"),h("smui-ripple-surface--secondary")),p&&y!==o&&(y=o,o?p.activate():o===!1&&p.deactivate()),e&&!p?(p=new nR({addClass:u,browserSupportsCssVars:()=>XO(window),computeBoundingRect:()=>(a||t).getBoundingClientRect(),containsEventTarget:C=>t.contains(C),deregisterDocumentInteractionHandler:(C,_)=>document.documentElement.removeEventListener(C,_,vc()),deregisterInteractionHandler:(C,_)=>(l||t).removeEventListener(C,_,vc()),deregisterResizeHandler:C=>window.removeEventListener("resize",C),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>o==null?sR(c||t,":active"):o,isSurfaceDisabled:()=>!!r,isUnbounded:()=>!!i,registerDocumentInteractionHandler:(C,_)=>document.documentElement.addEventListener(C,_,vc()),registerInteractionHandler:(C,_)=>(l||t).addEventListener(C,_,vc()),registerResizeHandler:C=>window.addEventListener("resize",C),removeClass:h,updateCssVariable:d}),f.then(()=>{p&&(p.init(),p.setUnbounded(i))})):p&&!e&&f.then(()=>{p&&(p.destroy(),p=void 0)}),p&&(w!==l||b!==c)&&(w=l,b=c,p.destroy(),requestAnimationFrame(()=>{p&&(p.init(),p.setUnbounded(i))})),!e&&i&&u("mdc-ripple-upgraded--unbounded")}v(),g&&(m=g(O));function O(){p&&p.layout()}return{update(C){({ripple:e,surface:n,unbounded:i,disabled:r,color:s,active:o,rippleElement:a,eventTarget:l,activeTarget:c,addClass:u,removeClass:h,addStyle:d,initPromise:f}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:_=>t.classList.add(_),removeClass:_=>t.classList.remove(_),addStyle:(_,I)=>t.style.setProperty(_,I),initPromise:Promise.resolve()},C)),v()},destroy(){p&&(p.destroy(),p=void 0,h("mdc-ripple-surface"),h("smui-ripple-surface--primary"),h("smui-ripple-surface--secondary")),m&&m()}}}function oR(t){let e,n,i,r,s;const o=t[7].default,a=we(o,t,t[6],null);let l=[{href:t[1]},t[4]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=_e("a"),a&&a.c(),this.h()},l(u){e=ve(u,"A",{href:!0});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){ce(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),t[8](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[3].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&64)&&Ce(a,o,u,u[6],i?Te(o,u[6],h,null):Se(u[6]),null),ce(e,c=Ae(l,[(!i||h&2)&&{href:u[1]},h&16&&u[4]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[8](null),r=!1,Ge(s)}}}function aR(t,e,n){const i=["use","href","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e,{href:l="javascript:void(0);"}=e;const c=$e(Ue());let u;function h(){return u}function d(f){ue[f?"unshift":"push"](()=>{u=f,n(2,u)})}return t.$$set=f=>{e=U(U({},e),ze(f)),n(4,r=ne(e,i)),"use"in f&&n(0,a=f.use),"href"in f&&n(1,l=f.href),"$$scope"in f&&n(6,o=f.$$scope)},[a,l,u,c,r,h,o,s,d]}class lR extends Ye{constructor(e){super();Qe(this,e,aR,oR,We,{use:0,href:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function cR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=_e("button"),a&&a.c(),this.h()},l(u){e=ve(u,"BUTTON",{});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){ce(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),e.autofocus&&e.focus(),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[7](null),r=!1,Ge(s)}}}function uR(t,e,n){const i=["use","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=$e(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=U(U({},e),ze(d)),n(3,r=ne(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class hR extends Ye{constructor(e){super();Qe(this,e,uR,cR,We,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function dR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=_e("div"),a&&a.c(),this.h()},l(u){e=ve(u,"DIV",{});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){ce(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[7](null),r=!1,Ge(s)}}}function fR(t,e,n){const i=["use","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=$e(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=U(U({},e),ze(d)),n(3,r=ne(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class $v extends Ye{constructor(e){super();Qe(this,e,fR,dR,We,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function pR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=_e("h1"),a&&a.c(),this.h()},l(u){e=ve(u,"H1",{});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){ce(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[7](null),r=!1,Ge(s)}}}function mR(t,e,n){const i=["use","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=$e(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=U(U({},e),ze(d)),n(3,r=ne(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class gR extends Ye{constructor(e){super();Qe(this,e,mR,pR,We,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function _R(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=_e("h2"),a&&a.c(),this.h()},l(u){e=ve(u,"H2",{});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){ce(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[7](null),r=!1,Ge(s)}}}function vR(t,e,n){const i=["use","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=$e(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=U(U({},e),ze(d)),n(3,r=ne(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class yR extends Ye{constructor(e){super();Qe(this,e,vR,_R,We,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function bR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=_e("h3"),a&&a.c(),this.h()},l(u){e=ve(u,"H3",{});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){ce(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[7](null),r=!1,Ge(s)}}}function ER(t,e,n){const i=["use","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=$e(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=U(U({},e),ze(d)),n(3,r=ne(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class IR extends Ye{constructor(e){super();Qe(this,e,ER,bR,We,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function wR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=_e("i"),a&&a.c(),this.h()},l(u){e=ve(u,"I",{});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){ce(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[7](null),r=!1,Ge(s)}}}function TR(t,e,n){const i=["use","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=$e(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=U(U({},e),ze(d)),n(3,r=ne(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class CR extends Ye{constructor(e){super();Qe(this,e,TR,wR,We,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function SR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=_e("li"),a&&a.c(),this.h()},l(u){e=ve(u,"LI",{});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){ce(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[7](null),r=!1,Ge(s)}}}function AR(t,e,n){const i=["use","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=$e(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=U(U({},e),ze(d)),n(3,r=ne(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class kR extends Ye{constructor(e){super();Qe(this,e,AR,SR,We,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function OR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=_e("nav"),a&&a.c(),this.h()},l(u){e=ve(u,"NAV",{});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){ce(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[7](null),r=!1,Ge(s)}}}function RR(t,e,n){const i=["use","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=$e(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=U(U({},e),ze(d)),n(3,r=ne(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class LR extends Ye{constructor(e){super();Qe(this,e,RR,OR,We,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function NR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=_e("span"),a&&a.c(),this.h()},l(u){e=ve(u,"SPAN",{});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){ce(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[7](null),r=!1,Ge(s)}}}function MR(t,e,n){const i=["use","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=$e(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=U(U({},e),ze(d)),n(3,r=ne(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class PR extends Ye{constructor(e){super();Qe(this,e,MR,NR,We,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function DR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=vn("svg"),a&&a.c(),this.h()},l(u){e=On(u,"svg",{});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){Wa(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),Wa(e,c=Ae(l,[h&8&&u[3]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[7](null),r=!1,Ge(s)}}}function FR(t,e,n){const i=["use","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=$e(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=U(U({},e),ze(d)),n(3,r=ne(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class ey extends Ye{constructor(e){super();Qe(this,e,FR,DR,We,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function UR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=U(c,l[u]);return{c(){e=_e("ul"),a&&a.c(),this.h()},l(u){e=ve(u,"UL",{});var h=ie(e);a&&a.l(h),h.forEach(N),this.h()},h(){ce(e,c)},m(u,h){Z(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&qe(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&N(e),a&&a.d(u),t[7](null),r=!1,Ge(s)}}}function xR(t,e,n){const i=["use","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=$e(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=U(U({},e),ze(d)),n(3,r=ne(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class VR extends Ye{constructor(e){super();Qe(this,e,xR,UR,We,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const ty=lR,jR=hR,wi=$v,BR=gR,HR=yR,qR=IR,WR=kR,GR=LR,Mr=PR,zR=VR;function ny(t){let e;return{c(){e=_e("div"),this.h()},l(n){e=ve(n,"DIV",{class:!0}),ie(e).forEach(N),this.h()},h(){$(e,"class","mdc-button__touch")},m(n,i){Z(n,e,i)},d(n){n&&N(e)}}}function KR(t){let e,n,i,r;const s=t[26].default,o=we(s,t,t[28],null);let a=t[6]&&ny();return{c(){e=_e("div"),n=Ke(),o&&o.c(),a&&a.c(),i=vt(),this.h()},l(l){e=ve(l,"DIV",{class:!0}),ie(e).forEach(N),n=Xe(l),o&&o.l(l),a&&a.l(l),i=vt(),this.h()},h(){$(e,"class","mdc-button__ripple")},m(l,c){Z(l,e,c),Z(l,n,c),o&&o.m(l,c),a&&a.m(l,c),Z(l,i,c),r=!0},p(l,c){o&&o.p&&(!r||c&268435456)&&Ce(o,s,l,l[28],r?Te(s,l[28],c,null):Se(l[28]),null),l[6]?a||(a=ny(),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i(l){r||(P(o,l),r=!0)},o(l){F(o,l),r=!1},d(l){l&&N(e),l&&N(n),o&&o.d(l),a&&a.d(l),l&&N(i)}}}function XR(t){let e,n,i;const r=[{use:[[Nr,{ripple:t[3],unbounded:!1,color:t[4],disabled:!!t[22].disabled,addClass:t[18],removeClass:t[19],addStyle:t[20]}],t[16],...t[0]]},{class:ge(at({[t[1]]:!0,"mdc-button":!0,"mdc-button--raised":t[5]==="raised","mdc-button--unelevated":t[5]==="unelevated","mdc-button--outlined":t[5]==="outlined","smui-button--color-secondary":t[4]==="secondary","mdc-button--touch":t[6],"mdc-card__action":t[17]==="card:action","mdc-card__action--button":t[17]==="card:action","mdc-dialog__button":t[17]==="dialog:action","mdc-top-app-bar__navigation-icon":t[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":t[17]==="top-app-bar:action","mdc-snackbar__action":t[17]==="snackbar:actions","mdc-banner__secondary-action":t[17]==="banner"&&t[8],"mdc-banner__primary-action":t[17]==="banner"&&!t[8],"mdc-tooltip__action":t[17]==="tooltip:rich-actions"},t[11]))},{style:Object.entries(t[12]).map(iy).concat([t[2]]).join(" ")},t[15],t[14],t[13],{href:t[7]},t[22]];var s=t[9];function o(a){let l={$$slots:{default:[KR]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=U(l,r[c]);return{props:l}}return s&&(e=new s(o(t)),t[27](e),e.$on("click",t[21])),{c(){e&&Be(e.$$.fragment),n=vt()},l(a){e&&it(e.$$.fragment,a),n=vt()},m(a,l){e&&Ve(e,a,l),Z(a,n,l),i=!0},p(a,[l]){const c=l&6289919?Ae(r,[l&6094873&&{use:[[Nr,{ripple:a[3],unbounded:!1,color:a[4],disabled:!!a[22].disabled,addClass:a[18],removeClass:a[19],addStyle:a[20]}],a[16],...a[0]]},l&133490&&{class:ge(at({[a[1]]:!0,"mdc-button":!0,"mdc-button--raised":a[5]==="raised","mdc-button--unelevated":a[5]==="unelevated","mdc-button--outlined":a[5]==="outlined","smui-button--color-secondary":a[4]==="secondary","mdc-button--touch":a[6],"mdc-card__action":a[17]==="card:action","mdc-card__action--button":a[17]==="card:action","mdc-dialog__button":a[17]==="dialog:action","mdc-top-app-bar__navigation-icon":a[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":a[17]==="top-app-bar:action","mdc-snackbar__action":a[17]==="snackbar:actions","mdc-banner__secondary-action":a[17]==="banner"&&a[8],"mdc-banner__primary-action":a[17]==="banner"&&!a[8],"mdc-tooltip__action":a[17]==="tooltip:rich-actions"},a[11]))},l&4100&&{style:Object.entries(a[12]).map(iy).concat([a[2]]).join(" ")},l&32768&&ht(a[15]),l&16384&&ht(a[14]),l&8192&&ht(a[13]),l&128&&{href:a[7]},l&4194304&&ht(a[22])]):{};if(l&268435520&&(c.$$scope={dirty:l,ctx:a}),s!==(s=a[9])){if(e){Ft();const u=e;F(u.$$.fragment,1,0,()=>{je(u,1)}),Ut()}s?(e=new s(o(a)),a[27](e),e.$on("click",a[21]),Be(e.$$.fragment),P(e.$$.fragment,1),Ve(e,n.parentNode,n)):e=null}else s&&e.$set(c)},i(a){i||(e&&P(e.$$.fragment,a),i=!0)},o(a){e&&F(e.$$.fragment,a),i=!1},d(a){t[27](null),a&&N(n),e&&je(e,a)}}}const iy=([t,e])=>`${t}: ${e};`;function QR(t,e,n){let i,r,s;const o=["use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","getElement"];let a=ne(e,o),{$$slots:l={},$$scope:c}=e;const u=$e(Ue());let{use:h=[]}=e,{class:d=""}=e,{style:f=""}=e,{ripple:p=!0}=e,{color:g="primary"}=e,{variant:m="text"}=e,{touch:y=!1}=e,{href:w=void 0}=e,{action:b="close"}=e,{defaultAction:v=!1}=e,{secondary:O=!1}=e,C,_={},I={},K=cn("SMUI:button:context"),{component:L=w==null?jR:ty}=e;Ht("SMUI:label:context","button"),Ht("SMUI:icon:context","button");function k(A){_[A]||n(11,_[A]=!0,_)}function M(A){(!(A in _)||_[A])&&n(11,_[A]=!1,_)}function E(A,S){I[A]!=S&&(S===""||S==null?(delete I[A],n(12,I)):n(12,I[A]=S,I))}function D(){K==="banner"&&st(Y(),O?"SMUIBannerButton:secondaryActionClick":"SMUIBannerButton:primaryActionClick")}function Y(){return C.getElement()}function X(A){ue[A?"unshift":"push"](()=>{C=A,n(10,C)})}return t.$$set=A=>{n(29,e=U(U({},e),ze(A))),n(22,a=ne(e,o)),"use"in A&&n(0,h=A.use),"class"in A&&n(1,d=A.class),"style"in A&&n(2,f=A.style),"ripple"in A&&n(3,p=A.ripple),"color"in A&&n(4,g=A.color),"variant"in A&&n(5,m=A.variant),"touch"in A&&n(6,y=A.touch),"href"in A&&n(7,w=A.href),"action"in A&&n(23,b=A.action),"defaultAction"in A&&n(24,v=A.defaultAction),"secondary"in A&&n(8,O=A.secondary),"component"in A&&n(9,L=A.component),"$$scope"in A&&n(28,c=A.$$scope)},t.$$.update=()=>{n(15,i=K==="dialog:action"&&b!=null?{"data-mdc-dialog-action":b}:{action:e.action}),n(14,r=K==="dialog:action"&&v?{"data-mdc-dialog-button-default":""}:{default:e.default}),n(13,s=K==="banner"?{}:{secondary:e.secondary})},e=ze(e),[h,d,f,p,g,m,y,w,O,L,C,_,I,s,r,i,u,K,k,M,E,D,a,b,v,Y,l,X,c]}class IB extends Ye{constructor(e){super();Qe(this,e,QR,XR,We,{use:0,class:1,style:2,ripple:3,color:4,variant:5,touch:6,href:7,action:23,defaultAction:24,secondary:8,component:9,getElement:25})}get getElement(){return this.$$.ctx[25]}}function YR(t){let e;const n=t[9].default,i=we(n,t,t[11],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&2048)&&Ce(i,n,r,r[11],e?Te(n,r[11],s,null):Se(r[11]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function JR(t){let e,n,i;const r=[{use:[t[5],...t[0]]},{class:ge({[t[1]]:!0,"mdc-button__icon":t[6]==="button","mdc-fab__icon":t[6]==="fab","mdc-icon-button__icon":t[6]==="icon-button","mdc-icon-button__icon--on":t[6]==="icon-button"&&t[2],"mdc-tab__icon":t[6]==="tab","mdc-banner__icon":t[6]==="banner","mdc-segmented-button__icon":t[6]==="segmented-button"})},{"aria-hidden":"true"},t[3]===ey?{focusable:"false",tabindex:"-1"}:{},t[7]];var s=t[3];function o(a){let l={$$slots:{default:[YR]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=U(l,r[c]);return{props:l}}return s&&(e=new s(o(t)),t[10](e)),{c(){e&&Be(e.$$.fragment),n=vt()},l(a){e&&it(e.$$.fragment,a),n=vt()},m(a,l){e&&Ve(e,a,l),Z(a,n,l),i=!0},p(a,[l]){const c=l&239?Ae(r,[l&33&&{use:[a[5],...a[0]]},l&70&&{class:ge({[a[1]]:!0,"mdc-button__icon":a[6]==="button","mdc-fab__icon":a[6]==="fab","mdc-icon-button__icon":a[6]==="icon-button","mdc-icon-button__icon--on":a[6]==="icon-button"&&a[2],"mdc-tab__icon":a[6]==="tab","mdc-banner__icon":a[6]==="banner","mdc-segmented-button__icon":a[6]==="segmented-button"})},r[2],l&8&&ht(a[3]===ey?{focusable:"false",tabindex:"-1"}:{}),l&128&&ht(a[7])]):{};if(l&2048&&(c.$$scope={dirty:l,ctx:a}),s!==(s=a[3])){if(e){Ft();const u=e;F(u.$$.fragment,1,0,()=>{je(u,1)}),Ut()}s?(e=new s(o(a)),a[10](e),Be(e.$$.fragment),P(e.$$.fragment,1),Ve(e,n.parentNode,n)):e=null}else s&&e.$set(c)},i(a){i||(e&&P(e.$$.fragment,a),i=!0)},o(a){e&&F(e.$$.fragment,a),i=!1},d(a){t[10](null),a&&N(n),e&&je(e,a)}}}function ZR(t,e,n){const i=["use","class","on","component","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e;const a=$e(Ue());let{use:l=[]}=e,{class:c=""}=e,{on:u=!1}=e,h,{component:d=CR}=e;const f=cn("SMUI:icon:context");function p(){return h.getElement()}function g(m){ue[m?"unshift":"push"](()=>{h=m,n(4,h)})}return t.$$set=m=>{e=U(U({},e),ze(m)),n(7,r=ne(e,i)),"use"in m&&n(0,l=m.use),"class"in m&&n(1,c=m.class),"on"in m&&n(2,u=m.on),"component"in m&&n(3,d=m.component),"$$scope"in m&&n(11,o=m.$$scope)},[l,c,u,d,h,a,f,r,p,s,g,o]}class $R extends Ye{constructor(e){super();Qe(this,e,ZR,JR,We,{use:0,class:1,on:2,component:3,getElement:8})}get getElement(){return this.$$.ctx[8]}}function eL(t){let e;const n=t[4].default,i=we(n,t,t[3],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,[s]){i&&i.p&&(!e||s&8)&&Ce(i,n,r,r[3],e?Te(n,r[3],s,null):Se(r[3]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function tL(t,e,n){let i,{$$slots:r={},$$scope:s}=e,{key:o}=e,{value:a}=e;const l=Vp(a);return Pw(t,l,c=>n(5,i=c)),Ht(o,l),ur(()=>{l.set(void 0)}),t.$$set=c=>{"key"in c&&n(1,o=c.key),"value"in c&&n(2,a=c.value),"$$scope"in c&&n(3,s=c.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&Fw(l,i=a,i)},[l,o,a,s,r]}class yc extends Ye{constructor(e){super();Qe(this,e,tL,eL,We,{key:1,value:2})}}const wB=$R;/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var nL={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var iL=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.shakeAnimationEndHandler=function(){i.handleShakeAnimationEnd()},i}return Object.defineProperty(e,"cssClasses",{get:function(){return nL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.getWidth=function(){return this.adapter.getWidth()},e.prototype.shake=function(n){var i=e.cssClasses.LABEL_SHAKE;n?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.float=function(n){var i=e.cssClasses,r=i.LABEL_FLOAT_ABOVE,s=i.LABEL_SHAKE;n?this.adapter.addClass(r):(this.adapter.removeClass(r),this.adapter.removeClass(s))},e.prototype.setRequired=function(n){var i=e.cssClasses.LABEL_REQUIRED;n?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.handleShakeAnimationEnd=function(){var n=e.cssClasses.LABEL_SHAKE;this.adapter.removeClass(n)},e}(Xn);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Pr={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var rL=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.transitionEndHandler=function(r){i.handleTransitionEnd(r)},i}return Object.defineProperty(e,"cssClasses",{get:function(){return Pr},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},e.prototype.activate=function(){this.adapter.removeClass(Pr.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(Pr.LINE_RIPPLE_ACTIVE)},e.prototype.setRippleCenter=function(n){this.adapter.setStyle("transform-origin",n+"px center")},e.prototype.deactivate=function(){this.adapter.addClass(Pr.LINE_RIPPLE_DEACTIVATING)},e.prototype.handleTransitionEnd=function(n){var i=this.adapter.hasClass(Pr.LINE_RIPPLE_DEACTIVATING);n.propertyName==="opacity"&&i&&(this.adapter.removeClass(Pr.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(Pr.LINE_RIPPLE_DEACTIVATING))},e}(Xn);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var sL={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},ry={NOTCH_ELEMENT_PADDING:8},oL={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var aL=function(t){wn(e,t);function e(n){return t.call(this,bt(bt({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"strings",{get:function(){return sL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return oL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return ry},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),e.prototype.notch=function(n){var i=e.cssClasses.OUTLINE_NOTCHED;n>0&&(n+=ry.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(n),this.adapter.addClass(i)},e.prototype.closeNotch=function(){var n=e.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(n),this.adapter.removeNotchWidthProperty()},e}(Xn);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var jd={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},lL={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon",WITH_INTERNAL_COUNTER:"mdc-text-field--with-internal-counter"},sy={LABEL_SCALE:.75},cL=["pattern","min","max","required","step","minlength","maxlength"],uL=["color","date","datetime-local","month","range","time","week"];/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var oy=["mousedown","touchstart"],ay=["click","keydown"],hL=function(t){wn(e,t);function e(n,i){i===void 0&&(i={});var r=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return r.isFocused=!1,r.receivedUserInput=!1,r.valid=!0,r.useNativeValidation=!0,r.validateOnValueChange=!0,r.helperText=i.helperText,r.characterCounter=i.characterCounter,r.leadingIcon=i.leadingIcon,r.trailingIcon=i.trailingIcon,r.inputFocusHandler=function(){r.activateFocus()},r.inputBlurHandler=function(){r.deactivateFocus()},r.inputInputHandler=function(){r.handleInput()},r.setPointerXOffset=function(s){r.setTransformOrigin(s)},r.textFieldInteractionHandler=function(){r.handleTextFieldInteraction()},r.validationAttributeChangeHandler=function(s){r.handleValidationAttributeChange(s)},r}return Object.defineProperty(e,"cssClasses",{get:function(){return lL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return jd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return sy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldAlwaysFloat",{get:function(){var n=this.getNativeInput().type;return uL.indexOf(n)>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat||this.isFocused||!!this.getValue()||this.isBadInput()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldShake",{get:function(){return!this.isFocused&&!this.isValid()&&!!this.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver(function(){})},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n,i,r,s;this.adapter.hasLabel()&&this.getNativeInput().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler);try{for(var o=Hn(oy),a=o.next();!a.done;a=o.next()){var l=a.value;this.adapter.registerInputInteractionHandler(l,this.setPointerXOffset)}}catch(h){n={error:h}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}try{for(var c=Hn(ay),u=c.next();!u.done;u=c.next()){var l=u.value;this.adapter.registerTextFieldInteractionHandler(l,this.textFieldInteractionHandler)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(r)throw r.error}}this.validationObserver=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler),this.setcharacterCounter(this.getValue().length)},e.prototype.destroy=function(){var n,i,r,s;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler);try{for(var o=Hn(oy),a=o.next();!a.done;a=o.next()){var l=a.value;this.adapter.deregisterInputInteractionHandler(l,this.setPointerXOffset)}}catch(h){n={error:h}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}try{for(var c=Hn(ay),u=c.next();!u.done;u=c.next()){var l=u.value;this.adapter.deregisterTextFieldInteractionHandler(l,this.textFieldInteractionHandler)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(r)throw r.error}}this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver)},e.prototype.handleTextFieldInteraction=function(){var n=this.adapter.getNativeInput();n&&n.disabled||(this.receivedUserInput=!0)},e.prototype.handleValidationAttributeChange=function(n){var i=this;n.some(function(r){return cL.indexOf(r)>-1?(i.styleValidity(!0),i.adapter.setLabelRequired(i.getNativeInput().required),!0):!1}),n.indexOf("maxlength")>-1&&this.setcharacterCounter(this.getValue().length)},e.prototype.notchOutline=function(n){if(!(!this.adapter.hasOutline()||!this.adapter.hasLabel()))if(n){var i=this.adapter.getLabelWidth()*sy.LABEL_SCALE;this.adapter.notchOutline(i)}else this.adapter.closeOutline()},e.prototype.activateFocus=function(){this.isFocused=!0,this.styleFocused(this.isFocused),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.helperText&&(this.helperText.isPersistent()||!this.helperText.isValidation()||!this.valid)&&this.helperText.showToScreenReader()},e.prototype.setTransformOrigin=function(n){if(!(this.isDisabled()||this.adapter.hasOutline())){var i=n.touches,r=i?i[0]:n,s=r.target.getBoundingClientRect(),o=r.clientX-s.left;this.adapter.setLineRippleTransformOrigin(o)}},e.prototype.handleInput=function(){this.autoCompleteFocus(),this.setcharacterCounter(this.getValue().length)},e.prototype.autoCompleteFocus=function(){this.receivedUserInput||this.activateFocus()},e.prototype.deactivateFocus=function(){this.isFocused=!1,this.adapter.deactivateLineRipple();var n=this.isValid();this.styleValidity(n),this.styleFocused(this.isFocused),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput=!1)},e.prototype.getValue=function(){return this.getNativeInput().value},e.prototype.setValue=function(n){if(this.getValue()!==n&&(this.getNativeInput().value=n),this.setcharacterCounter(n.length),this.validateOnValueChange){var i=this.isValid();this.styleValidity(i)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.validateOnValueChange&&this.adapter.shakeLabel(this.shouldShake))},e.prototype.isValid=function(){return this.useNativeValidation?this.isNativeInputValid():this.valid},e.prototype.setValid=function(n){this.valid=n,this.styleValidity(n);var i=!n&&!this.isFocused&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(i)},e.prototype.setValidateOnValueChange=function(n){this.validateOnValueChange=n},e.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange},e.prototype.setUseNativeValidation=function(n){this.useNativeValidation=n},e.prototype.isDisabled=function(){return this.getNativeInput().disabled},e.prototype.setDisabled=function(n){this.getNativeInput().disabled=n,this.styleDisabled(n)},e.prototype.setHelperTextContent=function(n){this.helperText&&this.helperText.setContent(n)},e.prototype.setLeadingIconAriaLabel=function(n){this.leadingIcon&&this.leadingIcon.setAriaLabel(n)},e.prototype.setLeadingIconContent=function(n){this.leadingIcon&&this.leadingIcon.setContent(n)},e.prototype.setTrailingIconAriaLabel=function(n){this.trailingIcon&&this.trailingIcon.setAriaLabel(n)},e.prototype.setTrailingIconContent=function(n){this.trailingIcon&&this.trailingIcon.setContent(n)},e.prototype.setcharacterCounter=function(n){if(!!this.characterCounter){var i=this.getNativeInput().maxLength;if(i===-1)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter.setCounterValue(n,i)}},e.prototype.isBadInput=function(){return this.getNativeInput().validity.badInput||!1},e.prototype.isNativeInputValid=function(){return this.getNativeInput().validity.valid},e.prototype.styleValidity=function(n){var i=e.cssClasses.INVALID;if(n?this.adapter.removeClass(i):this.adapter.addClass(i),this.helperText){this.helperText.setValidity(n);var r=this.helperText.isValidation();if(!r)return;var s=this.helperText.isVisible(),o=this.helperText.getId();s&&o?this.adapter.setInputAttr(jd.ARIA_DESCRIBEDBY,o):this.adapter.removeInputAttr(jd.ARIA_DESCRIBEDBY)}},e.prototype.styleFocused=function(n){var i=e.cssClasses.FOCUSED;n?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.styleDisabled=function(n){var i=e.cssClasses,r=i.DISABLED,s=i.INVALID;n?(this.adapter.addClass(r),this.adapter.removeClass(s)):this.adapter.removeClass(r),this.leadingIcon&&this.leadingIcon.setDisabled(n),this.trailingIcon&&this.trailingIcon.setDisabled(n)},e.prototype.styleFloating=function(n){var i=e.cssClasses.LABEL_FLOATING;n?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.getNativeInput=function(){var n=this.adapter?this.adapter.getNativeInput():null;return n||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},e}(Xn);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ci={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg",ROOT:"mdc-text-field-helper-text"},Ti={ARIA_HIDDEN:"aria-hidden",ROLE:"role",ROOT_SELECTOR:"."+ci.ROOT};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var dL=function(t){wn(e,t);function e(n){return t.call(this,bt(bt({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return ci},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Ti},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),e.prototype.getId=function(){return this.adapter.getAttr("id")},e.prototype.isVisible=function(){return this.adapter.getAttr(Ti.ARIA_HIDDEN)!=="true"},e.prototype.setContent=function(n){this.adapter.setContent(n)},e.prototype.isPersistent=function(){return this.adapter.hasClass(ci.HELPER_TEXT_PERSISTENT)},e.prototype.setPersistent=function(n){n?this.adapter.addClass(ci.HELPER_TEXT_PERSISTENT):this.adapter.removeClass(ci.HELPER_TEXT_PERSISTENT)},e.prototype.isValidation=function(){return this.adapter.hasClass(ci.HELPER_TEXT_VALIDATION_MSG)},e.prototype.setValidation=function(n){n?this.adapter.addClass(ci.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(ci.HELPER_TEXT_VALIDATION_MSG)},e.prototype.showToScreenReader=function(){this.adapter.removeAttr(Ti.ARIA_HIDDEN)},e.prototype.setValidity=function(n){var i=this.adapter.hasClass(ci.HELPER_TEXT_PERSISTENT),r=this.adapter.hasClass(ci.HELPER_TEXT_VALIDATION_MSG),s=r&&!n;s?(this.showToScreenReader(),this.adapter.getAttr(Ti.ROLE)==="alert"?this.refreshAlertRole():this.adapter.setAttr(Ti.ROLE,"alert")):this.adapter.removeAttr(Ti.ROLE),!i&&!s&&this.hide()},e.prototype.hide=function(){this.adapter.setAttr(Ti.ARIA_HIDDEN,"true")},e.prototype.refreshAlertRole=function(){var n=this;this.adapter.removeAttr(Ti.ROLE),requestAnimationFrame(function(){n.adapter.setAttr(Ti.ROLE,"alert")})},e}(Xn);function fL(t){let e;return{c(){e=Kn(t[8])},l(n){e=ri(n,t[8])},m(n,i){Z(n,e,i)},p(n,i){i&256&&is(e,n[8])},i:Bt,o:Bt,d(n){n&&N(e)}}}function pL(t){let e;const n=t[13].default,i=we(n,t,t[12],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&4096)&&Ce(i,n,r,r[12],e?Te(n,r[12],s,null):Se(r[12]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function mL(t){let e,n,i,r,s,o,a,l,c;const u=[pL,fL],h=[];function d(g,m){return g[8]==null?0:1}n=d(t),i=h[n]=u[n](t);let f=[{class:r=ge(at({[t[1]]:!0,"mdc-text-field-helper-text":!0,"mdc-text-field-helper-text--persistent":t[3],"mdc-text-field-helper-text--validation-msg":t[4]},t[6]))},{"aria-hidden":s=t[3]?void 0:"true"},{id:t[2]},t[7],t[10]],p={};for(let g=0;g<f.length;g+=1)p=U(p,f[g]);return{c(){e=_e("div"),i.c(),this.h()},l(g){e=ve(g,"DIV",{class:!0,"aria-hidden":!0,id:!0});var m=ie(e);i.l(m),m.forEach(N),this.h()},h(){ce(e,p)},m(g,m){Z(g,e,m),h[n].m(e,null),t[14](e),a=!0,l||(c=[oe(o=dt.call(null,e,t[0])),oe(t[9].call(null,e))],l=!0)},p(g,[m]){let y=n;n=d(g),n===y?h[n].p(g,m):(Ft(),F(h[y],1,1,()=>{h[y]=null}),Ut(),i=h[n],i?i.p(g,m):(i=h[n]=u[n](g),i.c()),P(i,1),i.m(e,null)),ce(e,p=Ae(f,[(!a||m&90&&r!==(r=ge(at({[g[1]]:!0,"mdc-text-field-helper-text":!0,"mdc-text-field-helper-text--persistent":g[3],"mdc-text-field-helper-text--validation-msg":g[4]},g[6]))))&&{class:r},(!a||m&8&&s!==(s=g[3]?void 0:"true"))&&{"aria-hidden":s},(!a||m&4)&&{id:g[2]},m&128&&g[7],m&1024&&g[10]])),o&&qe(o.update)&&m&1&&o.update.call(null,g[0])},i(g){a||(P(i),a=!0)},o(g){F(i),a=!1},d(g){g&&N(e),h[n].d(),t[14](null),l=!1,Ge(c)}}}let gL=0;function _L(t,e,n){const i=["use","class","id","persistent","validationMsg","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e;const a=$e(Ue());let{use:l=[]}=e,{class:c=""}=e,{id:u="SMUI-textfield-helper-text-"+gL++}=e,{persistent:h=!1}=e,{validationMsg:d=!1}=e,f,p,g={},m={},y;Rn(()=>(p=new dL({addClass:b,removeClass:v,hasClass:w,getAttr:O,setAttr:C,removeAttr:_,setContent:L=>{n(8,y=L)}}),u.startsWith("SMUI-textfield-helper-text-")&&st(I(),"SMUITextfieldHelperText:id",u),st(I(),"SMUITextfieldHelperText:mount",p),p.init(),()=>{st(I(),"SMUITextfieldHelperText:unmount",p),p.destroy()}));function w(L){return L in g?g[L]:I().classList.contains(L)}function b(L){g[L]||n(6,g[L]=!0,g)}function v(L){(!(L in g)||g[L])&&n(6,g[L]=!1,g)}function O(L){var k;return L in m?(k=m[L])!==null&&k!==void 0?k:null:I().getAttribute(L)}function C(L,k){m[L]!==k&&n(7,m[L]=k,m)}function _(L){(!(L in m)||m[L]!=null)&&n(7,m[L]=void 0,m)}function I(){return f}function K(L){ue[L?"unshift":"push"](()=>{f=L,n(5,f)})}return t.$$set=L=>{e=U(U({},e),ze(L)),n(10,r=ne(e,i)),"use"in L&&n(0,l=L.use),"class"in L&&n(1,c=L.class),"id"in L&&n(2,u=L.id),"persistent"in L&&n(3,h=L.persistent),"validationMsg"in L&&n(4,d=L.validationMsg),"$$scope"in L&&n(12,o=L.$$scope)},[l,c,u,h,d,f,g,m,y,a,r,I,o,s,K]}class TB extends Ye{constructor(e){super();Qe(this,e,_L,mL,We,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}function vL(t){let e,n,i,r,s,o,a,l;const c=t[22].default,u=we(c,t,t[21],null);let h=[{class:n=ge(at({[t[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":t[0],"mdc-floating-label--required":t[1]},t[8]))},{style:i=Object.entries(t[9]).map(cy).concat([t[4]]).join(" ")},{for:r=t[5]||(t[11]?t[11].id:void 0)},t[12]],d={};for(let f=0;f<h.length;f+=1)d=U(d,h[f]);return{c(){e=_e("label"),u&&u.c(),this.h()},l(f){e=ve(f,"LABEL",{class:!0,style:!0,for:!0});var p=ie(e);u&&u.l(p),p.forEach(N),this.h()},h(){ce(e,d)},m(f,p){Z(f,e,p),u&&u.m(e,null),t[24](e),o=!0,a||(l=[oe(s=dt.call(null,e,t[2])),oe(t[10].call(null,e))],a=!0)},p(f,p){u&&u.p&&(!o||p&2097152)&&Ce(u,c,f,f[21],o?Te(c,f[21],p,null):Se(f[21]),null),ce(e,d=Ae(h,[(!o||p&267&&n!==(n=ge(at({[f[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":f[0],"mdc-floating-label--required":f[1]},f[8]))))&&{class:n},(!o||p&528&&i!==(i=Object.entries(f[9]).map(cy).concat([f[4]]).join(" ")))&&{style:i},(!o||p&32&&r!==(r=f[5]||(f[11]?f[11].id:void 0)))&&{for:r},p&4096&&f[12]])),s&&qe(s.update)&&p&4&&s.update.call(null,f[2])},i(f){o||(P(u,f),o=!0)},o(f){F(u,f),o=!1},d(f){f&&N(e),u&&u.d(f),t[24](null),a=!1,Ge(l)}}}function yL(t){let e,n,i,r,s,o,a;const l=t[22].default,c=we(l,t,t[21],null);let u=[{class:n=ge(at({[t[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":t[0],"mdc-floating-label--required":t[1]},t[8]))},{style:i=Object.entries(t[9]).map(ly).concat([t[4]]).join(" ")},t[12]],h={};for(let d=0;d<u.length;d+=1)h=U(h,u[d]);return{c(){e=_e("span"),c&&c.c(),this.h()},l(d){e=ve(d,"SPAN",{class:!0,style:!0});var f=ie(e);c&&c.l(f),f.forEach(N),this.h()},h(){ce(e,h)},m(d,f){Z(d,e,f),c&&c.m(e,null),t[23](e),s=!0,o||(a=[oe(r=dt.call(null,e,t[2])),oe(t[10].call(null,e))],o=!0)},p(d,f){c&&c.p&&(!s||f&2097152)&&Ce(c,l,d,d[21],s?Te(l,d[21],f,null):Se(d[21]),null),ce(e,h=Ae(u,[(!s||f&267&&n!==(n=ge(at({[d[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":d[0],"mdc-floating-label--required":d[1]},d[8]))))&&{class:n},(!s||f&528&&i!==(i=Object.entries(d[9]).map(ly).concat([d[4]]).join(" ")))&&{style:i},f&4096&&d[12]])),r&&qe(r.update)&&f&4&&r.update.call(null,d[2])},i(d){s||(P(c,d),s=!0)},o(d){F(c,d),s=!1},d(d){d&&N(e),c&&c.d(d),t[23](null),o=!1,Ge(a)}}}function bL(t){let e,n,i,r;const s=[yL,vL],o=[];function a(l,c){return l[6]?0:1}return e=a(t),n=o[e]=s[e](t),{c(){n.c(),i=vt()},l(l){n.l(l),i=vt()},m(l,c){o[e].m(l,c),Z(l,i,c),r=!0},p(l,[c]){let u=e;e=a(l),e===u?o[e].p(l,c):(Ft(),F(o[u],1,1,()=>{o[u]=null}),Ut(),n=o[e],n?n.p(l,c):(n=o[e]=s[e](l),n.c()),P(n,1),n.m(i.parentNode,i))},i(l){r||(P(n),r=!0)},o(l){F(n),r=!1},d(l){o[e].d(l),l&&N(i)}}}const ly=([t,e])=>`${t}: ${e};`,cy=([t,e])=>`${t}: ${e};`;function EL(t,e,n){const i=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e;var a;const l=$e(Ue());let{use:c=[]}=e,{class:u=""}=e,{style:h=""}=e,{for:d=void 0}=e,{floatAbove:f=!1}=e,{required:p=!1}=e,{wrapped:g=!1}=e,m,y,w={},b={},v=(a=cn("SMUI:generic:input:props"))!==null&&a!==void 0?a:{},O=f,C=p;Rn(()=>{n(18,y=new iL({addClass:_,removeClass:I,getWidth:()=>{var R,V;const Q=Y(),he=Q.cloneNode(!0);(R=Q.parentNode)===null||R===void 0||R.appendChild(he),he.classList.add("smui-floating-label--remove-transition"),he.classList.add("smui-floating-label--force-size"),he.classList.remove("mdc-floating-label--float-above");const W=he.scrollWidth;return(V=Q.parentNode)===null||V===void 0||V.removeChild(he),W},registerInteractionHandler:(R,V)=>Y().addEventListener(R,V),deregisterInteractionHandler:(R,V)=>Y().removeEventListener(R,V)}));const S={get element(){return Y()},addStyle:K,removeStyle:L};return st(m,"SMUIFloatingLabel:mount",S),y.init(),()=>{st(m,"SMUIFloatingLabel:unmount",S),y.destroy()}});function _(S){w[S]||n(8,w[S]=!0,w)}function I(S){(!(S in w)||w[S])&&n(8,w[S]=!1,w)}function K(S,R){b[S]!=R&&(R===""||R==null?(delete b[S],n(9,b)):n(9,b[S]=R,b))}function L(S){S in b&&(delete b[S],n(9,b))}function k(S){y.shake(S)}function M(S){n(0,f=S)}function E(S){n(1,p=S)}function D(){return y.getWidth()}function Y(){return m}function X(S){ue[S?"unshift":"push"](()=>{m=S,n(7,m)})}function A(S){ue[S?"unshift":"push"](()=>{m=S,n(7,m)})}return t.$$set=S=>{e=U(U({},e),ze(S)),n(12,r=ne(e,i)),"use"in S&&n(2,c=S.use),"class"in S&&n(3,u=S.class),"style"in S&&n(4,h=S.style),"for"in S&&n(5,d=S.for),"floatAbove"in S&&n(0,f=S.floatAbove),"required"in S&&n(1,p=S.required),"wrapped"in S&&n(6,g=S.wrapped),"$$scope"in S&&n(21,o=S.$$scope)},t.$$.update=()=>{t.$$.dirty&786433&&y&&O!==f&&(n(19,O=f),y.float(f)),t.$$.dirty&1310722&&y&&C!==p&&(n(20,C=p),y.setRequired(p))},[f,p,c,u,h,d,g,m,w,b,l,v,r,k,M,E,D,Y,y,O,C,o,s,X,A]}class uy extends Ye{constructor(e){super();Qe(this,e,EL,bL,We,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function IL(t){let e,n,i,r,s,o,a=[{class:n=ge(at({[t[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":t[3]},t[5]))},{style:i=Object.entries(t[6]).map(hy).concat([t[2]]).join(" ")},t[8]],l={};for(let c=0;c<a.length;c+=1)l=U(l,a[c]);return{c(){e=_e("div"),this.h()},l(c){e=ve(c,"DIV",{class:!0,style:!0}),ie(e).forEach(N),this.h()},h(){ce(e,l)},m(c,u){Z(c,e,u),t[13](e),s||(o=[oe(r=dt.call(null,e,t[0])),oe(t[7].call(null,e))],s=!0)},p(c,[u]){ce(e,l=Ae(a,[u&42&&n!==(n=ge(at({[c[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":c[3]},c[5])))&&{class:n},u&68&&i!==(i=Object.entries(c[6]).map(hy).concat([c[2]]).join(" "))&&{style:i},u&256&&c[8]])),r&&qe(r.update)&&u&1&&r.update.call(null,c[0])},i:Bt,o:Bt,d(c){c&&N(e),t[13](null),s=!1,Ge(o)}}}const hy=([t,e])=>`${t}: ${e};`;function wL(t,e,n){const i=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let r=ne(e,i);const s=$e(Ue());let{use:o=[]}=e,{class:a=""}=e,{style:l=""}=e,{active:c=!1}=e,u,h,d={},f={};Rn(()=>(h=new rL({addClass:g,removeClass:m,hasClass:p,setStyle:y,registerEventHandler:(_,I)=>O().addEventListener(_,I),deregisterEventHandler:(_,I)=>O().removeEventListener(_,I)}),h.init(),()=>{h.destroy()}));function p(_){return _ in d?d[_]:O().classList.contains(_)}function g(_){d[_]||n(5,d[_]=!0,d)}function m(_){(!(_ in d)||d[_])&&n(5,d[_]=!1,d)}function y(_,I){f[_]!=I&&(I===""||I==null?(delete f[_],n(6,f)):n(6,f[_]=I,f))}function w(){h.activate()}function b(){h.deactivate()}function v(_){h.setRippleCenter(_)}function O(){return u}function C(_){ue[_?"unshift":"push"](()=>{u=_,n(4,u)})}return t.$$set=_=>{e=U(U({},e),ze(_)),n(8,r=ne(e,i)),"use"in _&&n(0,o=_.use),"class"in _&&n(1,a=_.class),"style"in _&&n(2,l=_.style),"active"in _&&n(3,c=_.active)},[o,a,l,c,u,d,f,s,r,w,b,v,O,C]}class TL extends Ye{constructor(e){super();Qe(this,e,wL,IL,We,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function dy(t){let e,n,i;const r=t[14].default,s=we(r,t,t[13],null);return{c(){e=_e("div"),s&&s.c(),this.h()},l(o){e=ve(o,"DIV",{class:!0,style:!0});var a=ie(e);s&&s.l(a),a.forEach(N),this.h()},h(){$(e,"class","mdc-notched-outline__notch"),$(e,"style",n=Object.entries(t[7]).map(fy).join(" "))},m(o,a){Z(o,e,a),s&&s.m(e,null),i=!0},p(o,a){s&&s.p&&(!i||a&8192)&&Ce(s,r,o,o[13],i?Te(r,o[13],a,null):Se(o[13]),null),(!i||a&128&&n!==(n=Object.entries(o[7]).map(fy).join(" ")))&&$(e,"style",n)},i(o){i||(P(s,o),i=!0)},o(o){F(s,o),i=!1},d(o){o&&N(e),s&&s.d(o)}}}function CL(t){let e,n,i,r,s,o,a,l,c,u,h=!t[3]&&dy(t),d=[{class:o=ge(at({[t[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":t[2],"mdc-notched-outline--no-label":t[3]},t[6]))},t[9]],f={};for(let p=0;p<d.length;p+=1)f=U(f,d[p]);return{c(){e=_e("div"),n=_e("div"),i=Ke(),h&&h.c(),r=Ke(),s=_e("div"),this.h()},l(p){e=ve(p,"DIV",{class:!0});var g=ie(e);n=ve(g,"DIV",{class:!0}),ie(n).forEach(N),i=Xe(g),h&&h.l(g),r=Xe(g),s=ve(g,"DIV",{class:!0}),ie(s).forEach(N),g.forEach(N),this.h()},h(){$(n,"class","mdc-notched-outline__leading"),$(s,"class","mdc-notched-outline__trailing"),ce(e,f)},m(p,g){Z(p,e,g),me(e,n),me(e,i),h&&h.m(e,null),me(e,r),me(e,s),t[15](e),l=!0,c||(u=[oe(a=dt.call(null,e,t[0])),oe(t[8].call(null,e)),Ze(e,"SMUIFloatingLabel:mount",t[16]),Ze(e,"SMUIFloatingLabel:unmount",t[17])],c=!0)},p(p,[g]){p[3]?h&&(Ft(),F(h,1,1,()=>{h=null}),Ut()):h?(h.p(p,g),g&8&&P(h,1)):(h=dy(p),h.c(),P(h,1),h.m(e,r)),ce(e,f=Ae(d,[(!l||g&78&&o!==(o=ge(at({[p[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":p[2],"mdc-notched-outline--no-label":p[3]},p[6]))))&&{class:o},g&512&&p[9]])),a&&qe(a.update)&&g&1&&a.update.call(null,p[0])},i(p){l||(P(h),l=!0)},o(p){F(h),l=!1},d(p){p&&N(e),h&&h.d(),t[15](null),c=!1,Ge(u)}}}const fy=([t,e])=>`${t}: ${e};`;function SL(t,e,n){const i=["use","class","notched","noLabel","notch","closeNotch","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e;const a=$e(Ue());let{use:l=[]}=e,{class:c=""}=e,{notched:u=!1}=e,{noLabel:h=!1}=e,d,f,p,g={},m={};Rn(()=>(f=new aL({addClass:y,removeClass:w,setNotchWidthProperty:k=>b("width",k+"px"),removeNotchWidthProperty:()=>v("width")}),f.init(),()=>{f.destroy()}));function y(k){g[k]||n(6,g[k]=!0,g)}function w(k){(!(k in g)||g[k])&&n(6,g[k]=!1,g)}function b(k,M){m[k]!=M&&(M===""||M==null?(delete m[k],n(7,m)):n(7,m[k]=M,m))}function v(k){k in m&&(delete m[k],n(7,m))}function O(k){f.notch(k)}function C(){f.closeNotch()}function _(){return d}function I(k){ue[k?"unshift":"push"](()=>{d=k,n(5,d)})}const K=k=>n(4,p=k.detail),L=()=>n(4,p=void 0);return t.$$set=k=>{e=U(U({},e),ze(k)),n(9,r=ne(e,i)),"use"in k&&n(0,l=k.use),"class"in k&&n(1,c=k.class),"notched"in k&&n(2,u=k.notched),"noLabel"in k&&n(3,h=k.noLabel),"$$scope"in k&&n(13,o=k.$$scope)},t.$$.update=()=>{t.$$.dirty&16&&(p?(p.addStyle("transition-duration","0s"),y("mdc-notched-outline--upgraded"),requestAnimationFrame(()=>{p&&p.removeStyle("transition-duration")})):w("mdc-notched-outline--upgraded"))},[l,c,u,h,p,d,g,m,a,r,O,C,_,o,s,I,K,L]}class AL extends Ye{constructor(e){super();Qe(this,e,SL,CL,We,{use:0,class:1,notched:2,noLabel:3,notch:10,closeNotch:11,getElement:12})}get notch(){return this.$$.ctx[10]}get closeNotch(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function kL(t){let e;const n=t[10].default,i=we(n,t,t[12],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&4096)&&Ce(i,n,r,r[12],e?Te(n,r[12],s,null):Se(r[12]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function OL(t){let e,n,i;const r=[{use:[t[7],...t[0]]},{class:ge(at({[t[1]]:!0,[t[5]]:!0},t[4]))},t[6],t[8]];var s=t[2];function o(a){let l={$$slots:{default:[kL]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=U(l,r[c]);return{props:l}}return s&&(e=new s(o(t)),t[11](e)),{c(){e&&Be(e.$$.fragment),n=vt()},l(a){e&&it(e.$$.fragment,a),n=vt()},m(a,l){e&&Ve(e,a,l),Z(a,n,l),i=!0},p(a,[l]){const c=l&499?Ae(r,[l&129&&{use:[a[7],...a[0]]},l&50&&{class:ge(at({[a[1]]:!0,[a[5]]:!0},a[4]))},l&64&&ht(a[6]),l&256&&ht(a[8])]):{};if(l&4096&&(c.$$scope={dirty:l,ctx:a}),s!==(s=a[2])){if(e){Ft();const u=e;F(u.$$.fragment,1,0,()=>{je(u,1)}),Ut()}s?(e=new s(o(a)),a[11](e),Be(e.$$.fragment),P(e.$$.fragment,1),Ve(e,n.parentNode,n)):e=null}else s&&e.$set(c)},i(a){i||(e&&P(e.$$.fragment,a),i=!0)},o(a){e&&F(e.$$.fragment,a),i=!1},d(a){t[11](null),a&&N(n),e&&je(e,a)}}}const Xi={component:$v,class:"",classMap:{},contexts:{},props:{}};function RL(t,e,n){const i=["use","class","component","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e,{class:l=""}=e,c;const u=Xi.class,h={},d=[],f=Xi.contexts,p=Xi.props;let{component:g=Xi.component}=e;Object.entries(Xi.classMap).forEach(([b,v])=>{const O=cn(v);O&&"subscribe"in O&&d.push(O.subscribe(C=>{n(4,h[b]=C,h)}))});const m=$e(Ue());for(let b in f)f.hasOwnProperty(b)&&Ht(b,f[b]);ur(()=>{for(const b of d)b()});function y(){return c.getElement()}function w(b){ue[b?"unshift":"push"](()=>{c=b,n(3,c)})}return t.$$set=b=>{e=U(U({},e),ze(b)),n(8,r=ne(e,i)),"use"in b&&n(0,a=b.use),"class"in b&&n(1,l=b.class),"component"in b&&n(2,g=b.component),"$$scope"in b&&n(12,o=b.$$scope)},[a,l,g,c,h,u,p,m,r,y,s,w,o]}class LL extends Ye{constructor(e){super();Qe(this,e,RL,OL,We,{use:0,class:1,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const py=Object.assign({},Xi);function Wt(t){return new Proxy(LL,{construct:function(e,n){return Object.assign(Xi,py,t),new e(...n)},get:function(e,n){return Object.assign(Xi,py,t),e[n]}})}var NL=Wt({class:"mdc-text-field-helper-line",component:wi}),ML=Wt({class:"mdc-text-field__affix mdc-text-field__affix--prefix",component:Mr}),PL=Wt({class:"mdc-text-field__affix mdc-text-field__affix--suffix",component:Mr});function DL(t){let e,n,i,r,s,o=[{class:n=ge({[t[1]]:!0,"mdc-text-field__input":!0})},{type:t[2]},{placeholder:t[3]},t[4],t[6],t[10]],a={};for(let l=0;l<o.length;l+=1)a=U(a,o[l]);return{c(){e=_e("input"),this.h()},l(l){e=ve(l,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){ce(e,a)},m(l,c){Z(l,e,c),e.autofocus&&e.focus(),t[26](e),r||(s=[oe(i=dt.call(null,e,t[0])),oe(t[7].call(null,e)),Ze(e,"input",t[27]),Ze(e,"change",t[9]),Ze(e,"blur",t[24]),Ze(e,"focus",t[25])],r=!0)},p(l,[c]){ce(e,a=Ae(o,[c&2&&n!==(n=ge({[l[1]]:!0,"mdc-text-field__input":!0}))&&{class:n},c&4&&{type:l[2]},c&8&&{placeholder:l[3]},c&16&&l[4],c&64&&l[6],c&1024&&l[10]])),i&&qe(i.update)&&c&1&&i.update.call(null,l[0])},i:Bt,o:Bt,d(l){l&&N(e),t[26](null),r=!1,Ge(s)}}}function FL(t){if(t===""){const e=new Number(Number.NaN);return e.length=0,e}return+t}function UL(t,e,n){const i=["use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","emptyValueNull","emptyValueUndefined","getAttr","addAttr","removeAttr","focus","blur","getElement"];let r=ne(e,i);const s=$e(Ue());let o=()=>{};function a(R){return R===o}let{use:l=[]}=e,{class:c=""}=e,{type:u="text"}=e,{placeholder:h=" "}=e,{value:d=o}=e;const f=a(d);f&&(d="");let{files:p=null}=e,{dirty:g=!1}=e,{invalid:m=!1}=e,{updateInvalid:y=!0}=e,{emptyValueNull:w=d===null}=e;f&&w&&(d=null);let{emptyValueUndefined:b=d===void 0}=e;f&&b&&(d=void 0);let v,O={},C={};Rn(()=>{y&&n(14,m=v.matches(":invalid"))});function _(R){if(u==="file"){n(12,p=R.currentTarget.files);return}if(R.currentTarget.value===""&&w){n(11,d=null);return}if(R.currentTarget.value===""&&b){n(11,d=void 0);return}switch(u){case"number":case"range":n(11,d=FL(R.currentTarget.value));break;default:n(11,d=R.currentTarget.value);break}}function I(R){(u==="file"||u==="range")&&_(R),n(13,g=!0),y&&n(14,m=v.matches(":invalid"))}function K(R){var V;return R in O?(V=O[R])!==null&&V!==void 0?V:null:D().getAttribute(R)}function L(R,V){O[R]!==V&&n(6,O[R]=V,O)}function k(R){(!(R in O)||O[R]!=null)&&n(6,O[R]=void 0,O)}function M(){D().focus()}function E(){D().blur()}function D(){return v}function Y(R){uo.call(this,t,R)}function X(R){uo.call(this,t,R)}function A(R){ue[R?"unshift":"push"](()=>{v=R,n(5,v)})}const S=R=>u!=="file"&&_(R);return t.$$set=R=>{e=U(U({},e),ze(R)),n(10,r=ne(e,i)),"use"in R&&n(0,l=R.use),"class"in R&&n(1,c=R.class),"type"in R&&n(2,u=R.type),"placeholder"in R&&n(3,h=R.placeholder),"value"in R&&n(11,d=R.value),"files"in R&&n(12,p=R.files),"dirty"in R&&n(13,g=R.dirty),"invalid"in R&&n(14,m=R.invalid),"updateInvalid"in R&&n(15,y=R.updateInvalid),"emptyValueNull"in R&&n(16,w=R.emptyValueNull),"emptyValueUndefined"in R&&n(17,b=R.emptyValueUndefined)},t.$$.update=()=>{t.$$.dirty&2068&&(u==="file"?(delete C.value,n(4,C),n(2,u),n(11,d)):n(4,C.value=d==null?"":d,C))},[l,c,u,h,C,v,O,s,_,I,r,d,p,g,m,y,w,b,K,L,k,M,E,D,Y,X,A,S]}class xL extends Ye{constructor(e){super();Qe(this,e,UL,DL,We,{use:0,class:1,type:2,placeholder:3,value:11,files:12,dirty:13,invalid:14,updateInvalid:15,emptyValueNull:16,emptyValueUndefined:17,getAttr:18,addAttr:19,removeAttr:20,focus:21,blur:22,getElement:23})}get getAttr(){return this.$$.ctx[18]}get addAttr(){return this.$$.ctx[19]}get removeAttr(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}get blur(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}function VL(t){let e,n,i,r,s,o,a=[{class:n=ge({[t[2]]:!0,"mdc-text-field__input":!0})},{style:i=`${t[4]?"":"resize: none; "}${t[3]}`},t[6],t[9]],l={};for(let c=0;c<a.length;c+=1)l=U(l,a[c]);return{c(){e=_e("textarea"),this.h()},l(c){e=ve(c,"TEXTAREA",{class:!0,style:!0}),ie(e).forEach(N),this.h()},h(){ce(e,l)},m(c,u){Z(c,e,u),e.autofocus&&e.focus(),t[21](e),Dp(e,t[0]),s||(o=[oe(r=dt.call(null,e,t[1])),oe(t[7].call(null,e)),Ze(e,"change",t[8]),Ze(e,"blur",t[19]),Ze(e,"focus",t[20]),Ze(e,"input",t[22])],s=!0)},p(c,[u]){ce(e,l=Ae(a,[u&4&&n!==(n=ge({[c[2]]:!0,"mdc-text-field__input":!0}))&&{class:n},u&24&&i!==(i=`${c[4]?"":"resize: none; "}${c[3]}`)&&{style:i},u&64&&c[6],u&512&&c[9]])),r&&qe(r.update)&&u&2&&r.update.call(null,c[1]),u&1&&Dp(e,c[0])},i:Bt,o:Bt,d(c){c&&N(e),t[21](null),s=!1,Ge(o)}}}function jL(t,e,n){const i=["use","class","style","value","dirty","invalid","updateInvalid","resizable","getAttr","addAttr","removeAttr","focus","blur","getElement"];let r=ne(e,i);const s=$e(Ue());let{use:o=[]}=e,{class:a=""}=e,{style:l=""}=e,{value:c=""}=e,{dirty:u=!1}=e,{invalid:h=!1}=e,{updateInvalid:d=!0}=e,{resizable:f=!0}=e,p,g={};Rn(()=>{d&&n(11,h=p.matches(":invalid"))});function m(){n(10,u=!0),d&&n(11,h=p.matches(":invalid"))}function y(k){var M;return k in g?(M=g[k])!==null&&M!==void 0?M:null:C().getAttribute(k)}function w(k,M){g[k]!==M&&n(6,g[k]=M,g)}function b(k){(!(k in g)||g[k]!=null)&&n(6,g[k]=void 0,g)}function v(){C().focus()}function O(){C().blur()}function C(){return p}function _(k){uo.call(this,t,k)}function I(k){uo.call(this,t,k)}function K(k){ue[k?"unshift":"push"](()=>{p=k,n(5,p)})}function L(){c=this.value,n(0,c)}return t.$$set=k=>{e=U(U({},e),ze(k)),n(9,r=ne(e,i)),"use"in k&&n(1,o=k.use),"class"in k&&n(2,a=k.class),"style"in k&&n(3,l=k.style),"value"in k&&n(0,c=k.value),"dirty"in k&&n(10,u=k.dirty),"invalid"in k&&n(11,h=k.invalid),"updateInvalid"in k&&n(12,d=k.updateInvalid),"resizable"in k&&n(4,f=k.resizable)},[c,o,a,l,f,p,g,s,m,r,u,h,d,y,w,b,v,O,C,_,I,K,L]}class BL extends Ye{constructor(e){super();Qe(this,e,jL,VL,We,{use:1,class:2,style:3,value:0,dirty:10,invalid:11,updateInvalid:12,resizable:4,getAttr:13,addAttr:14,removeAttr:15,focus:16,blur:17,getElement:18})}get getAttr(){return this.$$.ctx[13]}get addAttr(){return this.$$.ctx[14]}get removeAttr(){return this.$$.ctx[15]}get focus(){return this.$$.ctx[16]}get blur(){return this.$$.ctx[17]}get getElement(){return this.$$.ctx[18]}}const HL=t=>({}),my=t=>({}),qL=t=>({}),gy=t=>({}),WL=t=>({}),_y=t=>({}),GL=t=>({}),vy=t=>({}),zL=t=>({}),yy=t=>({}),KL=t=>({}),by=t=>({}),XL=t=>({}),Ey=t=>({}),QL=t=>({}),Iy=t=>({}),YL=t=>({}),wy=t=>({}),JL=t=>({}),Ty=t=>({}),ZL=t=>({}),Cy=t=>({}),$L=t=>({}),Sy=t=>({});function eN(t){let e,n,i,r,s,o,a,l,c,u,h,d,f,p;const g=t[51].label,m=we(g,t,t[90],yy);i=new yc({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[nN]},$$scope:{ctx:t}}});const y=t[51].default,w=we(y,t,t[90],null);o=new yc({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[iN]},$$scope:{ctx:t}}});const b=t[51].ripple,v=we(b,t,t[90],gy);let O=[{class:l=ge(at({[t[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":t[12],"mdc-text-field--textarea":t[14],"mdc-text-field--filled":t[15]==="filled","mdc-text-field--outlined":t[15]==="outlined","smui-text-field--standard":t[15]==="standard"&&!t[14],"mdc-text-field--no-label":t[16]||!t[42].label,"mdc-text-field--with-leading-icon":t[42].leadingIcon,"mdc-text-field--with-trailing-icon":t[42].trailingIcon,"mdc-text-field--invalid":t[1]},t[25]))},{style:c=Object.entries(t[26]).map(Uy).concat([t[10]]).join(" ")},zi(t[41],["input$","label$","ripple$","outline$","helperLine$"])],C={};for(let _=0;_<O.length;_+=1)C=U(C,O[_]);return{c(){e=_e("div"),m&&m.c(),n=Ke(),Be(i.$$.fragment),r=Ke(),w&&w.c(),s=Ke(),Be(o.$$.fragment),a=Ke(),v&&v.c(),this.h()},l(_){e=ve(_,"DIV",{class:!0,style:!0});var I=ie(e);m&&m.l(I),n=Xe(I),it(i.$$.fragment,I),r=Xe(I),w&&w.l(I),s=Xe(I),it(o.$$.fragment,I),a=Xe(I),v&&v.l(I),I.forEach(N),this.h()},h(){ce(e,C)},m(_,I){Z(_,e,I),m&&m.m(e,null),me(e,n),Ve(i,e,null),me(e,r),w&&w.m(e,null),me(e,s),Ve(o,e,null),me(e,a),v&&v.m(e,null),t[80](e),d=!0,f||(p=[oe(u=Nr.call(null,e,{ripple:t[11],unbounded:!1,addClass:t[38],removeClass:t[39],addStyle:t[40]})),oe(h=dt.call(null,e,t[8])),oe(t[34].call(null,e)),Ze(e,"SMUITextfieldLeadingIcon:mount",t[81]),Ze(e,"SMUITextfieldLeadingIcon:unmount",t[82]),Ze(e,"SMUITextfieldTrailingIcon:mount",t[83]),Ze(e,"SMUITextfieldTrailingIcon:unmount",t[84])],f=!0)},p(_,I){m&&m.p&&(!d||I[2]&268435456)&&Ce(m,g,_,_[90],d?Te(g,_[90],I,zL):Se(_[90]),yy);const K={};I[2]&268435456&&(K.$$scope={dirty:I,ctx:_}),i.$set(K),w&&w.p&&(!d||I[2]&268435456)&&Ce(w,y,_,_[90],d?Te(y,_[90],I,null):Se(_[90]),null);const L={};I[2]&268435456&&(L.$$scope={dirty:I,ctx:_}),o.$set(L),v&&v.p&&(!d||I[2]&268435456)&&Ce(v,b,_,_[90],d?Te(b,_[90],I,qL):Se(_[90]),gy),ce(e,C=Ae(O,[(!d||I[0]&33673730|I[1]&2048&&l!==(l=ge(at({[_[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":_[12],"mdc-text-field--textarea":_[14],"mdc-text-field--filled":_[15]==="filled","mdc-text-field--outlined":_[15]==="outlined","smui-text-field--standard":_[15]==="standard"&&!_[14],"mdc-text-field--no-label":_[16]||!_[42].label,"mdc-text-field--with-leading-icon":_[42].leadingIcon,"mdc-text-field--with-trailing-icon":_[42].trailingIcon,"mdc-text-field--invalid":_[1]},_[25]))))&&{class:l},(!d||I[0]&67109888&&c!==(c=Object.entries(_[26]).map(Uy).concat([_[10]]).join(" ")))&&{style:c},I[1]&1024&&zi(_[41],["input$","label$","ripple$","outline$","helperLine$"])])),u&&qe(u.update)&&I[0]&2048&&u.update.call(null,{ripple:_[11],unbounded:!1,addClass:_[38],removeClass:_[39],addStyle:_[40]}),h&&qe(h.update)&&I[0]&256&&h.update.call(null,_[8])},i(_){d||(P(m,_),P(i.$$.fragment,_),P(w,_),P(o.$$.fragment,_),P(v,_),d=!0)},o(_){F(m,_),F(i.$$.fragment,_),F(w,_),F(o.$$.fragment,_),F(v,_),d=!1},d(_){_&&N(e),m&&m.d(_),je(i),w&&w.d(_),je(o),v&&v.d(_),t[80](null),f=!1,Ge(p)}}}function tN(t){let e,n,i,r,s,o,a,l,c,u,h,d,f,p,g,m,y,w,b=!t[14]&&t[15]!=="outlined"&&Ay(t),v=(t[14]||t[15]==="outlined")&&Ry(t);r=new yc({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[aN]},$$scope:{ctx:t}}});const O=t[51].default,C=we(O,t,t[90],null),_=[cN,lN],I=[];function K(E,D){return E[14]&&typeof E[0]=="string"?0:1}a=K(t),l=I[a]=_[a](t),u=new yc({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[dN]},$$scope:{ctx:t}}});let L=!t[14]&&t[15]!=="outlined"&&t[11]&&Py(t),k=[{class:d=ge(at({[t[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":t[12],"mdc-text-field--textarea":t[14],"mdc-text-field--filled":t[15]==="filled","mdc-text-field--outlined":t[15]==="outlined","smui-text-field--standard":t[15]==="standard"&&!t[14],"mdc-text-field--no-label":t[16]||t[17]==null&&!t[42].label,"mdc-text-field--label-floating":t[28]||t[0]!=null&&t[0]!=="","mdc-text-field--with-leading-icon":t[35](t[22])?t[42].leadingIcon:t[22],"mdc-text-field--with-trailing-icon":t[35](t[23])?t[42].trailingIcon:t[23],"mdc-text-field--with-internal-counter":t[14]&&t[42].internalCounter,"mdc-text-field--invalid":t[1]},t[25]))},{style:f=Object.entries(t[26]).map(Fy).concat([t[10]]).join(" ")},{for:void 0},zi(t[41],["input$","label$","ripple$","outline$","helperLine$"])],M={};for(let E=0;E<k.length;E+=1)M=U(M,k[E]);return{c(){e=_e("label"),b&&b.c(),n=Ke(),v&&v.c(),i=Ke(),Be(r.$$.fragment),s=Ke(),C&&C.c(),o=Ke(),l.c(),c=Ke(),Be(u.$$.fragment),h=Ke(),L&&L.c(),this.h()},l(E){e=ve(E,"LABEL",{class:!0,style:!0,for:!0});var D=ie(e);b&&b.l(D),n=Xe(D),v&&v.l(D),i=Xe(D),it(r.$$.fragment,D),s=Xe(D),C&&C.l(D),o=Xe(D),l.l(D),c=Xe(D),it(u.$$.fragment,D),h=Xe(D),L&&L.l(D),D.forEach(N),this.h()},h(){ce(e,M)},m(E,D){Z(E,e,D),b&&b.m(e,null),me(e,n),v&&v.m(e,null),me(e,i),Ve(r,e,null),me(e,s),C&&C.m(e,null),me(e,o),I[a].m(e,null),me(e,c),Ve(u,e,null),me(e,h),L&&L.m(e,null),t[73](e),m=!0,y||(w=[oe(p=Nr.call(null,e,{ripple:!t[14]&&t[15]==="filled",unbounded:!1,addClass:t[38],removeClass:t[39],addStyle:t[40],eventTarget:t[33],activeTarget:t[33],initPromise:t[37]})),oe(g=dt.call(null,e,t[8])),oe(t[34].call(null,e)),Ze(e,"SMUITextfieldLeadingIcon:mount",t[74]),Ze(e,"SMUITextfieldLeadingIcon:unmount",t[75]),Ze(e,"SMUITextfieldTrailingIcon:mount",t[76]),Ze(e,"SMUITextfieldTrailingIcon:unmount",t[77]),Ze(e,"SMUITextfieldCharacterCounter:mount",t[78]),Ze(e,"SMUITextfieldCharacterCounter:unmount",t[79])],y=!0)},p(E,D){!E[14]&&E[15]!=="outlined"?b?(b.p(E,D),D[0]&49152&&P(b,1)):(b=Ay(E),b.c(),P(b,1),b.m(e,n)):b&&(Ft(),F(b,1,1,()=>{b=null}),Ut()),E[14]||E[15]==="outlined"?v?(v.p(E,D),D[0]&49152&&P(v,1)):(v=Ry(E),v.c(),P(v,1),v.m(e,i)):v&&(Ft(),F(v,1,1,()=>{v=null}),Ut());const Y={};D[2]&268435456&&(Y.$$scope={dirty:D,ctx:E}),r.$set(Y),C&&C.p&&(!m||D[2]&268435456)&&Ce(C,O,E,E[90],m?Te(O,E[90],D,null):Se(E[90]),null);let X=a;a=K(E),a===X?I[a].p(E,D):(Ft(),F(I[X],1,1,()=>{I[X]=null}),Ut(),l=I[a],l?l.p(E,D):(l=I[a]=_[a](E),l.c()),P(l,1),l.m(e,c));const A={};D[2]&268435456&&(A.$$scope={dirty:D,ctx:E}),u.$set(A),!E[14]&&E[15]!=="outlined"&&E[11]?L?(L.p(E,D),D[0]&51200&&P(L,1)):(L=Py(E),L.c(),P(L,1),L.m(e,null)):L&&(Ft(),F(L,1,1,()=>{L=null}),Ut()),ce(e,M=Ae(k,[(!m||D[0]&314823171|D[1]&2048&&d!==(d=ge(at({[E[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":E[12],"mdc-text-field--textarea":E[14],"mdc-text-field--filled":E[15]==="filled","mdc-text-field--outlined":E[15]==="outlined","smui-text-field--standard":E[15]==="standard"&&!E[14],"mdc-text-field--no-label":E[16]||E[17]==null&&!E[42].label,"mdc-text-field--label-floating":E[28]||E[0]!=null&&E[0]!=="","mdc-text-field--with-leading-icon":E[35](E[22])?E[42].leadingIcon:E[22],"mdc-text-field--with-trailing-icon":E[35](E[23])?E[42].trailingIcon:E[23],"mdc-text-field--with-internal-counter":E[14]&&E[42].internalCounter,"mdc-text-field--invalid":E[1]},E[25]))))&&{class:d},(!m||D[0]&67109888&&f!==(f=Object.entries(E[26]).map(Fy).concat([E[10]]).join(" ")))&&{style:f},{for:void 0},D[1]&1024&&zi(E[41],["input$","label$","ripple$","outline$","helperLine$"])])),p&&qe(p.update)&&D[0]&49152|D[1]&4&&p.update.call(null,{ripple:!E[14]&&E[15]==="filled",unbounded:!1,addClass:E[38],removeClass:E[39],addStyle:E[40],eventTarget:E[33],activeTarget:E[33],initPromise:E[37]}),g&&qe(g.update)&&D[0]&256&&g.update.call(null,E[8])},i(E){m||(P(b),P(v),P(r.$$.fragment,E),P(C,E),P(l),P(u.$$.fragment,E),P(L),m=!0)},o(E){F(b),F(v),F(r.$$.fragment,E),F(C,E),F(l),F(u.$$.fragment,E),F(L),m=!1},d(E){E&&N(e),b&&b.d(),v&&v.d(),je(r),C&&C.d(E),I[a].d(),je(u),L&&L.d(),t[73](null),y=!1,Ge(w)}}}function nN(t){let e;const n=t[51].leadingIcon,i=we(n,t,t[90],vy);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[2]&268435456)&&Ce(i,n,r,r[90],e?Te(n,r[90],s,GL):Se(r[90]),vy)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function iN(t){let e;const n=t[51].trailingIcon,i=we(n,t,t[90],_y);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[2]&268435456)&&Ce(i,n,r,r[90],e?Te(n,r[90],s,WL):Se(r[90]),_y)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function Ay(t){let e,n,i,r=t[15]==="filled"&&ky(),s=!t[16]&&(t[17]!=null||t[42].label)&&Oy(t);return{c(){r&&r.c(),e=Ke(),s&&s.c(),n=vt()},l(o){r&&r.l(o),e=Xe(o),s&&s.l(o),n=vt()},m(o,a){r&&r.m(o,a),Z(o,e,a),s&&s.m(o,a),Z(o,n,a),i=!0},p(o,a){o[15]==="filled"?r||(r=ky(),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),!o[16]&&(o[17]!=null||o[42].label)?s?(s.p(o,a),a[0]&196608|a[1]&2048&&P(s,1)):(s=Oy(o),s.c(),P(s,1),s.m(n.parentNode,n)):s&&(Ft(),F(s,1,1,()=>{s=null}),Ut())},i(o){i||(P(s),i=!0)},o(o){F(s),i=!1},d(o){r&&r.d(o),o&&N(e),s&&s.d(o),o&&N(n)}}}function ky(t){let e;return{c(){e=_e("span"),this.h()},l(n){e=ve(n,"SPAN",{class:!0}),ie(e).forEach(N),this.h()},h(){$(e,"class","mdc-text-field__ripple")},m(n,i){Z(n,e,i)},d(n){n&&N(e)}}}function Oy(t){let e,n;const i=[{floatAbove:t[28]||t[0]!=null&&t[0]!==""},{required:t[13]},{wrapped:!0},kt(t[41],"label$")];let r={$$slots:{default:[rN]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)r=U(r,i[s]);return e=new uy({props:r}),t[52](e),{c(){Be(e.$$.fragment)},l(s){it(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[0]&268443649|o[1]&1024?Ae(i,[o[0]&268435457&&{floatAbove:s[28]||s[0]!=null&&s[0]!==""},o[0]&8192&&{required:s[13]},i[2],o[1]&1024&&ht(kt(s[41],"label$"))]):{};o[0]&131072|o[2]&268435456&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){t[52](null),je(e,s)}}}function rN(t){let e=(t[17]==null?"":t[17])+"",n,i;const r=t[51].label,s=we(r,t,t[90],Sy);return{c(){n=Kn(e),s&&s.c()},l(o){n=ri(o,e),s&&s.l(o)},m(o,a){Z(o,n,a),s&&s.m(o,a),i=!0},p(o,a){(!i||a[0]&131072)&&e!==(e=(o[17]==null?"":o[17])+"")&&is(n,e),s&&s.p&&(!i||a[2]&268435456)&&Ce(s,r,o,o[90],i?Te(r,o[90],a,$L):Se(o[90]),Sy)},i(o){i||(P(s,o),i=!0)},o(o){F(s,o),i=!1},d(o){o&&N(n),s&&s.d(o)}}}function Ry(t){let e,n;const i=[{noLabel:t[16]||t[17]==null&&!t[42].label},kt(t[41],"outline$")];let r={$$slots:{default:[oN]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)r=U(r,i[s]);return e=new AL({props:r}),t[54](e),{c(){Be(e.$$.fragment)},l(s){it(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[0]&196608|o[1]&3072?Ae(i,[o[0]&196608|o[1]&2048&&{noLabel:s[16]||s[17]==null&&!s[42].label},o[1]&1024&&ht(kt(s[41],"outline$"))]):{};o[0]&268640289|o[1]&3072|o[2]&268435456&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){t[54](null),je(e,s)}}}function Ly(t){let e,n;const i=[{floatAbove:t[28]||t[0]!=null&&t[0]!==""},{required:t[13]},{wrapped:!0},kt(t[41],"label$")];let r={$$slots:{default:[sN]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)r=U(r,i[s]);return e=new uy({props:r}),t[53](e),{c(){Be(e.$$.fragment)},l(s){it(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[0]&268443649|o[1]&1024?Ae(i,[o[0]&268435457&&{floatAbove:s[28]||s[0]!=null&&s[0]!==""},o[0]&8192&&{required:s[13]},i[2],o[1]&1024&&ht(kt(s[41],"label$"))]):{};o[0]&131072|o[2]&268435456&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){t[53](null),je(e,s)}}}function sN(t){let e=(t[17]==null?"":t[17])+"",n,i;const r=t[51].label,s=we(r,t,t[90],Cy);return{c(){n=Kn(e),s&&s.c()},l(o){n=ri(o,e),s&&s.l(o)},m(o,a){Z(o,n,a),s&&s.m(o,a),i=!0},p(o,a){(!i||a[0]&131072)&&e!==(e=(o[17]==null?"":o[17])+"")&&is(n,e),s&&s.p&&(!i||a[2]&268435456)&&Ce(s,r,o,o[90],i?Te(r,o[90],a,ZL):Se(o[90]),Cy)},i(o){i||(P(s,o),i=!0)},o(o){F(s,o),i=!1},d(o){o&&N(n),s&&s.d(o)}}}function oN(t){let e,n,i=!t[16]&&(t[17]!=null||t[42].label)&&Ly(t);return{c(){i&&i.c(),e=vt()},l(r){i&&i.l(r),e=vt()},m(r,s){i&&i.m(r,s),Z(r,e,s),n=!0},p(r,s){!r[16]&&(r[17]!=null||r[42].label)?i?(i.p(r,s),s[0]&196608|s[1]&2048&&P(i,1)):(i=Ly(r),i.c(),P(i,1),i.m(e.parentNode,e)):i&&(Ft(),F(i,1,1,()=>{i=null}),Ut())},i(r){n||(P(i),n=!0)},o(r){F(i),n=!1},d(r){i&&i.d(r),r&&N(e)}}}function aN(t){let e;const n=t[51].leadingIcon,i=we(n,t,t[90],Ty);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[2]&268435456)&&Ce(i,n,r,r[90],e?Te(n,r[90],s,JL):Se(r[90]),Ty)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function lN(t){let e,n,i,r,s,o,a,l,c,u;const h=t[51].prefix,d=we(h,t,t[90],Iy);let f=t[20]!=null&&Ny(t);const p=[{type:t[18]},{disabled:t[12]},{required:t[13]},{updateInvalid:t[19]},{"aria-controls":t[27]},{"aria-describedby":t[27]},t[16]&&t[17]!=null?{placeholder:t[17]}:{},kt(t[41],"input$")];function g(_){t[64](_)}function m(_){t[65](_)}function y(_){t[66](_)}function w(_){t[67](_)}let b={};for(let _=0;_<p.length;_+=1)b=U(b,p[_]);t[0]!==void 0&&(b.value=t[0]),t[3]!==void 0&&(b.files=t[3]),t[4]!==void 0&&(b.dirty=t[4]),t[1]!==void 0&&(b.invalid=t[1]),i=new xL({props:b}),t[63](i),ue.push(()=>oi(i,"value",g)),ue.push(()=>oi(i,"files",m)),ue.push(()=>oi(i,"dirty",y)),ue.push(()=>oi(i,"invalid",w)),i.$on("blur",t[68]),i.$on("focus",t[69]),i.$on("blur",t[70]),i.$on("focus",t[71]);let v=t[21]!=null&&My(t);const O=t[51].suffix,C=we(O,t,t[90],Ey);return{c(){d&&d.c(),e=Ke(),f&&f.c(),n=Ke(),Be(i.$$.fragment),l=Ke(),v&&v.c(),c=Ke(),C&&C.c()},l(_){d&&d.l(_),e=Xe(_),f&&f.l(_),n=Xe(_),it(i.$$.fragment,_),l=Xe(_),v&&v.l(_),c=Xe(_),C&&C.l(_)},m(_,I){d&&d.m(_,I),Z(_,e,I),f&&f.m(_,I),Z(_,n,I),Ve(i,_,I),Z(_,l,I),v&&v.m(_,I),Z(_,c,I),C&&C.m(_,I),u=!0},p(_,I){d&&d.p&&(!u||I[2]&268435456)&&Ce(d,h,_,_[90],u?Te(h,_[90],I,QL):Se(_[90]),Iy),_[20]!=null?f?(f.p(_,I),I[0]&1048576&&P(f,1)):(f=Ny(_),f.c(),P(f,1),f.m(n.parentNode,n)):f&&(Ft(),F(f,1,1,()=>{f=null}),Ut());const K=I[0]&135213056|I[1]&1024?Ae(p,[I[0]&262144&&{type:_[18]},I[0]&4096&&{disabled:_[12]},I[0]&8192&&{required:_[13]},I[0]&524288&&{updateInvalid:_[19]},I[0]&134217728&&{"aria-controls":_[27]},I[0]&134217728&&{"aria-describedby":_[27]},I[0]&196608&&ht(_[16]&&_[17]!=null?{placeholder:_[17]}:{}),I[1]&1024&&ht(kt(_[41],"input$"))]):{};!r&&I[0]&1&&(r=!0,K.value=_[0],si(()=>r=!1)),!s&&I[0]&8&&(s=!0,K.files=_[3],si(()=>s=!1)),!o&&I[0]&16&&(o=!0,K.dirty=_[4],si(()=>o=!1)),!a&&I[0]&2&&(a=!0,K.invalid=_[1],si(()=>a=!1)),i.$set(K),_[21]!=null?v?(v.p(_,I),I[0]&2097152&&P(v,1)):(v=My(_),v.c(),P(v,1),v.m(c.parentNode,c)):v&&(Ft(),F(v,1,1,()=>{v=null}),Ut()),C&&C.p&&(!u||I[2]&268435456)&&Ce(C,O,_,_[90],u?Te(O,_[90],I,XL):Se(_[90]),Ey)},i(_){u||(P(d,_),P(f),P(i.$$.fragment,_),P(v),P(C,_),u=!0)},o(_){F(d,_),F(f),F(i.$$.fragment,_),F(v),F(C,_),u=!1},d(_){d&&d.d(_),_&&N(e),f&&f.d(_),_&&N(n),t[63](null),je(i,_),_&&N(l),v&&v.d(_),_&&N(c),C&&C.d(_)}}}function cN(t){let e,n,i,r,s,o,a,l;const c=[{disabled:t[12]},{required:t[13]},{updateInvalid:t[19]},{"aria-controls":t[27]},{"aria-describedby":t[27]},kt(t[41],"input$")];function u(m){t[56](m)}function h(m){t[57](m)}function d(m){t[58](m)}let f={};for(let m=0;m<c.length;m+=1)f=U(f,c[m]);t[0]!==void 0&&(f.value=t[0]),t[4]!==void 0&&(f.dirty=t[4]),t[1]!==void 0&&(f.invalid=t[1]),n=new BL({props:f}),t[55](n),ue.push(()=>oi(n,"value",u)),ue.push(()=>oi(n,"dirty",h)),ue.push(()=>oi(n,"invalid",d)),n.$on("blur",t[59]),n.$on("focus",t[60]),n.$on("blur",t[61]),n.$on("focus",t[62]);const p=t[51].internalCounter,g=we(p,t,t[90],wy);return{c(){e=_e("span"),Be(n.$$.fragment),o=Ke(),g&&g.c(),this.h()},l(m){e=ve(m,"SPAN",{class:!0});var y=ie(e);it(n.$$.fragment,y),o=Xe(y),g&&g.l(y),y.forEach(N),this.h()},h(){$(e,"class",a=ge({"mdc-text-field__resizer":!("input$resizable"in t[41])||t[41].input$resizable}))},m(m,y){Z(m,e,y),Ve(n,e,null),me(e,o),g&&g.m(e,null),l=!0},p(m,y){const w=y[0]&134754304|y[1]&1024?Ae(c,[y[0]&4096&&{disabled:m[12]},y[0]&8192&&{required:m[13]},y[0]&524288&&{updateInvalid:m[19]},y[0]&134217728&&{"aria-controls":m[27]},y[0]&134217728&&{"aria-describedby":m[27]},y[1]&1024&&ht(kt(m[41],"input$"))]):{};!i&&y[0]&1&&(i=!0,w.value=m[0],si(()=>i=!1)),!r&&y[0]&16&&(r=!0,w.dirty=m[4],si(()=>r=!1)),!s&&y[0]&2&&(s=!0,w.invalid=m[1],si(()=>s=!1)),n.$set(w),g&&g.p&&(!l||y[2]&268435456)&&Ce(g,p,m,m[90],l?Te(p,m[90],y,YL):Se(m[90]),wy),(!l||y[1]&1024&&a!==(a=ge({"mdc-text-field__resizer":!("input$resizable"in m[41])||m[41].input$resizable})))&&$(e,"class",a)},i(m){l||(P(n.$$.fragment,m),P(g,m),l=!0)},o(m){F(n.$$.fragment,m),F(g,m),l=!1},d(m){m&&N(e),t[55](null),je(n),g&&g.d(m)}}}function Ny(t){let e,n;return e=new ML({props:{$$slots:{default:[uN]},$$scope:{ctx:t}}}),{c(){Be(e.$$.fragment)},l(i){it(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[0]&1048576|r[2]&268435456&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){je(e,i)}}}function uN(t){let e;return{c(){e=Kn(t[20])},l(n){e=ri(n,t[20])},m(n,i){Z(n,e,i)},p(n,i){i[0]&1048576&&is(e,n[20])},d(n){n&&N(e)}}}function My(t){let e,n;return e=new PL({props:{$$slots:{default:[hN]},$$scope:{ctx:t}}}),{c(){Be(e.$$.fragment)},l(i){it(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[0]&2097152|r[2]&268435456&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){je(e,i)}}}function hN(t){let e;return{c(){e=Kn(t[21])},l(n){e=ri(n,t[21])},m(n,i){Z(n,e,i)},p(n,i){i[0]&2097152&&is(e,n[21])},d(n){n&&N(e)}}}function dN(t){let e;const n=t[51].trailingIcon,i=we(n,t,t[90],by);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[2]&268435456)&&Ce(i,n,r,r[90],e?Te(n,r[90],s,KL):Se(r[90]),by)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function Py(t){let e,n;const i=[kt(t[41],"ripple$")];let r={};for(let s=0;s<i.length;s+=1)r=U(r,i[s]);return e=new TL({props:r}),t[72](e),{c(){Be(e.$$.fragment)},l(s){it(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[1]&1024?Ae(i,[ht(kt(s[41],"ripple$"))]):{};e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){t[72](null),je(e,s)}}}function Dy(t){let e,n;const i=[kt(t[41],"helperLine$")];let r={$$slots:{default:[fN]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)r=U(r,i[s]);return e=new NL({props:r}),e.$on("SMUITextfieldHelperText:id",t[85]),e.$on("SMUITextfieldHelperText:mount",t[86]),e.$on("SMUITextfieldHelperText:unmount",t[87]),e.$on("SMUITextfieldCharacterCounter:mount",t[88]),e.$on("SMUITextfieldCharacterCounter:unmount",t[89]),{c(){Be(e.$$.fragment)},l(s){it(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[1]&1024?Ae(i,[ht(kt(s[41],"helperLine$"))]):{};o[2]&268435456&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){je(e,s)}}}function fN(t){let e;const n=t[51].helper,i=we(n,t,t[90],my);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[2]&268435456)&&Ce(i,n,r,r[90],e?Te(n,r[90],s,HL):Se(r[90]),my)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function pN(t){let e,n,i,r,s;const o=[tN,eN],a=[];function l(u,h){return u[36]?0:1}e=l(t),n=a[e]=o[e](t);let c=t[42].helper&&Dy(t);return{c(){n.c(),i=Ke(),c&&c.c(),r=vt()},l(u){n.l(u),i=Xe(u),c&&c.l(u),r=vt()},m(u,h){a[e].m(u,h),Z(u,i,h),c&&c.m(u,h),Z(u,r,h),s=!0},p(u,h){n.p(u,h),u[42].helper?c?(c.p(u,h),h[1]&2048&&P(c,1)):(c=Dy(u),c.c(),P(c,1),c.m(r.parentNode,r)):c&&(Ft(),F(c,1,1,()=>{c=null}),Ut())},i(u){s||(P(n),P(c),s=!0)},o(u){F(n),F(c),s=!1},d(u){a[e].d(u),u&&N(i),c&&c.d(u),u&&N(r)}}}const Fy=([t,e])=>`${t}: ${e};`,Uy=([t,e])=>`${t}: ${e};`;function mN(t,e,n){let i;const r=["use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","focus","blur","layout","getElement"];let s=ne(e,r),{$$slots:o={},$$scope:a}=e;const l=Dw(o),{applyPassive:c}=Xv,u=$e(Ue());let h=()=>{};function d(T){return T===h}let{use:f=[]}=e,{class:p=""}=e,{style:g=""}=e,{ripple:m=!0}=e,{disabled:y=!1}=e,{required:w=!1}=e,{textarea:b=!1}=e,{variant:v=b?"outlined":"standard"}=e,{noLabel:O=!1}=e,{label:C=void 0}=e,{type:_="text"}=e,{value:I=s.input$emptyValueUndefined?void 0:h}=e,{files:K=h}=e;const L=!d(I)||!d(K);d(I)&&(I=void 0),d(K)&&(K=null);let{invalid:k=h}=e,{updateInvalid:M=d(k)}=e;d(k)&&(k=!1);let{dirty:E=!1}=e,{prefix:D=void 0}=e,{suffix:Y=void 0}=e,{validateOnValueChange:X=M}=e,{useNativeValidation:A=M}=e,{withLeadingIcon:S=h}=e,{withTrailingIcon:R=h}=e,{input:V=void 0}=e,{floatingLabel:Q=void 0}=e,{lineRipple:he=void 0}=e,{notchedOutline:W=void 0}=e,Pe,be,Ie={},Oe={},gt,G=!1,fe=cn("SMUI:addLayoutListener"),Pt,Ot,q=new Promise(T=>Ot=T),pe,pt,Kt,kn,ii=I;fe&&(Pt=fe(Zn)),Rn(()=>{if(n(49,be=new hL({addClass:ar,removeClass:ns,hasClass:co,registerTextFieldInteractionHandler:(T,Dt)=>di().addEventListener(T,Dt),deregisterTextFieldInteractionHandler:(T,Dt)=>di().removeEventListener(T,Dt),registerValidationAttributeChangeHandler:T=>{const Dt=Iu=>Iu.map(wu=>wu.attributeName).filter(wu=>wu),Sp=new MutationObserver(Iu=>{A&&T(Dt(Iu))}),kw={attributes:!0};return V&&Sp.observe(V.getElement(),kw),Sp},deregisterValidationAttributeChangeHandler:T=>{T.disconnect()},getNativeInput:()=>{var T;return(T=V==null?void 0:V.getElement())!==null&&T!==void 0?T:null},setInputAttr:(T,Dt)=>{V==null||V.addAttr(T,Dt)},removeInputAttr:T=>{V==null||V.removeAttr(T)},isFocused:()=>document.activeElement===(V==null?void 0:V.getElement()),registerInputInteractionHandler:(T,Dt)=>{V==null||V.getElement().addEventListener(T,Dt,c())},deregisterInputInteractionHandler:(T,Dt)=>{V==null||V.getElement().removeEventListener(T,Dt,c())},floatLabel:T=>Q&&Q.float(T),getLabelWidth:()=>Q?Q.getWidth():0,hasLabel:()=>!!Q,shakeLabel:T=>Q&&Q.shake(T),setLabelRequired:T=>Q&&Q.setRequired(T),activateLineRipple:()=>he&&he.activate(),deactivateLineRipple:()=>he&&he.deactivate(),setLineRippleTransformOrigin:T=>he&&he.setRippleCenter(T),closeOutline:()=>W&&W.closeNotch(),hasOutline:()=>!!W,notchOutline:T=>W&&W.notch(T)},{get helperText(){return Kt},get characterCounter(){return kn},get leadingIcon(){return pe},get trailingIcon(){return pt}})),L){if(V==null)throw new Error("SMUI Textfield initialized without Input component.");be.init()}else Gw().then(()=>{if(V==null)throw new Error("SMUI Textfield initialized without Input component.");be.init()});return Ot(),()=>{be.destroy()}}),ur(()=>{Pt&&Pt()});function co(T){var Dt;return T in Ie?(Dt=Ie[T])!==null&&Dt!==void 0?Dt:null:di().classList.contains(T)}function ar(T){Ie[T]||n(25,Ie[T]=!0,Ie)}function ns(T){(!(T in Ie)||Ie[T])&&n(25,Ie[T]=!1,Ie)}function zn(T,Dt){Oe[T]!=Dt&&(Dt===""||Dt==null?(delete Oe[T],n(26,Oe)):n(26,Oe[T]=Dt,Oe))}function j(){V==null||V.focus()}function ot(){V==null||V.blur()}function Zn(){if(be){const T=be.shouldFloat;be.notchOutline(T)}}function di(){return Pe}function lr(T){ue[T?"unshift":"push"](()=>{Q=T,n(5,Q)})}function H(T){ue[T?"unshift":"push"](()=>{Q=T,n(5,Q)})}function le(T){ue[T?"unshift":"push"](()=>{W=T,n(7,W)})}function se(T){ue[T?"unshift":"push"](()=>{V=T,n(2,V)})}function _t(T){I=T,n(0,I)}function cr(T){E=T,n(4,E)}function Eu(T){k=T,n(1,k),n(49,be),n(19,M)}const J0=()=>n(28,G=!1),Z0=()=>n(28,G=!0),$0=T=>st(Pe,"blur",T),ew=T=>st(Pe,"focus",T);function tw(T){ue[T?"unshift":"push"](()=>{V=T,n(2,V)})}function nw(T){I=T,n(0,I)}function iw(T){K=T,n(3,K)}function rw(T){E=T,n(4,E)}function sw(T){k=T,n(1,k),n(49,be),n(19,M)}const ow=()=>n(28,G=!1),aw=()=>n(28,G=!0),lw=T=>st(Pe,"blur",T),cw=T=>st(Pe,"focus",T);function uw(T){ue[T?"unshift":"push"](()=>{he=T,n(6,he)})}function hw(T){ue[T?"unshift":"push"](()=>{Pe=T,n(24,Pe)})}const dw=T=>n(29,pe=T.detail),fw=()=>n(29,pe=void 0),pw=T=>n(30,pt=T.detail),mw=()=>n(30,pt=void 0),gw=T=>n(32,kn=T.detail),_w=()=>n(32,kn=void 0);function vw(T){ue[T?"unshift":"push"](()=>{Pe=T,n(24,Pe)})}const yw=T=>n(29,pe=T.detail),bw=()=>n(29,pe=void 0),Ew=T=>n(30,pt=T.detail),Iw=()=>n(30,pt=void 0),ww=T=>n(27,gt=T.detail),Tw=T=>n(31,Kt=T.detail),Cw=()=>{n(27,gt=void 0),n(31,Kt=void 0)},Sw=T=>n(32,kn=T.detail),Aw=()=>n(32,kn=void 0);return t.$$set=T=>{e=U(U({},e),ze(T)),n(41,s=ne(e,r)),"use"in T&&n(8,f=T.use),"class"in T&&n(9,p=T.class),"style"in T&&n(10,g=T.style),"ripple"in T&&n(11,m=T.ripple),"disabled"in T&&n(12,y=T.disabled),"required"in T&&n(13,w=T.required),"textarea"in T&&n(14,b=T.textarea),"variant"in T&&n(15,v=T.variant),"noLabel"in T&&n(16,O=T.noLabel),"label"in T&&n(17,C=T.label),"type"in T&&n(18,_=T.type),"value"in T&&n(0,I=T.value),"files"in T&&n(3,K=T.files),"invalid"in T&&n(1,k=T.invalid),"updateInvalid"in T&&n(19,M=T.updateInvalid),"dirty"in T&&n(4,E=T.dirty),"prefix"in T&&n(20,D=T.prefix),"suffix"in T&&n(21,Y=T.suffix),"validateOnValueChange"in T&&n(43,X=T.validateOnValueChange),"useNativeValidation"in T&&n(44,A=T.useNativeValidation),"withLeadingIcon"in T&&n(22,S=T.withLeadingIcon),"withTrailingIcon"in T&&n(23,R=T.withTrailingIcon),"input"in T&&n(2,V=T.input),"floatingLabel"in T&&n(5,Q=T.floatingLabel),"lineRipple"in T&&n(6,he=T.lineRipple),"notchedOutline"in T&&n(7,W=T.notchedOutline),"$$scope"in T&&n(90,a=T.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&4&&n(33,i=V&&V.getElement()),t.$$.dirty[0]&524290|t.$$.dirty[1]&262144&&be&&be.isValid()!==!k&&(M?n(1,k=!be.isValid()):be.setValid(!k)),t.$$.dirty[1]&266240&&be&&be.getValidateOnValueChange()!==X&&be.setValidateOnValueChange(d(X)?!1:X),t.$$.dirty[1]&270336&&be&&be.setUseNativeValidation(d(A)?!0:A),t.$$.dirty[0]&4096|t.$$.dirty[1]&262144&&be&&be.setDisabled(y),t.$$.dirty[0]&1|t.$$.dirty[1]&786432&&be&&L&&ii!==I){n(50,ii=I);const T=`${I}`;be.getValue()!==T&&be.setValue(T)}},[I,k,V,K,E,Q,he,W,f,p,g,m,y,w,b,v,O,C,_,M,D,Y,S,R,Pe,Ie,Oe,gt,G,pe,pt,Kt,kn,i,u,d,L,q,ar,ns,zn,s,l,X,A,j,ot,Zn,di,be,ii,o,lr,H,le,se,_t,cr,Eu,J0,Z0,$0,ew,tw,nw,iw,rw,sw,ow,aw,lw,cw,uw,hw,dw,fw,pw,mw,gw,_w,vw,yw,bw,Ew,Iw,ww,Tw,Cw,Sw,Aw,a]}class gN extends Ye{constructor(e){super();Qe(this,e,mN,pN,We,{use:8,class:9,style:10,ripple:11,disabled:12,required:13,textarea:14,variant:15,noLabel:16,label:17,type:18,value:0,files:3,invalid:1,updateInvalid:19,dirty:4,prefix:20,suffix:21,validateOnValueChange:43,useNativeValidation:44,withLeadingIcon:22,withTrailingIcon:23,input:2,floatingLabel:5,lineRipple:6,notchedOutline:7,focus:45,blur:46,layout:47,getElement:48},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[45]}get blur(){return this.$$.ctx[46]}get layout(){return this.$$.ctx[47]}get getElement(){return this.$$.ctx[48]}}/**
 * @license
 * Copyright 2021 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Dr;(function(t){t.PROCESSING="mdc-switch--processing",t.SELECTED="mdc-switch--selected",t.UNSELECTED="mdc-switch--unselected"})(Dr||(Dr={}));var xy;(function(t){t.RIPPLE=".mdc-switch__ripple"})(xy||(xy={}));/**
 * @license
 * Copyright 2021 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function _N(t,e,n){var i=vN(t,e),r=i.getObservers(e);return r.push(n),function(){r.splice(r.indexOf(n),1)}}var bc=new WeakMap;function vN(t,e){var n=new Map;bc.has(t)||bc.set(t,{isEnabled:!0,getObservers:function(c){var u=n.get(c)||[];return n.has(c)||n.set(c,u),u},installedProperties:new Set});var i=bc.get(t);if(i.installedProperties.has(e))return i;var r=yN(t,e)||{configurable:!0,enumerable:!0,value:t[e],writable:!0},s=bt({},r),o=r.get,a=r.set;if("value"in r){delete s.value,delete s.writable;var l=r.value;o=function(){return l},r.writable&&(a=function(c){l=c})}return o&&(s.get=function(){return o.call(this)}),a&&(s.set=function(c){var u,h,d=o?o.call(this):c;if(a.call(this,c),i.isEnabled&&(!o||c!==d))try{for(var f=Hn(i.getObservers(e)),p=f.next();!p.done;p=f.next()){var g=p.value;g(c,d)}}catch(m){u={error:m}}finally{try{p&&!p.done&&(h=f.return)&&h.call(f)}finally{if(u)throw u.error}}}),i.installedProperties.add(e),Object.defineProperty(t,e,s),i}function yN(t,e){for(var n=t,i;n&&(i=Object.getOwnPropertyDescriptor(n,e),!i);)n=Object.getPrototypeOf(n);return i}function bN(t,e){var n=bc.get(t);n&&(n.isEnabled=e)}/**
 * @license
 * Copyright 2021 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var EN=function(t){wn(e,t);function e(n){var i=t.call(this,n)||this;return i.unobserves=new Set,i}return e.prototype.destroy=function(){t.prototype.destroy.call(this),this.unobserve()},e.prototype.observe=function(n,i){var r,s,o=this,a=[];try{for(var l=Hn(Object.keys(i)),c=l.next();!c.done;c=l.next()){var u=c.value,h=i[u].bind(this);a.push(this.observeProperty(n,u,h))}}catch(f){r={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}var d=function(){var f,p;try{for(var g=Hn(a),m=g.next();!m.done;m=g.next()){var y=m.value;y()}}catch(w){f={error:w}}finally{try{m&&!m.done&&(p=g.return)&&p.call(g)}finally{if(f)throw f.error}}o.unobserves.delete(d)};return this.unobserves.add(d),d},e.prototype.observeProperty=function(n,i,r){return _N(n,i,r)},e.prototype.setObserversEnabled=function(n,i){bN(n,i)},e.prototype.unobserve=function(){var n,i;try{for(var r=Hn(WA([],qA(this.unobserves))),s=r.next();!s.done;s=r.next()){var o=s.value;o()}}catch(a){n={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},e}(Xn);/**
 * @license
 * Copyright 2021 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var IN=function(t){wn(e,t);function e(n){var i=t.call(this,n)||this;return i.handleClick=i.handleClick.bind(i),i}return e.prototype.init=function(){this.observe(this.adapter.state,{disabled:this.stopProcessingIfDisabled,processing:this.stopProcessingIfDisabled})},e.prototype.handleClick=function(){this.adapter.state.disabled||(this.adapter.state.selected=!this.adapter.state.selected)},e.prototype.stopProcessingIfDisabled=function(){this.adapter.state.disabled&&(this.adapter.state.processing=!1)},e}(EN),wN=function(t){wn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(){t.prototype.init.call(this),this.observe(this.adapter.state,{disabled:this.onDisabledChange,processing:this.onProcessingChange,selected:this.onSelectedChange})},e.prototype.initFromDOM=function(){this.setObserversEnabled(this.adapter.state,!1),this.adapter.state.selected=this.adapter.hasClass(Dr.SELECTED),this.onSelectedChange(),this.adapter.state.disabled=this.adapter.isDisabled(),this.adapter.state.processing=this.adapter.hasClass(Dr.PROCESSING),this.setObserversEnabled(this.adapter.state,!0),this.stopProcessingIfDisabled()},e.prototype.onDisabledChange=function(){this.adapter.setDisabled(this.adapter.state.disabled)},e.prototype.onProcessingChange=function(){this.toggleClass(this.adapter.state.processing,Dr.PROCESSING)},e.prototype.onSelectedChange=function(){this.adapter.setAriaChecked(String(this.adapter.state.selected)),this.toggleClass(this.adapter.state.selected,Dr.SELECTED),this.toggleClass(!this.adapter.state.selected,Dr.UNSELECTED)},e.prototype.toggleClass=function(n,i){n?this.adapter.addClass(i):this.adapter.removeClass(i)},e}(IN);function Vy(t){let e,n,i,r,s,o,a,l,c,u,h=[{class:a=ge({[t[7]]:!0,"mdc-switch__icons":!0})},kt(t[18],"icons$")],d={};for(let f=0;f<h.length;f+=1)d=U(d,h[f]);return{c(){e=_e("div"),n=vn("svg"),i=vn("path"),r=Ke(),s=vn("svg"),o=vn("path"),this.h()},l(f){e=ve(f,"DIV",{class:!0});var p=ie(e);n=On(p,"svg",{class:!0,viewBox:!0});var g=ie(n);i=On(g,"path",{d:!0}),ie(i).forEach(N),g.forEach(N),r=Xe(p),s=On(p,"svg",{class:!0,viewBox:!0});var m=ie(s);o=On(m,"path",{d:!0}),ie(o).forEach(N),m.forEach(N),p.forEach(N),this.h()},h(){$(i,"d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"),$(n,"class","mdc-switch__icon mdc-switch__icon--on"),$(n,"viewBox","0 0 24 24"),$(o,"d","M20 13H4v-2h16v2z"),$(s,"class","mdc-switch__icon mdc-switch__icon--off"),$(s,"viewBox","0 0 24 24"),ce(e,d)},m(f,p){Z(f,e,p),me(e,n),me(n,i),me(e,r),me(e,s),me(s,o),c||(u=oe(l=dt.call(null,e,t[6])),c=!0)},p(f,p){ce(e,d=Ae(h,[p[0]&128&&a!==(a=ge({[f[7]]:!0,"mdc-switch__icons":!0}))&&{class:a},p[0]&262144&&kt(f[18],"icons$")])),l&&qe(l.update)&&p[0]&64&&l.update.call(null,f[6])},d(f){f&&N(e),c=!1,u()}}}function TN(t){let e,n,i,r,s,o,a,l,c,u,h,d,f,p,g,m,y=t[5]&&Vy(t),w=[{class:h=ge(at({[t[3]]:!0,"mdc-switch":!0,"mdc-switch--unselected":!t[9],"mdc-switch--selected":t[9],"mdc-switch--processing":t[1],"smui-switch--color-secondary":t[4]==="secondary"},t[11]))},{type:"button"},{role:"switch"},{"aria-checked":d=t[9]?"true":"false"},{disabled:t[0]},t[15],zi(t[18],["icons$"])],b={};for(let v=0;v<w.length;v+=1)b=U(b,w[v]);return{c(){e=_e("button"),n=_e("div"),i=Ke(),r=_e("div"),s=_e("div"),o=_e("div"),a=_e("div"),l=Ke(),c=_e("div"),u=Ke(),y&&y.c(),this.h()},l(v){e=ve(v,"BUTTON",{class:!0,type:!0,role:!0,"aria-checked":!0});var O=ie(e);n=ve(O,"DIV",{class:!0}),ie(n).forEach(N),i=Xe(O),r=ve(O,"DIV",{class:!0});var C=ie(r);s=ve(C,"DIV",{class:!0});var _=ie(s);o=ve(_,"DIV",{class:!0});var I=ie(o);a=ve(I,"DIV",{class:!0}),ie(a).forEach(N),I.forEach(N),l=Xe(_),c=ve(_,"DIV",{class:!0}),ie(c).forEach(N),u=Xe(_),y&&y.l(_),_.forEach(N),C.forEach(N),O.forEach(N),this.h()},h(){$(n,"class","mdc-switch__track"),$(a,"class","mdc-elevation-overlay"),$(o,"class","mdc-switch__shadow"),$(c,"class","mdc-switch__ripple"),$(s,"class","mdc-switch__handle"),$(r,"class","mdc-switch__handle-track"),ce(e,b)},m(v,O){Z(v,e,O),me(e,n),me(e,i),me(e,r),me(r,s),me(s,o),me(o,a),me(s,l),me(s,c),t[27](c),me(s,u),y&&y.m(s,null),e.autofocus&&e.focus(),t[28](e),g||(m=[oe(f=dt.call(null,e,t[2])),oe(t[14].call(null,e)),oe(p=Nr.call(null,e,{unbounded:!0,color:t[4],active:t[13],rippleElement:t[12],disabled:t[0],addClass:t[16],removeClass:t[17]})),Ze(e,"click",t[29])],g=!0)},p(v,O){v[5]?y?y.p(v,O):(y=Vy(v),y.c(),y.m(s,null)):y&&(y.d(1),y=null),ce(e,b=Ae(w,[O[0]&2586&&h!==(h=ge(at({[v[3]]:!0,"mdc-switch":!0,"mdc-switch--unselected":!v[9],"mdc-switch--selected":v[9],"mdc-switch--processing":v[1],"smui-switch--color-secondary":v[4]==="secondary"},v[11])))&&{class:h},{type:"button"},{role:"switch"},O[0]&512&&d!==(d=v[9]?"true":"false")&&{"aria-checked":d},O[0]&1&&{disabled:v[0]},v[15],O[0]&262144&&zi(v[18],["icons$"])])),f&&qe(f.update)&&O[0]&4&&f.update.call(null,v[2]),p&&qe(p.update)&&O[0]&12305&&p.update.call(null,{unbounded:!0,color:v[4],active:v[13],rippleElement:v[12],disabled:v[0],addClass:v[16],removeClass:v[17]})},i:Bt,o:Bt,d(v){v&&N(e),t[27](null),y&&y.d(),t[28](null),g=!1,Ge(m)}}}function CN(t,e,n){const i=["use","class","disabled","color","group","checked","value","processing","icons","icons$use","icons$class","getId","getElement"];let r=ne(e,i);var s;const o=$e(Ue());let a=()=>{};function l(W){return W===a}let{use:c=[]}=e,{class:u=""}=e,{disabled:h=!1}=e,{color:d="primary"}=e,{group:f=a}=e,{checked:p=a}=e,{value:g=null}=e,{processing:m=!1}=e,{icons:y=!0}=e,{icons$use:w=[]}=e,{icons$class:b=""}=e,v,O,C={},_,I=!1,K=(s=cn("SMUI:generic:input:props"))!==null&&s!==void 0?s:{},L=l(f)?l(p)?!1:p:f.indexOf(g)!==-1,k={get disabled(){return h},set disabled(W){n(0,h=W)},get processing(){return m},set processing(W){n(1,m=W)},get selected(){return L},set selected(W){n(9,L=W)}},M=p,E=l(f)?[]:[...f],D=L;Rn(()=>{n(10,O=new wN({addClass:X,hasClass:Y,isDisabled:()=>h,removeClass:A,setAriaChecked:()=>{},setDisabled:Pe=>{n(0,h=Pe)},state:k}));const W={get element(){return R()},get checked(){return L},set checked(Pe){L!==Pe&&(k.selected=Pe,v&&st(v,"SMUISwitch:change",{selected:Pe,value:g}))},activateRipple(){h||n(13,I=!0)},deactivateRipple(){n(13,I=!1)}};return st(v,"SMUIGenericInput:mount",W),O.init(),O.initFromDOM(),()=>{st(v,"SMUIGenericInput:unmount",W),O.destroy()}});function Y(W){return W in C?C[W]:R().classList.contains(W)}function X(W){C[W]||n(11,C[W]=!0,C)}function A(W){(!(W in C)||C[W])&&n(11,C[W]=!1,C)}function S(){return K&&K.id}function R(){return v}function V(W){ue[W?"unshift":"push"](()=>{_=W,n(12,_)})}function Q(W){ue[W?"unshift":"push"](()=>{v=W,n(8,v)})}const he=()=>O&&O.handleClick();return t.$$set=W=>{e=U(U({},e),ze(W)),n(18,r=ne(e,i)),"use"in W&&n(2,c=W.use),"class"in W&&n(3,u=W.class),"disabled"in W&&n(0,h=W.disabled),"color"in W&&n(4,d=W.color),"group"in W&&n(19,f=W.group),"checked"in W&&n(20,p=W.checked),"value"in W&&n(21,g=W.value),"processing"in W&&n(1,m=W.processing),"icons"in W&&n(5,y=W.icons),"icons$use"in W&&n(6,w=W.icons$use),"icons$class"in W&&n(7,b=W.icons$class)},t.$$.update=()=>{if(t.$$.dirty[0]&121111296){let W=!1;if(!l(f))if(D!==L){const Pe=f.indexOf(g);L&&Pe===-1?(f.push(g),n(19,f),n(26,D),n(9,L),n(21,g),n(25,E),n(20,p),n(24,M),n(8,v)):!L&&Pe!==-1&&(f.splice(Pe,1),n(19,f),n(26,D),n(9,L),n(21,g),n(25,E),n(20,p),n(24,M),n(8,v)),W=!0}else{const Pe=E.indexOf(g),be=f.indexOf(g);Pe>-1&&be===-1?k.selected=!1:be>-1&&Pe===-1&&(k.selected=!0)}l(p)?D!==L&&(W=!0):p!==L&&(p===M?(n(20,p=L),W=!0):k.selected=p),n(24,M=p),n(25,E=l(f)?[]:[...f]),n(26,D=L),W&&v&&st(v,"SMUISwitch:change",{selected:L,value:g})}},[h,m,c,u,d,y,w,b,v,L,O,C,_,I,o,K,X,A,r,f,p,g,S,R,M,E,D,V,Q,he]}class CB extends Ye{constructor(e){super();Qe(this,e,CN,TN,We,{use:2,class:3,disabled:0,color:4,group:19,checked:20,value:21,processing:1,icons:5,icons$use:6,icons$class:7,getId:22,getElement:23},null,[-1,-1])}get getId(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Qi,Ci,Ne={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};Qi={},Qi[""+Ne.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",Qi[""+Ne.LIST_ITEM_CLASS]="mdc-list-item",Qi[""+Ne.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",Qi[""+Ne.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",Qi[""+Ne.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",Qi[""+Ne.ROOT]="mdc-list";var Ds=(Ci={},Ci[""+Ne.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",Ci[""+Ne.LIST_ITEM_CLASS]="mdc-deprecated-list-item",Ci[""+Ne.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",Ci[""+Ne.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",Ci[""+Ne.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",Ci[""+Ne.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",Ci[""+Ne.ROOT]="mdc-deprecated-list",Ci),Yi={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+Ne.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+Ne.LIST_ITEM_CLASS+` a,
    .`+Ds[Ne.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+Ds[Ne.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+Ne.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+Ne.LIST_ITEM_CLASS+` a,
    .`+Ne.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+Ne.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+Ds[Ne.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+Ds[Ne.LIST_ITEM_CLASS]+` a,
    .`+Ds[Ne.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+Ds[Ne.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},Gt={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var SN=["input","button","textarea","select"],Fr=function(t){var e=t.target;if(!!e){var n=(""+e.tagName).toLowerCase();SN.indexOf(n)===-1&&t.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function AN(){var t={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return t}function kN(t,e){for(var n=new Map,i=0;i<t;i++){var r=e(i).trim();if(!!r){var s=r[0].toLowerCase();n.has(s)||n.set(s,[]),n.get(s).push({text:r.toLowerCase(),index:i})}}return n.forEach(function(o){o.sort(function(a,l){return a.index-l.index})}),n}function Bd(t,e){var n=t.nextChar,i=t.focusItemAtIndex,r=t.sortedIndexByFirstChar,s=t.focusedItemIndex,o=t.skipFocus,a=t.isItemAtIndexDisabled;clearTimeout(e.bufferClearTimeout),e.bufferClearTimeout=setTimeout(function(){By(e)},Gt.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),e.typeaheadBuffer=e.typeaheadBuffer+n;var l;return e.typeaheadBuffer.length===1?l=ON(r,s,a,e):l=RN(r,a,e),l!==-1&&!o&&i(l),l}function ON(t,e,n,i){var r=i.typeaheadBuffer[0],s=t.get(r);if(!s)return-1;if(r===i.currentFirstChar&&s[i.sortedIndexCursor].index===e){i.sortedIndexCursor=(i.sortedIndexCursor+1)%s.length;var o=s[i.sortedIndexCursor].index;if(!n(o))return o}i.currentFirstChar=r;var a=-1,l;for(l=0;l<s.length;l++)if(!n(s[l].index)){a=l;break}for(;l<s.length;l++)if(s[l].index>e&&!n(s[l].index)){a=l;break}return a!==-1?(i.sortedIndexCursor=a,s[i.sortedIndexCursor].index):-1}function RN(t,e,n){var i=n.typeaheadBuffer[0],r=t.get(i);if(!r)return-1;var s=r[n.sortedIndexCursor];if(s.text.lastIndexOf(n.typeaheadBuffer,0)===0&&!e(s.index))return s.index;for(var o=(n.sortedIndexCursor+1)%r.length,a=-1;o!==n.sortedIndexCursor;){var l=r[o],c=l.text.lastIndexOf(n.typeaheadBuffer,0)===0,u=!e(l.index);if(c&&u){a=o;break}o=(o+1)%r.length}return a!==-1?(n.sortedIndexCursor=a,r[n.sortedIndexCursor].index):-1}function jy(t){return t.typeaheadBuffer.length>0}function By(t){t.typeaheadBuffer=""}function Hy(t,e){var n=t.event,i=t.isTargetListItem,r=t.focusedItemIndex,s=t.focusItemAtIndex,o=t.sortedIndexByFirstChar,a=t.isItemAtIndexDisabled,l=mn(n)==="ArrowLeft",c=mn(n)==="ArrowUp",u=mn(n)==="ArrowRight",h=mn(n)==="ArrowDown",d=mn(n)==="Home",f=mn(n)==="End",p=mn(n)==="Enter",g=mn(n)==="Spacebar";if(n.ctrlKey||n.metaKey||l||c||u||h||d||f||p)return-1;var m=!g&&n.key.length===1;if(m){Fr(n);var y={focusItemAtIndex:s,focusedItemIndex:r,nextChar:n.key.toLowerCase(),sortedIndexByFirstChar:o,skipFocus:!1,isItemAtIndexDisabled:a};return Bd(y,e)}if(!g)return-1;i&&Fr(n);var w=i&&jy(e);if(w){var y={focusItemAtIndex:s,focusedItemIndex:r,nextChar:" ",sortedIndexByFirstChar:o,skipFocus:!1,isItemAtIndexDisabled:a};return Bd(y,e)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function LN(t){return t instanceof Array}var NN=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.wrapFocus=!1,i.isVertical=!0,i.isSingleSelectionList=!1,i.selectedIndex=Gt.UNSET_INDEX,i.focusedItemIndex=Gt.UNSET_INDEX,i.useActivatedClass=!1,i.useSelectedAttr=!1,i.ariaCurrentAttrValue=null,i.isCheckboxList=!1,i.isRadioList=!1,i.hasTypeahead=!1,i.typeaheadState=AN(),i.sortedIndexByFirstChar=new Map,i}return Object.defineProperty(e,"strings",{get:function(){return Yi},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return Ne},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Gt},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),e.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},e.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},e.prototype.setWrapFocus=function(n){this.wrapFocus=n},e.prototype.setVerticalOrientation=function(n){this.isVertical=n},e.prototype.setSingleSelection=function(n){this.isSingleSelectionList=n,n&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},e.prototype.maybeInitializeSingleSelection=function(){var n=this.getSelectedIndexFromDOM();if(n!==Gt.UNSET_INDEX){var i=this.adapter.listItemAtIndexHasClass(n,Ne.LIST_ITEM_ACTIVATED_CLASS);i&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=n}},e.prototype.getSelectedIndexFromDOM=function(){for(var n=Gt.UNSET_INDEX,i=this.adapter.getListItemCount(),r=0;r<i;r++){var s=this.adapter.listItemAtIndexHasClass(r,Ne.LIST_ITEM_SELECTED_CLASS),o=this.adapter.listItemAtIndexHasClass(r,Ne.LIST_ITEM_ACTIVATED_CLASS);if(!!(s||o)){n=r;break}}return n},e.prototype.setHasTypeahead=function(n){this.hasTypeahead=n,n&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},e.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&jy(this.typeaheadState)},e.prototype.setUseActivatedClass=function(n){this.useActivatedClass=n},e.prototype.setUseSelectedAttribute=function(n){this.useSelectedAttr=n},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(n,i){var r=i===void 0?{}:i,s=r.forceUpdate;!this.isIndexValid(n)||(this.isCheckboxList?this.setCheckboxAtIndex(n):this.isRadioList?this.setRadioAtIndex(n):this.setSingleSelectionAtIndex(n,{forceUpdate:s}))},e.prototype.handleFocusIn=function(n){n>=0&&(this.focusedItemIndex=n,this.adapter.setAttributeForElementIndex(n,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(n,"0"))},e.prototype.handleFocusOut=function(n){var i=this;n>=0&&(this.adapter.setAttributeForElementIndex(n,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(n,"-1")),setTimeout(function(){i.adapter.isFocusInsideList()||i.setTabindexToFirstSelectedOrFocusedItem()},0)},e.prototype.handleKeydown=function(n,i,r){var s=this,o=mn(n)==="ArrowLeft",a=mn(n)==="ArrowUp",l=mn(n)==="ArrowRight",c=mn(n)==="ArrowDown",u=mn(n)==="Home",h=mn(n)==="End",d=mn(n)==="Enter",f=mn(n)==="Spacebar",p=n.key==="A"||n.key==="a";if(this.adapter.isRootFocused()){if(a||h?(n.preventDefault(),this.focusLastElement()):(c||u)&&(n.preventDefault(),this.focusFirstElement()),this.hasTypeahead){var g={event:n,focusItemAtIndex:function(w){s.focusItemAtIndex(w)},focusedItemIndex:-1,isTargetListItem:i,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(w){return s.adapter.listItemAtIndexHasClass(w,Ne.LIST_ITEM_DISABLED_CLASS)}};Hy(g,this.typeaheadState)}return}var m=this.adapter.getFocusedElementIndex();if(!(m===-1&&(m=r,m<0))){if(this.isVertical&&c||!this.isVertical&&l)Fr(n),this.focusNextElement(m);else if(this.isVertical&&a||!this.isVertical&&o)Fr(n),this.focusPrevElement(m);else if(u)Fr(n),this.focusFirstElement();else if(h)Fr(n),this.focusLastElement();else if(p&&n.ctrlKey&&this.isCheckboxList)n.preventDefault(),this.toggleAll(this.selectedIndex===Gt.UNSET_INDEX?[]:this.selectedIndex);else if((d||f)&&i){var y=n.target;if(y&&y.tagName==="A"&&d||(Fr(n),this.adapter.listItemAtIndexHasClass(m,Ne.LIST_ITEM_DISABLED_CLASS)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(m),this.adapter.notifyAction(m))}if(this.hasTypeahead){var g={event:n,focusItemAtIndex:function(b){s.focusItemAtIndex(b)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:i,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(b){return s.adapter.listItemAtIndexHasClass(b,Ne.LIST_ITEM_DISABLED_CLASS)}};Hy(g,this.typeaheadState)}}},e.prototype.handleClick=function(n,i){n!==Gt.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(n,Ne.LIST_ITEM_DISABLED_CLASS)||(this.isSelectableList()&&this.setSelectedIndexOnAction(n,i),this.adapter.notifyAction(n)))},e.prototype.focusNextElement=function(n){var i=this.adapter.getListItemCount(),r=n+1;if(r>=i)if(this.wrapFocus)r=0;else return n;return this.focusItemAtIndex(r),r},e.prototype.focusPrevElement=function(n){var i=n-1;if(i<0)if(this.wrapFocus)i=this.adapter.getListItemCount()-1;else return n;return this.focusItemAtIndex(i),i},e.prototype.focusFirstElement=function(){return this.focusItemAtIndex(0),0},e.prototype.focusLastElement=function(){var n=this.adapter.getListItemCount()-1;return this.focusItemAtIndex(n),n},e.prototype.focusInitialElement=function(){var n=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(n),n},e.prototype.setEnabled=function(n,i){!this.isIndexValid(n)||(i?(this.adapter.removeClassForElementIndex(n,Ne.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(n,Yi.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(n,Ne.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(n,Yi.ARIA_DISABLED,"true")))},e.prototype.setSingleSelectionAtIndex=function(n,i){var r=i===void 0?{}:i,s=r.forceUpdate;if(!(this.selectedIndex===n&&!s)){var o=Ne.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(o=Ne.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==Gt.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,o),this.setAriaForSingleSelectionAtIndex(n),this.setTabindexAtIndex(n),n!==Gt.UNSET_INDEX&&this.adapter.addClassForElementIndex(n,o),this.selectedIndex=n}},e.prototype.setAriaForSingleSelectionAtIndex=function(n){this.selectedIndex===Gt.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(n,Yi.ARIA_CURRENT));var i=this.ariaCurrentAttrValue!==null,r=i?Yi.ARIA_CURRENT:Yi.ARIA_SELECTED;if(this.selectedIndex!==Gt.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,r,"false"),n!==Gt.UNSET_INDEX){var s=i?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(n,r,s)}},e.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?Yi.ARIA_SELECTED:Yi.ARIA_CHECKED},e.prototype.setRadioAtIndex=function(n){var i=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(n,!0),this.selectedIndex!==Gt.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,i,"false"),this.adapter.setAttributeForElementIndex(n,i,"true"),this.selectedIndex=n},e.prototype.setCheckboxAtIndex=function(n){for(var i=this.getSelectionAttribute(),r=0;r<this.adapter.getListItemCount();r++){var s=!1;n.indexOf(r)>=0&&(s=!0),this.adapter.setCheckedCheckboxOrRadioAtIndex(r,s),this.adapter.setAttributeForElementIndex(r,i,s?"true":"false")}this.selectedIndex=n},e.prototype.setTabindexAtIndex=function(n){this.focusedItemIndex===Gt.UNSET_INDEX&&n!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==n&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==n&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),n!==Gt.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(n,"tabindex","0")},e.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},e.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var n=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(n)},e.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==Gt.UNSET_INDEX?this.selectedIndex:LN(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(n,i){return Math.min(n,i)}):0:Math.max(this.focusedItemIndex,0)},e.prototype.isIndexValid=function(n){var i=this;if(n instanceof Array){if(!this.isCheckboxList)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return n.length===0?!0:n.some(function(r){return i.isIndexInRange(r)})}else if(typeof n=="number"){if(this.isCheckboxList)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+n);return this.isIndexInRange(n)||this.isSingleSelectionList&&n===Gt.UNSET_INDEX}else return!1},e.prototype.isIndexInRange=function(n){var i=this.adapter.getListItemCount();return n>=0&&n<i},e.prototype.setSelectedIndexOnAction=function(n,i){i===void 0&&(i=!0),this.isCheckboxList?this.toggleCheckboxAtIndex(n,i):this.setSelectedIndex(n)},e.prototype.toggleCheckboxAtIndex=function(n,i){var r=this.getSelectionAttribute(),s=this.adapter.isCheckboxCheckedAtIndex(n);i&&(s=!s,this.adapter.setCheckedCheckboxOrRadioAtIndex(n,s)),this.adapter.setAttributeForElementIndex(n,r,s?"true":"false");var o=this.selectedIndex===Gt.UNSET_INDEX?[]:this.selectedIndex.slice();s?o.push(n):o=o.filter(function(a){return a!==n}),this.selectedIndex=o},e.prototype.focusItemAtIndex=function(n){this.adapter.focusItemAtIndex(n),this.focusedItemIndex=n},e.prototype.toggleAll=function(n){var i=this.adapter.getListItemCount();if(n.length===i)this.setCheckboxAtIndex([]);else{for(var r=[],s=0;s<i;s++)(!this.adapter.listItemAtIndexHasClass(s,Ne.LIST_ITEM_DISABLED_CLASS)||n.indexOf(s)>-1)&&r.push(s);this.setCheckboxAtIndex(r)}},e.prototype.typeaheadMatchItem=function(n,i,r){var s=this;r===void 0&&(r=!1);var o={focusItemAtIndex:function(a){s.focusItemAtIndex(a)},focusedItemIndex:i||this.focusedItemIndex,nextChar:n,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:r,isItemAtIndexDisabled:function(a){return s.adapter.listItemAtIndexHasClass(a,Ne.LIST_ITEM_DISABLED_CLASS)}};return Bd(o,this.typeaheadState)},e.prototype.typeaheadInitSortedIndex=function(){return kN(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},e.prototype.clearTypeaheadBuffer=function(){By(this.typeaheadState)},e}(Xn);function MN(t){let e;const n=t[37].default,i=we(n,t,t[43],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[1]&4096)&&Ce(i,n,r,r[43],e?Te(n,r[43],s,null):Se(r[43]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function PN(t){let e,n,i;const r=[{use:[t[17],...t[0]]},{class:ge({[t[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":t[2],"mdc-deprecated-list--dense":t[3],"mdc-deprecated-list--textual-list":t[4],"mdc-deprecated-list--avatar-list":t[5]||t[18],"mdc-deprecated-list--icon-list":t[6],"mdc-deprecated-list--image-list":t[7],"mdc-deprecated-list--thumbnail-list":t[8],"mdc-deprecated-list--video-list":t[9],"mdc-deprecated-list--two-line":t[10],"smui-list--three-line":t[11]&&!t[10]})},{role:t[15]},t[23]];var s=t[12];function o(a){let l={$$slots:{default:[MN]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=U(l,r[c]);return{props:l}}return s&&(e=new s(o(t)),t[38](e),e.$on("keydown",t[39]),e.$on("focusin",t[40]),e.$on("focusout",t[41]),e.$on("click",t[42]),e.$on("SMUIListItem:mount",t[19]),e.$on("SMUIListItem:unmount",t[20]),e.$on("SMUI:action",t[21])),{c(){e&&Be(e.$$.fragment),n=vt()},l(a){e&&it(e.$$.fragment,a),n=vt()},m(a,l){e&&Ve(e,a,l),Z(a,n,l),i=!0},p(a,l){const c=l[0]&8818687?Ae(r,[l[0]&131073&&{use:[a[17],...a[0]]},l[0]&266238&&{class:ge({[a[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":a[2],"mdc-deprecated-list--dense":a[3],"mdc-deprecated-list--textual-list":a[4],"mdc-deprecated-list--avatar-list":a[5]||a[18],"mdc-deprecated-list--icon-list":a[6],"mdc-deprecated-list--image-list":a[7],"mdc-deprecated-list--thumbnail-list":a[8],"mdc-deprecated-list--video-list":a[9],"mdc-deprecated-list--two-line":a[10],"smui-list--three-line":a[11]&&!a[10]})},l[0]&32768&&{role:a[15]},l[0]&8388608&&ht(a[23])]):{};if(l[1]&4096&&(c.$$scope={dirty:l,ctx:a}),s!==(s=a[12])){if(e){Ft();const u=e;F(u.$$.fragment,1,0,()=>{je(u,1)}),Ut()}s?(e=new s(o(a)),a[38](e),e.$on("keydown",a[39]),e.$on("focusin",a[40]),e.$on("focusout",a[41]),e.$on("click",a[42]),e.$on("SMUIListItem:mount",a[19]),e.$on("SMUIListItem:unmount",a[20]),e.$on("SMUI:action",a[21]),Be(e.$$.fragment),P(e.$$.fragment,1),Ve(e,n.parentNode,n)):e=null}else s&&e.$set(c)},i(a){i||(e&&P(e.$$.fragment,a),i=!0)},o(a){e&&F(e.$$.fragment,a),i=!1},d(a){t[38](null),a&&N(n),e&&je(e,a)}}}function DN(t,e,n){const i=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","selectedIndex","radioList","checkList","hasTypeahead","component","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e;var a;const{closest:l,matches:c}=xd,u=$e(Ue());let{use:h=[]}=e,{class:d=""}=e,{nonInteractive:f=!1}=e,{dense:p=!1}=e,{textualList:g=!1}=e,{avatarList:m=!1}=e,{iconList:y=!1}=e,{imageList:w=!1}=e,{thumbnailList:b=!1}=e,{videoList:v=!1}=e,{twoLine:O=!1}=e,{threeLine:C=!1}=e,{vertical:_=!0}=e,{wrapFocus:I=(a=cn("SMUI:list:wrapFocus"))!==null&&a!==void 0?a:!1}=e,{singleSelection:K=!1}=e,{selectedIndex:L=-1}=e,{radioList:k=!1}=e,{checkList:M=!1}=e,{hasTypeahead:E=!1}=e,D,Y,X=[],A=cn("SMUI:list:role"),S=cn("SMUI:list:nav");const R=new WeakMap;let V=cn("SMUI:dialog:selection"),Q=cn("SMUI:addLayoutListener"),he,{component:W=S?GR:zR}=e;Ht("SMUI:list:nonInteractive",f),Ht("SMUI:separator:context","list"),A||(K?(A="listbox",Ht("SMUI:list:item:role","option")):k?(A="radiogroup",Ht("SMUI:list:item:role","radio")):M?(A="group",Ht("SMUI:list:item:role","checkbox")):(A="list",Ht("SMUI:list:item:role",void 0))),Q&&(he=Q(kn)),Rn(()=>{n(13,Y=new NN({addClassForElementIndex:fe,focusItemAtIndex:gt,getAttributeForElementIndex:(le,se)=>{var _t,cr;return(cr=(_t=Oe()[le])===null||_t===void 0?void 0:_t.getAttr(se))!==null&&cr!==void 0?cr:null},getFocusedElementIndex:()=>document.activeElement?Oe().map(le=>le.element).indexOf(document.activeElement):-1,getListItemCount:()=>X.length,getPrimaryTextAtIndex:pt,hasCheckboxAtIndex:le=>{var se,_t;return(_t=(se=Oe()[le])===null||se===void 0?void 0:se.hasCheckbox)!==null&&_t!==void 0?_t:!1},hasRadioAtIndex:le=>{var se,_t;return(_t=(se=Oe()[le])===null||se===void 0?void 0:se.hasRadio)!==null&&_t!==void 0?_t:!1},isCheckboxCheckedAtIndex:le=>{var se;const _t=Oe()[le];return(se=(_t==null?void 0:_t.hasCheckbox)&&_t.checked)!==null&&se!==void 0?se:!1},isFocusInsideList:()=>D!=null&&zn()!==document.activeElement&&zn().contains(document.activeElement),isRootFocused:()=>D!=null&&document.activeElement===zn(),listItemAtIndexHasClass:G,notifyAction:le=>{n(24,L=le),D!=null&&st(zn(),"SMUIList:action",{index:le},void 0,!0)},removeClassForElementIndex:Pt,setAttributeForElementIndex:Ot,setCheckedCheckboxOrRadioAtIndex:(le,se)=>{Oe()[le].checked=se},setTabIndexForListItemChildren:(le,se)=>{const _t=Oe()[le],cr="button:not(:disabled), a";Array.prototype.forEach.call(_t.element.querySelectorAll(cr),Eu=>{Eu.setAttribute("tabindex",se)})}}));const H={get element(){return zn()},get items(){return X},get typeaheadInProgress(){return Y.isTypeaheadInProgress()},typeaheadMatchItem(le,se){return Y.typeaheadMatchItem(le,se,!0)},getOrderedList:Oe,focusItemAtIndex:gt,addClassForElementIndex:fe,removeClassForElementIndex:Pt,setAttributeForElementIndex:Ot,removeAttributeForElementIndex:q,getAttributeFromElementIndex:pe,getPrimaryTextAtIndex:pt};return st(zn(),"SMUIList:mount",H),Y.init(),()=>{Y.destroy()}}),ur(()=>{he&&he()});function Pe(H){X.push(H.detail),R.set(H.detail.element,H.detail),K&&H.detail.selected&&n(24,L=Kt(H.detail.element)),H.stopPropagation()}function be(H){var le;const se=(le=H.detail&&X.indexOf(H.detail))!==null&&le!==void 0?le:-1;se!==-1&&(X.splice(se,1),X=X,R.delete(H.detail.element)),H.stopPropagation()}function Ie(H){if(k||M){const le=Kt(H.target);if(le!==-1){const se=Oe()[le];se&&(k&&!se.checked||M)&&(se.checked=!se.checked,se.activateRipple(),window.requestAnimationFrame(()=>{se.deactivateRipple()}))}}}function Oe(){return D==null?[]:[...zn().children].map(H=>R.get(H)).filter(H=>H&&H._smui_list_item_accessor)}function gt(H){const le=Oe()[H];le&&"focus"in le.element&&le.element.focus()}function G(H,le){var se;const _t=Oe()[H];return(se=_t&&_t.hasClass(le))!==null&&se!==void 0?se:!1}function fe(H,le){const se=Oe()[H];se&&se.addClass(le)}function Pt(H,le){const se=Oe()[H];se&&se.removeClass(le)}function Ot(H,le,se){const _t=Oe()[H];_t&&_t.addAttr(le,se)}function q(H,le){const se=Oe()[H];se&&se.removeAttr(le)}function pe(H,le){const se=Oe()[H];return se?se.getAttr(le):null}function pt(H){var le;const se=Oe()[H];return(le=se&&se.getPrimaryText())!==null&&le!==void 0?le:""}function Kt(H){const le=l(H,".mdc-deprecated-list-item, .mdc-deprecated-list");return le&&c(le,".mdc-deprecated-list-item")?Oe().map(se=>se==null?void 0:se.element).indexOf(le):-1}function kn(){return Y.layout()}function ii(H,le){return Y.setEnabled(H,le)}function co(){return Y.isTypeaheadInProgress()}function ar(){return Y.getSelectedIndex()}function ns(){return Y.getFocusedItemIndex()}function zn(){return D.getElement()}function j(H){ue[H?"unshift":"push"](()=>{D=H,n(14,D)})}const ot=H=>Y&&Y.handleKeydown(H,H.target.classList.contains("mdc-deprecated-list-item"),Kt(H.target)),Zn=H=>Y&&Y.handleFocusIn(Kt(H.target)),di=H=>Y&&Y.handleFocusOut(Kt(H.target)),lr=H=>Y&&Y.handleClick(Kt(H.target),!c(H.target,'input[type="checkbox"], input[type="radio"]'));return t.$$set=H=>{e=U(U({},e),ze(H)),n(23,r=ne(e,i)),"use"in H&&n(0,h=H.use),"class"in H&&n(1,d=H.class),"nonInteractive"in H&&n(2,f=H.nonInteractive),"dense"in H&&n(3,p=H.dense),"textualList"in H&&n(4,g=H.textualList),"avatarList"in H&&n(5,m=H.avatarList),"iconList"in H&&n(6,y=H.iconList),"imageList"in H&&n(7,w=H.imageList),"thumbnailList"in H&&n(8,b=H.thumbnailList),"videoList"in H&&n(9,v=H.videoList),"twoLine"in H&&n(10,O=H.twoLine),"threeLine"in H&&n(11,C=H.threeLine),"vertical"in H&&n(25,_=H.vertical),"wrapFocus"in H&&n(26,I=H.wrapFocus),"singleSelection"in H&&n(27,K=H.singleSelection),"selectedIndex"in H&&n(24,L=H.selectedIndex),"radioList"in H&&n(28,k=H.radioList),"checkList"in H&&n(29,M=H.checkList),"hasTypeahead"in H&&n(30,E=H.hasTypeahead),"component"in H&&n(12,W=H.component),"$$scope"in H&&n(43,o=H.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&33562624&&Y&&Y.setVerticalOrientation(_),t.$$.dirty[0]&67117056&&Y&&Y.setWrapFocus(I),t.$$.dirty[0]&1073750016&&Y&&Y.setHasTypeahead(E),t.$$.dirty[0]&134225920&&Y&&Y.setSingleSelection(K),t.$$.dirty[0]&151003136&&Y&&K&&ar()!==L&&Y.setSelectedIndex(L)},[h,d,f,p,g,m,y,w,b,v,O,C,W,Y,D,A,c,u,V,Pe,be,Ie,Kt,r,L,_,I,K,k,M,E,kn,ii,co,ar,ns,zn,s,j,ot,Zn,di,lr,o]}class FN extends Ye{constructor(e){super();Qe(this,e,DN,PN,We,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:25,wrapFocus:26,singleSelection:27,selectedIndex:24,radioList:28,checkList:29,hasTypeahead:30,component:12,layout:31,setEnabled:32,getTypeaheadInProgress:33,getSelectedIndex:34,getFocusedItemIndex:35,getElement:36},null,[-1,-1])}get layout(){return this.$$.ctx[31]}get setEnabled(){return this.$$.ctx[32]}get getTypeaheadInProgress(){return this.$$.ctx[33]}get getSelectedIndex(){return this.$$.ctx[34]}get getFocusedItemIndex(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}function qy(t){let e;return{c(){e=_e("span"),this.h()},l(n){e=ve(n,"SPAN",{class:!0}),ie(e).forEach(N),this.h()},h(){$(e,"class","mdc-deprecated-list-item__ripple")},m(n,i){Z(n,e,i)},d(n){n&&N(e)}}}function UN(t){let e,n,i=t[7]&&qy();const r=t[32].default,s=we(r,t,t[35],null);return{c(){i&&i.c(),e=vt(),s&&s.c()},l(o){i&&i.l(o),e=vt(),s&&s.l(o)},m(o,a){i&&i.m(o,a),Z(o,e,a),s&&s.m(o,a),n=!0},p(o,a){o[7]?i||(i=qy(),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),s&&s.p&&(!n||a[1]&16)&&Ce(s,r,o,o[35],n?Te(r,o[35],a,null):Se(o[35]),null)},i(o){n||(P(s,o),n=!0)},o(o){F(s,o),n=!1},d(o){i&&i.d(o),o&&N(e),s&&s.d(o)}}}function xN(t){let e,n,i;const r=[{use:[...t[6]?[]:[[Nr,{ripple:!t[14],unbounded:!1,color:(t[1]||t[0])&&t[5]==null?"primary":t[5],disabled:t[9],addClass:t[22],removeClass:t[23],addStyle:t[24]}]],t[20],...t[2]]},{class:ge(at({[t[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":t[1],"mdc-deprecated-list-item--selected":t[0],"mdc-deprecated-list-item--disabled":t[9],"mdc-menu-item--selected":!t[21]&&t[8]==="menuitem"&&t[0],"smui-menu-item--non-interactive":t[6]},t[16]))},{style:Object.entries(t[17]).map(Wy).concat([t[4]]).join(" ")},t[21]&&t[1]?{"aria-current":"page"}:{},t[21]?{}:{role:t[8]},!t[21]&&t[8]==="option"?{"aria-selected":t[0]?"true":"false"}:{},!t[21]&&(t[8]==="radio"||t[8]==="checkbox")?{"aria-checked":t[14]&&t[14].checked?"true":"false"}:{},t[21]?{}:{"aria-disabled":t[9]?"true":"false"},{"data-menu-item-skip-restore-focus":t[10]||void 0},{tabindex:t[19]},{href:t[11]},t[18],t[27]];var s=t[12];function o(a){let l={$$slots:{default:[UN]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=U(l,r[c]);return{props:l}}return s&&(e=new s(o(t)),t[33](e),e.$on("click",t[13]),e.$on("keydown",t[25]),e.$on("SMUIGenericInput:mount",t[26]),e.$on("SMUIGenericInput:unmount",t[34])),{c(){e&&Be(e.$$.fragment),n=vt()},l(a){e&&it(e.$$.fragment,a),n=vt()},m(a,l){e&&Ve(e,a,l),Z(a,n,l),i=!0},p(a,l){const c=l[0]&167726975?Ae(r,[l[0]&30425703&&{use:[...a[6]?[]:[[Nr,{ripple:!a[14],unbounded:!1,color:(a[1]||a[0])&&a[5]==null?"primary":a[5],disabled:a[9],addClass:a[22],removeClass:a[23],addStyle:a[24]}]],a[20],...a[2]]},l[0]&2163531&&{class:ge(at({[a[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":a[1],"mdc-deprecated-list-item--selected":a[0],"mdc-deprecated-list-item--disabled":a[9],"mdc-menu-item--selected":!a[21]&&a[8]==="menuitem"&&a[0],"smui-menu-item--non-interactive":a[6]},a[16]))},l[0]&131088&&{style:Object.entries(a[17]).map(Wy).concat([a[4]]).join(" ")},l[0]&2097154&&ht(a[21]&&a[1]?{"aria-current":"page"}:{}),l[0]&2097408&&ht(a[21]?{}:{role:a[8]}),l[0]&2097409&&ht(!a[21]&&a[8]==="option"?{"aria-selected":a[0]?"true":"false"}:{}),l[0]&2113792&&ht(!a[21]&&(a[8]==="radio"||a[8]==="checkbox")?{"aria-checked":a[14]&&a[14].checked?"true":"false"}:{}),l[0]&2097664&&ht(a[21]?{}:{"aria-disabled":a[9]?"true":"false"}),l[0]&1024&&{"data-menu-item-skip-restore-focus":a[10]||void 0},l[0]&524288&&{tabindex:a[19]},l[0]&2048&&{href:a[11]},l[0]&262144&&ht(a[18]),l[0]&134217728&&ht(a[27])]):{};if(l[0]&128|l[1]&16&&(c.$$scope={dirty:l,ctx:a}),s!==(s=a[12])){if(e){Ft();const u=e;F(u.$$.fragment,1,0,()=>{je(u,1)}),Ut()}s?(e=new s(o(a)),a[33](e),e.$on("click",a[13]),e.$on("keydown",a[25]),e.$on("SMUIGenericInput:mount",a[26]),e.$on("SMUIGenericInput:unmount",a[34]),Be(e.$$.fragment),P(e.$$.fragment,1),Ve(e,n.parentNode,n)):e=null}else s&&e.$set(c)},i(a){i||(e&&P(e.$$.fragment,a),i=!0)},o(a){e&&F(e.$$.fragment,a),i=!1},d(a){t[33](null),a&&N(n),e&&je(e,a)}}}let VN=0;const Wy=([t,e])=>`${t}: ${e};`;function jN(t,e,n){let i;const r=["use","class","style","color","nonInteractive","ripple","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","action","getPrimaryText","getElement"];let s=ne(e,r),{$$slots:o={},$$scope:a}=e;var l;const c=$e(Ue());let u=()=>{};function h(q){return q===u}let{use:d=[]}=e,{class:f=""}=e,{style:p=""}=e,{color:g=void 0}=e,{nonInteractive:m=(l=cn("SMUI:list:nonInteractive"))!==null&&l!==void 0?l:!1}=e;Ht("SMUI:list:nonInteractive",void 0);let{ripple:y=!m}=e,{activated:w=!1}=e,{role:b=cn("SMUI:list:item:role")}=e;Ht("SMUI:list:item:role",void 0);let{selected:v=!1}=e,{disabled:O=!1}=e,{skipRestoreFocus:C=!1}=e,{tabindex:_=u}=e,{inputId:I="SMUI-form-field-list-"+VN++}=e,{href:K=void 0}=e,L,k={},M={},E={},D,Y,X=cn("SMUI:list:item:nav"),{component:A=X?K?ty:Mr:WR}=e;Ht("SMUI:generic:input:props",{id:I}),Ht("SMUI:separator:context",void 0),Rn(()=>{if(!v&&!m){let pe=!0,pt=L;for(;pt.previousSibling;)if(pt=pt.previousSibling,pt.nodeType===1&&pt.classList.contains("mdc-deprecated-list-item")&&!pt.classList.contains("mdc-deprecated-list-item--disabled")){pe=!1;break}pe&&(Y=window.requestAnimationFrame(be))}const q={_smui_list_item_accessor:!0,get element(){return fe()},get selected(){return v},set selected(pe){n(0,v=pe)},hasClass:S,addClass:R,removeClass:V,getAttr:he,addAttr:W,removeAttr:Pe,getPrimaryText:G,get checked(){var pe;return(pe=D&&D.checked)!==null&&pe!==void 0?pe:!1},set checked(pe){D&&n(14,D.checked=!!pe,D)},get hasCheckbox(){return!!(D&&"_smui_checkbox_accessor"in D)},get hasRadio(){return!!(D&&"_smui_radio_accessor"in D)},activateRipple(){D&&D.activateRipple()},deactivateRipple(){D&&D.deactivateRipple()},getValue(){return s.value},action:gt,get tabindex(){return i},set tabindex(pe){n(28,_=pe)},get disabled(){return O},get activated(){return w},set activated(pe){n(1,w=pe)}};return st(fe(),"SMUIListItem:mount",q),()=>{st(fe(),"SMUIListItem:unmount",q)}}),ur(()=>{Y&&window.cancelAnimationFrame(Y)});function S(q){return q in k?k[q]:fe().classList.contains(q)}function R(q){k[q]||n(16,k[q]=!0,k)}function V(q){(!(q in k)||k[q])&&n(16,k[q]=!1,k)}function Q(q,pe){M[q]!=pe&&(pe===""||pe==null?(delete M[q],n(17,M)):n(17,M[q]=pe,M))}function he(q){var pe;return q in E?(pe=E[q])!==null&&pe!==void 0?pe:null:fe().getAttribute(q)}function W(q,pe){E[q]!==pe&&n(18,E[q]=pe,E)}function Pe(q){(!(q in E)||E[q]!=null)&&n(18,E[q]=void 0,E)}function be(){let q=!0,pe=L.getElement();for(;pe.nextElementSibling;)if(pe=pe.nextElementSibling,pe.nodeType===1&&pe.classList.contains("mdc-deprecated-list-item")){const pt=pe.attributes.getNamedItem("tabindex");if(pt&&pt.value==="0"){q=!1;break}}q&&n(19,i=0)}function Ie(q){const pe=q.key==="Enter",pt=q.key==="Space";(pe||pt)&&gt(q)}function Oe(q){("_smui_checkbox_accessor"in q.detail||"_smui_radio_accessor"in q.detail)&&n(14,D=q.detail)}function gt(q){O||st(fe(),"SMUI:action",q)}function G(){var q,pe,pt;const Kt=fe(),kn=Kt.querySelector(".mdc-deprecated-list-item__primary-text");if(kn)return(q=kn.textContent)!==null&&q!==void 0?q:"";const ii=Kt.querySelector(".mdc-deprecated-list-item__text");return ii?(pe=ii.textContent)!==null&&pe!==void 0?pe:"":(pt=Kt.textContent)!==null&&pt!==void 0?pt:""}function fe(){return L.getElement()}function Pt(q){ue[q?"unshift":"push"](()=>{L=q,n(15,L)})}const Ot=()=>n(14,D=void 0);return t.$$set=q=>{e=U(U({},e),ze(q)),n(27,s=ne(e,r)),"use"in q&&n(2,d=q.use),"class"in q&&n(3,f=q.class),"style"in q&&n(4,p=q.style),"color"in q&&n(5,g=q.color),"nonInteractive"in q&&n(6,m=q.nonInteractive),"ripple"in q&&n(7,y=q.ripple),"activated"in q&&n(1,w=q.activated),"role"in q&&n(8,b=q.role),"selected"in q&&n(0,v=q.selected),"disabled"in q&&n(9,O=q.disabled),"skipRestoreFocus"in q&&n(10,C=q.skipRestoreFocus),"tabindex"in q&&n(28,_=q.tabindex),"inputId"in q&&n(29,I=q.inputId),"href"in q&&n(11,K=q.href),"component"in q&&n(12,A=q.component),"$$scope"in q&&n(35,a=q.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&268452417&&n(19,i=h(_)?!m&&!O&&(v||D&&D.checked)?0:-1:_)},[v,w,d,f,p,g,m,y,b,O,C,K,A,gt,D,L,k,M,E,i,c,X,R,V,Q,Ie,Oe,s,_,I,G,fe,o,Pt,Ot,a]}class BN extends Ye{constructor(e){super();Qe(this,e,jN,xN,We,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,activated:1,role:8,selected:0,disabled:9,skipRestoreFocus:10,tabindex:28,inputId:29,href:11,component:12,action:13,getPrimaryText:30,getElement:31},null,[-1,-1])}get action(){return this.$$.ctx[13]}get getPrimaryText(){return this.$$.ctx[30]}get getElement(){return this.$$.ctx[31]}}var Ec=Wt({class:"mdc-deprecated-list-item__text",component:Mr});Wt({class:"mdc-deprecated-list-item__primary-text",component:Mr});Wt({class:"mdc-deprecated-list-item__secondary-text",component:Mr});function HN(t){let e,n,i,r,s,o;const a=t[8].default,l=we(a,t,t[7],null);let c=[{class:n=ge({[t[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":t[4]})},t[5]],u={};for(let h=0;h<c.length;h+=1)u=U(u,c[h]);return{c(){e=_e("span"),l&&l.c(),this.h()},l(h){e=ve(h,"SPAN",{class:!0});var d=ie(e);l&&l.l(d),d.forEach(N),this.h()},h(){ce(e,u)},m(h,d){Z(h,e,d),l&&l.m(e,null),t[9](e),r=!0,s||(o=[oe(i=dt.call(null,e,t[0])),oe(t[3].call(null,e))],s=!0)},p(h,[d]){l&&l.p&&(!r||d&128)&&Ce(l,a,h,h[7],r?Te(a,h[7],d,null):Se(h[7]),null),ce(e,u=Ae(c,[(!r||d&2&&n!==(n=ge({[h[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":h[4]})))&&{class:n},d&32&&h[5]])),i&&qe(i.update)&&d&1&&i.update.call(null,h[0])},i(h){r||(P(l,h),r=!0)},o(h){F(l,h),r=!1},d(h){h&&N(e),l&&l.d(h),t[9](null),s=!1,Ge(o)}}}function qN(t,e,n){const i=["use","class","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e;const a=$e(Ue());let{use:l=[]}=e,{class:c=""}=e,u,h=cn("SMUI:list:graphic:menu-selection-group");function d(){return u}function f(p){ue[p?"unshift":"push"](()=>{u=p,n(2,u)})}return t.$$set=p=>{e=U(U({},e),ze(p)),n(5,r=ne(e,i)),"use"in p&&n(0,l=p.use),"class"in p&&n(1,c=p.class),"$$scope"in p&&n(7,o=p.$$scope)},[l,c,u,a,h,r,d,o,s,f]}class WN extends Ye{constructor(e){super();Qe(this,e,qN,HN,We,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}Wt({class:"mdc-deprecated-list-item__meta",component:Mr});Wt({class:"mdc-deprecated-list-group",component:wi});Wt({class:"mdc-deprecated-list-group__subheader",component:qR});const Ic=BN,GN=WN;/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var zN={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},KN={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},la={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30},Rt;(function(t){t[t.BOTTOM=1]="BOTTOM",t[t.CENTER=2]="CENTER",t[t.RIGHT=4]="RIGHT",t[t.FLIP_RTL=8]="FLIP_RTL"})(Rt||(Rt={}));var Fs;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=4]="TOP_RIGHT",t[t.BOTTOM_LEFT=1]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",t[t.TOP_START=8]="TOP_START",t[t.TOP_END=12]="TOP_END",t[t.BOTTOM_START=9]="BOTTOM_START",t[t.BOTTOM_END=13]="BOTTOM_END"})(Fs||(Fs={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Gy=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.isSurfaceOpen=!1,i.isQuickOpen=!1,i.isHoistedElement=!1,i.isFixedPosition=!1,i.isHorizontallyCenteredOnViewport=!1,i.maxHeight=0,i.openAnimationEndTimerId=0,i.closeAnimationEndTimerId=0,i.animationRequestId=0,i.anchorCorner=Fs.TOP_START,i.originCorner=Fs.TOP_START,i.anchorMargin={top:0,right:0,bottom:0,left:0},i.position={x:0,y:0},i}return Object.defineProperty(e,"cssClasses",{get:function(){return zN},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return KN},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return la},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Corner",{get:function(){return Fs},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=e.cssClasses,i=n.ROOT,r=n.OPEN;if(!this.adapter.hasClass(i))throw new Error(i+" class required in root element.");this.adapter.hasClass(r)&&(this.isSurfaceOpen=!0)},e.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},e.prototype.setAnchorCorner=function(n){this.anchorCorner=n},e.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^Rt.RIGHT},e.prototype.setAnchorMargin=function(n){this.anchorMargin.top=n.top||0,this.anchorMargin.right=n.right||0,this.anchorMargin.bottom=n.bottom||0,this.anchorMargin.left=n.left||0},e.prototype.setIsHoisted=function(n){this.isHoistedElement=n},e.prototype.setFixedPosition=function(n){this.isFixedPosition=n},e.prototype.isFixed=function(){return this.isFixedPosition},e.prototype.setAbsolutePosition=function(n,i){this.position.x=this.isFinite(n)?n:0,this.position.y=this.isFinite(i)?i:0},e.prototype.setIsHorizontallyCenteredOnViewport=function(n){this.isHorizontallyCenteredOnViewport=n},e.prototype.setQuickOpen=function(n){this.isQuickOpen=n},e.prototype.setMaxHeight=function(n){this.maxHeight=n},e.prototype.isOpen=function(){return this.isSurfaceOpen},e.prototype.open=function(){var n=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(e.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(e.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){n.dimensions=n.adapter.getInnerDimensions(),n.autoposition(),n.adapter.addClass(e.cssClasses.OPEN),n.openAnimationEndTimerId=setTimeout(function(){n.openAnimationEndTimerId=0,n.adapter.removeClass(e.cssClasses.ANIMATING_OPEN),n.adapter.notifyOpen()},la.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},e.prototype.close=function(n){var i=this;if(n===void 0&&(n=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,n||this.maybeRestoreFocus(),this.adapter.removeClass(e.cssClasses.OPEN),this.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(e.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){i.adapter.removeClass(e.cssClasses.OPEN),i.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),i.closeAnimationEndTimerId=setTimeout(function(){i.closeAnimationEndTimerId=0,i.adapter.removeClass(e.cssClasses.ANIMATING_CLOSED),i.adapter.notifyClose()},la.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,n||this.maybeRestoreFocus()}},e.prototype.handleBodyClick=function(n){var i=n.target;this.adapter.isElementInContainer(i)||this.close()},e.prototype.handleKeydown=function(n){var i=n.keyCode,r=n.key,s=r==="Escape"||i===27;s&&this.close()},e.prototype.autoposition=function(){var n;this.measurements=this.getAutoLayoutmeasurements();var i=this.getoriginCorner(),r=this.getMenuSurfaceMaxHeight(i),s=this.hasBit(i,Rt.BOTTOM)?"bottom":"top",o=this.hasBit(i,Rt.RIGHT)?"right":"left",a=this.getHorizontalOriginOffset(i),l=this.getVerticalOriginOffset(i),c=this.measurements,u=c.anchorSize,h=c.surfaceSize,d=(n={},n[o]=a,n[s]=l,n);u.width/h.width>la.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(o="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(d),this.adapter.setTransformOrigin(o+" "+s),this.adapter.setPosition(d),this.adapter.setMaxHeight(r?r+"px":""),this.hasBit(i,Rt.BOTTOM)||this.adapter.addClass(e.cssClasses.IS_OPEN_BELOW)},e.prototype.getAutoLayoutmeasurements=function(){var n=this.adapter.getAnchorDimensions(),i=this.adapter.getBodyDimensions(),r=this.adapter.getWindowDimensions(),s=this.adapter.getWindowScroll();return n||(n={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:n,bodySize:i,surfaceSize:this.dimensions,viewportDistance:{top:n.top,right:r.width-n.right,bottom:r.height-n.bottom,left:n.left},viewportSize:r,windowScroll:s}},e.prototype.getoriginCorner=function(){var n=this.originCorner,i=this.measurements,r=i.viewportDistance,s=i.anchorSize,o=i.surfaceSize,a=e.numbers.MARGIN_TO_EDGE,l=this.hasBit(this.anchorCorner,Rt.BOTTOM),c,u;l?(c=r.top-a+this.anchorMargin.bottom,u=r.bottom-a-this.anchorMargin.bottom):(c=r.top-a+this.anchorMargin.top,u=r.bottom-a+s.height-this.anchorMargin.top);var h=u-o.height>0;!h&&c>u&&(n=this.setBit(n,Rt.BOTTOM));var d=this.adapter.isRtl(),f=this.hasBit(this.anchorCorner,Rt.FLIP_RTL),p=this.hasBit(this.anchorCorner,Rt.RIGHT)||this.hasBit(n,Rt.RIGHT),g=!1;d&&f?g=!p:g=p;var m,y;g?(m=r.left+s.width+this.anchorMargin.right,y=r.right-this.anchorMargin.right):(m=r.left+this.anchorMargin.left,y=r.right+s.width-this.anchorMargin.left);var w=m-o.width>0,b=y-o.width>0,v=this.hasBit(n,Rt.FLIP_RTL)&&this.hasBit(n,Rt.RIGHT);return b&&v&&d||!w&&v?n=this.unsetBit(n,Rt.RIGHT):(w&&g&&d||w&&!g&&p||!b&&m>=y)&&(n=this.setBit(n,Rt.RIGHT)),n},e.prototype.getMenuSurfaceMaxHeight=function(n){if(this.maxHeight>0)return this.maxHeight;var i=this.measurements.viewportDistance,r=0,s=this.hasBit(n,Rt.BOTTOM),o=this.hasBit(this.anchorCorner,Rt.BOTTOM),a=e.numbers.MARGIN_TO_EDGE;return s?(r=i.top+this.anchorMargin.top-a,o||(r+=this.measurements.anchorSize.height)):(r=i.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-a,o&&(r-=this.measurements.anchorSize.height)),r},e.prototype.getHorizontalOriginOffset=function(n){var i=this.measurements.anchorSize,r=this.hasBit(n,Rt.RIGHT),s=this.hasBit(this.anchorCorner,Rt.RIGHT);if(r){var o=s?i.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?o-(this.measurements.viewportSize.width-this.measurements.bodySize.width):o}return s?i.width-this.anchorMargin.right:this.anchorMargin.left},e.prototype.getVerticalOriginOffset=function(n){var i=this.measurements.anchorSize,r=this.hasBit(n,Rt.BOTTOM),s=this.hasBit(this.anchorCorner,Rt.BOTTOM),o=0;return r?o=s?i.height-this.anchorMargin.top:-this.anchorMargin.bottom:o=s?i.height+this.anchorMargin.bottom:this.anchorMargin.top,o},e.prototype.adjustPositionForHoistedElement=function(n){var i,r,s=this.measurements,o=s.windowScroll,a=s.viewportDistance,l=s.surfaceSize,c=s.viewportSize,u=Object.keys(n);try{for(var h=Hn(u),d=h.next();!d.done;d=h.next()){var f=d.value,p=n[f]||0;if(this.isHorizontallyCenteredOnViewport&&(f==="left"||f==="right")){n[f]=(c.width-l.width)/2;continue}p+=a[f],this.isFixedPosition||(f==="top"?p+=o.y:f==="bottom"?p-=o.y:f==="left"?p+=o.x:p-=o.x),n[f]=p}}catch(g){i={error:g}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}},e.prototype.maybeRestoreFocus=function(){var n=this,i=this.adapter.isFocused(),r=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(i||r)&&setTimeout(function(){n.adapter.restoreFocus()},la.TOUCH_EVENT_WAIT_MS)},e.prototype.hasBit=function(n,i){return Boolean(n&i)},e.prototype.setBit=function(n,i){return n|i},e.prototype.unsetBit=function(n,i){return n^i},e.prototype.isFinite=function(n){return typeof n=="number"&&isFinite(n)},e}(Xn);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Us={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},xs={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},XN={FOCUS_ROOT_INDEX:-1},Vs;(function(t){t[t.NONE=0]="NONE",t[t.LIST_ROOT=1]="LIST_ROOT",t[t.FIRST_ITEM=2]="FIRST_ITEM",t[t.LAST_ITEM=3]="LAST_ITEM"})(Vs||(Vs={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var QN=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.closeAnimationEndTimerId=0,i.defaultFocusState=Vs.LIST_ROOT,i.selectedIndex=-1,i}return Object.defineProperty(e,"cssClasses",{get:function(){return Us},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return xs},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return XN},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},e.prototype.handleKeydown=function(n){var i=n.key,r=n.keyCode,s=i==="Tab"||r===9;s&&this.adapter.closeSurface(!0)},e.prototype.handleItemAction=function(n){var i=this,r=this.adapter.getElementIndex(n);if(!(r<0)){this.adapter.notifySelected({index:r});var s=this.adapter.getAttributeFromElementAtIndex(r,xs.SKIP_RESTORE_FOCUS)==="true";this.adapter.closeSurface(s),this.closeAnimationEndTimerId=setTimeout(function(){var o=i.adapter.getElementIndex(n);o>=0&&i.adapter.isSelectableItemAtIndex(o)&&i.setSelectedIndex(o)},Gy.numbers.TRANSITION_CLOSE_DURATION)}},e.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case Vs.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case Vs.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case Vs.NONE:break;default:this.adapter.focusListRoot();break}},e.prototype.setDefaultFocusState=function(n){this.defaultFocusState=n},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(n){if(this.validatedIndex(n),!this.adapter.isSelectableItemAtIndex(n))throw new Error("MDCMenuFoundation: No selection group at specified index.");var i=this.adapter.getSelectedSiblingOfItemAtIndex(n);i>=0&&(this.adapter.removeAttributeFromElementAtIndex(i,xs.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(i,Us.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(n,Us.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(n,xs.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=n},e.prototype.setEnabled=function(n,i){this.validatedIndex(n),i?(this.adapter.removeClassFromElementAtIndex(n,Ne.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(n,xs.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(n,Ne.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(n,xs.ARIA_DISABLED_ATTR,"true"))},e.prototype.validatedIndex=function(n){var i=this.adapter.getMenuItemCount(),r=n>=0&&n<i;if(!r)throw new Error("MDCMenuFoundation: No list item at specified index.")},e}(Xn);const{document:YN}=Kw;function JN(t){let e,n,i,r,s,o,a,l;const c=t[31].default,u=we(c,t,t[30],null);let h=[{class:i=ge(at({[t[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":t[5],"mdc-menu-surface--open":t[4],"smui-menu-surface--static":t[4],"mdc-menu-surface--fullwidth":t[7]},t[10]))},{style:r=Object.entries(t[11]).map(zy).concat([t[3]]).join(" ")},t[13]],d={};for(let f=0;f<h.length;f+=1)d=U(d,h[f]);return{c(){e=Ke(),n=_e("div"),u&&u.c(),this.h()},l(f){e=Xe(f),n=ve(f,"DIV",{class:!0,style:!0});var p=ie(n);u&&u.l(p),p.forEach(N),this.h()},h(){ce(n,d)},m(f,p){Z(f,e,p),Z(f,n,p),u&&u.m(n,null),t[33](n),o=!0,a||(l=[Ze(YN.body,"click",t[32],!0),oe(s=dt.call(null,n,t[1])),oe(t[12].call(null,n)),Ze(n,"keydown",t[34])],a=!0)},p(f,p){u&&u.p&&(!o||p[0]&1073741824)&&Ce(u,c,f,f[30],o?Te(c,f[30],p,null):Se(f[30]),null),ce(n,d=Ae(h,[(!o||p[0]&1204&&i!==(i=ge(at({[f[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":f[5],"mdc-menu-surface--open":f[4],"smui-menu-surface--static":f[4],"mdc-menu-surface--fullwidth":f[7]},f[10]))))&&{class:i},(!o||p[0]&2056&&r!==(r=Object.entries(f[11]).map(zy).concat([f[3]]).join(" ")))&&{style:r},p[0]&8192&&f[13]])),s&&qe(s.update)&&p[0]&2&&s.update.call(null,f[1])},i(f){o||(P(u,f),o=!0)},o(f){F(u,f),o=!1},d(f){f&&N(e),f&&N(n),u&&u.d(f),t[33](null),a=!1,Ge(l)}}}const zy=([t,e])=>`${t}: ${e};`;function ZN(t,e,n){const i=["use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","isOpen","setOpen","setAbsolutePosition","setIsHoisted","isFixed","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e;var a,l,c;const u=$e(Ue());let{use:h=[]}=e,{class:d=""}=e,{style:f=""}=e,{static:p=!1}=e,{anchor:g=!0}=e,{fixed:m=!1}=e,{open:y=p}=e,{managed:w=!1}=e,{fullWidth:b=!1}=e,{quickOpen:v=!1}=e,{anchorElement:O=void 0}=e,{anchorCorner:C=void 0}=e,{anchorMargin:_={top:0,right:0,bottom:0,left:0}}=e,{maxHeight:I=0}=e,{horizontallyCenteredOnViewport:K=!1}=e,L,k,M={},E={},D;Ht("SMUI:list:role","menu"),Ht("SMUI:list:item:role","menuitem");const Y=Fs;Rn(()=>(n(9,k=new Gy({addClass:A,removeClass:S,hasClass:X,hasAnchor:()=>!!O,notifyClose:()=>{w||n(0,y=p),y||st(L,"SMUIMenuSurface:closed",void 0,void 0,!0)},notifyClosing:()=>{w||n(0,y=p),y||st(L,"SMUIMenuSurface:closing",void 0,void 0,!0)},notifyOpen:()=>{w||n(0,y=!0),y&&st(L,"SMUIMenuSurface:opened",void 0,void 0,!0)},isElementInContainer:fe=>L.contains(fe),isRtl:()=>getComputedStyle(L).getPropertyValue("direction")==="rtl",setTransformOrigin:fe=>{n(11,E["transform-origin"]=fe,E)},isFocused:()=>document.activeElement===L,saveFocus:()=>{var fe;D=(fe=document.activeElement)!==null&&fe!==void 0?fe:void 0},restoreFocus:()=>{(!L||L.contains(document.activeElement))&&D&&document.contains(D)&&"focus"in D&&D.focus()},getInnerDimensions:()=>({width:L.offsetWidth,height:L.offsetHeight}),getAnchorDimensions:()=>O?O.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:fe=>{n(11,E.left="left"in fe?`${fe.left}px`:"",E),n(11,E.right="right"in fe?`${fe.right}px`:"",E),n(11,E.top="top"in fe?`${fe.top}px`:"",E),n(11,E.bottom="bottom"in fe?`${fe.bottom}px`:"",E)},setMaxHeight:fe=>{n(11,E.maxHeight=fe,E)}})),st(L,"SMUIMenuSurface:mount",{get open(){return y},set open(fe){n(0,y=fe)},closeProgrammatic:R}),k.init(),()=>{var fe;const Pt=k.isHoistedElement;k.destroy(),Pt&&((fe=L.parentNode)===null||fe===void 0||fe.removeChild(L))})),ur(()=>{var G;g&&L&&((G=L.parentElement)===null||G===void 0||G.classList.remove("mdc-menu-surface--anchor"))});function X(G){return G in M?M[G]:be().classList.contains(G)}function A(G){M[G]||n(10,M[G]=!0,M)}function S(G){(!(G in M)||M[G])&&n(10,M[G]=!1,M)}function R(G){k.close(G),n(0,y=!1)}function V(){return y}function Q(G){n(0,y=G)}function he(G,fe){return k.setAbsolutePosition(G,fe)}function W(G){return k.setIsHoisted(G)}function Pe(){return k.isFixed()}function be(){return L}const Ie=G=>k&&y&&!w&&k.handleBodyClick(G);function Oe(G){ue[G?"unshift":"push"](()=>{L=G,n(8,L)})}const gt=G=>k&&k.handleKeydown(G);return t.$$set=G=>{e=U(U({},e),ze(G)),n(13,r=ne(e,i)),"use"in G&&n(1,h=G.use),"class"in G&&n(2,d=G.class),"style"in G&&n(3,f=G.style),"static"in G&&n(4,p=G.static),"anchor"in G&&n(15,g=G.anchor),"fixed"in G&&n(5,m=G.fixed),"open"in G&&n(0,y=G.open),"managed"in G&&n(6,w=G.managed),"fullWidth"in G&&n(7,b=G.fullWidth),"quickOpen"in G&&n(16,v=G.quickOpen),"anchorElement"in G&&n(14,O=G.anchorElement),"anchorCorner"in G&&n(17,C=G.anchorCorner),"anchorMargin"in G&&n(18,_=G.anchorMargin),"maxHeight"in G&&n(19,I=G.maxHeight),"horizontallyCenteredOnViewport"in G&&n(20,K=G.horizontallyCenteredOnViewport),"$$scope"in G&&n(30,o=G.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&939557120&&L&&g&&!(n(27,a=L.parentElement)===null||a===void 0?void 0:a.classList.contains("mdc-menu-surface--anchor"))&&(n(28,l=L.parentElement)===null||l===void 0||l.classList.add("mdc-menu-surface--anchor"),n(14,O=n(29,c=L.parentElement)!==null&&c!==void 0?c:void 0)),t.$$.dirty[0]&513&&k&&k.isOpen()!==y&&(y?k.open():k.close()),t.$$.dirty[0]&66048&&k&&k.setQuickOpen(v),t.$$.dirty[0]&544&&k&&k.setFixedPosition(m),t.$$.dirty[0]&524800&&k&&I>0&&k.setMaxHeight(I),t.$$.dirty[0]&1049088&&k&&k.setIsHorizontallyCenteredOnViewport(K),t.$$.dirty[0]&131584&&k&&C!=null&&(typeof C=="string"?k.setAnchorCorner(Y[C]):k.setAnchorCorner(C)),t.$$.dirty[0]&262656&&k&&k.setAnchorMargin(_)},[y,h,d,f,p,m,w,b,L,k,M,E,u,r,O,g,v,C,_,I,K,V,Q,he,W,Pe,be,a,l,c,o,s,Ie,Oe,gt]}class $N extends Ye{constructor(e){super();Qe(this,e,ZN,JN,We,{use:1,class:2,style:3,static:4,anchor:15,fixed:5,open:0,managed:6,fullWidth:7,quickOpen:16,anchorElement:14,anchorCorner:17,anchorMargin:18,maxHeight:19,horizontallyCenteredOnViewport:20,isOpen:21,setOpen:22,setAbsolutePosition:23,setIsHoisted:24,isFixed:25,getElement:26},null,[-1,-1])}get isOpen(){return this.$$.ctx[21]}get setOpen(){return this.$$.ctx[22]}get setAbsolutePosition(){return this.$$.ctx[23]}get setIsHoisted(){return this.$$.ctx[24]}get isFixed(){return this.$$.ctx[25]}get getElement(){return this.$$.ctx[26]}}function eM(t,{addClass:e=i=>t.classList.add(i),removeClass:n=i=>t.classList.remove(i)}={}){return e("mdc-menu-surface--anchor"),{destroy(){n("mdc-menu-surface--anchor")}}}function tM(t){let e;const n=t[16].default,i=we(n,t,t[21],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&2097152)&&Ce(i,n,r,r[21],e?Te(n,r[21],s,null):Se(r[21]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function nM(t){let e,n,i;const r=[{use:t[5]},{class:ge({[t[1]]:!0,"mdc-menu":!0})},t[9]];function s(a){t[18](a)}let o={$$slots:{default:[tM]},$$scope:{ctx:t}};for(let a=0;a<r.length;a+=1)o=U(o,r[a]);return t[0]!==void 0&&(o.open=t[0]),e=new $N({props:o}),t[17](e),ue.push(()=>oi(e,"open",s)),e.$on("SMUIMenuSurface:mount",t[7]),e.$on("SMUIList:mount",t[8]),e.$on("SMUIMenuSurface:opened",t[19]),e.$on("keydown",t[6]),e.$on("SMUIList:action",t[20]),{c(){Be(e.$$.fragment)},l(a){it(e.$$.fragment,a)},m(a,l){Ve(e,a,l),i=!0},p(a,[l]){const c=l&546?Ae(r,[l&32&&{use:a[5]},l&2&&{class:ge({[a[1]]:!0,"mdc-menu":!0})},l&512&&ht(a[9])]):{};l&2097152&&(c.$$scope={dirty:l,ctx:a}),!n&&l&1&&(n=!0,c.open=a[0],si(()=>n=!1)),e.$set(c)},i(a){i||(P(e.$$.fragment,a),i=!0)},o(a){F(e.$$.fragment,a),i=!1},d(a){t[17](null),je(e,a)}}}function iM(t,e,n){let i;const r=["use","class","open","isOpen","setOpen","setDefaultFocusState","getSelectedIndex","getElement"];let s=ne(e,r),{$$slots:o={},$$scope:a}=e;const{closest:l}=xd,c=$e(Ue());let{use:u=[]}=e,{class:h=""}=e,{open:d=!1}=e,f,p,g,m;Rn(()=>(n(3,p=new QN({addClassToElementAtIndex:(E,D)=>{m.addClassForElementIndex(E,D)},removeClassFromElementAtIndex:(E,D)=>{m.removeClassForElementIndex(E,D)},addAttributeToElementAtIndex:(E,D,Y)=>{m.setAttributeForElementIndex(E,D,Y)},removeAttributeFromElementAtIndex:(E,D)=>{m.removeAttributeForElementIndex(E,D)},getAttributeFromElementAtIndex:(E,D)=>m.getAttributeFromElementIndex(E,D),elementContainsClass:(E,D)=>E.classList.contains(D),closeSurface:E=>g.closeProgrammatic(E),getElementIndex:E=>m.getOrderedList().map(D=>D.element).indexOf(E),notifySelected:E=>st(I(),"SMUIMenu:selected",{index:E.index,item:m.getOrderedList()[E.index].element},void 0,!0),getMenuItemCount:()=>m.items.length,focusItemAtIndex:E=>m.focusItemAtIndex(E),focusListRoot:()=>"focus"in m.element&&m.element.focus(),isSelectableItemAtIndex:E=>!!l(m.getOrderedList()[E].element,`.${Us.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:E=>{const D=m.getOrderedList(),Y=l(D[E].element,`.${Us.MENU_SELECTION_GROUP}`),X=Y==null?void 0:Y.querySelector(`.${Us.MENU_SELECTED_LIST_ITEM}`);return X?D.map(A=>A.element).indexOf(X):-1}})),st(I(),"SMUIMenu:mount",p),p.init(),()=>{p.destroy()}));function y(E){p&&p.handleKeydown(E)}function w(E){g||(g=E.detail)}function b(E){m||n(4,m=E.detail)}function v(){return d}function O(E){n(0,d=E)}function C(E){p.setDefaultFocusState(E)}function _(){return p.getSelectedIndex()}function I(){return f.getElement()}function K(E){ue[E?"unshift":"push"](()=>{f=E,n(2,f)})}function L(E){d=E,n(0,d)}const k=()=>p&&p.handleMenuSurfaceOpened(),M=E=>p&&p.handleItemAction(m.getOrderedList()[E.detail.index].element);return t.$$set=E=>{e=U(U({},e),ze(E)),n(9,s=ne(e,r)),"use"in E&&n(10,u=E.use),"class"in E&&n(1,h=E.class),"open"in E&&n(0,d=E.open),"$$scope"in E&&n(21,a=E.$$scope)},t.$$.update=()=>{t.$$.dirty&1024&&n(5,i=[c,...u])},[d,h,f,p,m,i,y,w,b,s,u,v,O,C,_,I,o,K,L,k,M,a]}class rM extends Ye{constructor(e){super();Qe(this,e,iM,nM,We,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getSelectedIndex:14,getElement:15})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getSelectedIndex(){return this.$$.ctx[14]}get getElement(){return this.$$.ctx[15]}}Wt({class:"mdc-menu__selection-group-icon",component:GN});function Ky(t,e,n){const i=t.slice();return i[55]=e[n],i[57]=n,i}const sM=t=>({}),Xy=t=>({}),oM=t=>({match:t[0]&32768}),Qy=t=>({match:t[55]}),aM=t=>({}),Yy=t=>({}),lM=t=>({}),Jy=t=>({});function cM(t){let e,n,i;const r=[{label:t[6]},{disabled:t[7]},kt(t[27],"textfield$")];function s(a){t[43](a)}let o={};for(let a=0;a<r.length;a+=1)o=U(o,r[a]);return t[1]!==void 0&&(o.value=t[1]),e=new gN({props:o}),ue.push(()=>oi(e,"value",s)),{c(){Be(e.$$.fragment)},l(a){it(e.$$.fragment,a)},m(a,l){Ve(e,a,l),i=!0},p(a,l){const c=l[0]&134217920?Ae(r,[l[0]&64&&{label:a[6]},l[0]&128&&{disabled:a[7]},l[0]&134217728&&ht(kt(a[27],"textfield$"))]):{};!n&&l[0]&2&&(n=!0,c.value=a[1],si(()=>n=!1)),e.$set(c)},i(a){i||(P(e.$$.fragment,a),i=!0)},o(a){F(e.$$.fragment,a),i=!1},d(a){je(e,a)}}}function uM(t){let e,n,i=t[15],r=[];for(let a=0;a<i.length;a+=1)r[a]=$y(Ky(t,i,a));const s=a=>F(r[a],1,1,()=>{r[a]=null});let o=null;return i.length||(o=Zy(t)),{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=vt(),o&&o.c()},l(a){for(let l=0;l<r.length;l+=1)r[l].l(a);e=vt(),o&&o.l(a)},m(a,l){for(let c=0;c<r.length;c+=1)r[c].m(a,l);Z(a,e,l),o&&o.m(a,l),n=!0},p(a,l){if(l[0]&25396017|l[1]&2097152){i=a[15];let c;for(c=0;c<i.length;c+=1){const u=Ky(a,i,c);r[c]?(r[c].p(u,l),P(r[c],1)):(r[c]=$y(u),r[c].c(),P(r[c],1),r[c].m(e.parentNode,e))}for(Ft(),c=i.length;c<r.length;c+=1)s(c);Ut(),!i.length&&o?o.p(a,l):i.length?o&&(Ft(),F(o,1,1,()=>{o=null}),Ut()):(o=Zy(a),o.c(),P(o,1),o.m(e.parentNode,e))}},i(a){if(!n){for(let l=0;l<i.length;l+=1)P(r[l]);n=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)F(r[l]);n=!1},d(a){Np(r,a),a&&N(e),o&&o.d(a)}}}function hM(t){let e,n;return e=new Ic({props:{disabled:!0,$$slots:{default:[EM]},$$scope:{ctx:t}}}),{c(){Be(e.$$.fragment)},l(i){it(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){je(e,i)}}}function dM(t){let e,n;return e=new Ic({props:{disabled:!0,$$slots:{default:[TM]},$$scope:{ctx:t}}}),{c(){Be(e.$$.fragment)},l(i){it(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){je(e,i)}}}function Zy(t){let e,n;return e=new Ic({props:{disabled:t[9],$$slots:{default:[mM]},$$scope:{ctx:t}}}),e.$on("SMUI:action",t[49]),{c(){Be(e.$$.fragment)},l(i){it(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[0]&512&&(s.disabled=i[9]),r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){je(e,i)}}}function fM(t){let e;return{c(){e=Kn("No matches found.")},l(n){e=ri(n,"No matches found.")},m(n,i){Z(n,e,i)},d(n){n&&N(e)}}}function pM(t){let e,n;return e=new Ec({props:{$$slots:{default:[fM]},$$scope:{ctx:t}}}),{c(){Be(e.$$.fragment)},l(i){it(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){je(e,i)}}}function mM(t){let e,n;const i=t[42]["no-matches"],r=we(i,t,t[52],Xy),s=r||pM(t);return{c(){s&&s.c(),e=Ke()},l(o){s&&s.l(o),e=Xe(o)},m(o,a){s&&s.m(o,a),Z(o,e,a),n=!0},p(o,a){r&&r.p&&(!n||a[1]&2097152)&&Ce(r,i,o,o[52],n?Te(i,o[52],a,sM):Se(o[52]),Xy)},i(o){n||(P(s,o),n=!0)},o(o){F(s,o),n=!1},d(o){s&&s.d(o),o&&N(e)}}}function gM(t){let e=t[5](t[55])+"",n;return{c(){n=Kn(e)},l(i){n=ri(i,e)},m(i,r){Z(i,n,r)},p(i,r){r[0]&32800&&e!==(e=i[5](i[55])+"")&&is(n,e)},d(i){i&&N(n)}}}function _M(t){let e,n;return e=new Ec({props:{$$slots:{default:[gM]},$$scope:{ctx:t}}}),{c(){Be(e.$$.fragment)},l(i){it(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[0]&32800|r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){je(e,i)}}}function vM(t){let e,n;const i=t[42].match,r=we(i,t,t[52],Qy),s=r||_M(t);return{c(){s&&s.c(),e=Ke()},l(o){s&&s.l(o),e=Xe(o)},m(o,a){s&&s.m(o,a),Z(o,e,a),n=!0},p(o,a){r?r.p&&(!n||a[0]&32768|a[1]&2097152)&&Ce(r,i,o,o[52],n?Te(i,o[52],a,oM):Se(o[52]),Qy):s&&s.p&&(!n||a[0]&32800)&&s.p(o,n?a:[-1,-1])},i(o){n||(P(s,o),n=!0)},o(o){F(s,o),n=!1},d(o){s&&s.d(o),o&&N(e)}}}function $y(t){let e,n;function i(){return t[47](t[57])}function r(){return t[48](t[55])}return e=new Ic({props:{disabled:t[4](t[55]),selected:t[55]===t[0],$$slots:{default:[vM]},$$scope:{ctx:t}}}),e.$on("mouseenter",i),e.$on("SMUI:action",r),{c(){Be(e.$$.fragment)},l(s){it(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){t=s;const a={};o[0]&32784&&(a.disabled=t[4](t[55])),o[0]&32769&&(a.selected=t[55]===t[0]),o[0]&32800|o[1]&2097152&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){je(e,s)}}}function yM(t){let e;return{c(){e=Kn("Error while fetching suggestions.")},l(n){e=ri(n,"Error while fetching suggestions.")},m(n,i){Z(n,e,i)},d(n){n&&N(e)}}}function bM(t){let e,n;return e=new Ec({props:{$$slots:{default:[yM]},$$scope:{ctx:t}}}),{c(){Be(e.$$.fragment)},l(i){it(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){je(e,i)}}}function EM(t){let e;const n=t[42].error,i=we(n,t,t[52],Yy),r=i||bM(t);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,o){r&&r.m(s,o),e=!0},p(s,o){i&&i.p&&(!e||o[1]&2097152)&&Ce(i,n,s,s[52],e?Te(n,s[52],o,aM):Se(s[52]),Yy)},i(s){e||(P(r,s),e=!0)},o(s){F(r,s),e=!1},d(s){r&&r.d(s)}}}function IM(t){let e;return{c(){e=Kn("Loading...")},l(n){e=ri(n,"Loading...")},m(n,i){Z(n,e,i)},d(n){n&&N(e)}}}function wM(t){let e,n;return e=new Ec({props:{$$slots:{default:[IM]},$$scope:{ctx:t}}}),{c(){Be(e.$$.fragment)},l(i){it(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){je(e,i)}}}function TM(t){let e;const n=t[42].loading,i=we(n,t,t[52],Jy),r=i||wM(t);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,o){r&&r.m(s,o),e=!0},p(s,o){i&&i.p&&(!e||o[1]&2097152)&&Ce(i,n,s,s[52],e?Te(n,s[52],o,lM):Se(s[52]),Jy)},i(s){e||(P(r,s),e=!0)},o(s){F(r,s),e=!1},d(s){r&&r.d(s)}}}function CM(t){let e,n,i,r;const s=[dM,hM,uM],o=[];function a(l,c){return l[13]?0:l[19]?1:2}return e=a(t),n=o[e]=s[e](t),{c(){n.c(),i=vt()},l(l){n.l(l),i=vt()},m(l,c){o[e].m(l,c),Z(l,i,c),r=!0},p(l,c){let u=e;e=a(l),e===u?o[e].p(l,c):(Ft(),F(o[u],1,1,()=>{o[u]=null}),Ut(),n=o[e],n?n.p(l,c):(n=o[e]=s[e](l),n.c()),P(n,1),n.m(i.parentNode,i))},i(l){r||(P(n),r=!0)},o(l){F(n),r=!1},d(l){o[e].d(l),l&&N(i)}}}function SM(t){let e,n;const i=[kt(t[27],"list$")];let r={$$slots:{default:[CM]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)r=U(r,i[s]);return e=new FN({props:r}),{c(){Be(e.$$.fragment)},l(s){it(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[0]&134217728?Ae(i,[ht(kt(s[27],"list$"))]):{};o[0]&762673|o[1]&2097152&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){je(e,s)}}}function AM(t){let e,n,i,r,s,o,a,l,c,u;const h=t[42].default,d=we(h,t,t[52],null),f=d||cM(t),p=[{class:ge({[t[10]]:!0,"smui-autocomplete__menu":!0})},{managed:!0},{open:t[20]},{anchor:t[11]},{anchorCorner:t[12]},kt(t[27],"menu$")];function g(b){t[50](b)}let m={$$slots:{default:[SM]},$$scope:{ctx:t}};for(let b=0;b<p.length;b+=1)m=U(m,p[b]);t[17]!==void 0&&(m.anchorElement=t[17]),r=new rM({props:m}),ue.push(()=>oi(r,"anchorElement",g)),r.$on("SMUIList:mount",t[22]);let y=[{class:o=ge({[t[3]]:!0,"smui-autocomplete":!0})},zi(t[27],["menu$","textfield$","list$"])],w={};for(let b=0;b<y.length;b+=1)w=U(w,y[b]);return{c(){e=_e("div"),n=_e("div"),f&&f.c(),i=Ke(),Be(r.$$.fragment),this.h()},l(b){e=ve(b,"DIV",{class:!0});var v=ie(e);n=ve(v,"DIV",{});var O=ie(n);f&&f.l(O),O.forEach(N),i=Xe(v),it(r.$$.fragment,v),v.forEach(N),this.h()},h(){ce(e,w)},m(b,v){Z(b,e,v),me(e,n),f&&f.m(n,null),t[44](n),me(e,i),Ve(r,e,null),t[51](e),l=!0,c||(u=[Ze(n,"focusin",t[45]),Ze(n,"focusout",t[26]),Ze(n,"input",t[46]),Ze(n,"keydown",t[25],!0),oe(eM.call(null,e)),oe(a=dt.call(null,e,t[2])),oe(t[21].call(null,e))],c=!0)},p(b,v){d?d.p&&(!l||v[1]&2097152)&&Ce(d,h,b,b[52],l?Te(h,b[52],v,null):Se(b[52]),null):f&&f.p&&(!l||v[0]&134217922)&&f.p(b,l?v:[-1,-1]);const O=v[0]&135273472?Ae(p,[v[0]&1024&&{class:ge({[b[10]]:!0,"smui-autocomplete__menu":!0})},p[1],v[0]&1048576&&{open:b[20]},v[0]&2048&&{anchor:b[11]},v[0]&4096&&{anchorCorner:b[12]},v[0]&134217728&&ht(kt(b[27],"menu$"))]):{};v[0]&134980401|v[1]&2097152&&(O.$$scope={dirty:v,ctx:b}),!s&&v[0]&131072&&(s=!0,O.anchorElement=b[17],si(()=>s=!1)),r.$set(O),ce(e,w=Ae(y,[(!l||v[0]&8&&o!==(o=ge({[b[3]]:!0,"smui-autocomplete":!0})))&&{class:o},v[0]&134217728&&zi(b[27],["menu$","textfield$","list$"])])),a&&qe(a.update)&&v[0]&4&&a.update.call(null,b[2])},i(b){l||(P(f,b),P(r.$$.fragment,b),l=!0)},o(b){F(f,b),F(r.$$.fragment,b),l=!1},d(b){b&&N(e),f&&f.d(b),t[44](null),je(r),t[51](null),c=!1,Ge(u)}}}function kM(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function OM(t,e,n){let i;const r=["use","class","options","value","getOptionDisabled","getOptionLabel","text","label","disabled","toggle","combobox","clearOnBlur","selectOnExactMatch","showMenuWithNoInput","noMatchesActionDisabled","search","menu$class","menu$anchor","menu$anchorCorner","focus","blur","getElement"];let s=ne(e,r),{$$slots:o={},$$scope:a}=e;const l=$e(Ue());let{use:c=[]}=e,{class:u=""}=e,{options:h=[]}=e,{value:d=void 0}=e,{getOptionDisabled:f=()=>!1}=e,{getOptionLabel:p=j=>j==null?"":`${j}`}=e,{text:g=p(d)}=e,{label:m=void 0}=e,{disabled:y=!1}=e,{toggle:w=!1}=e,{combobox:b=!1}=e,{clearOnBlur:v=!b}=e,{selectOnExactMatch:O=!0}=e,{showMenuWithNoInput:C=!0}=e,{noMatchesActionDisabled:_=!0}=e,{search:I=async j=>{const ot=j.toLowerCase(),Zn=typeof h=="function"?await h():h||[];if(ot==="")return Zn;const di=Zn.filter(lr=>p(lr).toLowerCase().includes(ot));return di.sort((lr,H)=>{const le=p(lr).toLowerCase(),se=p(H).toLowerCase();return le.startsWith(ot)&&!se.startsWith(ot)?-1:se.startsWith(ot)&&!le.startsWith(ot)?1:0}),di}}=e,{menu$class:K=""}=e,{menu$anchor:L=!1}=e,{menu$anchorCorner:k="BOTTOM_START"}=e,M,E,D=!1,Y=!1,X=!1,A,S=[],R=-1,V,Q,he=d,W;function Pe(j){A||n(37,A=j.detail)}function be(j,ot=!0){ot&&n(1,g=p(j)),n(0,d=j),ot||n(40,he=j),st(M,"SMUIAutocomplete:selected",j)}function Ie(j,ot=!0){ot&&n(1,g=""),n(0,d=void 0),ot||n(40,he=void 0),st(M,"SMUIAutocomplete:deselected",j)}function Oe(j){j===d?Ie(j):be(j)}function gt(){return A?A.getOrderedList().filter(j=>!j.disabled):[]}function G(j){if(!(b&&!S.length)){if(j.key==="ArrowDown")j.preventDefault(),R===-1||R===gt().length-1?n(16,R=0):n(16,R++,R);else if(j.key==="ArrowUp")j.preventDefault(),R===-1||R===0?n(16,R=gt().length-1):n(16,R--,R);else if(j.key==="Enter"){j.preventDefault();const ot=gt();V&&(ot[R]&&ot[R].action(j),n(16,R=-1))}}}async function fe(j){j.relatedTarget&&gt().map(ot=>ot.element).indexOf(j.relatedTarget)!==-1||(n(16,R=-1),n(14,X=!1),v&&d==null&&n(1,g=""))}function Pt(){if(E){const j=E.querySelector("input.mdc-text-field__input");j&&j.focus()}}function Ot(){if(E){const j=E.querySelector("input.mdc-text-field__input");j&&j.blur()}}function q(){return M}function pe(j){g=j,n(1,g),n(29,b),n(40,he),n(0,d),n(5,p)}function pt(j){ue[j?"unshift":"push"](()=>{E=j,n(18,E)})}const Kt=()=>{n(14,X=!0)},kn=()=>{n(16,R=-1)},ii=j=>{n(16,R=j)},co=j=>w?Oe(j):be(j),ar=j=>st(M,"SMUIAutocomplete:noMatchesAction",j);function ns(j){M=j,n(17,M)}function zn(j){ue[j?"unshift":"push"](()=>{M=j,n(17,M)})}return t.$$set=j=>{e=U(U({},e),ze(j)),n(27,s=ne(e,r)),"use"in j&&n(2,c=j.use),"class"in j&&n(3,u=j.class),"options"in j&&n(28,h=j.options),"value"in j&&n(0,d=j.value),"getOptionDisabled"in j&&n(4,f=j.getOptionDisabled),"getOptionLabel"in j&&n(5,p=j.getOptionLabel),"text"in j&&n(1,g=j.text),"label"in j&&n(6,m=j.label),"disabled"in j&&n(7,y=j.disabled),"toggle"in j&&n(8,w=j.toggle),"combobox"in j&&n(29,b=j.combobox),"clearOnBlur"in j&&n(30,v=j.clearOnBlur),"selectOnExactMatch"in j&&n(31,O=j.selectOnExactMatch),"showMenuWithNoInput"in j&&n(32,C=j.showMenuWithNoInput),"noMatchesActionDisabled"in j&&n(9,_=j.noMatchesActionDisabled),"search"in j&&n(33,I=j.search),"menu$class"in j&&n(10,K=j.menu$class),"menu$anchor"in j&&n(11,L=j.menu$anchor),"menu$anchorCorner"in j&&n(12,k=j.menu$anchorCorner),"$$scope"in j&&n(52,a=j.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&536870947|t.$$.dirty[1]&512&&(!b&&he!==d?(n(1,g=p(d)),n(40,he=d)):b&&n(0,d=g)),t.$$.dirty[0]&536903715|t.$$.dirty[1]&261&&Q!==g&&(!b&&d!=null&&p(d)!==g&&Ie(d,!1),(async()=>{n(13,D=!0),n(19,Y=!1);try{const j=await I(g);if(j!==!1&&(n(15,S=j),O)){const ot=S.find(Zn=>p(Zn)===g);ot&&d!==ot&&be(ot)}}catch{n(19,Y=!0)}n(13,D=!1)})(),n(39,Q=g)),t.$$.dirty[0]&536928259|t.$$.dirty[1]&2&&n(20,i=X&&(g!==""||C)&&(D||!b&&!(S.length===1&&S[0]===d)||b&&!!S.length&&!(S.length===1&&S[0]===d))),t.$$.dirty[0]&65536|t.$$.dirty[1]&1216&&W!==R){const j=gt();R===-1?n(38,V=void 0):(n(38,V=j[R]),V&&(n(38,V.activated=!0,V),kM(V.element)||V.element.scrollIntoView({block:"end",inline:"nearest"}))),j.forEach((ot,Zn)=>{Zn!==R&&(ot.activated=!1)}),A&&A.getOrderedList().forEach(ot=>{ot.tabindex=-1}),n(41,W=R)}},[d,g,c,u,f,p,m,y,w,_,K,L,k,D,X,S,R,M,E,Y,i,l,Pe,be,Oe,G,fe,s,h,b,v,O,C,I,Pt,Ot,q,A,V,Q,he,W,o,pe,pt,Kt,kn,ii,co,ar,ns,zn,a]}class SB extends Ye{constructor(e){super();Qe(this,e,OM,AM,We,{use:2,class:3,options:28,value:0,getOptionDisabled:4,getOptionLabel:5,text:1,label:6,disabled:7,toggle:8,combobox:29,clearOnBlur:30,selectOnExactMatch:31,showMenuWithNoInput:32,noMatchesActionDisabled:9,search:33,menu$class:10,menu$anchor:11,menu$anchorCorner:12,focus:34,blur:35,getElement:36},null,[-1,-1])}get focus(){return this.$$.ctx[34]}get blur(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Dn={ANIMATE:"mdc-drawer--animate",CLOSING:"mdc-drawer--closing",DISMISSIBLE:"mdc-drawer--dismissible",MODAL:"mdc-drawer--modal",OPEN:"mdc-drawer--open",OPENING:"mdc-drawer--opening",ROOT:"mdc-drawer"},RM={APP_CONTENT_SELECTOR:".mdc-drawer-app-content",CLOSE_EVENT:"MDCDrawer:closed",OPEN_EVENT:"MDCDrawer:opened",SCRIM_SELECTOR:".mdc-drawer-scrim",LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",LIST_ITEM_ACTIVATED_SELECTOR:".mdc-list-item--activated,.mdc-deprecated-list-item--activated"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var eb=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.animationFrame=0,i.animationTimer=0,i}return Object.defineProperty(e,"strings",{get:function(){return RM},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return Dn},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},elementHasClass:function(){return!1},notifyClose:function(){},notifyOpen:function(){},saveFocus:function(){},restoreFocus:function(){},focusActiveNavigationItem:function(){},trapFocus:function(){},releaseFocus:function(){}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.animationTimer&&clearTimeout(this.animationTimer)},e.prototype.open=function(){var n=this;this.isOpen()||this.isOpening()||this.isClosing()||(this.adapter.addClass(Dn.OPEN),this.adapter.addClass(Dn.ANIMATE),this.runNextAnimationFrame(function(){n.adapter.addClass(Dn.OPENING)}),this.adapter.saveFocus())},e.prototype.close=function(){!this.isOpen()||this.isOpening()||this.isClosing()||this.adapter.addClass(Dn.CLOSING)},e.prototype.isOpen=function(){return this.adapter.hasClass(Dn.OPEN)},e.prototype.isOpening=function(){return this.adapter.hasClass(Dn.OPENING)||this.adapter.hasClass(Dn.ANIMATE)},e.prototype.isClosing=function(){return this.adapter.hasClass(Dn.CLOSING)},e.prototype.handleKeydown=function(n){var i=n.keyCode,r=n.key,s=r==="Escape"||i===27;s&&this.close()},e.prototype.handleTransitionEnd=function(n){var i=Dn.OPENING,r=Dn.CLOSING,s=Dn.OPEN,o=Dn.ANIMATE,a=Dn.ROOT,l=this.isElement(n.target)&&this.adapter.elementHasClass(n.target,a);!l||(this.isClosing()?(this.adapter.removeClass(s),this.closed(),this.adapter.restoreFocus(),this.adapter.notifyClose()):(this.adapter.focusActiveNavigationItem(),this.opened(),this.adapter.notifyOpen()),this.adapter.removeClass(o),this.adapter.removeClass(i),this.adapter.removeClass(r))},e.prototype.opened=function(){},e.prototype.closed=function(){},e.prototype.runNextAnimationFrame=function(n){var i=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){i.animationFrame=0,clearTimeout(i.animationTimer),i.animationTimer=setTimeout(n,0)})},e.prototype.isElement=function(n){return Boolean(n.classList)},e}(Xn);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var LM=function(t){wn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.handleScrimClick=function(){this.close()},e.prototype.opened=function(){this.adapter.trapFocus()},e.prototype.closed=function(){this.adapter.releaseFocus()},e}(eb);function NM(t){let e,n,i,r,s,o;const a=t[15].default,l=we(a,t,t[14],null);let c=[{class:n=ge(at({[t[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":t[2]==="dismissible","mdc-drawer--modal":t[2]==="modal","smui-drawer__absolute":t[2]==="modal"&&!t[3]},t[6]))},t[8]],u={};for(let h=0;h<c.length;h+=1)u=U(u,c[h]);return{c(){e=_e("aside"),l&&l.c(),this.h()},l(h){e=ve(h,"ASIDE",{class:!0});var d=ie(e);l&&l.l(d),d.forEach(N),this.h()},h(){ce(e,u)},m(h,d){Z(h,e,d),l&&l.m(e,null),t[16](e),r=!0,s||(o=[oe(i=dt.call(null,e,t[0])),oe(t[7].call(null,e)),Ze(e,"keydown",t[17]),Ze(e,"transitionend",t[18])],s=!0)},p(h,[d]){l&&l.p&&(!r||d&16384)&&Ce(l,a,h,h[14],r?Te(a,h[14],d,null):Se(h[14]),null),ce(e,u=Ae(c,[(!r||d&78&&n!==(n=ge(at({[h[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":h[2]==="dismissible","mdc-drawer--modal":h[2]==="modal","smui-drawer__absolute":h[2]==="modal"&&!h[3]},h[6]))))&&{class:n},d&256&&h[8]])),i&&qe(i.update)&&d&1&&i.update.call(null,h[0])},i(h){r||(P(l,h),r=!0)},o(h){F(l,h),r=!1},d(h){h&&N(e),l&&l.d(h),t[16](null),s=!1,Ge(o)}}}function MM(t,e,n){const i=["use","class","variant","open","fixed","setOpen","isOpen","getElement"];let r=ne(e,i),{$$slots:s={},$$scope:o}=e;const{FocusTrap:a}=rR,l=$e(Ue());let{use:c=[]}=e,{class:u=""}=e,{variant:h=void 0}=e,{open:d=!1}=e,{fixed:f=!0}=e,p,g,m={},y=null,w,b=!1;Ht("SMUI:list:nav",!0),Ht("SMUI:list:item:nav",!0),Ht("SMUI:list:wrapFocus",!0);let v=h;Rn(()=>{w=new a(p,{skipInitialFocus:!0}),n(4,g=O()),g&&g.init()}),ur(()=>{g&&g.destroy(),b&&b.removeEventListener("SMUIDrawerScrim:click",K)});function O(){var X,A;b&&b.removeEventListener("SMUIDrawerScrim:click",K),h==="modal"&&(b=(A=(X=p.parentNode)===null||X===void 0?void 0:X.querySelector(".mdc-drawer-scrim"))!==null&&A!==void 0?A:!1,b&&b.addEventListener("SMUIDrawerScrim:click",K));const S=h==="dismissible"?eb:h==="modal"?LM:void 0;return S?new S({addClass:_,removeClass:I,hasClass:C,elementHasClass:(R,V)=>R.classList.contains(V),saveFocus:()=>y=document.activeElement,restoreFocus:()=>{y&&"focus"in y&&p.contains(document.activeElement)&&y.focus()},focusActiveNavigationItem:()=>{const R=p.querySelector(".mdc-list-item--activated,.mdc-deprecated-list-item--activated");R&&R.focus()},notifyClose:()=>{n(9,d=!1),st(p,"SMUIDrawer:closed",void 0,void 0,!0)},notifyOpen:()=>{n(9,d=!0),st(p,"SMUIDrawer:opened",void 0,void 0,!0)},trapFocus:()=>w.trapFocus(),releaseFocus:()=>w.releaseFocus()}):void 0}function C(X){return X in m?m[X]:M().classList.contains(X)}function _(X){m[X]||n(6,m[X]=!0,m)}function I(X){(!(X in m)||m[X])&&n(6,m[X]=!1,m)}function K(){g&&"handleScrimClick"in g&&g.handleScrimClick()}function L(X){n(9,d=X)}function k(){return d}function M(){return p}function E(X){ue[X?"unshift":"push"](()=>{p=X,n(5,p)})}const D=X=>g&&g.handleKeydown(X),Y=X=>g&&g.handleTransitionEnd(X);return t.$$set=X=>{e=U(U({},e),ze(X)),n(8,r=ne(e,i)),"use"in X&&n(0,c=X.use),"class"in X&&n(1,u=X.class),"variant"in X&&n(2,h=X.variant),"open"in X&&n(9,d=X.open),"fixed"in X&&n(3,f=X.fixed),"$$scope"in X&&n(14,o=X.$$scope)},t.$$.update=()=>{t.$$.dirty&8212&&v!==h&&(n(13,v=h),g&&g.destroy(),n(6,m={}),n(4,g=O()),g&&g.init()),t.$$.dirty&528&&g&&g.isOpen()!==d&&(d?g.open():g.close())},[c,u,h,f,g,p,m,l,r,d,L,k,M,v,o,s,E,D,Y]}class AB extends Ye{constructor(e){super();Qe(this,e,MM,NM,We,{use:0,class:1,variant:2,open:9,fixed:3,setOpen:10,isOpen:11,getElement:12})}get setOpen(){return this.$$.ctx[10]}get isOpen(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}var kB=Wt({class:"mdc-drawer-app-content",component:wi}),OB=Wt({class:"mdc-drawer__content",component:wi});Wt({class:"mdc-drawer__header",component:wi});Wt({class:"mdc-drawer__title",component:BR});Wt({class:"mdc-drawer__subtitle",component:HR});Wt({class:"smui-card__content",component:wi});Wt({class:"mdc-card__media-content",component:wi});Wt({class:"mdc-card__action-buttons",component:wi});Wt({class:"mdc-card__action-icons",component:wi});const tb="@firebase/database",nb="0.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ib="";function PM(t){ib=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Qt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:po(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ai(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=function(t){try{if(typeof window!="undefined"&&typeof window[t]!="undefined"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new DM(e)}}catch{}return new FM},Ur=rb("localStorage"),Hd=rb("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new el("@firebase/database"),UM=function(){let t=1;return function(){return t++}}(),sb=function(t){const e=u1(t),n=new o1;n.update(e);const i=n.digest();return Ou.encodeByteArray(i)},ca=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ca.apply(null,i):typeof i=="object"?e+=Qt(i):e+=i,e+=" "}return e};let xr=null,ob=!0;const xM=function(t,e){z(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(js.logLevel=Je.VERBOSE,xr=js.log.bind(js),e&&Hd.set("logging_enabled",!0)):typeof t=="function"?xr=t:(xr=null,Hd.remove("logging_enabled"))},ln=function(...t){if(ob===!0&&(ob=!1,xr===null&&Hd.get("logging_enabled")===!0&&xM(!0)),xr){const e=ca.apply(null,t);xr(e)}},ua=function(t){return function(...e){ln(t,...e)}},qd=function(...t){const e="FIREBASE INTERNAL ERROR: "+ca(...t);js.error(e)},Vr=function(...t){const e=`FIREBASE FATAL ERROR: ${ca(...t)}`;throw js.error(e),new Error(e)},Wn=function(...t){const e="FIREBASE WARNING: "+ca(...t);js.warn(e)},VM=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Wn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},jM=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Bs="[MIN_NAME]",jr="[MAX_NAME]",Br=function(t,e){if(t===e)return 0;if(t===Bs||e===jr)return-1;if(e===Bs||t===jr)return 1;{const n=cb(t),i=cb(e);return n!==null?i!==null?n-i==0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},BM=function(t,e){return t===e?0:t<e?-1:1},ha=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Qt(e))},Wd=function(t){if(typeof t!="object"||t===null)return Qt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Qt(e[i]),n+=":",n+=Wd(t[e[i]]);return n+="}",n},ab=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function gn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const lb=function(t){z(!wc(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,o,a,l;t===0?(s=0,o=0,r=1/t==-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},HM=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},qM=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function WM(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const GM=new RegExp("^-?(0*)\\d{1,10}$"),zM=-2147483648,KM=2147483647,cb=function(t){if(GM.test(t)){const e=Number(t);if(e>=zM&&e<=KM)return e}return null},Hs=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Wn("Exception was thrown by user callback.",n),e},Math.floor(0))}},XM=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},da=function(t,e){const n=setTimeout(t,e);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Wn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ln("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wn(e)}}class Gd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Gd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="5",ub="v",hb="s",db="r",fb="f",pb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mb="ls",JM="p",Kd="ac",gb="websocket",_b="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n,i,r,s=!1,o="",a=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ur.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ur.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function $M(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function vb(t,e,n){z(typeof e=="string","typeof type must == string"),z(typeof n=="object","typeof params must == object");let i;if(e===gb)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===_b)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);$M(t)&&(n.ns=t.namespace);const r=[];return gn(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.counters_={}}incrementCounter(e,n=1){ai(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Jw(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd={},Qd={};function Yd(t){const e=t.toString();return Xd[e]||(Xd[e]=new eP),Xd[e]}function tP(t,e){const n=t.toString();return Qd[n]||(Qd[n]=e()),Qd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Hs(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="start",iP="close",rP="pLPCommand",sP="pRTLPCB",bb="id",Eb="pw",Ib="ser",oP="cb",aP="seg",lP="ts",cP="d",uP="dframe",wb=1870,Tb=30,hP=wb-Tb,dP=25e3,fP=3e4;class qs{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ua(e),this.stats_=Yd(n),this.urlFn=l=>(this.appCheckToken&&(l[Kd]=this.appCheckToken),vb(n,_b,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new nP(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(fP)),jM(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jd((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===yb)this.id=a,this.password=l;else if(o===iP)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[yb]="t",i[Ib]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[oP]=this.scriptTagHolder.uniqueCallbackIdentifier),i[ub]=zd,this.transportSessionId&&(i[hb]=this.transportSessionId),this.lastSessionId&&(i[mb]=this.lastSessionId),this.applicationId&&(i[JM]=this.applicationId),this.appCheckToken&&(i[Kd]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&pb.test(location.hostname)&&(i[db]=fb);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){qs.forceAllow_=!0}static forceDisallow(){qs.forceDisallow_=!0}static isAvailable(){return qs.forceAllow_?!0:!qs.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!HM()&&!qM()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Qt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Yw(n),r=ab(i,hP);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[uP]="t",i[bb]=e,i[Eb]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Qt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Jd{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=UM(),window[rP+this.uniqueCallbackIdentifier]=e,window[sP+this.uniqueCallbackIdentifier]=n,this.myIFrame=Jd.createIFrame_();let s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,"javascript:".length)==="javascript:"){const a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ln("frame writing exception"),a.stack&&ln(a.stack),ln(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ln("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[bb]=this.myID,e[Eb]=this.myPW,e[Ib]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Tb+i.length<=wb;){const o=this.pendingSegs.shift();i=i+"&"+aP+r+"="+o.seg+"&"+lP+r+"="+o.ts+"&"+cP+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(dP)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{ln("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=16384,mP=45e3;let Tc=null;typeof MozWebSocket!="undefined"?Tc=MozWebSocket:typeof WebSocket!="undefined"&&(Tc=WebSocket);class ei{constructor(e,n,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ua(this.connId),this.stats_=Yd(n),this.connURL=ei.connectionURL_(n,o,a,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r){const s={};return s[ub]=zd,typeof location!="undefined"&&location.hostname&&pb.test(location.hostname)&&(s[db]=fb),n&&(s[hb]=n),i&&(s[mb]=i),r&&(s[Kd]=r),vb(e,gb,s)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ur.set("previous_websocket_failure",!0);try{if(!Gp()){const i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Tc(this.connURL,[],i)}}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){ei.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Tc!==null&&!ei.forceDisallow_}static previouslyFailed(){return Ur.isInMemoryStorage||Ur.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ur.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=po(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(z(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Qt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=ab(n,pP);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(mP))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ei.responsesRequiredToBeHealthy=2;ei.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[qs,ei]}initTransports_(e){const n=ei&&ei.isAvailable();let i=n&&!ei.previouslyFailed();if(e.webSocketOnly&&(n||Wn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ei];else{const r=this.transports_=[];for(const s of Zd.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=6e4,_P=5e3,vP=10*1024,yP=100*1024,$d="t",Cb="d",bP="s",Sb="r",EP="e",Ab="o",kb="a",Ob="n",Rb="p",IP="h";class wP{constructor(e,n,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ua("c:"+this.id+":"),this.transportManager_=new Zd(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=da(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>yP?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>vP?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if($d in e){const n=e[$d];n===kb?this.upgradeIfSecondaryHealthy_():n===Sb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ab&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ha("t",e),i=ha("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Rb,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:kb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ob,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ha("t",e),i=ha("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ha($d,e);if(Cb in e){const i=e[Cb];if(n===IP)this.onHandshake_(i);else if(n===Ob){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===bP?this.onConnectionShutdown_(i):n===Sb?this.onReset_(i):n===EP?qd("Server Error: "+i):n===Ab?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qd("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),zd!==i&&Wn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),da(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(gP))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):da(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(_P))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Rb,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ur.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.allowedEvents_=e,this.listeners_={},z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){z(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends Nb{constructor(){super(["online"]);this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!Qa()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Cc}getInitialEvent(e){return z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=32,Pb=768;class ut{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function et(){return new ut("")}function Me(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ji(t){return t.pieces_.length-t.pieceNum_}function mt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ut(t.pieces_,e)}function ef(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function TP(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function fa(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Db(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ut(e,0)}function Lt(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof ut)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ut(n,0)}function De(t){return t.pieceNum_>=t.pieces_.length}function Fn(t,e){const n=Me(t),i=Me(e);if(n===null)return e;if(n===i)return Fn(mt(t),mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function CP(t,e){const n=fa(t,0),i=fa(e,0);for(let r=0;r<n.length&&r<i.length;r++){const s=Br(n[r],i[r]);if(s!==0)return s}return n.length===i.length?0:n.length<i.length?-1:1}function tf(t,e){if(Ji(t)!==Ji(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Qn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Ji(t)>Ji(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class SP{constructor(e,n){this.errorPrefix_=n,this.parts_=fa(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=$a(this.parts_[i]);Fb(this)}}function AP(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=$a(e),Fb(t)}function kP(t){const e=t.parts_.pop();t.byteLength_-=$a(e),t.parts_.length>0&&(t.byteLength_-=1)}function Fb(t){if(t.byteLength_>Pb)throw new Error(t.errorPrefix_+"has a key path longer than "+Pb+" bytes ("+t.byteLength_+").");if(t.parts_.length>Mb)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Mb+") or object contains a cycle "+Hr(t))}function Hr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends Nb{constructor(){super(["visible"]);let e,n;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(n="visibilitychange",e="hidden"):typeof document.mozHidden!="undefined"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden!="undefined"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden!="undefined"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new nf}getInitialEvent(e){return z(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=1e3,OP=60*5*1e3,RP=3*1e3,Ub=30*1e3,LP=1.3,NP=3e4,MP="server_kill",xb=3;class Si extends Lb{constructor(e,n,i,r,s,o,a,l){super();if(this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Si.nextPersistentConnectionId_++,this.log_=ua("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pa,this.maxReconnectDelay_=OP,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Gp())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Cc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(Qt(s)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Li,i={p:e._path.toString(),q:e._queryObject},r={action:"g",request:i,onComplete:o=>{const a=o.d;o.s==="ok"?(this.onDataUpdate_(i.p,a,!1,null),n.resolve(a)):n.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const o=this.outstandingGets_[s];o===void 0||r!==o||(delete this.outstandingGets_[s],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},RP),this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Si.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ai(e,"w")){const i=os(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Wn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||s1(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ub)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=r1(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const o={p:n,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Qt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):qd("Unrecognized action received from server: "+Qt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pa,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=pa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>NP&&(this.reconnectDelay_=pa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*LP)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Si.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(h){z(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?ln("getToken() completed but was canceled"):(ln("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new wP(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,f=>{Wn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(MP)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Wn(h),l())}}}interrupt(e){ln("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ln("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ya(this.interruptReasons_)&&(this.reconnectDelay_=pa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>Wd(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new ut(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){ln("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=xb&&(this.reconnectDelay_=Ub,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ln("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=xb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+ib.replace(/\./g,"-")]=1,Qa()?e["framework.cordova"]=1:Lu()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Cc.getInstance().currentlyOnline();return Ya(this.interruptReasons_)&&e}}Si.nextPersistentConnectionId_=0;Si.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Fe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Fe(Bs,e),r=new Fe(Bs,n);return this.compare(i,r)!==0}minPost(){return Fe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac;class Vb extends Sc{static get __EMPTY_NODE(){return Ac}static set __EMPTY_NODE(e){Ac=e}compare(e,n){return Br(e.name,n.name)}isDefinedOn(e){throw ss("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Fe.MIN}maxPost(){return new Fe(jr,Ac)}makePost(e,n){return z(typeof e=="string","KeyIndex indexValue must always be a string."),new Fe(e,Ac)}toString(){return".key"}}const Ws=new Vb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Zt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i!=null?i:Zt.RED,this.left=r!=null?r:Un.EMPTY_NODE,this.right=s!=null?s:Un.EMPTY_NODE}copy(e,n,i,r,s){return new Zt(e!=null?e:this.key,n!=null?n:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Un.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Un.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Zt.RED=!0;Zt.BLACK=!1;class PP{copy(e,n,i,r,s){return this}insert(e,n,i){return new Zt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Un{constructor(e,n=Un.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Un(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Zt.BLACK,null,null))}remove(e){return new Un(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Zt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new kc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new kc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new kc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new kc(this.root_,null,this.comparator_,!0,e)}}Un.EMPTY_NODE=new PP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t,e){return Br(t.name,e.name)}function rf(t,e){return Br(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf;function FP(t){sf=t}const jb=function(t){return typeof t=="number"?"number:"+lb(t):"string:"+t},Bb=function(t){if(t.isLeafNode()){const e=t.val();z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ai(e,".sv"),"Priority must be a string or number.")}else z(t===sf||t.isEmpty(),"priority of unexpected type.");z(t===sf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hb;class $t{constructor(e,n=$t.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Bb(this.priorityNode_)}static set __childrenNodeConstructor(e){Hb=e}static get __childrenNodeConstructor(){return Hb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new $t(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:$t.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return De(e)?this:Me(e)===".priority"?this.priorityNode_:$t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:$t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Me(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(z(i!==".priority"||Ji(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,$t.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+jb(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=lb(this.value_):e+=this.value_,this.lazyHash_=sb(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===$t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof $t.__childrenNodeConstructor?-1:(z(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=$t.VALUE_TYPE_ORDER.indexOf(n),s=$t.VALUE_TYPE_ORDER.indexOf(i);return z(r>=0,"Unknown leaf type: "+n),z(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}$t.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qb,Wb;function UP(t){qb=t}function xP(t){Wb=t}class VP extends Sc{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?Br(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Fe.MIN}maxPost(){return new Fe(jr,new $t("[PRIORITY-POST]",Wb))}makePost(e,n){const i=qb(e);return new Fe(n,new $t("[PRIORITY-POST]",i))}toString(){return".priority"}}const At=new VP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=Math.log(2);class BP{constructor(e){const n=s=>parseInt(Math.log(s)/jP,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Oc=function(t,e,n,i){t.sort(e);const r=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new Zt(d,h.node,Zt.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=r(l,f),g=r(f+1,c);return h=t[f],d=n?n(h):h,new Zt(d,h.node,Zt.BLACK,p,g)}},s=function(l){let c=null,u=null,h=t.length;const d=function(p,g){const m=h-p,y=h;h-=p;const w=r(m+1,y),b=t[m],v=n?n(b):b;f(new Zt(v,b.node,g,null,w))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),m=Math.pow(2,l.count-(p+1));g?d(m,Zt.BLACK):(d(m,Zt.BLACK),d(m,Zt.RED))}return u},o=new BP(t.length),a=s(o);return new Un(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of;const Gs={};class Ai{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return z(Gs&&At,"ChildrenNode.ts has not been loaded"),of=of||new Ai({".priority":Gs},{".priority":At}),of}get(e){const n=os(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Un?n:null}hasIndex(e){return ai(this.indexSet_,e.toString())}addIndex(e,n){z(e!==Ws,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(Fe.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Oc(i,e.getCompare()):a=Gs;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Ai(u,c)}addToIndexes(e,n){const i=Ja(this.indexes_,(r,s)=>{const o=os(this.indexSet_,s);if(z(o,"Missing index implementation for "+s),r===Gs)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Fe.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Oc(a,o.getCompare())}else return Gs;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new Fe(e.name,a))),l.insert(e,e.node)}});return new Ai(i,this.indexSet_)}removeFromIndexes(e,n){const i=Ja(this.indexes_,r=>{if(r===Gs)return r;{const s=n.get(e.name);return s?r.remove(new Fe(e.name,s)):r}});return new Ai(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ma;class ye{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Bb(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ma||(ma=new ye(new Un(rf),null,Ai.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ma}updatePriority(e){return this.children_.isEmpty()?this:new ye(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ma:n}}getChild(e){const n=Me(e);return n===null?this:this.getImmediateChild(n).getChild(mt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(z(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Fe(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?ma:this.priorityNode_;return new ye(r,o,s)}}updateChild(e,n){const i=Me(e);if(i===null)return n;{z(Me(e)!==".priority"||Ji(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(mt(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(At,(o,a)=>{n[o]=a.val(e),i++,s&&ye.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+jb(this.getPriority().val())+":"),this.forEachChild(At,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":sb(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new Fe(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Fe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Fe(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Fe.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Fe.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ga?-1:0}withIndex(e){if(e===Ws||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ye(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ws||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(At),r=n.getIterator(At);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ws?null:this.indexMap_.get(e.toString())}}ye.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class HP extends ye{constructor(){super(new Un(rf),ye.EMPTY_NODE,Ai.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ye.EMPTY_NODE}isEmpty(){return!1}}const ga=new HP;Object.defineProperties(Fe,{MIN:{value:new Fe(Bs,ye.EMPTY_NODE)},MAX:{value:new Fe(jr,ga)}});Vb.__EMPTY_NODE=ye.EMPTY_NODE;$t.__childrenNodeConstructor=ye;FP(ga);xP(ga);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=!0;function zt(t,e=null){if(t===null)return ye.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new $t(n,zt(e))}if(!(t instanceof Array)&&qP){const n=[];let i=!1;if(gn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=zt(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new Fe(o,l)))}}),n.length===0)return ye.EMPTY_NODE;const s=Oc(n,DP,o=>o.name,rf);if(i){const o=Oc(n,At.getCompare());return new ye(s,zt(e),new Ai({".priority":o},{".priority":At}))}else return new ye(s,zt(e),Ai.Default)}else{let n=ye.EMPTY_NODE;return gn(t,(i,r)=>{if(ai(t,i)&&i.substring(0,1)!=="."){const s=zt(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(zt(e))}}UP(zt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP extends Sc{constructor(e){super();this.indexPath_=e,z(!De(e)&&Me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?Br(e.name,n.name):s}makePost(e,n){const i=zt(e),r=ye.EMPTY_NODE.updateChild(this.indexPath_,i);return new Fe(n,r)}maxPost(){const e=ye.EMPTY_NODE.updateChild(this.indexPath_,ga);return new Fe(jr,e)}toString(){return fa(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP extends Sc{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Br(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Fe.MIN}maxPost(){return Fe.MAX}makePost(e,n){const i=zt(e);return new Fe(n,i)}toString(){return".value"}}const zP=new GP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t){return{type:"value",snapshotNode:t}}function zs(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function _a(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function va(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function KP(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.index_=e}updateChild(e,n,i,r,s,o){z(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(_a(n,a)):z(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(zs(n,i)):o.trackChildChange(va(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(At,(r,s)=>{n.hasChild(r)||i.trackChildChange(_a(r,s))}),n.isLeafNode()||n.forEachChild(At,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(va(r,s,o))}else i.trackChildChange(zs(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ye.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.indexedFilter_=new af(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ya.getStartPost_(e),this.endPost_=ya.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,n,i,r,s,o){return this.matches(new Fe(n,i))||(i=ye.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,s,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=ye.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ye.EMPTY_NODE);const s=this;return n.forEachChild(At,(o,a)=>{s.matches(new Fe(o,a))||(r=r.updateImmediateChild(o,ye.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.rangedFilter_=new ya(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,n,i,r,s,o){return this.rangedFilter_.matches(new Fe(n,i))||(i=ye.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,s,o):this.fullLimitUpdateChild_(e,n,i,s,o)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=ye.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ye.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:l=this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,l)r=r.updateImmediateChild(a.name,a.node),o++;else break}}else{r=n.withIndex(this.index_),r=r.updatePriority(ye.EMPTY_NODE);let s,o,a,l;if(this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const h=this.index_.getCompare();a=(d,f)=>h(f,d)}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,u=!1;for(;l.hasNext();){const h=l.getNext();!u&&a(s,h)<=0&&(u=!0),u&&c<this.limit_&&a(h,o)<=0?c++:r=r.updateImmediateChild(h.name,ye.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(d,f)=>h(f,d)}else o=this.index_.getCompare();const a=e;z(a.numChildren()===this.limit_,"");const l=new Fe(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let d=r.getChildAfterChild(this.index_,c,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);const f=d==null?1:o(d,l);if(u&&!i.isEmpty()&&f>=0)return s!=null&&s.trackChildChange(va(n,i,h)),a.updateImmediateChild(n,i);{s!=null&&s.trackChildChange(_a(n,h));const g=a.updateImmediateChild(n,ye.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(s!=null&&s.trackChildChange(zs(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}}else return i.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(_a(c.name,c.node)),s.trackChildChange(zs(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,ye.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=At}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bs}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===At}copy(){const e=new lf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function QP(t){return t.loadsAllData()?new af(t.getIndex()):t.hasLimit()?new XP(t):new ya(t)}function zb(t){const e={};if(t.isDefault())return e;let n;return t.index_===At?n="$priority":t.index_===zP?n="$value":t.index_===Ws?n="$key":(z(t.index_ instanceof WP,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Qt(n),t.startSet_&&(e.startAt=Qt(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+Qt(t.indexStartName_))),t.endSet_&&(e.endAt=Qt(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+Qt(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Kb(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==At&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends Lb{constructor(e,n,i,r){super();this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=ua("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Rc.getListenId_(e,i),a={};this.listens_[o]=a;const l=zb(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,i),os(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",r(d,null)}})}unlisten(e,n){const i=Rc.getListenId_(e,n);delete this.listens_[i]}get(e){const n=zb(e._queryParams),i=e._path.toString(),r=new Li;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+dr(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=po(a.responseText)}catch{Wn("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Wn("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.rootNode_=ye.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(){return{value:null,children:new Map}}function Ks(t,e,n){if(De(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Me(e);t.children.has(i)||t.children.set(i,Lc());const r=t.children.get(i);e=mt(e),Ks(r,e,n)}}function cf(t,e){if(De(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(At,(i,r)=>{Ks(t,new ut(i),r)}),cf(t,e)}}else if(t.children.size>0){const n=Me(e);return e=mt(e),t.children.has(n)&&cf(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function uf(t,e,n){t.value!==null?n(e,t.value):JP(t,(i,r)=>{const s=new ut(e.toString()+"/"+i);uf(r,s,n)})}function JP(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gn(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=10*1e3,$P=30*1e3,eD=5*60*1e3;class tD{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ZP(e);const i=Xb+($P-Xb)*Math.random();da(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;gn(e,(r,s)=>{s>0&&ai(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),da(this.reportStats_.bind(this),Math.floor(Math.random()*2*eD))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ti;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ti||(ti={}));function Qb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function hf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function df(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=ti.ACK_USER_WRITE,this.source=Qb()}operationForChild(e){if(De(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ut(e));return new Nc(et(),n,this.revert)}}else return z(Me(this.path)===e,"operationForChild called for unrelated child."),new Nc(mt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.source=e,this.path=n,this.type=ti.LISTEN_COMPLETE}operationForChild(e){return De(this.path)?new ba(this.source,et()):new ba(this.source,mt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=ti.OVERWRITE}operationForChild(e){return De(this.path)?new qr(this.source,et(),this.snap.getImmediateChild(e)):new qr(this.source,mt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=ti.MERGE}operationForChild(e){if(De(this.path)){const n=this.children.subtree(new ut(e));return n.isEmpty()?null:n.value?new qr(this.source,et(),n.value):new Ea(this.source,et(),n)}else return z(Me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ea(this.source,mt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(De(e))return this.isFullyInitialized()&&!this.filtered_;const n=Me(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function iD(t,e,n,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(KP(o.childName,o.snapshotNode))}),Ia(t,r,"child_removed",e,i,n),Ia(t,r,"child_added",e,i,n),Ia(t,r,"child_moved",s,i,n),Ia(t,r,"child_changed",e,i,n),Ia(t,r,"value",e,i,n),r}function Ia(t,e,n,i,r,s){const o=i.filter(a=>a.type===n);o.sort((a,l)=>sD(t,a,l)),o.forEach(a=>{const l=rD(t,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function rD(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function sD(t,e,n){if(e.childName==null||n.childName==null)throw ss("Should only compare child_ events.");const i=new Fe(e.childName,e.snapshotNode),r=new Fe(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t,e){return{eventCache:t,serverCache:e}}function wa(t,e,n,i){return Mc(new Wr(e,n,i),t.serverCache)}function Yb(t,e,n,i){return Mc(t.eventCache,new Wr(e,n,i))}function ff(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Gr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf;const oD=()=>(pf||(pf=new Un(BM)),pf);class wt{constructor(e,n=oD()){this.value=e,this.children=n}static fromObject(e){let n=new wt(null);return gn(e,(i,r)=>{n=n.set(new ut(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:et(),value:this.value};if(De(e))return null;{const i=Me(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(mt(e),n);return s!=null?{path:Lt(new ut(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(De(e))return this;{const n=Me(e),i=this.children.get(n);return i!==null?i.subtree(mt(e)):new wt(null)}}set(e,n){if(De(e))return new wt(n,this.children);{const i=Me(e),s=(this.children.get(i)||new wt(null)).set(mt(e),n),o=this.children.insert(i,s);return new wt(this.value,o)}}remove(e){if(De(e))return this.children.isEmpty()?new wt(null):new wt(null,this.children);{const n=Me(e),i=this.children.get(n);if(i){const r=i.remove(mt(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new wt(null):new wt(this.value,s)}else return this}}get(e){if(De(e))return this.value;{const n=Me(e),i=this.children.get(n);return i?i.get(mt(e)):null}}setTree(e,n){if(De(e))return n;{const i=Me(e),s=(this.children.get(i)||new wt(null)).setTree(mt(e),n);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new wt(this.value,o)}}fold(e){return this.fold_(et(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Lt(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,et(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(De(e))return null;{const s=Me(e),o=this.children.get(s);return o?o.findOnPath_(mt(e),Lt(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,et(),n)}foreachOnPath_(e,n,i){if(De(e))return this;{this.value&&i(n,this.value);const r=Me(e),s=this.children.get(r);return s?s.foreachOnPath_(mt(e),Lt(n,r),i):new wt(null)}}foreach(e){this.foreach_(et(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Lt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.writeTree_=e}static empty(){return new ni(new wt(null))}}function Ta(t,e,n){if(De(e))return new ni(new wt(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=Fn(r,e);return s=s.updateChild(o,n),new ni(t.writeTree_.set(r,s))}else{const r=new wt(n),s=t.writeTree_.setTree(e,r);return new ni(s)}}}function Jb(t,e,n){let i=t;return gn(n,(r,s)=>{i=Ta(i,Lt(e,r),s)}),i}function Zb(t,e){if(De(e))return ni.empty();{const n=t.writeTree_.setTree(e,new wt(null));return new ni(n)}}function mf(t,e){return zr(t,e)!=null}function zr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Fn(n.path,e)):null}function $b(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(At,(i,r)=>{e.push(new Fe(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Fe(i,r.value))}),e}function Zi(t,e){if(De(e))return t;{const n=zr(t,e);return n!=null?new ni(new wt(n)):new ni(t.writeTree_.subtree(e))}}function gf(t){return t.writeTree_.isEmpty()}function Xs(t,e){return eE(et(),t.writeTree_,e)}function eE(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(z(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=eE(Lt(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Lt(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t,e){return sE(e,t)}function aD(t,e,n,i,r){z(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Ta(t.visibleWrites,e,n)),t.lastWriteId=i}function lD(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function cD(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);z(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&uD(a,i.path)?r=!1:Qn(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return hD(t),!0;if(i.snap)t.visibleWrites=Zb(t.visibleWrites,i.path);else{const a=i.children;gn(a,l=>{t.visibleWrites=Zb(t.visibleWrites,Lt(i.path,l))})}return!0}else return!1}function uD(t,e){if(t.snap)return Qn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Qn(Lt(t.path,n),e))return!0;return!1}function hD(t){t.visibleWrites=tE(t.allWrites,dD,et()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function dD(t){return t.visible}function tE(t,e,n){let i=ni.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const o=s.path;let a;if(s.snap)Qn(n,o)?(a=Fn(n,o),i=Ta(i,a,s.snap)):Qn(o,n)&&(a=Fn(o,n),i=Ta(i,et(),s.snap.getChild(a)));else if(s.children){if(Qn(n,o))a=Fn(n,o),i=Jb(i,a,s.children);else if(Qn(o,n))if(a=Fn(o,n),De(a))i=Jb(i,et(),s.children);else{const l=os(s.children,Me(a));if(l){const c=l.getChild(mt(a));i=Ta(i,et(),c)}}}else throw ss("WriteRecord should have .snap or .children")}}return i}function nE(t,e,n,i,r){if(!i&&!r){const s=zr(t.visibleWrites,e);if(s!=null)return s;{const o=Zi(t.visibleWrites,e);if(gf(o))return n;if(n==null&&!mf(o,et()))return null;{const a=n||ye.EMPTY_NODE;return Xs(o,a)}}}else{const s=Zi(t.visibleWrites,e);if(!r&&gf(s))return n;if(!r&&n==null&&!mf(s,et()))return null;{const o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Qn(c.path,e)||Qn(e,c.path))},a=tE(t.allWrites,o,e),l=n||ye.EMPTY_NODE;return Xs(a,l)}}}function fD(t,e,n){let i=ye.EMPTY_NODE;const r=zr(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(At,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){const s=Zi(t.visibleWrites,e);return n.forEachChild(At,(o,a)=>{const l=Xs(Zi(s,new ut(o)),a);i=i.updateImmediateChild(o,l)}),$b(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=Zi(t.visibleWrites,e);return $b(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function pD(t,e,n,i,r){z(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Lt(e,n);if(mf(t.visibleWrites,s))return null;{const o=Zi(t.visibleWrites,s);return gf(o)?r.getChild(n):Xs(o,r.getChild(n))}}function mD(t,e,n,i){const r=Lt(e,n),s=zr(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const o=Zi(t.visibleWrites,r);return Xs(o,i.getNode().getImmediateChild(n))}else return null}function gD(t,e){return zr(t.visibleWrites,e)}function _D(t,e,n,i,r,s,o){let a;const l=Zi(t.visibleWrites,e),c=zr(l,et());if(c!=null)a=c;else if(n!=null)a=Xs(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let f=d.getNext();for(;f&&u.length<r;)h(f,i)!==0&&u.push(f),f=d.getNext();return u}else return[]}function vD(){return{visibleWrites:ni.empty(),allWrites:[],lastWriteId:-1}}function Pc(t,e,n,i){return nE(t.writeTree,t.treePath,e,n,i)}function vf(t,e){return fD(t.writeTree,t.treePath,e)}function iE(t,e,n,i){return pD(t.writeTree,t.treePath,e,n,i)}function Dc(t,e){return gD(t.writeTree,Lt(t.treePath,e))}function yD(t,e,n,i,r,s){return _D(t.writeTree,t.treePath,e,n,i,r,s)}function yf(t,e,n){return mD(t.writeTree,t.treePath,e,n)}function rE(t,e){return sE(Lt(t.treePath,e),t.writeTree)}function sE(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;z(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),z(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,va(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,_a(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,zs(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,va(i,e.snapshotNode,r.oldSnap));else throw ss("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const oE=new ED;class bf{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Wr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yf(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Gr(this.viewCache_),s=yD(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t){return{filter:t}}function wD(t,e){z(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),z(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function TD(t,e,n,i,r){const s=new bD;let o,a;if(n.type===ti.OVERWRITE){const c=n;c.source.fromUser?o=Ef(t,e,c.path,c.snap,i,r,s):(z(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!De(c.path),o=Fc(t,e,c.path,c.snap,i,r,a,s))}else if(n.type===ti.MERGE){const c=n;c.source.fromUser?o=SD(t,e,c.path,c.children,i,r,s):(z(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=If(t,e,c.path,c.children,i,r,a,s))}else if(n.type===ti.ACK_USER_WRITE){const c=n;c.revert?o=OD(t,e,c.path,i,r,s):o=AD(t,e,c.path,c.affectedTree,i,r,s)}else if(n.type===ti.LISTEN_COMPLETE)o=kD(t,e,n.path,i,s);else throw ss("Unknown operation type: "+n.type);const l=s.getChanges();return CD(e,o,l),{viewCache:o,changes:l}}function CD(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=ff(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Gb(ff(e)))}}function aE(t,e,n,i,r,s){const o=e.eventCache;if(Dc(i,n)!=null)return e;{let a,l;if(De(n))if(z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Gr(e),u=c instanceof ye?c:ye.EMPTY_NODE,h=vf(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=Pc(i,Gr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Me(n);if(c===".priority"){z(Ji(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=iE(i,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=mt(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=iE(i,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=yf(i,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,r,s):a=o.getNode()}}return wa(e,a,o.isFullyInitialized()||De(n),t.filter.filtersNodes())}}function Fc(t,e,n,i,r,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(De(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Me(n);if(!l.isCompleteForPath(n)&&Ji(n)>1)return e;const p=mt(n),m=l.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?c=u.updatePriority(l.getNode(),m):c=u.updateChild(l.getNode(),f,m,p,oE,null)}const h=Yb(e,c,l.isFullyInitialized()||De(n),u.filtersNodes()),d=new bf(r,h,s);return aE(t,h,n,r,d,a)}function Ef(t,e,n,i,r,s,o){const a=e.eventCache;let l,c;const u=new bf(r,e,s);if(De(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=wa(e,c,!0,t.filter.filtersNodes());else{const h=Me(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=wa(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=mt(n),f=a.getNode().getImmediateChild(h);let p;if(De(d))p=i;else{const g=u.getCompleteChild(h);g!=null?ef(d)===".priority"&&g.getChild(Db(d)).isEmpty()?p=g:p=g.updateChild(d,i):p=ye.EMPTY_NODE}if(f.equals(p))l=e;else{const g=t.filter.updateChild(a.getNode(),h,p,d,u,o);l=wa(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function lE(t,e){return t.eventCache.isCompleteForChild(e)}function SD(t,e,n,i,r,s,o){let a=e;return i.foreach((l,c)=>{const u=Lt(n,l);lE(e,Me(u))&&(a=Ef(t,a,u,c,r,s,o))}),i.foreach((l,c)=>{const u=Lt(n,l);lE(e,Me(u))||(a=Ef(t,a,u,c,r,s,o))}),a}function cE(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function If(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;De(n)?c=i:c=new wt(null).setTree(n,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=cE(t,f,d);l=Fc(t,l,new ut(h),p,r,s,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===void 0;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),g=cE(t,p,d);l=Fc(t,l,new ut(h),g,r,s,o,a)}}),l}function AD(t,e,n,i,r,s,o){if(Dc(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(De(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Fc(t,e,n,l.getNode().getChild(n),r,s,a,o);if(De(n)){let c=new wt(null);return l.getNode().forEachChild(Ws,(u,h)=>{c=c.set(new ut(u),h)}),If(t,e,n,c,r,s,a,o)}else return e}else{let c=new wt(null);return i.foreach((u,h)=>{const d=Lt(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),If(t,e,n,c,r,s,a,o)}}function kD(t,e,n,i,r){const s=e.serverCache,o=Yb(e,s.getNode(),s.isFullyInitialized()||De(n),s.isFiltered());return aE(t,o,n,i,oE,r)}function OD(t,e,n,i,r,s){let o;if(Dc(i,n)!=null)return e;{const a=new bf(i,e,r),l=e.eventCache.getNode();let c;if(De(n)||Me(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Pc(i,Gr(e));else{const h=e.serverCache.getNode();z(h instanceof ye,"serverChildren would be complete if leaf node"),u=vf(i,h)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Me(n);let h=yf(i,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,mt(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,ye.EMPTY_NODE,mt(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Pc(i,Gr(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Dc(i,et())!=null,wa(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new af(i.getIndex()),s=QP(i);this.processor_=ID(s);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(ye.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ye.EMPTY_NODE,a.getNode(),null),u=new Wr(l,o.isFullyInitialized(),r.filtersNodes()),h=new Wr(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Mc(h,u),this.eventGenerator_=new nD(this.query_)}get query(){return this.query_}}function LD(t){return t.viewCache_.serverCache.getNode()}function ND(t,e){const n=Gr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!De(e)&&!n.getImmediateChild(Me(e)).isEmpty())?n.getChild(e):null}function uE(t){return t.eventRegistrations_.length===0}function MD(t,e){t.eventRegistrations_.push(e)}function hE(t,e,n){const i=[];if(n){z(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function dE(t,e,n,i){e.type===ti.MERGE&&e.source.queryId!==null&&(z(Gr(t.viewCache_),"We should always have a full cache before handling merges"),z(ff(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=TD(t.processor_,r,e,n,i);return wD(t.processor_,s.viewCache),z(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,fE(t,s.changes,s.viewCache.eventCache.getNode(),null)}function PD(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(At,(s,o)=>{i.push(zs(s,o))}),n.isFullyInitialized()&&i.push(Gb(n.getNode())),fE(t,i,n.getNode(),e)}function fE(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return iD(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc;class DD{constructor(){this.views=new Map}}function FD(t){z(!Uc,"__referenceConstructor has already been defined"),Uc=t}function UD(){return z(Uc,"Reference.ts has not been loaded"),Uc}function xD(t){return t.views.size===0}function wf(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return z(s!=null,"SyncTree gave us an op for an invalid query."),dE(s,e,n,i)}else{let s=[];for(const o of t.views.values())s=s.concat(dE(o,e,n,i));return s}}function VD(t,e,n,i,r){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Pc(n,r?i:null),l=!1;a?l=!0:i instanceof ye?(a=vf(n,i),l=!1):(a=ye.EMPTY_NODE,l=!1);const c=Mc(new Wr(a,l,!1),new Wr(i,r,!1));return new RD(e,c)}return o}function jD(t,e,n,i,r,s){const o=VD(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),MD(o,n),PD(o,n)}function BD(t,e,n,i){const r=e._queryIdentifier,s=[];let o=[];const a=$i(t);if(r==="default")for(const[l,c]of t.views.entries())o=o.concat(hE(c,n,i)),uE(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(r);l&&(o=o.concat(hE(l,n,i)),uE(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!$i(t)&&s.push(new(UD())(e._repo,e._path)),{removed:s,events:o}}function pE(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Qs(t,e){let n=null;for(const i of t.views.values())n=n||ND(i,e);return n}function mE(t,e){if(e._queryParams.loadsAllData())return xc(t);{const i=e._queryIdentifier;return t.views.get(i)}}function gE(t,e){return mE(t,e)!=null}function $i(t){return xc(t)!=null}function xc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc;function HD(t){z(!Vc,"__referenceConstructor has already been defined"),Vc=t}function qD(){return z(Vc,"Reference.ts has not been loaded"),Vc}let WD=1;class _E{constructor(e){this.listenProvider_=e,this.syncPointTree_=new wt(null),this.pendingWriteTree_=vD(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function GD(t,e,n,i,r){return aD(t.pendingWriteTree_,e,n,i,r),r?Ca(t,new qr(Qb(),e,n)):[]}function Ys(t,e,n=!1){const i=lD(t.pendingWriteTree_,e);if(cD(t.pendingWriteTree_,e)){let s=new wt(null);return i.snap!=null?s=s.set(et(),!0):gn(i.children,o=>{s=s.set(new ut(o),!0)}),Ca(t,new Nc(i.path,s,n))}else return[]}function jc(t,e,n){return Ca(t,new qr(hf(),e,n))}function zD(t,e,n){const i=wt.fromObject(n);return Ca(t,new Ea(hf(),e,i))}function KD(t,e){return Ca(t,new ba(hf(),e))}function XD(t,e,n){const i=Cf(t,n);if(i){const r=Sf(i),s=r.path,o=r.queryId,a=Fn(s,e),l=new ba(df(o),a);return Af(t,s,l)}else return[]}function Tf(t,e,n,i){const r=e._path,s=t.syncPointTree_.get(r);let o=[];if(s&&(e._queryIdentifier==="default"||gE(s,e))){const a=BD(s,e,n,i);xD(s)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const l=a.removed;o=a.events;const c=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=t.syncPointTree_.findOnPath(r,(h,d)=>$i(d));if(c&&!u){const h=t.syncPointTree_.subtree(r);if(!h.isEmpty()){const d=JD(h);for(let f=0;f<d.length;++f){const p=d[f],g=p.query,m=IE(t,p);t.listenProvider_.startListening(Sa(g),Bc(t,g),m.hashFn,m.onComplete)}}}if(!u&&l.length>0&&!i)if(c){const h=null;t.listenProvider_.stopListening(Sa(e),h)}else l.forEach(h=>{const d=t.queryToTagMap.get(Hc(h));t.listenProvider_.stopListening(Sa(h),d)});ZD(t,l)}return o}function QD(t,e,n,i){const r=Cf(t,i);if(r!=null){const s=Sf(r),o=s.path,a=s.queryId,l=Fn(o,e),c=new qr(df(a),l,n);return Af(t,o,c)}else return[]}function YD(t,e,n,i){const r=Cf(t,i);if(r){const s=Sf(r),o=s.path,a=s.queryId,l=Fn(o,e),c=wt.fromObject(n),u=new Ea(df(a),l,c);return Af(t,o,u)}else return[]}function vE(t,e,n){const i=e._path;let r=null,s=!1;t.syncPointTree_.foreachOnPath(i,(h,d)=>{const f=Fn(h,i);r=r||Qs(d,f),s=s||$i(d)});let o=t.syncPointTree_.get(i);o?(s=s||$i(o),r=r||Qs(o,et())):(o=new DD,t.syncPointTree_=t.syncPointTree_.set(i,o));let a;r!=null?a=!0:(a=!1,r=ye.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((d,f)=>{const p=Qs(f,et());p&&(r=r.updateImmediateChild(d,p))}));const l=gE(o,e);if(!l&&!e._queryParams.loadsAllData()){const h=Hc(e);z(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const d=$D();t.queryToTagMap.set(h,d),t.tagToQueryMap.set(d,h)}const c=_f(t.pendingWriteTree_,i);let u=jD(o,e,n,c,r,a);if(!l&&!s){const h=mE(o,e);u=u.concat(eF(t,e,h))}return u}function yE(t,e,n){const i=!0,r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Fn(o,e),c=Qs(a,l);if(c)return c});return nE(r,e,s,n,i)}function Ca(t,e){return bE(e,t.syncPointTree_,null,_f(t.pendingWriteTree_,et()))}function bE(t,e,n,i){if(De(t.path))return EE(t,e,n,i);{const r=e.get(et());n==null&&r!=null&&(n=Qs(r,et()));let s=[];const o=Me(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=rE(i,o);s=s.concat(bE(a,l,c,u))}return r&&(s=s.concat(wf(r,t,i,n))),s}}function EE(t,e,n,i){const r=e.get(et());n==null&&r!=null&&(n=Qs(r,et()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=rE(i,o),u=t.operationForChild(o);u&&(s=s.concat(EE(u,a,l,c)))}),r&&(s=s.concat(wf(r,t,i,n))),s}function IE(t,e){const n=e.query,i=Bc(t,n);return{hashFn:()=>(LD(e)||ye.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?XD(t,n._path,i):KD(t,n._path);{const s=WM(r,n);return Tf(t,n,null,s)}}}}function Bc(t,e){const n=Hc(e);return t.queryToTagMap.get(n)}function Hc(t){return t._path.toString()+"$"+t._queryIdentifier}function Cf(t,e){return t.tagToQueryMap.get(e)}function Sf(t){const e=t.indexOf("$");return z(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ut(t.substr(0,e))}}function Af(t,e,n){const i=t.syncPointTree_.get(e);z(i,"Missing sync point for query tag that we're tracking");const r=_f(t.pendingWriteTree_,e);return wf(i,n,r,null)}function JD(t){return t.fold((e,n,i)=>{if(n&&$i(n))return[xc(n)];{let r=[];return n&&(r=pE(n)),gn(i,(s,o)=>{r=r.concat(o)}),r}})}function Sa(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(qD())(t._repo,t._path):t}function ZD(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Hc(i),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}function $D(){return WD++}function eF(t,e,n){const i=e._path,r=Bc(t,e),s=IE(t,n),o=t.listenProvider_.startListening(Sa(e),r,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(i);if(r)z(!$i(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!De(c)&&u&&$i(u))return[xc(u).query];{let d=[];return u&&(d=d.concat(pE(u).map(f=>f.query))),gn(h,(f,p)=>{d=d.concat(p)}),d}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(Sa(u),Bc(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new kf(n)}node(){return this.node_}}class Of{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Lt(this.path_,e);return new Of(this.syncTree_,n)}node(){return yE(this.syncTree_,this.path_)}}const tF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},wE=function(t,e,n){if(!t||typeof t!="object")return t;if(z(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return nF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return iF(t[".sv"],e);z(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},nF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:z(!1,"Unexpected server value: "+t)}},iF=function(t,e,n){t.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&z(!1,"Unexpected increment value: "+i);const r=e.node();if(z(r!==null&&typeof r!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},rF=function(t,e,n,i){return Rf(e,new Of(n,t),i)},sF=function(t,e,n){return Rf(t,new kf(e),n)};function Rf(t,e,n){const i=t.getPriority().val(),r=wE(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=wE(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new $t(a,zt(r)):t}else{const o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new $t(r))),o.forEachChild(At,(a,l)=>{const c=Rf(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Nf(t,e){let n=e instanceof ut?e:new ut(e),i=t,r=Me(n);for(;r!==null;){const s=os(i.node.children,r)||{children:{},childCount:0};i=new Lf(r,i,s),n=mt(n),r=Me(n)}return i}function Js(t){return t.node.value}function TE(t,e){t.node.value=e,Mf(t)}function CE(t){return t.node.childCount>0}function oF(t){return Js(t)===void 0&&!CE(t)}function qc(t,e){gn(t.node.children,(n,i)=>{e(new Lf(n,t,i))})}function SE(t,e,n,i){n&&!i&&e(t),qc(t,r=>{SE(r,e,!0,i)}),n&&i&&e(t)}function aF(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Aa(t){return new ut(t.parent===null?t.name:Aa(t.parent)+"/"+t.name)}function Mf(t){t.parent!==null&&lF(t.parent,t.name,t)}function lF(t,e,n){const i=oF(n),r=ai(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,Mf(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,Mf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=/[\[\].#$\/\u0000-\u001F\u007F]/,uF=/[\[\].#$\u0000-\u001F\u007F]/,Pf=10*1024*1024,Df=function(t){return typeof t=="string"&&t.length!==0&&!cF.test(t)},AE=function(t){return typeof t=="string"&&t.length!==0&&!uF.test(t)},hF=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),AE(t)},kE=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!wc(t)||t&&typeof t=="object"&&ai(t,".sv")},OE=function(t,e,n,i){i&&e===void 0||Wc(as(t,"value"),e,n)},Wc=function(t,e,n){const i=n instanceof ut?new SP(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Hr(i));if(typeof e=="function")throw new Error(t+"contains a function "+Hr(i)+" with contents = "+e.toString());if(wc(e))throw new Error(t+"contains "+e.toString()+" "+Hr(i));if(typeof e=="string"&&e.length>Pf/3&&$a(e)>Pf)throw new Error(t+"contains a string greater than "+Pf+" utf8 bytes "+Hr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(gn(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Df(o)))throw new Error(t+" contains an invalid key ("+o+") "+Hr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);AP(i,o),Wc(t,a,i),kP(i)}),r&&s)throw new Error(t+' contains ".value" child '+Hr(i)+" in addition to actual children.")}},dF=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const s=fa(i);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Df(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(CP);let r=null;for(n=0;n<e.length;n++){if(i=e[n],r!==null&&Qn(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},fF=function(t,e,n,i){if(i&&e===void 0)return;const r=as(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];gn(e,(o,a)=>{const l=new ut(o);if(Wc(r,a,Lt(n,l)),ef(l)===".priority"&&!kE(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),dF(r,s)},pF=function(t,e,n){if(!(n&&e===void 0)){if(wc(e))throw new Error(as(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!kE(e))throw new Error(as(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},RE=function(t,e,n,i){if(!(i&&n===void 0)&&!AE(n))throw new Error(as(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},mF=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),RE(t,e,n,i)},Gc=function(t,e){if(Me(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},gF=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Df(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!hF(n))throw new Error(as(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function LE(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!tf(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function NE(t,e,n){LE(t,n),ME(t,i=>tf(i,e))}function Kr(t,e,n){LE(t,n),ME(t,i=>Qn(i,e)||Qn(e,i))}function ME(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(vF(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function vF(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();xr&&ln("event: "+n.toString()),Hs(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF="repo_interrupt",bF=25;class EF{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _F,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lc(),this.transactionQueueTree_=new Lf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function IF(t,e,n){if(t.stats_=Yd(t.repoInfo_),t.forceRestClient_||XM())t.server_=new Rc(t.repoInfo_,(i,r,s,o)=>{DE(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>FE(t,!0),0);else{if(typeof n!="undefined"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Qt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Si(t.repoInfo_,e,(i,r,s,o)=>{DE(t,i,r,s,o)},i=>{FE(t,i)},i=>{TF(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=tP(t.repoInfo_,()=>new tD(t.stats_,t.server_)),t.infoData_=new YP,t.infoSyncTree_=new _E({startListening:(i,r,s,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=jc(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Ff(t,"connected",!1),t.serverSyncTree_=new _E({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);Kr(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function wF(t){const n=t.infoData_.getNode(new ut(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function PE(t){return tF({timestamp:wF(t)})}function DE(t,e,n,i,r){t.dataUpdateCount++;const s=new ut(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){const l=Ja(n,c=>zt(c));o=YD(t.serverSyncTree_,s,l,r)}else{const l=zt(n);o=QD(t.serverSyncTree_,s,l,r)}else if(i){const l=Ja(n,c=>zt(c));o=zD(t.serverSyncTree_,s,l)}else{const l=zt(n);o=jc(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=xf(t,s)),Kr(t.eventQueue_,a,o)}function FE(t,e){Ff(t,"connected",e),e===!1&&SF(t)}function TF(t,e){gn(e,(n,i)=>{Ff(t,n,i)})}function Ff(t,e,n){const i=new ut("/.info/"+e),r=zt(n);t.infoData_.updateSnapshot(i,r);const s=jc(t.infoSyncTree_,i,r);Kr(t.eventQueue_,i,s)}function CF(t){return t.nextWriteId_++}function SF(t){VE(t,"onDisconnectEvents");const e=PE(t),n=Lc();uf(t.onDisconnect_,et(),(r,s)=>{const o=rF(r,s,t.serverSyncTree_,e);Ks(n,r,o)});let i=[];uf(n,et(),(r,s)=>{i=i.concat(jc(t.serverSyncTree_,r,s));const o=PF(t,r);xf(t,o)}),t.onDisconnect_=Lc(),Kr(t.eventQueue_,et(),i)}function AF(t,e,n){t.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&cf(t.onDisconnect_,e),ka(t,n,i,r)})}function UE(t,e,n,i){const r=zt(n);t.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{s==="ok"&&Ks(t.onDisconnect_,e,r),ka(t,i,s,o)})}function kF(t,e,n,i,r){const s=zt(n,i);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Ks(t.onDisconnect_,e,s),ka(t,r,o,a)})}function OF(t,e,n,i){if(Ya(n)){ln("onDisconnect().update() called with empty data.  Don't do anything."),ka(t,i,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(r,s)=>{r==="ok"&&gn(n,(o,a)=>{const l=zt(a);Ks(t.onDisconnect_,Lt(e,o),l)}),ka(t,i,r,s)})}function RF(t,e,n){let i;Me(e._path)===".info"?i=vE(t.infoSyncTree_,e,n):i=vE(t.serverSyncTree_,e,n),NE(t.eventQueue_,e._path,i)}function xE(t,e,n){let i;Me(e._path)===".info"?i=Tf(t.infoSyncTree_,e,n):i=Tf(t.serverSyncTree_,e,n),NE(t.eventQueue_,e._path,i)}function LF(t){t.persistentConnection_&&t.persistentConnection_.interrupt(yF)}function VE(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ln(n,...e)}function ka(t,e,n,i){e&&Hs(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function jE(t,e,n){return yE(t.serverSyncTree_,e,n)||ye.EMPTY_NODE}function Uf(t,e=t.transactionQueueTree_){if(e||zc(t,e),Js(e)){const n=HE(t,e);z(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&NF(t,Aa(e),n)}else CE(e)&&qc(e,n=>{Uf(t,n)})}function NF(t,e,n){const i=n.map(c=>c.currentWriteId),r=jE(t,e,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const u=n[c];z(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Fn(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{VE(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(Ys(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();zc(t,Nf(t.transactionQueueTree_,e)),Uf(t,t.transactionQueueTree_),Kr(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)Hs(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Wn("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}xf(t,e)}},o)}function xf(t,e){const n=BE(t,e),i=Aa(n),r=HE(t,n);return MF(t,r,i),i}function MF(t,e,n){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Fn(n,l.path);let u=!1,h;if(z(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,r=r.concat(Ys(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=bF)u=!0,h="maxretry",r=r.concat(Ys(t.serverSyncTree_,l.currentWriteId,!0));else{const d=jE(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){Wc("transaction failed: Data returned ",f,l.path);let p=zt(f);typeof f=="object"&&f!=null&&ai(f,".priority")||(p=p.updatePriority(d.getPriority()));const m=l.currentWriteId,y=PE(t),w=sF(p,d,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=w,l.currentWriteId=CF(t),o.splice(o.indexOf(m),1),r=r.concat(GD(t.serverSyncTree_,l.path,w,l.currentWriteId,l.applyLocally)),r=r.concat(Ys(t.serverSyncTree_,m,!0))}else u=!0,h="nodata",r=r.concat(Ys(t.serverSyncTree_,l.currentWriteId,!0))}Kr(t.eventQueue_,n,r),r=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}zc(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)Hs(i[a]);Uf(t,t.transactionQueueTree_)}function BE(t,e){let n,i=t.transactionQueueTree_;for(n=Me(e);n!==null&&Js(i)===void 0;)i=Nf(i,n),e=mt(e),n=Me(e);return i}function HE(t,e){const n=[];return qE(t,e,n),n.sort((i,r)=>i.order-r.order),n}function qE(t,e,n){const i=Js(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);qc(e,r=>{qE(t,r,n)})}function zc(t,e){const n=Js(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,TE(e,n.length>0?n:void 0)}qc(e,i=>{zc(t,i)})}function PF(t,e){const n=Aa(BE(t,e)),i=Nf(t.transactionQueueTree_,e);return aF(i,r=>{Vf(t,r)}),Vf(t,i),SE(i,r=>{Vf(t,r)}),n}function Vf(t,e){const n=Js(e);if(n){const i=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(z(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(z(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(Ys(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?TE(e,void 0):n.length=s+1,Kr(t.eventQueue_,Aa(e),r);for(let o=0;o<i.length;o++)Hs(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function FF(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Wn(`Invalid query segment '${n}' in query '${t}'`)}return e}const WE=function(t,e){const n=UF(t),i=n.namespace;n.domain==="firebase.com"&&Vr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Vr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||VM();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ZM(n.host,n.secure,i,e,r,"",i!==n.subdomain),path:new ut(n.pathString)}},UF=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(r=DF(t.substring(u,h)));const d=FF(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=i}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Qt(this.snapshot.exportVal())}}class zE{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Li;return AF(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Gc("OnDisconnect.remove",this._path);const e=new Li;return UE(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Gc("OnDisconnect.set",this._path),OE("OnDisconnect.set",e,this._path,!1);const n=new Li;return UE(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Gc("OnDisconnect.setWithPriority",this._path),OE("OnDisconnect.setWithPriority",e,this._path,!1),pF("OnDisconnect.setWithPriority",n,!1);const i=new Li;return kF(this._repo,this._path,e,n,i.wrapCallback(()=>{})),i.promise}update(e){Gc("OnDisconnect.update",this._path),fF("OnDisconnect.update",e,this._path,!1);const n=new Li;return OF(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return De(this._path)?null:ef(this._path)}get ref(){return new ki(this._repo,this._path)}get _queryIdentifier(){const e=Kb(this._queryParams),n=Wd(e);return n==="{}"?"default":n}get _queryObject(){return Kb(this._queryParams)}isEqual(e){if(e=lt(e),!(e instanceof jf))return!1;const n=this._repo===e._repo,i=tf(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+TP(this._path)}}class ki extends jf{constructor(e,n){super(e,n,new lf,!1)}get parent(){const e=Db(this._path);return e===null?null:new ki(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Oa{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ut(e),i=Kc(this.ref,e);return new Oa(this._node.getChild(n),i,At)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Oa(r,Kc(this.ref,i),At)))}hasChild(e){const n=new ut(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function RB(t,e){return t=lt(t),t._checkNotDeleted("ref"),e!==void 0?Kc(t._root,e):t._root}function Kc(t,e){return t=lt(t),Me(t._path)===null?mF("child","path",e,!1):RE("child","path",e,!1),new ki(t._repo,Lt(t._path,e))}function LB(t){return t=lt(t),new VF(t._repo,t._path)}class Bf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new GE("value",this,new Oa(e.snapshotNode,new ki(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zE(this,e,n):null}matches(e){return e instanceof Bf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Hf{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zE(this,e,n):null}createEvent(e,n){z(e.childName!=null,"Child events should have a childName.");const i=Kc(new ki(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new GE(e.type,this,new Oa(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Hf?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function jF(t,e,n,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){const l=n,c=(u,h)=>{xE(t._repo,t,a),l(u,h)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new xF(n,s||void 0),a=e==="value"?new Bf(o):new Hf(e,o);return RF(t._repo,t,a),()=>xE(t._repo,t,a)}function NB(t,e,n,i){return jF(t,"value",e,n,i)}FD(ki);HD(ki);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="FIREBASE_DATABASE_EMULATOR_HOST",qf={};let HF=!1;function qF(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||Vr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ln("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=WE(s,r),a=o.repoInfo,l,c;typeof process!="undefined"&&(c=process.env[BF]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=WE(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const u=r&&l?new Gd(Gd.OWNER):new YM(t.name,t.options,e);gF("Invalid Firebase Database URL",o),De(o.path)||Vr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=GF(a,t,u,new QM(t.name,n));return new zF(h,t)}function WF(t,e){const n=qf[e];(!n||n[t.key]!==t)&&Vr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),LF(t),delete n[t.key]}function GF(t,e,n,i){let r=qf[e.name];r||(r={},qf[e.name]=r);let s=r[t.toURLString()];return s&&Vr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new EF(t,HF,n,i),r[t.toURLString()]=s,s}class zF{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(IF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ki(this._repo,et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(WF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Vr("Cannot call "+e+" on a deleted database.")}}function MB(t=mo(),e){return ls(t,"database").getImmediate({identifier:e})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(t){PM(pr),Mi(new fi("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return qF(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Ln(tb,nb,t),Ln(tb,nb,"esm2017")}Si.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Si.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};KF();var Ra={exports:{}},Zs=typeof Reflect=="object"?Reflect:null,KE=Zs&&typeof Zs.apply=="function"?Zs.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},Xc;Zs&&typeof Zs.ownKeys=="function"?Xc=Zs.ownKeys:Object.getOwnPropertySymbols?Xc=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Xc=function(e){return Object.getOwnPropertyNames(e)};function XF(t){console&&console.warn&&console.warn(t)}var XE=Number.isNaN||function(e){return e!==e};function ft(){ft.init.call(this)}Ra.exports=ft;Ra.exports.once=ZF;ft.EventEmitter=ft;ft.prototype._events=void 0;ft.prototype._eventsCount=0;ft.prototype._maxListeners=void 0;var QE=10;function Qc(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ft,"defaultMaxListeners",{enumerable:!0,get:function(){return QE},set:function(t){if(typeof t!="number"||t<0||XE(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");QE=t}});ft.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ft.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||XE(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function YE(t){return t._maxListeners===void 0?ft.defaultMaxListeners:t._maxListeners}ft.prototype.getMaxListeners=function(){return YE(this)};ft.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")KE(l,this,n);else for(var c=l.length,u=tI(l,c),i=0;i<c;++i)KE(u[i],this,n);return!0};function JE(t,e,n,i){var r,s,o;if(Qc(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=YE(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,XF(a)}return t}ft.prototype.addListener=function(e,n){return JE(this,e,n,!1)};ft.prototype.on=ft.prototype.addListener;ft.prototype.prependListener=function(e,n){return JE(this,e,n,!0)};function QF(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ZE(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=QF.bind(i);return r.listener=n,i.wrapFn=r,r}ft.prototype.once=function(e,n){return Qc(n),this.on(e,ZE(this,e,n)),this};ft.prototype.prependOnceListener=function(e,n){return Qc(n),this.prependListener(e,ZE(this,e,n)),this};ft.prototype.removeListener=function(e,n){var i,r,s,o,a;if(Qc(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount==0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():YF(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};ft.prototype.off=ft.prototype.removeListener;ft.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function $E(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?JF(r):tI(r,r.length)}ft.prototype.listeners=function(e){return $E(this,e,!0)};ft.prototype.rawListeners=function(e){return $E(this,e,!1)};ft.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):eI.call(t,e)};ft.prototype.listenerCount=eI;function eI(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ft.prototype.eventNames=function(){return this._eventsCount>0?Xc(this._events):[]};function tI(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function YF(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function JF(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function ZF(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}nI(t,e,s,{once:!0}),e!=="error"&&$F(t,r,{once:!0})})}function $F(t,e,n){typeof t.on=="function"&&nI(t,"error",e,n)}function nI(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Yc=Ra.exports,e2=function(t){if(Array.isArray(t))return t},t2=function(t,e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(l){r=!0,s=l}finally{try{i||a.return==null||a.return()}finally{if(r)throw s}}return n}},iI=function(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},n2=function(t,e){if(t){if(typeof t=="string")return iI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iI(t,e):void 0}},i2=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},r2=function(t,e){return e2(t)||t2(t,e)||n2(t,e)||i2()},s2=function(t,e){if(t==null)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r},o2=function(t,e){if(t==null)return{};var n,i,r=s2(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r},Jc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function er(t,e){return t(e={exports:{}},e.exports),e.exports}var re=er(function(t){var e=function(n){var i,r=Object.prototype,s=r.hasOwnProperty,o=typeof Symbol=="function"?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(A,S,R){return Object.defineProperty(A,S,{value:R,enumerable:!0,configurable:!0,writable:!0}),A[S]}try{u({},"")}catch{u=function(S,R,V){return S[R]=V}}function h(A,S,R,V){var Q=S&&S.prototype instanceof w?S:w,he=Object.create(Q.prototype),W=new D(V||[]);return he._invoke=function(Pe,be,Ie){var Oe=f;return function(gt,G){if(Oe===g)throw new Error("Generator is already running");if(Oe===m){if(gt==="throw")throw G;return X()}for(Ie.method=gt,Ie.arg=G;;){var fe=Ie.delegate;if(fe){var Pt=k(fe,Ie);if(Pt){if(Pt===y)continue;return Pt}}if(Ie.method==="next")Ie.sent=Ie._sent=Ie.arg;else if(Ie.method==="throw"){if(Oe===f)throw Oe=m,Ie.arg;Ie.dispatchException(Ie.arg)}else Ie.method==="return"&&Ie.abrupt("return",Ie.arg);Oe=g;var Ot=d(Pe,be,Ie);if(Ot.type==="normal"){if(Oe=Ie.done?m:p,Ot.arg===y)continue;return{value:Ot.arg,done:Ie.done}}Ot.type==="throw"&&(Oe=m,Ie.method="throw",Ie.arg=Ot.arg)}}}(A,R,W),he}function d(A,S,R){try{return{type:"normal",arg:A.call(S,R)}}catch(V){return{type:"throw",arg:V}}}n.wrap=h;var f="suspendedStart",p="suspendedYield",g="executing",m="completed",y={};function w(){}function b(){}function v(){}var O={};O[a]=function(){return this};var C=Object.getPrototypeOf,_=C&&C(C(Y([])));_&&_!==r&&s.call(_,a)&&(O=_);var I=v.prototype=w.prototype=Object.create(O);function K(A){["next","throw","return"].forEach(function(S){u(A,S,function(R){return this._invoke(S,R)})})}function L(A,S){var R;this._invoke=function(V,Q){function he(){return new S(function(W,Pe){(function be(Ie,Oe,gt,G){var fe=d(A[Ie],A,Oe);if(fe.type!=="throw"){var Pt=fe.arg,Ot=Pt.value;return Ot&&typeof Ot=="object"&&s.call(Ot,"__await")?S.resolve(Ot.__await).then(function(q){be("next",q,gt,G)},function(q){be("throw",q,gt,G)}):S.resolve(Ot).then(function(q){Pt.value=q,gt(Pt)},function(q){return be("throw",q,gt,G)})}G(fe.arg)})(V,Q,W,Pe)})}return R=R?R.then(he,he):he()}}function k(A,S){var R=A.iterator[S.method];if(R===i){if(S.delegate=null,S.method==="throw"){if(A.iterator.return&&(S.method="return",S.arg=i,k(A,S),S.method==="throw"))return y;S.method="throw",S.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var V=d(R,A.iterator,S.arg);if(V.type==="throw")return S.method="throw",S.arg=V.arg,S.delegate=null,y;var Q=V.arg;return Q?Q.done?(S[A.resultName]=Q.value,S.next=A.nextLoc,S.method!=="return"&&(S.method="next",S.arg=i),S.delegate=null,y):Q:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,y)}function M(A){var S={tryLoc:A[0]};1 in A&&(S.catchLoc=A[1]),2 in A&&(S.finallyLoc=A[2],S.afterLoc=A[3]),this.tryEntries.push(S)}function E(A){var S=A.completion||{};S.type="normal",delete S.arg,A.completion=S}function D(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(M,this),this.reset(!0)}function Y(A){if(A){var S=A[a];if(S)return S.call(A);if(typeof A.next=="function")return A;if(!isNaN(A.length)){var R=-1,V=function Q(){for(;++R<A.length;)if(s.call(A,R))return Q.value=A[R],Q.done=!1,Q;return Q.value=i,Q.done=!0,Q};return V.next=V}}return{next:X}}function X(){return{value:i,done:!0}}return b.prototype=I.constructor=v,v.constructor=b,b.displayName=u(v,c,"GeneratorFunction"),n.isGeneratorFunction=function(A){var S=typeof A=="function"&&A.constructor;return!!S&&(S===b||(S.displayName||S.name)==="GeneratorFunction")},n.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,v):(A.__proto__=v,u(A,c,"GeneratorFunction")),A.prototype=Object.create(I),A},n.awrap=function(A){return{__await:A}},K(L.prototype),L.prototype[l]=function(){return this},n.AsyncIterator=L,n.async=function(A,S,R,V,Q){Q===void 0&&(Q=Promise);var he=new L(h(A,S,R,V),Q);return n.isGeneratorFunction(S)?he:he.next().then(function(W){return W.done?W.value:he.next()})},K(I),u(I,c,"Generator"),I[a]=function(){return this},I.toString=function(){return"[object Generator]"},n.keys=function(A){var S=[];for(var R in A)S.push(R);return S.reverse(),function V(){for(;S.length;){var Q=S.pop();if(Q in A)return V.value=Q,V.done=!1,V}return V.done=!0,V}},n.values=Y,D.prototype={constructor:D,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(E),!A)for(var S in this)S.charAt(0)==="t"&&s.call(this,S)&&!isNaN(+S.slice(1))&&(this[S]=i)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var S=this;function R(be,Ie){return he.type="throw",he.arg=A,S.next=be,Ie&&(S.method="next",S.arg=i),!!Ie}for(var V=this.tryEntries.length-1;V>=0;--V){var Q=this.tryEntries[V],he=Q.completion;if(Q.tryLoc==="root")return R("end");if(Q.tryLoc<=this.prev){var W=s.call(Q,"catchLoc"),Pe=s.call(Q,"finallyLoc");if(W&&Pe){if(this.prev<Q.catchLoc)return R(Q.catchLoc,!0);if(this.prev<Q.finallyLoc)return R(Q.finallyLoc)}else if(W){if(this.prev<Q.catchLoc)return R(Q.catchLoc,!0)}else{if(!Pe)throw new Error("try statement without catch or finally");if(this.prev<Q.finallyLoc)return R(Q.finallyLoc)}}}},abrupt:function(A,S){for(var R=this.tryEntries.length-1;R>=0;--R){var V=this.tryEntries[R];if(V.tryLoc<=this.prev&&s.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var Q=V;break}}Q&&(A==="break"||A==="continue")&&Q.tryLoc<=S&&S<=Q.finallyLoc&&(Q=null);var he=Q?Q.completion:{};return he.type=A,he.arg=S,Q?(this.method="next",this.next=Q.finallyLoc,y):this.complete(he)},complete:function(A,S){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&S&&(this.next=S),y},finish:function(A){for(var S=this.tryEntries.length-1;S>=0;--S){var R=this.tryEntries[S];if(R.finallyLoc===A)return this.complete(R.completion,R.afterLoc),E(R),y}},catch:function(A){for(var S=this.tryEntries.length-1;S>=0;--S){var R=this.tryEntries[S];if(R.tryLoc===A){var V=R.completion;if(V.type==="throw"){var Q=V.arg;E(R)}return Q}}throw new Error("illegal catch attempt")},delegateYield:function(A,S,R){return this.delegate={iterator:Y(A),resultName:S,nextLoc:R},this.method==="next"&&(this.arg=i),y}},n}(t.exports);try{regeneratorRuntime=e}catch{Function("r","regeneratorRuntime = r")(e)}});function rI(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(i,r)}var tt=function(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function o(l){rI(s,i,r,o,a,"next",l)}function a(l){rI(s,i,r,o,a,"throw",l)}o(void 0)})}},tr=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Zc=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};function sI(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var nr=function(t,e,n){return e&&sI(t.prototype,e),n&&sI(t,n),t},Wf=er(function(t){function e(n,i){return t.exports=e=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},e(n,i)}t.exports=e}),$c=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wf(t,e)},Yn=er(function(t){function e(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t.exports=e=function(i){return typeof i}:t.exports=e=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e(n)}t.exports=e}),eu=function(t,e){return!e||Yn(e)!=="object"&&typeof e!="function"?Zc(t):e},Oi=er(function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},e(n)}t.exports=e}),tu=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},a2=typeof Map=="function",l2=typeof Set=="function",c2=typeof WeakSet=="function",oI=Object.keys,aI=function(t,e){return t&&typeof t=="object"&&e.add(t)},lI=function(t,e,n,i){for(var r,s=0;s<t.length;s++)if(n((r=t[s])[0],e[0],i)&&n(r[1],e[1],i))return!0;return!1},Gf=function(t,e,n,i){for(var r=0;r<t.length;r++)if(n(t[r],e,i))return!0;return!1},La=function(t,e){return t===e||t!=t&&e!=e},cI=function(t){return t.constructor===Object},uI=function(t){return typeof t.then=="function"},hI=function(t){return!(!t.$$typeof||!t._store)},dI=function(t){return function(e){var n=t||e;return function(i,r,s){s===void 0&&(s=c2?new WeakSet:Object.create({_values:[],add:function(l){this._values.push(l)},has:function(l){return!!~this._values.indexOf(l)}}));var o=s.has(i),a=s.has(r);return o||a?o&&a:(aI(i,s),aI(r,s),n(i,r,s))}}},fI=function(t){var e=[];return t.forEach(function(n,i){return e.push([i,n])}),e},pI=function(t){var e=[];return t.forEach(function(n){return e.push(n)}),e},u2=function(t,e,n,i){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e[r],i))return!1;return!0},h2=function(t,e,n,i){if(t.size!==e.size)return!1;for(var r=fI(t),s=fI(e),o=0;o<r.length;o++)if(!lI(s,r[o],n,i)||!lI(r,s[o],n,i))return!1;return!0},mI=function(t,e,n,i){var r,s=oI(t),o=oI(e);if(s.length!==o.length)return!1;for(var a=0;a<s.length;a++)if(r=s[a],!Gf(o,r,La)||(r!=="_owner"||!hI(t)||!hI(e))&&!n(t[r],e[r],i))return!1;return!0},d2=function(t,e){return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.unicode===e.unicode&&t.sticky===e.sticky&&t.lastIndex===e.lastIndex},f2=function(t,e,n,i){if(t.size!==e.size)return!1;for(var r=pI(t),s=pI(e),o=0;o<r.length;o++)if(!Gf(s,r[o],n,i)||!Gf(r,s[o],n,i))return!1;return!0},gI=Array.isArray,nu=function(t){var e=typeof t=="function"?t(n):n;function n(i,r,s){if(La(i,r))return!0;var o=typeof i;if(o!==typeof r||o!=="object"||!i||!r)return!1;if(cI(i)&&cI(r))return mI(i,r,e,s);var a=gI(i),l=gI(r);if(a||l)return a===l&&u2(i,r,e,s);var c=i instanceof Date,u=r instanceof Date;if(c||u)return c===u&&La(i.getTime(),r.getTime());var h=i instanceof RegExp,d=r instanceof RegExp;if(h||d)return h===d&&d2(i,r);if(uI(i)||uI(r))return i===r;if(a2){var f=i instanceof Map,p=r instanceof Map;if(f||p)return f===p&&h2(i,r,e,s)}if(l2){var g=i instanceof Set,m=r instanceof Set;if(g||m)return g===m&&f2(i,r,e,s)}return mI(i,r,e,s)}return n},iu=(nu(dI()),nu(dI(La)),nu());nu(function(){return La});const p2={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},_I={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Nt={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Sn={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ir={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class B{static getFirstMatch(e,n){const i=n.match(e);return i&&i.length>0&&i[1]||""}static getSecondMatch(e,n){const i=n.match(e);return i&&i.length>1&&i[2]||""}static matchAndReturnConst(e,n,i){if(e.test(n))return i}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(i=>parseInt(i,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(i=>parseInt(i,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,i=!1){const r=B.getVersionPrecision(e),s=B.getVersionPrecision(n);let o=Math.max(r,s),a=0;const l=B.map([e,n],c=>{const u=o-B.getVersionPrecision(c),h=c+new Array(u+1).join(".0");return B.map(h.split("."),d=>new Array(20-d.length).join("0")+d).reverse()});for(i&&(a=o-Math.min(r,s)),o-=1;o>=a;){if(l[0][o]>l[1][o])return 1;if(l[0][o]===l[1][o]){if(o===a)return 0;o-=1}else if(l[0][o]<l[1][o])return-1}}static map(e,n){const i=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(r=0;r<e.length;r+=1)i.push(n(e[r]));return i}static find(e,n){let i,r;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(i=0,r=e.length;i<r;i+=1){const s=e[i];if(n(s,i))return s}}static assign(e,...n){const i=e;let r,s;if(Object.assign)return Object.assign(e,...n);for(r=0,s=n.length;r<s;r+=1){const o=n[r];typeof o=="object"&&o!==null&&Object.keys(o).forEach(a=>{i[a]=o[a]})}return e}static getBrowserAlias(e){return p2[e]}static getBrowserTypeByAlias(e){return _I[e]||""}}const Et=/version\/(\d+(\.?_?\d+)+)/i,m2=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=B.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=B.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=B.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=B.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=B.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=B.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=B.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=B.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=B.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=B.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=B.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=B.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=B.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=B.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=B.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=B.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=B.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=B.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=B.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=B.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=B.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=B.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=B.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=B.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=B.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:B.getFirstMatch(e,t),version:B.getSecondMatch(e,t)}}}];var g2=[{test:[/Roku\/DVP/],describe(t){const e=B.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:Sn.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=B.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:Sn.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=B.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=B.getWindowsVersionName(e);return{name:Sn.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe(t){const e=B.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return{name:Sn.iOS,version:e}}},{test:[/macintosh/i],describe(t){const e=B.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=B.getMacOSVersionName(e),i={name:Sn.MacOS,version:e};return n&&(i.versionName=n),i}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=B.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:Sn.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=B.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=B.getAndroidVersionName(e),i={name:Sn.Android,version:e};return n&&(i.versionName=n),i}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=B.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:Sn.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=B.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||B.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||B.getFirstMatch(/\bbb(\d+)/i,t);return{name:Sn.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=B.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:Sn.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=B.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:Sn.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:Sn.Linux})},{test:[/CrOS/],describe:()=>({name:Sn.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=B.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:Sn.PlayStation4,version:e}}}],_2=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=B.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:Nt.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Nt.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Nt.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:()=>({type:Nt.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Nt.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Nt.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Nt.tablet})},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=B.getFirstMatch(/(ipod|iphone)/i,t);return{type:Nt.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Nt.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Nt.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:Nt.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:Nt.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:Nt.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:Nt.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:Nt.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:Nt.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:Nt.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:Nt.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:Nt.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:Nt.tv})}],v2=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:ir.Blink};const e=B.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:ir.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:ir.Trident},n=B.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:ir.Presto},n=B.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:ir.Gecko},n=B.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:ir.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:ir.WebKit},n=B.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class vI{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=B.find(m2,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=B.find(g2,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=B.find(_2,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=B.find(v2,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return B.assign({},this.parsedResult)}satisfies(e){const n={};let i=0;const r={};let s=0;if(Object.keys(e).forEach(o=>{const a=e[o];typeof a=="string"?(r[o]=a,s+=1):typeof a=="object"&&(n[o]=a,i+=1)}),i>0){const o=Object.keys(n),a=B.find(o,c=>this.isOS(c));if(a){const c=this.satisfies(n[a]);if(c!==void 0)return c}const l=B.find(o,c=>this.isPlatform(c));if(l){const c=this.satisfies(n[l]);if(c!==void 0)return c}}if(s>0){const o=Object.keys(r),a=B.find(o,l=>this.isBrowser(l,!0));if(a!==void 0)return this.compareVersion(r[a])}}isBrowser(e,n=!1){const i=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const s=B.getBrowserTypeByAlias(r);return n&&s&&(r=s.toLowerCase()),r===i}compareVersion(e){let n=[0],i=e,r=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(i=e.substr(1),e[1]==="="?(r=!0,i=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?i=e.substr(1):e[0]==="~"&&(r=!0,i=e.substr(1)),n.indexOf(B.compareVersions(s,i,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}var yI="new",zf="loading",ru="joining-meeting",_n="joined-meeting",Xr="left-meeting",Qr="error",bI="unknown",y2="base",b2="*",$s="fullscreen",eo="exited-fullscreen",su="daily-custom-track",Kf={NONE:"none",BGBLUR:"background-blur"};function ui(){return!en()&&typeof window!="undefined"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function en(){return typeof navigator!="undefined"&&navigator.product&&navigator.product==="ReactNative"}function EI(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function E2(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&function(t,e){if(!t||!e)return!1;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!1}(ou(),function(){switch(ou()){case"Chrome":return wI();case"Safari":return CI();case"Firefox":return SI();case"Edge":return function(){var t=0,e=0;if(typeof window!="undefined"){var n=ui(),i=n.match(/Edge\/(\d+).(\d+)/);if(i)try{t=parseInt(i[1]),e=parseInt(i[2])}catch{}}return{major:t,minor:e}}()}}())}var I2=["Chrome","Firefox"];function w2(){return!en()&&!function(){var t=ui();if(t.match(/Mobi/)||t.match(/Android/)||ui().match(/DailyAnd\//))return!0}()&&I2.includes(ou())}function Xf(){return!!en()||II()}function II(){return EI()&&!function(){var t,e=ou();if(!ui())return!0;switch(e){case"Chrome":return(t=wI()).major&&t.major>0&&t.major<61;case"Firefox":return(t=SI()).major<78;case"Safari":return(t=CI()).major<12;default:return!0}}()}function ou(){if(typeof window!="undefined"){var t=ui();return TI()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function wI(){var t=0,e=0,n=0,i=0,r=!1;if(typeof window!="undefined"){var s=ui(),o=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(o)try{t=parseInt(o[1]),e=parseInt(o[2]),n=parseInt(o[3]),i=parseInt(o[4]),r=s.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:n,patch:i,opera:r}}function TI(){return!!ui().match(/iPad|iPhone|iPod/i)&&EI()}function CI(){var t=0,e=0,n=0;if(typeof window!="undefined"){var i=ui().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(i)try{t=parseInt(i[1]),e=parseInt(i[2]),n=parseInt(i[4])}catch{}else TI()&&(t=14,e=0,n=3)}return{major:t,minor:e,point:n}}function SI(){var t=0,e=0;if(typeof window!="undefined"){var n=ui().match(/Firefox\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}function Qf(){return Date.now()+Math.random().toString()}function Na(){throw new Error("Method must be implemented in subclass")}function Ma(t){var e=t?new URL(t).origin:null;return!e||e.match(/https:\/\/[^.]+\.daily\.co/)?Xf()?"https://c.daily.co/static/call-machine-object-bundle.js":"https://c.daily.co/static/call-machine-object-nosfu-bundle.js":(e||(console.warn("No baseUrl provided for call object bundle. Defaulting to production CDN..."),e="https://c.daily.co"),Xf()?"".concat(e,"/static/call-machine-object-bundle.js"):"".concat(e,"/static/call-machine-object-nosfu-bundle.js"))}var AI=function(){function t(){tr(this,t)}return nr(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,i){Na()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,i){Na()}},{key:"sendMessageToCallMachine",value:function(e,n,i,r){Na()}},{key:"sendMessageToDailyJs",value:function(e,n,i){Na()}},{key:"removeListener",value:function(e){Na()}}]),t}();function kI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Yf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kI(Object(n),!0).forEach(function(i){tu(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function T2(t){var e=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Oi(t);if(e){var r=Oi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return eu(this,n)}}var C2=function(t){$c(n,AI);var e=T2(n);function n(){var i;return tr(this,n),(i=e.call(this))._wrappedListeners={},i._messageCallbacks={},i}return nr(n,[{key:"addListenerForMessagesFromCallMachine",value:function(i,r,s){var o=this,a=function(l){if(l.data&&l.data.what==="iframe-call-message"&&(!l.data.callFrameId||l.data.callFrameId===r)&&(!l.data.from||l.data.from!=="module")){var c=Yf({},l.data);if(delete c.from,c.callbackStamp&&o._messageCallbacks[c.callbackStamp]){var u=c.callbackStamp;o._messageCallbacks[u].call(s,c),delete o._messageCallbacks[u]}delete c.what,delete c.callbackStamp,i.call(s,c)}};this._wrappedListeners[i]=a,window.addEventListener("message",a)}},{key:"addListenerForMessagesFromDailyJs",value:function(i,r,s){var o=function(a){if(!(!a.data||a.data.what!=="iframe-call-message"||!a.data.action||a.data.from&&a.data.from!=="module"||a.data.callFrameId&&r&&a.data.callFrameId!==r)){var l=a.data;i.call(s,l)}};this._wrappedListeners[i]=o,window.addEventListener("message",o)}},{key:"sendMessageToCallMachine",value:function(i,r,s,o){var a=Yf({},i);if(a.what="iframe-call-message",a.from="module",a.callFrameId=o,r){var l=Qf();this._messageCallbacks[l]=r,a.callbackStamp=l}(s?s.contentWindow:window).postMessage(a,"*")}},{key:"sendMessageToDailyJs",value:function(i,r,s){i.what="iframe-call-message",i.callFrameId=s,i.from="embedded",(r?window:window.parent).postMessage(i,"*")}},{key:"removeListener",value:function(i){var r=this._wrappedListeners[i];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[i])}},{key:"forwardPackagedMessageToCallMachine",value:function(i,r,s){var o=Yf({},i);o.callFrameId=s,(r?r.contentWindow:window).postMessage(o,"*")}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(i,r){var s=function(o){if(o.data&&o.data.what==="iframe-call-message"&&(!o.data.callFrameId||o.data.callFrameId===r)&&(!o.data.from||o.data.from!=="module")){var a=o.data;i(a)}};return this._wrappedListeners[i]=s,window.addEventListener("message",s),i}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(i){var r=this._wrappedListeners[i];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[i])}}]),n}();function S2(t){var e=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Oi(t);if(e){var r=Oi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return eu(this,n)}}global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new Ra.exports.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new Ra.exports.EventEmitter;var A2=function(t){$c(n,AI);var e=S2(n);function n(){var i;return tr(this,n),(i=e.call(this))._wrappedListeners={},i._messageCallbacks={},i}return nr(n,[{key:"addListenerForMessagesFromCallMachine",value:function(i,r,s){this._addListener(i,global.callMachineToDailyJsEmitter,s,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(i,r,s){this._addListener(i,global.dailyJsToCallMachineEmitter,s,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(i,r){this._sendMessage(i,global.dailyJsToCallMachineEmitter,"sending message to call machine",r)}},{key:"sendMessageToDailyJs",value:function(i){this._sendMessage(i,global.callMachineToDailyJsEmitter,"sending message to daily-js")}},{key:"removeListener",value:function(i){var r=this._wrappedListeners[i];r&&(global.callMachineToDailyJsEmitter.removeListener("message",r),global.dailyJsToCallMachineEmitter.removeListener("message",r),delete this._wrappedListeners[i])}},{key:"_addListener",value:function(i,r,s,o){var a=this,l=function(c){if(c.callbackStamp&&a._messageCallbacks[c.callbackStamp]){var u=c.callbackStamp;a._messageCallbacks[u].call(s,c),delete a._messageCallbacks[u]}i.call(s,c)};this._wrappedListeners[i]=l,r.addListener("message",l)}},{key:"_sendMessage",value:function(i,r,s,o){if(o){var a=Qf();this._messageCallbacks[a]=o,i.callbackStamp=a}r.emit("message",i)}}]),n}(),k2=function(t){return Function.toString.call(t).indexOf("[native code]")!==-1},O2=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}},R2=er(function(t){function e(n,i,r){return O2()?t.exports=e=Reflect.construct:t.exports=e=function(s,o,a){var l=[null];l.push.apply(l,o);var c=new(Function.bind.apply(s,l));return a&&Wf(c,a.prototype),c},e.apply(null,arguments)}t.exports=e}),L2=er(function(t){function e(n){var i=typeof Map=="function"?new Map:void 0;return t.exports=e=function(r){if(r===null||!k2(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(r))return i.get(r);i.set(r,s)}function s(){return R2(r,arguments,Oi(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Wf(s,r)},e(n)}t.exports=e});function N2(t){var e=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Oi(t);if(e){var r=Oi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return eu(this,n)}}var M2=function(){function t(){tr(this,t),this._currentLoad=null}return nr(t,[{key:"load",value:function(e,n,i,r){if(this.loaded)return window._dailyCallObjectSetup(n),void i(!0);(function(s){window._dailyConfig||(window._dailyConfig={}),window._dailyConfig.callFrameId=s})(n),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new D2(e,n,function(){i(!1)},r),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel()}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),t}(),P2=3,D2=function(){function t(e,n,i,r){tr(this,t),this._attemptsRemaining=P2,this._currentAttempt=null,this._meetingOrBaseUrl=e,this._callFrameId=n,this._successCallback=i,this._failureCallback=r}return nr(t,[{key:"start",value:function(){var e=this;this._currentAttempt||(this._currentAttempt=new OI(this._meetingOrBaseUrl,this._callFrameId,this._successCallback,function n(i){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(i,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout(function(){e._currentAttempt.cancelled||(e._currentAttempt=new OI(e._meetingOrBaseUrl,e._callFrameId,e._successCallback,n),e._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),t}(),Jf=function(t){$c(n,t);var e=N2(n);function n(){return tr(this,n),e.apply(this,arguments)}return n}(L2(Error)),OI=function(){function t(e,n,i,r){tr(this,t),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache!="undefined"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._meetingOrBaseUrl=e,this._callFrameId=n,this._successCallback=i,this._failureCallback=r}return nr(t,[{key:"start",value:function(){var e=tt(re.mark(function n(){var i;return re.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=Ma(this._meetingOrBaseUrl),r.next=3,this._tryLoadFromIOSCache(i);case 3:!r.sent&&this._loadFromNetwork(i);case 5:case"end":return r.stop()}},n,this)}));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:function(){var e=tt(re.mark(function n(i){var r;return re.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this._iosCache){s.next=2;break}return s.abrupt("return",!1);case 2:return s.prev=2,s.next=5,this._iosCache.get(i);case 5:if(r=s.sent,!this.cancelled){s.next=8;break}return s.abrupt("return",!0);case 8:if(r){s.next=10;break}return s.abrupt("return",!1);case 10:if(r.code){s.next=13;break}return this._refetchHeaders=r.refetchHeaders,s.abrupt("return",!1);case 13:return Function('"use strict";'+r.code)(),this.succeeded=!0,this._successCallback(),s.abrupt("return",!0);case 19:return s.prev=19,s.t0=s.catch(2),s.abrupt("return",!1);case 22:case"end":return s.stop()}},n,this,[[2,19]])}));return function(n){return e.apply(this,arguments)}}()},{key:"_loadFromNetwork",value:function(){var e=tt(re.mark(function n(i){var r,s,o,a=this;return re.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._networkTimeout=setTimeout(function(){a._networkTimedOut=!0,a._failureCallback("Timed out (>".concat(2e4," ms) when loading call object bundle ").concat(i))},2e4),l.prev=1,r=this._refetchHeaders?{headers:this._refetchHeaders}:{},l.next=5,fetch(i,r);case 5:if(s=l.sent,clearTimeout(this._networkTimeout),!this.cancelled&&!this._networkTimedOut){l.next=9;break}throw new Jf;case 9:return l.next=11,this._getBundleCodeFromResponse(i,s);case 11:if(o=l.sent,!this.cancelled){l.next=14;break}throw new Jf;case 14:Function('"use strict";'+o)(),this._iosCache&&this._iosCache.set(i,o,s.headers),this.succeeded=!0,this._successCallback(),l.next=26;break;case 20:if(l.prev=20,l.t0=l.catch(1),clearTimeout(this._networkTimeout),!(l.t0 instanceof Jf||this.cancelled||this._networkTimedOut)){l.next=25;break}return l.abrupt("return");case 25:this._failureCallback("Failed to load call object bundle ".concat(i,": ").concat(l.t0));case 26:case"end":return l.stop()}},n,this,[[1,20]])}));return function(n){return e.apply(this,arguments)}}()},{key:"_getBundleCodeFromResponse",value:function(){var e=tt(re.mark(function n(i,r){var s;return re.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!r.ok){o.next=4;break}return o.next=3,r.text();case 3:return o.abrupt("return",o.sent);case 4:if(!this._iosCache||r.status!==304){o.next=9;break}return o.next=7,this._iosCache.renew(i,r.headers);case 7:return s=o.sent,o.abrupt("return",s.code);case 9:throw new Error("Received ".concat(r.status," response"));case 10:case"end":return o.stop()}},n,this)}));return function(n,i){return e.apply(this,arguments)}}()}]),t}(),RI=function(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s},F2=function(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[t?a:++r];if(n(s[l],l,s)===!1)break}return e}}(),U2=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i},LI=typeof Jc=="object"&&Jc&&Jc.Object===Object&&Jc,x2=typeof self=="object"&&self&&self.Object===Object&&self,Ri=LI||x2||Function("return this")(),rr=Ri.Symbol,NI=Object.prototype,V2=NI.hasOwnProperty,j2=NI.toString,Pa=rr?rr.toStringTag:void 0,B2=function(t){var e=V2.call(t,Pa),n=t[Pa];try{t[Pa]=void 0;var i=!0}catch{}var r=j2.call(t);return i&&(e?t[Pa]=n:delete t[Pa]),r},H2=Object.prototype.toString,q2=function(t){return H2.call(t)},W2="[object Null]",G2="[object Undefined]",MI=rr?rr.toStringTag:void 0,to=function(t){return t==null?t===void 0?G2:W2:MI&&MI in Object(t)?B2(t):q2(t)},no=function(t){return t!=null&&typeof t=="object"},z2="[object Arguments]",PI=function(t){return no(t)&&to(t)==z2},DI=Object.prototype,K2=DI.hasOwnProperty,X2=DI.propertyIsEnumerable,FI=PI(function(){return arguments}())?PI:function(t){return no(t)&&K2.call(t,"callee")&&!X2.call(t,"callee")},Jn=Array.isArray,Q2=function(){return!1},Zf=er(function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n?Ri.Buffer:void 0,s=(r?r.isBuffer:void 0)||Q2;t.exports=s}),Y2=9007199254740991,J2=/^(?:0|[1-9]\d*)$/,UI=function(t,e){var n=typeof t;return!!(e=e==null?Y2:e)&&(n=="number"||n!="symbol"&&J2.test(t))&&t>-1&&t%1==0&&t<e},Z2=9007199254740991,$f=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Z2},Tt={};Tt["[object Float32Array]"]=Tt["[object Float64Array]"]=Tt["[object Int8Array]"]=Tt["[object Int16Array]"]=Tt["[object Int32Array]"]=Tt["[object Uint8Array]"]=Tt["[object Uint8ClampedArray]"]=Tt["[object Uint16Array]"]=Tt["[object Uint32Array]"]=!0,Tt["[object Arguments]"]=Tt["[object Array]"]=Tt["[object ArrayBuffer]"]=Tt["[object Boolean]"]=Tt["[object DataView]"]=Tt["[object Date]"]=Tt["[object Error]"]=Tt["[object Function]"]=Tt["[object Map]"]=Tt["[object Number]"]=Tt["[object Object]"]=Tt["[object RegExp]"]=Tt["[object Set]"]=Tt["[object String]"]=Tt["[object WeakMap]"]=!1;var $2=function(t){return no(t)&&$f(t.length)&&!!Tt[to(t)]},xI=function(t){return function(e){return t(e)}},VI=er(function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n&&LI.process,s=function(){try{var o=i&&i.require&&i.require("util").types;return o||r&&r.binding&&r.binding("util")}catch{}}();t.exports=s}),jI=VI&&VI.isTypedArray,BI=jI?xI(jI):$2,eU=Object.prototype.hasOwnProperty,tU=function(t,e){var n=Jn(t),i=!n&&FI(t),r=!n&&!i&&Zf(t),s=!n&&!i&&!r&&BI(t),o=n||i||r||s,a=o?U2(t.length,String):[],l=a.length;for(var c in t)!e&&!eU.call(t,c)||o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||UI(c,l))||a.push(c);return a},nU=Object.prototype,iU=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||nU)},rU=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),sU=Object.prototype.hasOwnProperty,oU=function(t){if(!iU(t))return rU(t);var e=[];for(var n in Object(t))sU.call(t,n)&&n!="constructor"&&e.push(n);return e},ep=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},aU="[object AsyncFunction]",lU="[object Function]",cU="[object GeneratorFunction]",uU="[object Proxy]",HI=function(t){if(!ep(t))return!1;var e=to(t);return e==lU||e==cU||e==aU||e==uU},tp=function(t){return t!=null&&$f(t.length)&&!HI(t)},np=function(t){return tp(t)?tU(t):oU(t)},qI=function(t,e){return function(n,i){if(n==null)return n;if(!tp(n))return t(n,i);for(var r=n.length,s=e?r:-1,o=Object(n);(e?s--:++s<r)&&i(o[s],s,o)!==!1;);return n}}(function(t,e){return t&&F2(t,e,np)}),hU=function(t,e){var n=[];return qI(t,function(i,r,s){e(i,r,s)&&n.push(i)}),n},dU=function(){this.__data__=[],this.size=0},WI=function(t,e){return t===e||t!=t&&e!=e},au=function(t,e){for(var n=t.length;n--;)if(WI(t[n][0],e))return n;return-1},fU=Array.prototype.splice,pU=function(t){var e=this.__data__,n=au(e,t);return!(n<0||(n==e.length-1?e.pop():fU.call(e,n,1),--this.size,0))},mU=function(t){var e=this.__data__,n=au(e,t);return n<0?void 0:e[n][1]},gU=function(t){return au(this.__data__,t)>-1},_U=function(t,e){var n=this.__data__,i=au(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};function io(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}io.prototype.clear=dU,io.prototype.delete=pU,io.prototype.get=mU,io.prototype.has=gU,io.prototype.set=_U;var lu=io,vU=function(){this.__data__=new lu,this.size=0},yU=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},bU=function(t){return this.__data__.get(t)},GI,EU=function(t){return this.__data__.has(t)},ip=Ri["__core-js_shared__"],zI=(GI=/[^.]+$/.exec(ip&&ip.keys&&ip.keys.IE_PROTO||""))?"Symbol(src)_1."+GI:"",IU=function(t){return!!zI&&zI in t},wU=Function.prototype.toString,Yr=function(t){if(t!=null){try{return wU.call(t)}catch{}try{return t+""}catch{}}return""},TU=/^\[object .+?Constructor\]$/,CU=Function.prototype,SU=Object.prototype,AU=CU.toString,kU=SU.hasOwnProperty,OU=RegExp("^"+AU.call(kU).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),RU=function(t){return!(!ep(t)||IU(t))&&(HI(t)?OU:TU).test(Yr(t))},LU=function(t,e){return t==null?void 0:t[e]},ro=function(t,e){var n=LU(t,e);return RU(n)?n:void 0},Da=ro(Ri,"Map"),Fa=ro(Object,"create"),NU=function(){this.__data__=Fa?Fa(null):{},this.size=0},MU=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},PU="__lodash_hash_undefined__",DU=Object.prototype.hasOwnProperty,FU=function(t){var e=this.__data__;if(Fa){var n=e[t];return n===PU?void 0:n}return DU.call(e,t)?e[t]:void 0},UU=Object.prototype.hasOwnProperty,xU=function(t){var e=this.__data__;return Fa?e[t]!==void 0:UU.call(e,t)},VU="__lodash_hash_undefined__",jU=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Fa&&e===void 0?VU:e,this};function so(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}so.prototype.clear=NU,so.prototype.delete=MU,so.prototype.get=FU,so.prototype.has=xU,so.prototype.set=jU;var KI=so,BU=function(){this.size=0,this.__data__={hash:new KI,map:new(Da||lu),string:new KI}},HU=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},cu=function(t,e){var n=t.__data__;return HU(e)?n[typeof e=="string"?"string":"hash"]:n.map},qU=function(t){var e=cu(this,t).delete(t);return this.size-=e?1:0,e},WU=function(t){return cu(this,t).get(t)},GU=function(t){return cu(this,t).has(t)},zU=function(t,e){var n=cu(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function oo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}oo.prototype.clear=BU,oo.prototype.delete=qU,oo.prototype.get=WU,oo.prototype.has=GU,oo.prototype.set=zU;var uu=oo,KU=200,XU=function(t,e){var n=this.__data__;if(n instanceof lu){var i=n.__data__;if(!Da||i.length<KU-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new uu(i)}return n.set(t,e),this.size=n.size,this};function ao(t){var e=this.__data__=new lu(t);this.size=e.size}ao.prototype.clear=vU,ao.prototype.delete=yU,ao.prototype.get=bU,ao.prototype.has=EU,ao.prototype.set=XU;var hu=ao,QU="__lodash_hash_undefined__",YU=function(t){return this.__data__.set(t,QU),this},JU=function(t){return this.__data__.has(t)};function du(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new uu;++e<n;)this.add(t[e])}du.prototype.add=du.prototype.push=YU,du.prototype.has=JU;var ZU=du,$U=function(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1},ex=function(t,e){return t.has(e)},tx=1,nx=2,XI=function(t,e,n,i,r,s){var o=n&tx,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var u=-1,h=!0,d=n&nx?new ZU:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var f=t[u],p=e[u];if(i)var g=o?i(p,f,u,e,t,s):i(f,p,u,t,e,s);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!$U(e,function(m,y){if(!ex(d,y)&&(f===m||r(f,m,n,i,s)))return d.push(y)})){h=!1;break}}else if(f!==p&&!r(f,p,n,i,s)){h=!1;break}}return s.delete(t),s.delete(e),h},QI=Ri.Uint8Array,ix=function(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n},rx=function(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n},sx=1,ox=2,ax="[object Boolean]",lx="[object Date]",cx="[object Error]",ux="[object Map]",hx="[object Number]",dx="[object RegExp]",fx="[object Set]",px="[object String]",mx="[object Symbol]",gx="[object ArrayBuffer]",_x="[object DataView]",YI=rr?rr.prototype:void 0,rp=YI?YI.valueOf:void 0,vx=function(t,e,n,i,r,s,o){switch(n){case _x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case gx:return!(t.byteLength!=e.byteLength||!s(new QI(t),new QI(e)));case ax:case lx:case hx:return WI(+t,+e);case cx:return t.name==e.name&&t.message==e.message;case dx:case px:return t==e+"";case ux:var a=ix;case fx:var l=i&sx;if(a||(a=rx),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=ox,o.set(t,e);var u=XI(a(t),a(e),i,r,s,o);return o.delete(t),u;case mx:if(rp)return rp.call(t)==rp.call(e)}return!1},yx=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t},bx=function(t,e,n){var i=e(t);return Jn(t)?i:yx(i,n(t))},Ex=function(){return[]},Ix=Object.prototype.propertyIsEnumerable,JI=Object.getOwnPropertySymbols,wx=JI?function(t){return t==null?[]:(t=Object(t),RI(JI(t),function(e){return Ix.call(t,e)}))}:Ex,ZI=function(t){return bx(t,np,wx)},Tx=1,Cx=Object.prototype.hasOwnProperty,Sx=function(t,e,n,i,r,s){var o=n&Tx,a=ZI(t),l=a.length;if(l!=ZI(e).length&&!o)return!1;for(var c=l;c--;){var u=a[c];if(!(o?u in e:Cx.call(e,u)))return!1}var h=s.get(t);if(h&&s.get(e))return h==e;var d=!0;s.set(t,e),s.set(e,t);for(var f=o;++c<l;){var p=t[u=a[c]],g=e[u];if(i)var m=o?i(g,p,u,e,t,s):i(p,g,u,t,e,s);if(!(m===void 0?p===g||r(p,g,n,i,s):m)){d=!1;break}f||(f=u=="constructor")}if(d&&!f){var y=t.constructor,w=e.constructor;y!=w&&"constructor"in t&&"constructor"in e&&!(typeof y=="function"&&y instanceof y&&typeof w=="function"&&w instanceof w)&&(d=!1)}return s.delete(t),s.delete(e),d},sp=ro(Ri,"DataView"),op=ro(Ri,"Promise"),ap=ro(Ri,"Set"),lp=ro(Ri,"WeakMap"),Ax=Yr(sp),kx=Yr(Da),Ox=Yr(op),Rx=Yr(ap),Lx=Yr(lp),Jr=to;(sp&&Jr(new sp(new ArrayBuffer(1)))!="[object DataView]"||Da&&Jr(new Da)!="[object Map]"||op&&Jr(op.resolve())!="[object Promise]"||ap&&Jr(new ap)!="[object Set]"||lp&&Jr(new lp)!="[object WeakMap]")&&(Jr=function(t){var e=to(t),n=e=="[object Object]"?t.constructor:void 0,i=n?Yr(n):"";if(i)switch(i){case Ax:return"[object DataView]";case kx:return"[object Map]";case Ox:return"[object Promise]";case Rx:return"[object Set]";case Lx:return"[object WeakMap]"}return e});var $I=Jr,Nx=1,e0="[object Arguments]",t0="[object Array]",fu="[object Object]",n0=Object.prototype.hasOwnProperty,Mx=function(t,e,n,i,r,s){var o=Jn(t),a=Jn(e),l=o?t0:$I(t),c=a?t0:$I(e),u=(l=l==e0?fu:l)==fu,h=(c=c==e0?fu:c)==fu,d=l==c;if(d&&Zf(t)){if(!Zf(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new hu),o||BI(t)?XI(t,e,n,i,r,s):vx(t,e,l,n,i,r,s);if(!(n&Nx)){var f=u&&n0.call(t,"__wrapped__"),p=h&&n0.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,m=p?e.value():e;return s||(s=new hu),r(g,m,n,i,s)}}return!!d&&(s||(s=new hu),Sx(t,e,n,i,r,s))},i0=function t(e,n,i,r,s){return e===n||(e==null||n==null||!no(e)&&!no(n)?e!=e&&n!=n:Mx(e,n,i,r,t,s))},Px=1,Dx=2,Fx=function(t,e,n,i){var r=n.length,s=r,o=!i;if(t==null)return!s;for(t=Object(t);r--;){var a=n[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<s;){var l=(a=n[r])[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var h=new hu;if(i)var d=i(c,u,l,t,e,h);if(!(d===void 0?i0(u,c,Px|Dx,i,h):d))return!1}}return!0},r0=function(t){return t==t&&!ep(t)},Ux=function(t){for(var e=np(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,r0(r)]}return e},s0=function(t,e){return function(n){return n!=null&&n[t]===e&&(e!==void 0||t in Object(n))}},xx=function(t){var e=Ux(t);return e.length==1&&e[0][2]?s0(e[0][0],e[0][1]):function(n){return n===t||Fx(n,t,e)}},Vx="[object Symbol]",Ua=function(t){return typeof t=="symbol"||no(t)&&to(t)==Vx},jx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bx=/^\w*$/,cp=function(t,e){if(Jn(t))return!1;var n=typeof t;return!(n!="number"&&n!="symbol"&&n!="boolean"&&t!=null&&!Ua(t))||Bx.test(t)||!jx.test(t)||e!=null&&t in Object(e)},Hx="Expected a function";function up(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Hx);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(up.Cache||uu),n}up.Cache=uu;var qx=up,Wx=500,Gx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zx=/\\(\\)?/g,Kx=function(t){var e=qx(t,function(i){return n.size===Wx&&n.clear(),i}),n=e.cache;return e}(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Gx,function(n,i,r,s){e.push(r?s.replace(zx,"$1"):i||n)}),e}),hp=function(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r},Xx=1/0,o0=rr?rr.prototype:void 0,a0=o0?o0.toString:void 0,Qx=function t(e){if(typeof e=="string")return e;if(Jn(e))return hp(e,t)+"";if(Ua(e))return a0?a0.call(e):"";var n=e+"";return n=="0"&&1/e==-Xx?"-0":n},Yx=function(t){return t==null?"":Qx(t)},l0=function(t,e){return Jn(t)?t:cp(t,e)?[t]:Kx(Yx(t))},Jx=1/0,pu=function(t){if(typeof t=="string"||Ua(t))return t;var e=t+"";return e=="0"&&1/t==-Jx?"-0":e},c0=function(t,e){for(var n=0,i=(e=l0(e,t)).length;t!=null&&n<i;)t=t[pu(e[n++])];return n&&n==i?t:void 0},Zx=function(t,e,n){var i=t==null?void 0:c0(t,e);return i===void 0?n:i},$x=function(t,e){return t!=null&&e in Object(t)},eV=function(t,e,n){for(var i=-1,r=(e=l0(e,t)).length,s=!1;++i<r;){var o=pu(e[i]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++i!=r?s:!!(r=t==null?0:t.length)&&$f(r)&&UI(o,r)&&(Jn(t)||FI(t))},tV=function(t,e){return t!=null&&eV(t,e,$x)},nV=1,iV=2,rV=function(t,e){return cp(t)&&r0(e)?s0(pu(t),e):function(n){var i=Zx(n,t);return i===void 0&&i===e?tV(n,t):i0(e,i,nV|iV)}},u0=function(t){return t},sV=function(t){return function(e){return e==null?void 0:e[t]}},oV=function(t){return function(e){return c0(e,t)}},aV=function(t){return cp(t)?sV(pu(t)):oV(t)},h0=function(t){return typeof t=="function"?t:t==null?u0:typeof t=="object"?Jn(t)?rV(t[0],t[1]):xx(t):aV(t)},d0=function(t,e){return(Jn(t)?RI:hU)(t,h0(e))},lV=function(t,e){var n=-1,i=tp(t)?Array(t.length):[];return qI(t,function(r,s,o){i[++n]=e(r,s,o)}),i},cV=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t},uV=function(t,e){if(t!==e){var n=t!==void 0,i=t===null,r=t==t,s=Ua(t),o=e!==void 0,a=e===null,l=e==e,c=Ua(e);if(!a&&!c&&!s&&t>e||s&&o&&l&&!a&&!c||i&&o&&l||!n&&l||!r)return 1;if(!i&&!s&&!c&&t<e||c&&n&&r&&!i&&!s||a&&n&&r||!o&&r||!l)return-1}return 0},hV=function(t,e,n){for(var i=-1,r=t.criteria,s=e.criteria,o=r.length,a=n.length;++i<o;){var l=uV(r[i],s[i]);if(l)return i>=a?l:l*(n[i]=="desc"?-1:1)}return t.index-e.index},dV=function(t,e,n){var i=-1;e=hp(e.length?e:[u0],xI(h0));var r=lV(t,function(s,o,a){return{criteria:hp(e,function(l){return l(s)}),index:++i,value:s}});return cV(r,function(s,o){return hV(s,o,n)})},f0=function(t,e,n,i){return t==null?[]:(Jn(e)||(e=e==null?[]:[e]),Jn(n=i?void 0:n)||(n=n==null?[]:[n]),dV(t,e,n))},mu=function(t,e,n){return pV(t.local,e,n)===!0},fV=function(t,e,n){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},xa=function(t,e,n,i){var r=mV(t,e,n,i);return r&&r.pendingTrack},pV=function(t,e,n){if(!t)return!1;var i=function(s){switch(s){case"avatar":return!0;case"staged":return s;default:return!!s}},r=t.public.subscribedTracks;return r&&r[e]?i(r[e][n]):!r||i(r.ALL)},mV=function(t,e,n,i){var r=f0(d0(t.streams,function(s){return s.participantId===e&&s.type===n&&s.pendingTrack&&s.pendingTrack.kind===i}),"starttime","desc");return r&&r[0]},gV=function(t,e){var n=t.local.public.customTracks;if(n&&n[e])return n[e].track},_V=function(t,e,n,i){var r="soup-"+n,s=f0(d0(t.streams,function(o){return o.participantId===e&&o.streamId===r&&o.pendingTrack&&o.pendingTrack.kind===i}),"starttime","desc");return s&&s[0]&&s[0].pendingTrack};function p0(t){for(var e=store.getState(),n=0,i=["cam","screen"];n<i.length;n++)for(var r=i[n],s=0,o=["video","audio"];s<o.length;s++){var a=o[s],l=r==="cam"?a:"screen".concat(a.charAt(0).toUpperCase()+a.slice(1)),c=t.tracks[l];if(c){var u=t.local?fV(e,r,a):xa(e,t.session_id,r,a);c.state==="playable"&&(c.track=u),c.persistentTrack=u}}}function m0(t){try{var e=store.getState();for(var n in t.tracks)if(!dp(n)){var i=t.tracks[n].kind;if(i){var r=t.local?gV(e,n,i):_V(e,t.session_id,n,i),s=t.tracks[n];r&&s&&s.state==="playable"&&(t.tracks[n].track=r)}else console.error("unknown type for custom track")}}catch(o){console.error(o)}}function dp(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function g0(t,e){var n=store.getState();if(t.local){if(t.audio)try{t.audioTrack=n.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=n.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=n.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=n.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var i=!0;try{var r=n.participants[t.session_id];r&&r.public&&r.public.rtcType&&r.public.rtcType.impl==="peer-to-peer"&&r.private&&!["connected","completed"].includes(r.private.peeringState)&&(i=!1)}catch(c){console.error(c)}if(!i)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(n.streams,t.audio&&mu(n,t.session_id,"cam-audio")){var s=xa(n,t.session_id,"cam","audio");s&&(e&&e.audioTrack&&e.audioTrack.id===s.id?t.audioTrack=s:s.muted||(t.audioTrack=s)),t.audioTrack||(t.audio=!1)}if(t.video&&mu(n,t.session_id,"cam-video")){var o=xa(n,t.session_id,"cam","video");o&&(e&&e.videoTrack&&e.videoTrack.id===o.id?t.videoTrack=o:o.muted||(t.videoTrack=o)),t.videoTrack||(t.video=!1)}if(t.screen&&mu(n,t.session_id,"screen-audio")){var a=xa(n,t.session_id,"screen","audio");a&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===a.id?t.screenAudioTrack=a:a.muted||(t.screenAudioTrack=a))}if(t.screen&&mu(n,t.session_id,"screen-video")){var l=xa(n,t.session_id,"screen","video");l&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===l.id?t.screenVideoTrack=l:l.muted||(t.screenVideoTrack=l))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(c){console.error("unexpected error matching up tracks",c)}}}function _0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_0(Object(n),!0).forEach(function(i){tu(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_0(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vV(t){var e=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Oi(t);if(e){var r=Oi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return eu(this,n)}}var v0="video",yV="voice",y0={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},Zr={url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t){return window._dailyConfig||(window._dailyConfig={}),window._dailyConfig.experimentalGetUserMediaConstraintsModify=t.experimentalGetUserMediaConstraintsModify,delete t.experimentalGetUserMediaConstraintsModify,!0}},reactNativeConfig:{validate:function(t){return function e(n,i){if(i===void 0)return!1;switch(Yn(i)){case"string":return Yn(n)===i;case"object":if(Yn(n)!=="object")return!1;for(var r in n)if(!e(n[r],i[r]))return!1;return!0;default:return!1}}(t,y0)},help:"reactNativeConfig should look like ".concat(JSON.stringify(y0),", all fields optional")},lang:{validate:function(t){return["de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, ru, sv, tr, user"},userName:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){return e._preloadCache.videoDeviceId=t,!0}},audioSource:{validate:function(t,e){return e._preloadCache.audioDeviceId=t,!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(i){for(var r=0,s=Object.keys(i);r<s.length;r++){var o=s[r];if(!e.includes(o))return console.error('unsupported color "'.concat(o,'". Valid colors: ').concat(e.join(", "))),!1;if(!i[o].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(o,' theme color should be provided in valid hex color format. Received: "').concat(i[o],'"')),!1}return!0};return Yn(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?n(t.light.colors)&&n(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):n(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return b0(t,{allowAllParticipantsKey:!1})},help:w0({allowAllParticipantsKey:!1})},inputSettings:{validate:function(t){return E0(t)},help:I0()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"}},gu={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var e in t.cam)if(e!=="div"&&e!=="video")return!1}if(t.screen){for(var e in t.screen)if(e!=="div"&&e!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e,n){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var i=[!0,!1,"staged"];if(i.includes(t)||!en()&&t==="avatar")return!0;for(var r in t)if(!["audio","video","screenAudio","screenVideo"].includes(r)||!i.includes(t[r]))return!1;return!0},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(en()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,eject:!0};function Va(t){var e={};for(var n in t)t[n]instanceof MediaStreamTrack?e[n]=su:(n==="dailyConfig"&&(t[n].modifyLocalSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyLocalSdpHook=t[n].modifyLocalSdpHook),delete t[n].modifyLocalSdpHook),t[n].modifyRemoteSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyRemoteSdpHook=t[n].modifyRemoteSdpHook),delete t[n].modifyRemoteSdpHook)),e[n]=t[n]);return e}function nt(){if(en())throw new Error("This daily-js method is not currently supported in React Native")}function fp(){if(!en())throw new Error("This daily-js method is only supported in React Native")}function b0(t,e){for(var n=e.allowAllParticipantsKey,i=function(h){var d=["local"];return n||d.push("*"),h&&!d.includes(h)},r=function(h){return!!(h.layer===void 0||Number.isInteger(h.layer)&&h.layer>=0||h.layer==="inherit")},s=function(h){return!!h&&!(h.video&&!r(h.video))&&!(h.screenVideo&&!r(h.screenVideo))},o=0,a=Object.entries(t);o<a.length;o++){var l=r2(a[o],2),c=l[0],u=l[1];if(!i(c)||!s(u))return!1}return!0}function E0(t){return Yn(t)==="object"&&!(!t.video||Yn(t.video)!=="object")&&!!function(e){if(!e||Yn(e)!=="object"||Object.keys(e).length===0||e.type&&(n=e.type,typeof n!="string"||!Object.values(Kf).includes(n)))return!1;var n;return!(e.publish!==void 0&&typeof e.publish!="boolean"||e.config&&(Yn(e.config)!=="object"||!function(i,r){var s=Object.keys(r);if(s.length===0)return!0;var o="invalid object in inputSettings -> video -> processor -> config";switch(i){case Kf.BGBLUR:if(s.length>1||s[0]!=="strength")throw new Error(o);if(typeof r.strength!="number"||r.strength<=0||r.strength>1||isNaN(r.strength))throw new Error("".concat(o,"; expected: {0 < strength <= 1}, got: ").concat(r.strength));default:return!0}}(e.type,e.config)))}(t.video.processor)}function I0(){var t=Object.values(Kf).join(" | ");return"inputSettings must be of the form: { video: { processor: [ ".concat(t," ] }, publish?: boolean, config?: {} }")}function w0(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(y2).concat(e?' | "'.concat(b2,'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}var PB=function(t){$c(n,Yc);var e=vV(n);function n(i){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(tr(this,n),r=e.call(this),tu(Zc(r),"handleNativeAppActiveStateChange",function(a){r.disableReactNativeAutoDeviceManagement("video")||(a?r.camUnmutedBeforeLosingNativeActiveState&&r.setLocalVideo(!0):(r.camUnmutedBeforeLosingNativeActiveState=r.localVideo(),r.camUnmutedBeforeLosingNativeActiveState&&r.setLocalVideo(!1)))}),tu(Zc(r),"handleNativeAudioFocusChange",function(a){r.disableReactNativeAutoDeviceManagement("audio")||(r._hasNativeAudioFocus=a,r.toggleParticipantAudioBasedOnNativeAudioFocus(),r._hasNativeAudioFocus?r.micUnmutedBeforeLosingNativeAudioFocus&&r.setLocalAudio(!0):(r.micUnmutedBeforeLosingNativeAudioFocus=r.localAudio(),r.setLocalAudio(!1)))}),s.dailyJsVersion="0.21.0",r._iframe=i,r._callObjectMode=s.layout==="none"&&!r._iframe,r._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null},r._callObjectMode&&(window._dailyPreloadCache=r._preloadCache),s.showLocalVideo!==void 0?r._callObjectMode?console.error("showLocalVideo is not available in call object mode"):r._showLocalVideo=!!s.showLocalVideo:r._showLocalVideo=!0,s.showParticipantsBar!==void 0?r._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):r._showParticipantsBar=!!s.showParticipantsBar:r._showParticipantsBar=!0,s.activeSpeakerMode!==void 0?r._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):r._activeSpeakerMode=!!s.activeSpeakerMode:r._activeSpeakerMode=!1,s.receiveSettings?r._callObjectMode?r._receiveSettings=s.receiveSettings:console.error("receiveSettings is only available in call object mode"):r._receiveSettings={},r._inputSettings={},s.inputSettings&&(r._inputSettings=s.inputSettings),r.validateProperties(s),r.properties=tn({},s),r._callObjectLoader=r._callObjectMode?new M2:null,r._meetingState=yI,r._isPreparingToJoin=!1,r._accessState={access:bI},r._nativeInCallAudioMode=v0,r._participants={},r._waitingParticipants={},r._inputEventsOn={},r._network={threshold:"good",quality:100},r._activeSpeaker={},r._callFrameId=Qf(),r._messageChannel=en()?new A2:new C2,r._iframe&&(r._iframe.requestFullscreen?r._iframe.addEventListener("fullscreenchange",function(a){document.fullscreenElement===r._iframe?(r.emit($s,{action:$s}),r.sendMessageToCallMachine({action:$s})):(r.emit(eo,{action:eo}),r.sendMessageToCallMachine({action:eo}))}):r._iframe.webkitRequestFullscreen&&r._iframe.addEventListener("webkitfullscreenchange",function(a){document.webkitFullscreenElement===r._iframe?(r.emit($s,{action:$s}),r.sendMessageToCallMachine({action:$s})):(r.emit(eo,{action:eo}),r.sendMessageToCallMachine({action:eo}))})),en()){var o=r.nativeUtils();o.addAudioFocusChangeListener&&o.removeAudioFocusChangeListener&&o.addAppActiveStateChangeListener&&o.removeAppActiveStateChangeListener||console.warn("expected (add|remove)(AudioFocus|AppActiveState)ChangeListener to be available in React Native"),r._hasNativeAudioFocus=!0,o.addAudioFocusChangeListener(r.handleNativeAudioFocusChange),o.addAppActiveStateChangeListener(r.handleNativeAppActiveStateChange)}return r._messageChannel.addListenerForMessagesFromCallMachine(r.handleMessageFromCallMachine,r._callFrameId,Zc(r)),r}return nr(n,null,[{key:"supportedBrowser",value:function(){if(en())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!1,supportsSfu:!0,supportsVideoProcessing:!1};var i=class{static getParser(r,s=!1){if(typeof r!="string")throw new Error("UserAgent should be a string");return new vI(r,s)}static parse(r){return new vI(r).getResult()}static get BROWSER_MAP(){return _I}static get ENGINE_MAP(){return ir}static get OS_MAP(){return Sn}static get PLATFORMS_MAP(){return Nt}}.getParser(ui());return{supported:!!II(),mobile:i.getPlatformType()==="mobile",name:i.getBrowserName(),version:i.getBrowserVersion(),supportsScreenShare:!!E2(),supportsSfu:!!Xf(),supportsVideoProcessing:w2()}}},{key:"version",value:function(){return"0.21.0"}},{key:"createCallObject",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return i.layout="none",new n(null,i)}},{key:"wrap",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(nt(),!i||!i.contentWindow||typeof i.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return r.layout||(r.customLayout?r.layout="custom-v1":r.layout="browser"),new n(i,r)}},{key:"createFrame",value:function(i,r){var s,o;nt(),i&&r?(s=i,o=r):i&&i.append?(s=i,o={}):(s=document.body,o=i||{});var a=o.iframeStyle;a||(a=s===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var l=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?l.allow="microphone, camera":l.allow="microphone; camera; autoplay; display-capture",l.style.visibility="hidden",s.appendChild(l),l.style.visibility=null,Object.keys(a).forEach(function(c){return l.style[c]=a[c]}),o.layout||(o.customLayout?o.layout="custom-v1":o.layout="browser");try{return new n(l,o)}catch(c){throw s.removeChild(l),c}}},{key:"createTransparentFrame",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nt();var r=document.createElement("iframe");return r.allow="microphone; camera; autoplay",r.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(r),i.layout||(i.layout="custom-v1"),n.wrap(r,i)}}]),nr(n,[{key:"destroy",value:function(){var i=tt(re.mark(function r(){var s,o,a;return re.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(l.prev=0,![_n,zf].includes(this._meetingState)){l.next=4;break}return l.next=4,this.leave();case 4:l.next=8;break;case 6:l.prev=6,l.t0=l.catch(0);case 8:(s=this._iframe)&&(o=s.parentElement)&&o.removeChild(s),this._messageChannel.removeListener(this.handleMessageFromCallMachine),en()&&((a=this.nativeUtils()).removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),a.removeAppActiveStateChangeListener(this.handleNativeAppActiveStateChange)),this.resetMeetingDependentVars();case 13:case"end":return l.stop()}},r,this,[[0,6]])}));return function(){return i.apply(this,arguments)}}()},{key:"loadCss",value:function(i){var r=i.bodyClass,s=i.cssFile,o=i.cssText;return nt(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(s),bodyClass:r,cssText:o}),this}},{key:"iframe",value:function(){return nt(),this._iframe}},{key:"meetingState",value:function(){return this._meetingState}},{key:"accessState",value:function(){if(!this._callObjectMode)throw new Error("accessState() currently only supported in call object mode");return this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"waitingParticipants",value:function(){if(!this._callObjectMode)throw new Error("waitingParticipants() currently only supported in call object mode");return this._waitingParticipants}},{key:"validateParticipantProperties",value:function(i,r){for(var s in r){if(!gu[s])throw new Error("unrecognized updateParticipant property ".concat(s));if(gu[s].validate&&!gu[s].validate(r[s],this,this._participants[i]))throw new Error(gu[s].help)}}},{key:"updateParticipant",value:function(i,r){return this._participants.local&&this._participants.local.session_id===i&&(i="local"),i&&r&&this._participants[i]&&(this.validateParticipantProperties(i,r),this.sendMessageToCallMachine({action:"update-participant",id:i,properties:r})),this}},{key:"updateParticipants",value:function(i){var r=this._participants.local&&this._participants.local.session_id;for(var s in i)s===r&&(s="local"),s&&i[s]&&(this._participants[s]||s==="*")?this.validateParticipantProperties(s,i[s]):(console.warn("unrecognized participant in updateParticipants: ".concat(s)),delete i[s]);return this.sendMessageToCallMachine({action:"update-participants",participants:i}),this}},{key:"updateWaitingParticipant",value:function(){var i=tt(re.mark(function r(){var s,o,a=this,l=arguments;return re.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=l.length>0&&l[0]!==void 0?l[0]:"",o=l.length>1&&l[1]!==void 0?l[1]:{},this._callObjectMode){c.next=4;break}throw new Error("updateWaitingParticipant() currently only supported in call object mode");case 4:if(this._meetingState===_n){c.next=6;break}throw new Error("updateWaitingParticipant() only supported for joined meetings");case 6:if(typeof s=="string"&&Yn(o)==="object"){c.next=8;break}throw new Error("updateWaitingParticipant() must take an id string and a updates object");case 8:return c.abrupt("return",new Promise(function(u,h){a.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:s,updates:o},function(d){d.error&&h(d.error),d.id||h(new Error("unknown error in updateWaitingParticipant()")),u({id:d.id})})}));case 9:case"end":return c.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"updateWaitingParticipants",value:function(){var i=tt(re.mark(function r(){var s,o=this,a=arguments;return re.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(s=a.length>0&&a[0]!==void 0?a[0]:{},this._callObjectMode){l.next=3;break}throw new Error("updateWaitingParticipants() currently only supported in call object mode");case 3:if(this._meetingState===_n){l.next=5;break}throw new Error("updateWaitingParticipants() only supported for joined meetings");case 5:if(Yn(s)==="object"){l.next=7;break}throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");case 7:return l.abrupt("return",new Promise(function(c,u){o.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:s},function(h){h.error&&u(h.error),h.ids||u(new Error("unknown error in updateWaitingParticipants()")),c({ids:h.ids})})}));case 8:case"end":return l.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"requestAccess",value:function(){var i=tt(re.mark(function r(){var s,o,a,l,c,u=this,h=arguments;return re.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s=h.length>0&&h[0]!==void 0?h[0]:{},o=s.access,a=o===void 0?{level:"full"}:o,l=s.name,c=l===void 0?"":l,this._callObjectMode){d.next=3;break}throw new Error("requestAccess() currently only supported in call object mode");case 3:if(this._meetingState===_n){d.next=5;break}throw new Error("requestAccess() only supported for joined meetings");case 5:return d.abrupt("return",new Promise(function(f,p){u.sendMessageToCallMachine({action:"daily-method-request-access",access:a,name:c},function(g){g.error&&p(g.error),g.access||p(new Error("unknown error in requestAccess()")),f({access:g.access,granted:g.granted})})}));case 6:case"end":return d.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"localAudio",value:function(){return this._participants.local?this._participants.local.audio:null}},{key:"localVideo",value:function(){return this._participants.local?this._participants.local.video:null}},{key:"setLocalAudio",value:function(i){return this.sendMessageToCallMachine({action:"local-audio",state:i}),this}},{key:"setLocalVideo",value:function(i){return this.sendMessageToCallMachine({action:"local-video",state:i}),this}},{key:"getReceiveSettings",value:function(){var i=tt(re.mark(function r(s){var o,a,l,c=this,u=arguments;return re.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(o=u.length>1&&u[1]!==void 0?u[1]:{},a=o.showInheritedValues,l=a!==void 0&&a,this._callObjectMode){h.next=3;break}throw new Error("getReceiveSettings() only supported in call object mode");case 3:h.t0=Yn(s),h.next=h.t0==="string"?6:h.t0==="undefined"?7:8;break;case 6:return h.abrupt("return",new Promise(function(d){c.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:s,showInheritedValues:l},function(f){d(f.receiveSettings)})}));case 7:return h.abrupt("return",this._receiveSettings);case 8:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments');case 9:case"end":return h.stop()}},r,this)}));return function(r){return i.apply(this,arguments)}}()},{key:"updateReceiveSettings",value:function(){var i=tt(re.mark(function r(s){var o=this;return re.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this._callObjectMode){a.next=2;break}throw new Error("updateReceiveSettings() only supported in call object mode");case 2:if(b0(s,{allowAllParticipantsKey:!0})){a.next=4;break}throw new Error(w0({allowAllParticipantsKey:!0}));case 4:if(this._meetingState===_n){a.next=6;break}throw new Error("updateReceiveSettings() is only allowed when joined. To specify receive settings earlier, use the receiveSettings config property.");case 6:return a.abrupt("return",new Promise(function(l){o.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:s},function(c){l({receiveSettings:c.receiveSettings})})}));case 7:case"end":return a.stop()}},r,this)}));return function(r){return i.apply(this,arguments)}}()},{key:"getInputSettings",value:function(){return this._inputSettings}},{key:"updateInputSettings",value:function(){var i=tt(re.mark(function r(s){var o=this;return re.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(E0(s)){a.next=2;break}throw new Error(I0());case 2:return a.abrupt("return",new Promise(function(l){o.sendMessageToCallMachine({action:"update-input-settings",inputSettings:s},function(c){l({inputSettings:c.inputSettings})})}));case 3:case"end":return a.stop()}},r)}));return function(r){return i.apply(this,arguments)}}()},{key:"setBandwidth",value:function(i){var r=i.kbs,s=i.trackConstraints;return nt(),this.sendMessageToCallMachine({action:"set-bandwidth",kbs:r,trackConstraints:s}),this}},{key:"getDailyLang",value:function(){var i=this;return nt(),new Promise(function(){var r=tt(re.mark(function s(o){var a;return re.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:a=function(c){delete c.action,delete c.callbackStamp,o(c)},i.sendMessageToCallMachine({action:"get-daily-lang"},a);case 2:case"end":return l.stop()}},s)}));return function(s){return r.apply(this,arguments)}}())}},{key:"setDailyLang",value:function(i){return nt(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:i}),this}},{key:"getMeetingSession",value:function(){var i=tt(re.mark(function r(){var s=this;return re.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this._meetingState===_n){o.next=2;break}throw new Error("getMeetingSession() is only allowed when joined");case 2:return o.abrupt("return",new Promise(function(){var a=tt(re.mark(function l(c){var u;return re.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:u=function(d){delete d.action,delete d.callbackStamp,delete d.callFrameId,c(d)},s.sendMessageToCallMachine({action:"get-meeting-session"},u);case 2:case"end":return h.stop()}},l)}));return function(l){return a.apply(this,arguments)}}()));case 3:case"end":return o.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"setUserName",value:function(i,r){var s=this;return this.properties.userName=i,new Promise(function(){var o=tt(re.mark(function a(l){var c;return re.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:c=function(h){delete h.action,delete h.callbackStamp,l(h)},s.sendMessageToCallMachine({action:"set-user-name",name:i!=null?i:"",thisMeetingOnly:en()||!!r&&!!r.thisMeetingOnly},c);case 2:case"end":return u.stop()}},a)}));return function(a){return o.apply(this,arguments)}}())}},{key:"startCamera",value:function(){var i=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(){var s=tt(re.mark(function o(a,l){var c;return re.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(c=function(h){delete h.action,delete h.callbackStamp,a(h)},!i.needsLoad()){u.next=10;break}return u.prev=2,u.next=5,i.load(r);case 5:u.next=10;break;case 7:u.prev=7,u.t0=u.catch(2),l(u.t0);case 10:i.sendMessageToCallMachine({action:"start-camera",properties:Va(i.properties),preloadCache:Va(i._preloadCache)},c);case 11:case"end":return u.stop()}},o,null,[[2,7]])}));return function(o,a){return s.apply(this,arguments)}}())}},{key:"cycleCamera",value:function(){var i=this;return new Promise(function(r,s){i.sendMessageToCallMachine({action:"cycle-camera"},function(o){r({device:o.device})})})}},{key:"cycleMic",value:function(){var i=this;return nt(),new Promise(function(r,s){i.sendMessageToCallMachine({action:"cycle-mic"},function(o){r({device:o.device})})})}},{key:"getCameraFacingMode",value:function(){var i=this;return fp(),new Promise(function(r,s){i.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(o){r(o.facingMode)})})}},{key:"setInputDevices",value:function(i){var r=i.audioDeviceId,s=i.videoDeviceId,o=i.audioSource,a=i.videoSource;return console.warn("setInputDevices() is deprecated: instead use setInputDevicesAsync(), which returns a Promise"),this.setInputDevicesAsync({audioDeviceId:r,videoDeviceId:s,audioSource:o,videoSource:a}),this}},{key:"setInputDevicesAsync",value:function(){var i=tt(re.mark(function r(s){var o,a,l,c,u=this;return re.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(o=s.audioDeviceId,a=s.videoDeviceId,l=s.audioSource,c=s.videoSource,nt(),l!==void 0&&(o=l),c!==void 0&&(a=c),o&&(this._preloadCache.audioDeviceId=o),a&&(this._preloadCache.videoDeviceId=a),!this._callObjectMode||!this.needsLoad()){h.next=8;break}return h.abrupt("return",{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}});case 8:return o instanceof MediaStreamTrack&&(o=su),a instanceof MediaStreamTrack&&(a=su),h.abrupt("return",new Promise(function(d){u.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:o,videoDeviceId:a},function(f){delete f.action,delete f.callbackStamp,f.returnPreloadCache?d({camera:{deviceId:u._preloadCache.videoDeviceId},mic:{deviceId:u._preloadCache.audioDeviceId},speaker:{deviceId:u._preloadCache.outputDeviceId}}):d(f)})}));case 11:case"end":return h.stop()}},r,this)}));return function(r){return i.apply(this,arguments)}}()},{key:"setOutputDevice",value:function(i){var r=i.outputDeviceId;return nt(),r&&(this._preloadCache.outputDeviceId=r),this._callObjectMode&&this._meetingState!==_n?this:(this.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:r}),this)}},{key:"getInputDevices",value:function(){var i=tt(re.mark(function r(){var s=this;return re.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(nt(),!this._callObjectMode||!this.needsLoad()){o.next=3;break}return o.abrupt("return",{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}});case 3:return o.abrupt("return",new Promise(function(a,l){s.sendMessageToCallMachine({action:"get-input-devices"},function(c){delete c.action,delete c.callbackStamp,c.returnPreloadCache?a({camera:{deviceId:s._preloadCache.videoDeviceId},mic:{deviceId:s._preloadCache.audioDeviceId},speaker:{deviceId:s._preloadCache.outputDeviceId}}):a(c)})}));case 4:case"end":return o.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"nativeInCallAudioMode",value:function(){return fp(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(i){if(fp(),[v0,yV].includes(i)){if(i!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=i,!this.disableReactNativeAutoDeviceManagement("audio")&&this.isMeetingPendingOrOngoing(this._meetingState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",i)}},{key:"preAuth",value:function(){var i=tt(re.mark(function r(){var s,o,a,l=this,c=arguments;return re.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s=c.length>0&&c[0]!==void 0?c[0]:{},this._callObjectMode){u.next=3;break}throw new Error("preAuth() currently only supported in call object mode");case 3:if(![ru,_n].includes(this._meetingState)){u.next=5;break}throw new Error("preAuth() not supported after joining a meeting");case 5:if(!this.needsLoad()){u.next=8;break}return u.next=8,this.load(s);case 8:if(s.url){u.next=10;break}throw new Error("preAuth() requires at least a url to be provided");case 10:if(o=Ma(s.url),a=Ma(this.properties.url||this.properties.baseUrl),o===a){u.next=14;break}throw new Error("url in preAuth() has a different bundle url than the one loaded (".concat(a," -> ").concat(o,")"));case 14:return this.validateProperties(s),this.properties=tn(tn({},this.properties),s),u.abrupt("return",new Promise(function(h,d){l.sendMessageToCallMachine({action:"daily-method-preauth",properties:Va(l.properties)},function(f){return f.error?d(f.error):f.access?(l._didPreAuth=!0,void h({access:f.access})):d(new Error("unknown error in preAuth()"))})}));case 17:case"end":return u.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"load",value:function(){var i=tt(re.mark(function r(s){var o=this;return re.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.needsLoad()){a.next=2;break}return a.abrupt("return");case 2:if(s&&(this.validateProperties(s),this.properties=tn(tn({},this.properties),s)),this._callObjectMode||this.properties.url){a.next=5;break}throw new Error("can't load iframe meeting because url property isn't set");case 5:this.updateMeetingState(zf);try{this.emit("loading",{action:"loading"})}catch(l){console.log("could not emit 'loading'",l)}if(!this._callObjectMode){a.next=11;break}return a.abrupt("return",new Promise(function(l,c){o._callObjectLoader.cancel(),o._callObjectLoader.load(o.properties.url||o.properties.baseUrl,o._callFrameId,function(u){o.updateMeetingState("loaded"),u&&o.emit("loaded",{action:"loaded"}),l()},function(u,h){o.emit("load-attempt-failed",{action:"load-attempt-failed",errorMsg:u}),h||(o.updateMeetingState(Qr),o.resetMeetingDependentVars(),o.emit("error",{action:"error",errorMsg:u}),c(u))})}));case 11:return this._iframe.src=this.assembleMeetingUrl(),a.abrupt("return",new Promise(function(l,c){o._loadedCallback=function(u){if(o._meetingState!==Qr){for(var h in o.updateMeetingState("loaded"),(o.properties.cssFile||o.properties.cssText)&&o.loadCss(o.properties),o._inputEventsOn)o.sendMessageToCallMachine({action:"register-input-handler",on:h});l()}else c(u)}}));case 13:case"end":return a.stop()}},r,this)}));return function(r){return i.apply(this,arguments)}}()},{key:"join",value:function(){var i=tt(re.mark(function r(){var s,o,a,l,c=this,u=arguments;return re.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s=u.length>0&&u[0]!==void 0?u[0]:{},o=!1,!this.needsLoad()){h.next=15;break}return this.updateIsPreparingToJoin(!0),h.prev=4,h.next=7,this.load(s);case 7:h.next=13;break;case 9:return h.prev=9,h.t0=h.catch(4),this.updateIsPreparingToJoin(!1),h.abrupt("return",Promise.reject(h.t0));case 13:h.next=42;break;case 15:if(o=!(!this.properties.cssFile&&!this.properties.cssText),!this._didPreAuth){h.next=25;break}if(!s.url||s.url===this.properties.url){h.next=21;break}return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),h.abrupt("return",Promise.reject());case 21:if(!s.token||s.token===this.properties.token){h.next=25;break}return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),h.abrupt("return",Promise.reject());case 25:if(!s.url){h.next=40;break}if(!this._callObjectMode){h.next=36;break}if(a=Ma(s.url),l=Ma(this.properties.url||this.properties.baseUrl),a===l){h.next=33;break}return console.error("url in join() has a different bundle url than the one loaded (".concat(l," -> ").concat(a,")")),this.updateIsPreparingToJoin(!1),h.abrupt("return",Promise.reject());case 33:this.properties.url=s.url,h.next=40;break;case 36:if(!s.url||s.url===this.properties.url){h.next=40;break}return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(s.url,")")),this.updateIsPreparingToJoin(!1),h.abrupt("return",Promise.reject());case 40:this.validateProperties(s),this.properties=tn(tn({},this.properties),s);case 42:if(s.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!s.showLocalVideo),s.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!s.showParticipantsBar),this._meetingState!==_n&&this._meetingState!==ru){h.next=48;break}return console.warn("already joined meeting, call leave() before joining again"),this.updateIsPreparingToJoin(!1),h.abrupt("return");case 48:this.updateMeetingState(ru,!1);try{this.emit("joining-meeting",{action:"joining-meeting"})}catch(d){console.log("could not emit 'joining-meeting'",d)}return this.sendMessageToCallMachine({action:"join-meeting",properties:Va(this.properties),preloadCache:Va(this._preloadCache)}),h.abrupt("return",new Promise(function(d,f){c._joinedCallback=function(p,g){if(c._meetingState!==Qr){if(c.updateMeetingState(_n),p)for(var m in p)c._callObjectMode&&(p0(p[m]),m0(p[m]),g0(p[m],c._participants[m])),c._participants[m]=tn({},p[m]),c.toggleParticipantAudioBasedOnNativeAudioFocus();o&&c.loadCss(c.properties),d(p)}else f(g)}}));case 52:case"end":return h.stop()}},r,this,[[4,9]])}));return function(){return i.apply(this,arguments)}}()},{key:"leave",value:function(){var i=tt(re.mark(function r(){var s=this;return re.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise(function(a,l){if(s._callObjectLoader&&!s._callObjectLoader.loaded){s._callObjectLoader.cancel(),s.updateMeetingState(Xr),s.resetMeetingDependentVars();try{s.emit(Xr,{action:Xr})}catch(c){console.log("could not emit 'left-meeting'",c)}a()}else s._meetingState===Xr||s._meetingState===Qr?a():s.sendMessageToCallMachine({action:"leave-meeting"},function(){a()})}));case 1:case"end":return o.stop()}},r)}));return function(){return i.apply(this,arguments)}}()},{key:"startScreenShare",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nt(),i.mediaStream&&(this._preloadCache.screenMediaStream=i.mediaStream,i.mediaStream=su),this.sendMessageToCallMachine({action:"local-screen-start",captureOptions:i})}},{key:"stopScreenShare",value:function(){nt(),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nt(),this.sendMessageToCallMachine(tn({action:"local-recording-start"},i))}},{key:"updateRecording",value:function(i){var r=i.layout,s=r===void 0?{preset:"default"}:r;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:s})}},{key:"stopRecording",value:function(){nt(),this.sendMessageToCallMachine({action:"local-recording-stop"})}},{key:"startLiveStreaming",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(tn({action:"daily-method-start-live-streaming"},i))}},{key:"updateLiveStreaming",value:function(i){var r=i.layout,s=r===void 0?{preset:"default"}:r;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:s})}},{key:"stopLiveStreaming",value:function(){this.sendMessageToCallMachine({action:"daily-method-stop-live-streaming"})}},{key:"startTranscription",value:function(){this.sendMessageToCallMachine({action:"daily-method-start-transcription"})}},{key:"stopTranscription",value:function(){this.sendMessageToCallMachine({action:"daily-method-stop-transcription"})}},{key:"getNetworkStats",value:function(){var i=this;return this._meetingState!==_n?{stats:{latest:{}}}:new Promise(function(r,s){i.sendMessageToCallMachine({action:"get-calc-stats"},function(o){r(tn({stats:o.stats},i._network))})})}},{key:"getActiveSpeaker",value:function(){return nt(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(i){return nt(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:i}),this}},{key:"activeSpeakerMode",value:function(){return nt(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(i){if(this._meetingState!==_n)throw new Error("setSubscribeToTracksAutomatically() is only allowed when joined");return this._preloadCache.subscribeToTracksAutomatically=i,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:i}),this}},{key:"enumerateDevices",value:function(){var i=tt(re.mark(function r(){var s,o=this;return re.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(nt(),!this._callObjectMode){a.next=6;break}return a.next=4,navigator.mediaDevices.enumerateDevices();case 4:return s=a.sent,a.abrupt("return",{devices:s.map(function(l){return JSON.parse(JSON.stringify(l))})});case 6:return a.abrupt("return",new Promise(function(l,c){o.sendMessageToCallMachine({action:"enumerate-devices"},function(u){l({devices:u.devices})})}));case 7:case"end":return a.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"sendAppMessage",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(JSON.stringify(i).length>4096)throw new Error("Message data too large. Max size is 4096");return this.sendMessageToCallMachine({action:"app-msg",data:i,to:r}),this}},{key:"addFakeParticipant",value:function(i){return nt(),this.sendMessageToCallMachine(tn({action:"add-fake-participant"},i)),this}},{key:"setShowNamesMode",value:function(i){return nt(),i&&i!=="always"&&i!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:i}),this)}},{key:"setShowLocalVideo",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return nt(),typeof i!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):this._callObjectMode?(console.error("setShowLocalVideo is not available in callObject mode"),this):this._meetingState!==_n?(console.error("the meeting must be joined before calling setShowLocalVideo"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:i}),this._showLocalVideo=i,this)}},{key:"showLocalVideo",value:function(){return nt(),this._callObjectMode?(console.error("showLocalVideo is not available in callObject mode"),this):this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return nt(),typeof i!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):this._callObjectMode?(console.error("setShowParticipantsBar is not available in callObject mode"),this):this._meetingState!==_n?(console.error("the meeting must be joined before calling setShowParticipantsBar"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:i}),this._showParticipantsBar=i,this)}},{key:"showParticipantsBar",value:function(){return nt(),this._callObjectMode?(console.error("showParticipantsBar is not available in callObject mode"),this):this._showParticipantsBar}},{key:"theme",value:function(){return this._callObjectMode?(console.error("theme is not available in callObject mode"),this):this.properties.theme}},{key:"setTheme",value:function(i){var r=this;return new Promise(function(s,o){if(r._callObjectMode)o("setTheme is not available in callObject mode");else try{r.validateProperties({theme:i}),r.properties.theme=tn({},i),r.sendMessageToCallMachine({action:"set-theme",theme:r.properties.theme});try{r.emit("theme-updated",{action:"theme-updated",theme:r.properties.theme})}catch(a){console.log("could not emit 'theme-updated'",a)}s(r.properties.theme)}catch(a){o(a)}})}},{key:"detectAllFaces",value:function(){var i=this;return nt(),new Promise(function(r,s){i.sendMessageToCallMachine({action:"detect-all-faces"},function(o){delete o.action,delete o.callbackStamp,r(o)})})}},{key:"requestFullscreen",value:function(){var i=tt(re.mark(function r(){return re.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(nt(),this._iframe&&!document.fullscreenElement){s.next=3;break}return s.abrupt("return");case 3:return s.prev=3,s.next=6,this._iframe.requestFullscreen;case 6:if(!s.sent){s.next=10;break}this._iframe.requestFullscreen(),s.next=11;break;case 10:this._iframe.webkitRequestFullscreen();case 11:s.next=16;break;case 13:s.prev=13,s.t0=s.catch(3),console.log("could not make video call fullscreen",s.t0);case 16:case"end":return s.stop()}},r,this,[[3,13]])}));return function(){return i.apply(this,arguments)}}()},{key:"exitFullscreen",value:function(){nt(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"room",value:function(){var i=tt(re.mark(function r(){var s,o,a,l=this,c=arguments;return re.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s=c.length>0&&c[0]!==void 0?c[0]:{},o=s.includeRoomConfigDefaults,a=o===void 0||o,this._meetingState!==_n&&!this._didPreAuth){u.next=5;break}return u.abrupt("return",new Promise(function(h,d){l.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:a},function(f){delete f.action,delete f.callbackStamp,h(f)})}));case 5:if(!this.properties.url){u.next=7;break}return u.abrupt("return",{roomUrlPendingJoin:this.properties.url});case 7:return u.abrupt("return",null);case 8:case"end":return u.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"geo",value:function(){var i=tt(re.mark(function r(){return re.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new Promise(function(){var o=tt(re.mark(function a(l,c){var u,h;return re.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=4,fetch("https://gs.daily.co/_ks_/x-swsl/:");case 4:return u=d.sent,d.next=7,u.json();case 7:h=d.sent,l({current:h.geo}),d.next=15;break;case 11:d.prev=11,d.t0=d.catch(0),console.error("geo lookup failed",d.t0),l({current:""});case 15:case"end":return d.stop()}},a,null,[[0,11]])}));return function(a,l){return o.apply(this,arguments)}}()));case 1:case"end":return s.stop()}},r)}));return function(){return i.apply(this,arguments)}}()},{key:"setNetworkTopology",value:function(){var i=tt(re.mark(function r(s){var o=this;return re.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return nt(),a.abrupt("return",new Promise(function(){var l=tt(re.mark(function c(u,h){var d;return re.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:d=function(p){p.error?h({error:p.error}):u({workerId:p.workerId})},o.sendMessageToCallMachine({action:"set-network-topology",opts:s},d);case 2:case"end":return f.stop()}},c)}));return function(c,u){return l.apply(this,arguments)}}()));case 2:case"end":return a.stop()}},r)}));return function(r){return i.apply(this,arguments)}}()},{key:"getNetworkTopology",value:function(){var i=tt(re.mark(function r(){var s=this;return re.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise(function(){var a=tt(re.mark(function l(c,u){var h;return re.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:h=function(f){f.error?u({error:f.error}):c({topology:f.topology})},s.sendMessageToCallMachine({action:"get-network-topology"},h);case 2:case"end":return d.stop()}},l)}));return function(l,c){return a.apply(this,arguments)}}()));case 1:case"end":return o.stop()}},r)}));return function(){return i.apply(this,arguments)}}()},{key:"setPlayNewParticipantSound",value:function(i){if(nt(),typeof i!="number"&&i!==!0&&i!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(i));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:i})}},{key:"on",value:function(i,r){return this._inputEventsOn[i]={},this.sendMessageToCallMachine({action:"register-input-handler",on:i}),Yc.prototype.on.call(this,i,r)}},{key:"once",value:function(i,r){return this._inputEventsOn[i]={},this.sendMessageToCallMachine({action:"register-input-handler",on:i}),Yc.prototype.once.call(this,i,r)}},{key:"off",value:function(i,r){return delete this._inputEventsOn[i],this.sendMessageToCallMachine({action:"register-input-handler",off:i}),Yc.prototype.off.call(this,i,r)}},{key:"validateProperties",value:function(i){for(var r in i){if(!Zr[r])throw new Error("unrecognized property '".concat(r,"'"));if(Zr[r].validate&&!Zr[r].validate(i[r],this))throw new Error("property '".concat(r,"': ").concat(Zr[r].help))}}},{key:"assembleMeetingUrl",value:function(){var i=tn(tn({},this.properties),{},{emb:this._callFrameId,embHref:encodeURIComponent(window.location.href)}),r=i.url.match(/\?/)?"&":"?";return i.url+r+Object.keys(Zr).filter(function(s){return Zr[s].queryString&&i[s]!==void 0}).map(function(s){return"".concat(Zr[s].queryString,"=").concat(i[s])}).join("&")}},{key:"needsLoad",value:function(){return[yI,zf,Xr,Qr].includes(this._meetingState)}},{key:"sendMessageToCallMachine",value:function(i,r){this._messageChannel.sendMessageToCallMachine(i,r,this._iframe,this._callFrameId)}},{key:"forwardPackagedMessageToCallMachine",value:function(i){this._messageChannel.forwardPackagedMessageToCallMachine(i,this._iframe,this._callFrameId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(i){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(i,this._callFrameId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(i){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(i)}},{key:"handleMessageFromCallMachine",value:function(i){switch(i.action){case"iframe-ready-for-launch-config":this.sendMessageToCallMachine(tn({action:"iframe-launch-config"},this.properties));break;case"loaded":this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null);try{this.emit(i.action,i)}catch(p){console.log("could not emit",i,p)}break;case"joined-meeting":this._joinedCallback&&(this._joinedCallback(i.participants),this._joinedCallback=null);try{this.emit(i.action,i)}catch(p){console.log("could not emit",i,p)}break;case"participant-joined":case"participant-updated":if(this._meetingState===Xr)return;if(i.participant&&i.participant.session_id){var r=i.participant.local?"local":i.participant.session_id;this._callObjectMode&&(p0(i.participant),m0(i.participant),g0(i.participant,this._participants[r]));try{this.maybeEventTrackStopped(this._participants[r],i.participant,"audioTrack"),this.maybeEventTrackStopped(this._participants[r],i.participant,"videoTrack"),this.maybeEventTrackStopped(this._participants[r],i.participant,"screenVideoTrack"),this.maybeEventTrackStopped(this._participants[r],i.participant,"screenAudioTrack"),this.maybeEventTrackStarted(this._participants[r],i.participant,"audioTrack"),this.maybeEventTrackStarted(this._participants[r],i.participant,"videoTrack"),this.maybeEventTrackStarted(this._participants[r],i.participant,"screenVideoTrack"),this.maybeEventTrackStarted(this._participants[r],i.participant,"screenAudioTrack"),this.maybeEventTrackStoppedForCustomTracks(this._participants[r],i.participant),this.maybeEventTrackStartedForCustomTracks(this._participants[r],i.participant),this.maybeEventRecordingStopped(this._participants[r],i.participant),this.maybeEventRecordingStarted(this._participants[r],i.participant)}catch(p){console.error("track events error",p)}if(!this.compareEqualForParticipantUpdateEvent(i.participant,this._participants[r])){this._participants[r]=tn({},i.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus();try{this.emit(i.action,i)}catch(p){console.log("could not emit",i,p)}}}break;case"participant-left":if(i.participant&&i.participant.session_id){var s=this._participants[i.participant.session_id];s&&(this.maybeEventTrackStopped(s,null,"audioTrack"),this.maybeEventTrackStopped(s,null,"videoTrack"),this.maybeEventTrackStopped(s,null,"screenVideoTrack"),this.maybeEventTrackStopped(s,null,"screenAudioTrack"),this.maybeEventTrackStoppedForCustomTracks(s,null)),delete this._participants[i.participant.session_id];try{this.emit(i.action,i)}catch(p){console.log("could not emit",i,p)}}break;case"access-state-updated":var o={access:i.access};if(i.awaitingAccess&&(o.awaitingAccess=i.awaitingAccess),!iu(this._accessState,o)){this._accessState=o;try{this.emit(i.action,i)}catch(p){console.log("could not emit",i,p)}}break;case"meeting-session-updated":if(i.meetingSession)try{delete i.callFrameId,this.emit(i.action,i)}catch(p){console.log("could not emit",i,p)}break;case"error":this._iframe&&!i.preserveIframe&&(this._iframe.src=""),this.updateMeetingState(Qr),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(i.errorMsg),this._loadedCallback=null),this._joinedCallback&&(this._joinedCallback(null,i.errorMsg),this._joinedCallback=null);try{i.preserveIframe;var a=o2(i,["preserveIframe"]);this.emit(i.action,a)}catch(p){console.log("could not emit",i,p)}break;case"left-meeting":this._meetingState!==Qr&&this.updateMeetingState(Xr),this.resetMeetingDependentVars();try{this.emit(i.action,i)}catch(p){console.log("could not emit",i,p)}break;case"input-event":var l=this._participants[i.session_id];l||(l=i.session_id===this._participants.local.session_id?this._participants.local:{});try{this.emit(i.event.type,{action:i.event.type,event:i.event,participant:tn({},l)})}catch(p){console.log("could not emit",i,p)}break;case"network-quality-change":var c=i.threshold,u=i.quality;if(c!==this._network.threshold||u!==this._network.quality){this._network.quality=u,this._network.threshold=c;try{this.emit(i.action,i)}catch(p){console.log("could not emit",i,p)}}break;case"active-speaker-change":var h=i.activeSpeaker;if(this._activeSpeaker.peerId!==h.peerId){this._activeSpeaker.peerId=h.peerId;try{this.emit(i.action,{action:i.action,activeSpeaker:this._activeSpeaker})}catch(p){console.log("could not emit",i,p)}}break;case"show-local-video-changed":if(this._callObjectMode)return;var d=i.show;this._showLocalVideo=d;try{this.emit(i.action,{action:i.action,show:d})}catch(p){console.log("could not emit",i,p)}break;case"active-speaker-mode-change":var f=i.enabled;if(this._activeSpeakerMode!==f){this._activeSpeakerMode=f;try{this.emit(i.action,{action:i.action,enabled:this._activeSpeakerMode})}catch(p){console.log("could not emit",i,p)}}break;case"waiting-participant-added":case"waiting-participant-updated":case"waiting-participant-removed":this._waitingParticipants=i.allWaitingParticipants;try{this.emit(i.action,{action:i.action,participant:i.participant})}catch(p){console.log("could not emit",i,p)}break;case"receive-settings-updated":if(!iu(this._receiveSettings,i.receiveSettings)){this._receiveSettings=i.receiveSettings;try{this.emit(i.action,{action:i.action,receiveSettings:i.receiveSettings})}catch(p){console.log("could not emit",i,p)}}break;case"input-settings-updated":if(!iu(this._inputSettings,i.inputSettings)){this._inputSettings=i.inputSettings;try{this.emit(i.action,{action:i.action,inputSettings:i.inputSettings})}catch(p){console.log("could not emit",i,p)}}break;case"recording-started":case"recording-stopped":case"recording-stats":case"recording-error":case"recording-upload-completed":case"transcription-started":case"transcription-stopped":case"transcription-error":case"started-camera":case"camera-error":case"app-message":case"local-screen-share-started":case"local-screen-share-stopped":case"network-connection":case"recording-data":case"live-streaming-started":case"live-streaming-stopped":case"live-streaming-error":case"nonfatal-error":case"lang-updated":case"media-ingest-error":try{this.emit(i.action,i)}catch(p){console.log("could not emit",i,p)}break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(i,r){var s="record";if(i&&!r.local&&r[s]===!1&&i[s]!==r[s])try{this.emit("recording-stopped",{action:"recording-stopped"})}catch(o){console.log("could not emit",o)}}},{key:"maybeEventRecordingStarted",value:function(i,r){var s="record";if(i&&!r.local&&r[s]===!0&&i[s]!==r[s])try{this.emit("recording-started",{action:"recording-started"})}catch(o){console.log("could not emit",o)}}},{key:"maybeEventTrackStopped",value:function(i,r,s){if(i&&(i[s]&&i[s].readyState==="ended"||i[s]&&(!r||!r[s])||i[s]&&i[s].id!==r[s].id))try{this.emit("track-stopped",{action:"track-stopped",track:i[s],participant:r})}catch(o){console.log("could not emit",o)}}},{key:"maybeEventTrackStarted",value:function(i,r,s){if(r[s]&&(!i||!i[s])||r[s]&&i[s].readyState==="ended"||r[s]&&r[s].id!==i[s].id)try{this.emit("track-started",{action:"track-started",track:r[s],participant:r})}catch(o){console.log("could not emit",o)}}},{key:"maybeEventTrackStoppedForCustomTracks",value:function(i,r){if(i)for(var s in i.tracks)dp(s)||this.maybeEventTrackStopped(i.tracks[s],r?r.tracks[s]:null,"track")}},{key:"maybeEventTrackStartedForCustomTracks",value:function(i,r){if(r)for(var s in r.tracks)dp(s)||this.maybeEventTrackStarted(i?i.tracks[s]:null,r.tracks[s],"track")}},{key:"compareEqualForParticipantUpdateEvent",value:function(i,r){return!!iu(i,r)&&(!i.videoTrack||!r.videoTrack||i.videoTrack.id===r.videoTrack.id&&i.videoTrack.muted===r.videoTrack.muted&&i.videoTrack.enabled===r.videoTrack.enabled)&&(!i.audioTrack||!r.audioTrack||i.audioTrack.id===r.audioTrack.id&&i.audioTrack.muted===r.audioTrack.muted&&i.audioTrack.enabled===r.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return en()?typeof DailyNativeUtils=="undefined"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(i){this.updateMeetingState(this._meetingState,i)}},{key:"updateMeetingState",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(i!==this._meetingState||r!==this._isPreparingToJoin){var s=this._meetingState,o=this._isPreparingToJoin;this._meetingState=i,this._isPreparingToJoin=r;var a=this.isMeetingPendingOrOngoing(s,o),l=this.isMeetingPendingOrOngoing(this._meetingState,this._isPreparingToJoin);a!==l&&(this.updateKeepDeviceAwake(l),this.updateDeviceAudioMode(l),this.updateShowAndroidOngoingMeetingNotification(l),this.updateNoOpRecordingEnsuringBackgroundContinuity(l))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:bI},this._receiveSettings={},this._inputSettings={},this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(i){en()&&this.nativeUtils().setKeepDeviceAwake(i,this._callFrameId)}},{key:"updateDeviceAudioMode",value:function(i){if(en()&&!this.disableReactNativeAutoDeviceManagement("audio")){var r=i?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(r)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(i){if(en()&&this.nativeUtils().setShowOngoingMeetingNotification){var r,s,o,a;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var l=this.properties.reactNativeConfig.androidInCallNotification;r=l.title,s=l.subtitle,o=l.iconName,a=l.disableForCustomOverride}a&&(i=!1),this.nativeUtils().setShowOngoingMeetingNotification(i,r,s,o,this._callFrameId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(i){en()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(i)}},{key:"isMeetingPendingOrOngoing",value:function(i,r){return[ru,_n].includes(i)||r}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){if(en()){var i=store.getState();for(var r in i.streams){var s=i.streams[r];s&&s.pendingTrack&&s.pendingTrack.kind==="audio"&&(s.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(i){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[i]}},{key:"absoluteUrl",value:function(i){if(i!==void 0){var r=document.createElement("a");return r.href=i,r.href}}},{key:"sayHello",value:function(){var i="hello, world.";return console.log(i),i}}]),n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="firebasestorage.googleapis.com",C0="storageBucket",bV=2*60*1e3,EV=10*60*1e3;class Mt extends Ni{constructor(e,n){super(pp(e),`Firebase Storage: ${n} (${pp(e)})`);this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mt.prototype)}_codeEquals(e){return pp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function pp(t){return"storage/"+t}function mp(){const t="An unknown error occurred, please check the error payload for server response.";return new Mt("unknown",t)}function IV(t){return new Mt("object-not-found","Object '"+t+"' does not exist.")}function wV(t){return new Mt("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function TV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mt("unauthenticated",t)}function CV(){return new Mt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function SV(t){return new Mt("unauthorized","User does not have permission to access '"+t+"'.")}function AV(){return new Mt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function kV(){return new Mt("canceled","User canceled the upload/download.")}function OV(t){return new Mt("invalid-url","Invalid URL '"+t+"'.")}function RV(t){return new Mt("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function LV(){return new Mt("no-default-bucket","No default bucket found. Did you set the '"+C0+"' property when initializing the app?")}function NV(){return new Mt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function MV(){return new Mt("no-download-url","The given file does not have any download URLs.")}function gp(t){return new Mt("invalid-argument",t)}function S0(){return new Mt("app-deleted","The Firebase app was deleted.")}function PV(t){return new Mt("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ja(t,e){return new Mt("invalid-format","String does not match format '"+t+"': "+e)}function Ba(t){throw new Mt("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Gn.makeFromUrl(e,n)}catch{return new Gn(e,"")}if(i.path==="")return i;throw RV(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(v){v.path.charAt(v.path.length-1)==="/"&&(v.path_=v.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(v){v.path_=decodeURIComponent(v.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${r}/o${d}`,"i"),p={bucket:1,path:3},g=n===T0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,m="([^?#]*)",y=new RegExp(`^https?://${g}/${r}/${m}`,"i"),b=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let v=0;v<b.length;v++){const O=b[v],C=O.regex.exec(e);if(C){const _=C[O.indices.bucket];let I=C[O.indices.path];I||(I=""),i=new Gn(_,I),O.postModify(i);break}}if(i==null)throw OV(e);return i}}class DV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...m){c||(c=!0,e.apply(null,m))}function h(m){r=setTimeout(()=>{r=null,t(f,l())},m)}function d(){s&&clearTimeout(s)}function f(m,...y){if(c){d();return}if(m){d(),u.call(null,m,...y);return}if(l()||o){d(),u.call(null,m,...y);return}i<64&&(i*=2);let b;a===1?(a=2,b=0):b=(i+Math.random())*1e3,h(b)}let p=!1;function g(m){p||(p=!0,d(),!c&&(r!==null?(m||(a=2),clearTimeout(r),h(0)):m||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function UV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t){return t!==void 0}function VV(t){return typeof t=="object"&&!Array.isArray(t)}function _p(t){return typeof t=="string"||t instanceof String}function A0(t){return vp()&&t instanceof Blob}function vp(){return typeof Blob!="undefined"}function k0(t,e,n,i){if(i<e)throw gp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw gp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function O0(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $r;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($r||($r={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,n,i,r,s,o,a,l,c,u,h){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,f)=>{this.resolve_=d,this.reject_=f,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new vu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===$r.NO_ERROR,l=s.getStatus();if(!a||this.isRetryStatusCode_(l)){const u=s.getErrorCode()===$r.ABORT;i(!1,new vu(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new vu(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());xV(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=mp();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?S0():kV();o(l)}else{const l=AV();o(l)}};this.canceled_?n(!1,new vu(!1,null,!0)):this.backoffId_=FV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&UV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=this.additionalRetryCodes_.indexOf(e)!==-1;return n||r||s}}class vu{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function BV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function HV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function qV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function WV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function GV(t,e,n,i,r,s){const o=O0(t.urlParams),a=t.url+o,l=Object.assign({},t.headers);return qV(l,e),BV(l,n),HV(l,s),WV(l,i),new jV(a,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function KV(...t){const e=zV();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(vp())return new Blob(t);throw new Mt("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function XV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(t){return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yp{constructor(e,n){this.data=e,this.contentType=n||null}}function YV(t,e){switch(t){case hi.RAW:return new yp(R0(e));case hi.BASE64:case hi.BASE64URL:return new yp(L0(t,e));case hi.DATA_URL:return new yp(ZV(e),$V(e))}throw mp()}function R0(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)==55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)==56320))e.push(239,191,189);else{const s=i,o=t.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)==56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function JV(t){let e;try{e=decodeURIComponent(t)}catch{throw ja(hi.DATA_URL,"Malformed data URL.")}return R0(e)}function L0(t,e){switch(t){case hi.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw ja(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case hi.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw ja(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=QV(e)}catch{throw ja(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class N0{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ja(hi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=ej(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=e.substring(e.indexOf(",")+1)}}function ZV(t){const e=new N0(t);return e.base64?L0(hi.BASE64,e.rest):JV(e.rest)}function $V(t){return new N0(t).contentType}function ej(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n){let i=0,r="";A0(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(A0(this.data_)){const i=this.data_,r=XV(i,e,n);return r===null?null:new sr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new sr(i,!0)}}static getBlob(...e){if(vp()){const n=e.map(i=>i instanceof sr?i.data_:i);return new sr(KV.apply(null,n))}else{const n=e.map(o=>_p(o)?YV(hi.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new sr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(t){let e;try{e=JSON.parse(t)}catch{return null}return VV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function nj(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function P0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t,e){return e}class An{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||ij}}let yu=null;function rj(t){return!_p(t)||t.length<2?t:P0(t)}function D0(){if(yu)return yu;const t=[];t.push(new An("bucket")),t.push(new An("generation")),t.push(new An("metageneration")),t.push(new An("name","fullPath",!0));function e(s,o){return rj(o)}const n=new An("name");n.xform=e,t.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new An("size");return r.xform=i,t.push(r),t.push(new An("timeCreated")),t.push(new An("updated")),t.push(new An("md5Hash",null,!0)),t.push(new An("cacheControl",null,!0)),t.push(new An("contentDisposition",null,!0)),t.push(new An("contentEncoding",null,!0)),t.push(new An("contentLanguage",null,!0)),t.push(new An("contentType",null,!0)),t.push(new An("metadata","customMetadata",!0)),yu=t,yu}function sj(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new Gn(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function oj(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,e[o.server])}return sj(i,t),i}function F0(t,e,n){const i=M0(e);return i===null?null:oj(t,i,n)}function aj(t,e,n,i){const r=M0(e);if(r===null||!_p(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,h=t.fullPath,d="/b/"+o(u)+"/o/"+o(h),f=_u(d,n,i),p=O0({alt:"media",token:c});return f+p})[0]}function lj(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class bp{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t){if(!t)throw mp()}function cj(t,e){function n(i,r){const s=F0(t,r,e);return U0(s!==null),s}return n}function uj(t,e){function n(i,r){const s=F0(t,r,e);return U0(s!==null),aj(s,r,t.host,t._protocol)}return n}function x0(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=CV():r=TV():n.getStatus()===402?r=wV(t.bucket):n.getStatus()===403?r=SV(t.path):r=i,r.serverResponse=i.serverResponse,r}return e}function V0(t){const e=x0(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=IV(t.path)),s.serverResponse=r.serverResponse,s}return n}function hj(t,e,n){const i=e.fullServerUrl(),r=_u(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new bp(r,s,uj(t,n),o);return a.errorHandler=V0(e),a}function dj(t,e){const n=e.fullServerUrl(),i=_u(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new bp(i,r,o,s);return a.successCodes=[200,204],a.errorHandler=V0(e),a}function fj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function pj(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=fj(null,e)),i}function mj(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let v=0;v<2;v++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=pj(e,i,r),u=lj(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=sr.getBlob(h,i,d);if(f===null)throw NV();const p={name:c.fullPath},g=_u(s,t.host,t._protocol),m="POST",y=t.maxUploadRetryTime,w=new bp(g,m,cj(t,n),y);return w.urlParams=p,w.headers=o,w.body=f.uploadData(),w.errorHandler=x0(e),w}class gj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$r.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$r.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$r.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Ba("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ba("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ba("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ba("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ba("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _j extends gj{initXhr(){this.xhr_.responseType="text"}}function Ep(){return new _j}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){this._service=e,n instanceof Gn?this._location=n:this._location=Gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new es(e,n)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return P0(this._location.path)}get storage(){return this._service}get parent(){const e=tj(this._location.path);if(e===null)return null;const n=new Gn(this._location.bucket,e);return new es(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw PV(e)}}function vj(t,e,n){t._throwIfRoot("uploadBytes");const i=mj(t.storage,t._location,D0(),new sr(e,!0),n);return t.storage.makeRequestWithTokens(i,Ep).then(r=>({metadata:r,ref:t}))}function yj(t){t._throwIfRoot("getDownloadURL");const e=hj(t.storage,t._location,D0());return t.storage.makeRequestWithTokens(e,Ep).then(n=>{if(n===null)throw MV();return n})}function bj(t){t._throwIfRoot("deleteObject");const e=dj(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ep)}function Ej(t,e){const n=nj(t._location.path,e),i=new Gn(t._location.bucket,n);return new es(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){return/^[A-Za-z]+:\/\//.test(t)}function wj(t,e){return new es(t,e)}function j0(t,e){if(t instanceof Ip){const n=t;if(n._bucket==null)throw LV();const i=new es(n,n._bucket);return e!=null?j0(i,e):i}else return e!==void 0?Ej(t,e):t}function Tj(t,e){if(e&&Ij(e)){if(t instanceof Ip)return wj(t,e);throw gp("To use ref(service, url), the first argument must be a Storage instance.")}else return j0(t,e)}function B0(t,e){const n=e==null?void 0:e[C0];return n==null?null:Gn.makeFromBucketSpec(n,t)}class Ip{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=T0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bV,this._maxUploadRetryTime=EV,this._requests=new Set,r!=null?this._bucket=Gn.makeFromBucketSpec(r,this._host):this._bucket=B0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=B0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){k0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){k0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new es(this,e)}_makeRequest(e,n,i,r){if(this._deleted)return new DV(S0());{const s=GV(e,this._appId,i,r,n,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const H0="@firebase/storage",q0="0.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="storage";function DB(t,e,n){return t=lt(t),vj(t,e,n)}function FB(t){return t=lt(t),yj(t)}function UB(t){return t=lt(t),bj(t)}function xB(t,e){return t=lt(t),Tj(t,e)}function VB(t=mo(),e){return t=lt(t),ls(t,W0).getImmediate({identifier:e})}function Cj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Ip(n,i,r,e,pr)}function Sj(){Mi(new fi(W0,Cj,"PUBLIC").setMultipleInstances(!0)),Ln(H0,q0,""),Ln(H0,q0,"esm2017")}Sj();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="type.googleapis.com/google.protobuf.Int64Value",kj="type.googleapis.com/google.protobuf.UInt64Value";function G0(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function wp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>wp(e));if(typeof t=="function"||typeof t=="object")return G0(t,e=>wp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function bu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Aj:case kj:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>bu(e)):typeof t=="function"||typeof t=="object"?G0(t,e=>bu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lo extends Ni{constructor(e,n,i){super(`${Tp}/${e}`,n||"");this.details=i}}function Oj(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Rj(t,e){let n=Oj(t),i=n,r;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!z0[o])return new lo("internal","internal");n=z0[o],i=o}const a=s.message;typeof a=="string"&&(i=a),r=s.details,r!==void 0&&(r=bu(r))}}catch{}return n==="ok"?null:new lo(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||n.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}async getAuthToken(){if(!!this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(){if(this.appCheck){const e=await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(){const e=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken();return{authToken:e,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="us-central1";function Nj(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new lo("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Mj{constructor(e,n,i,r,s=Cp,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Lj(n,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=Cp}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Pj(t,e,n){return i=>Fj(t,e,i,n||{})}async function Dj(t,e,n,i){n["Content-Type"]="application/json";let r;try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await r.json()}catch{}return{status:r.status,json:s}}async function Fj(t,e,n,i){const r=t._url(e);n=wp(n);const s={data:n},o={},a=await t.contextProvider.getContext();a.authToken&&(o.Authorization="Bearer "+a.authToken),a.messagingToken&&(o["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(o["X-Firebase-AppCheck"]=a.appCheckToken);const l=i.timeout||7e4,c=Nj(l),u=await Promise.race([Dj(r,s,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!u)throw new lo("cancelled","Firebase Functions instance was deleted.");const h=Rj(u.status,u.json);if(h)throw h;if(!u.json)throw new lo("internal","Response is not valid JSON object.");let d=u.json.data;if(typeof d=="undefined"&&(d=u.json.result),typeof d=="undefined")throw new lo("internal","Response is missing data field.");return{data:bu(d)}}const K0="@firebase/functions",X0="0.7.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="auth-internal",xj="app-check-internal",Vj="messaging-internal";function jj(t,e){const n=(i,{instanceIdentifier:r})=>{const s=i.getProvider("app").getImmediate(),o=i.getProvider(Uj),a=i.getProvider(Vj),l=i.getProvider(xj);return new Mj(s,o,a,l,r,t)};Mi(new fi(Tp,n,"PUBLIC").setMultipleInstances(!0)),Ln(K0,X0,e),Ln(K0,X0,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(t=mo(),e=Cp){return ls(lt(t),Tp).getImmediate({identifier:e})}function BB(t,e,n){return Pj(lt(t),e,n)}jj(fetch.bind(self));/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ts={INDETERMINATE_CLASS:"mdc-circular-progress--indeterminate",CLOSED_CLASS:"mdc-circular-progress--closed"},or={ARIA_HIDDEN:"aria-hidden",ARIA_VALUENOW:"aria-valuenow",DETERMINATE_CIRCLE_SELECTOR:".mdc-circular-progress__determinate-circle",RADIUS:"r",STROKE_DASHOFFSET:"stroke-dashoffset"};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Bj=function(t){wn(e,t);function e(n){return t.call(this,bt(bt({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return ts},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return or},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},getDeterminateCircleAttribute:function(){return null},hasClass:function(){return!1},removeClass:function(){},removeAttribute:function(){},setAttribute:function(){},setDeterminateCircleAttribute:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.closed=this.adapter.hasClass(ts.CLOSED_CLASS),this.determinate=!this.adapter.hasClass(ts.INDETERMINATE_CLASS),this.progress=0,this.determinate&&this.adapter.setAttribute(or.ARIA_VALUENOW,this.progress.toString()),this.radius=Number(this.adapter.getDeterminateCircleAttribute(or.RADIUS))},e.prototype.setDeterminate=function(n){this.determinate=n,this.determinate?(this.adapter.removeClass(ts.INDETERMINATE_CLASS),this.setProgress(this.progress)):(this.adapter.addClass(ts.INDETERMINATE_CLASS),this.adapter.removeAttribute(or.ARIA_VALUENOW))},e.prototype.isDeterminate=function(){return this.determinate},e.prototype.setProgress=function(n){if(this.progress=n,this.determinate){var i=(1-this.progress)*(2*Math.PI*this.radius);this.adapter.setDeterminateCircleAttribute(or.STROKE_DASHOFFSET,""+i),this.adapter.setAttribute(or.ARIA_VALUENOW,this.progress.toString())}},e.prototype.getProgress=function(){return this.progress},e.prototype.open=function(){this.closed=!1,this.adapter.removeClass(ts.CLOSED_CLASS),this.adapter.removeAttribute(or.ARIA_HIDDEN)},e.prototype.close=function(){this.closed=!0,this.adapter.addClass(ts.CLOSED_CLASS),this.adapter.setAttribute(or.ARIA_HIDDEN,"true")},e.prototype.isClosed=function(){return this.closed},e}(Xn);function Q0(t,e,n){const i=t.slice();return i[24]=e[n],i}function Y0(t){let e,n,i,r,s,o,a,l,c,u,h,d,f,p;return{c(){e=_e("div"),n=_e("div"),i=vn("svg"),r=vn("circle"),s=Ke(),o=_e("div"),a=vn("svg"),l=vn("circle"),c=Ke(),u=_e("div"),h=vn("svg"),d=vn("circle"),f=Ke(),this.h()},l(g){e=ve(g,"DIV",{class:!0});var m=ie(e);n=ve(m,"DIV",{class:!0});var y=ie(n);i=On(y,"svg",{class:!0,viewBox:!0,xmlns:!0});var w=ie(i);r=On(w,"circle",{cx:!0,cy:!0,r:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-width":!0}),ie(r).forEach(N),w.forEach(N),y.forEach(N),s=Xe(m),o=ve(m,"DIV",{class:!0});var b=ie(o);a=On(b,"svg",{class:!0,viewBox:!0,xmlns:!0});var v=ie(a);l=On(v,"circle",{cx:!0,cy:!0,r:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-width":!0}),ie(l).forEach(N),v.forEach(N),b.forEach(N),c=Xe(m),u=ve(m,"DIV",{class:!0});var O=ie(u);h=On(O,"svg",{class:!0,viewBox:!0,xmlns:!0});var C=ie(h);d=On(C,"circle",{cx:!0,cy:!0,r:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-width":!0}),ie(d).forEach(N),C.forEach(N),O.forEach(N),f=Xe(m),m.forEach(N),this.h()},h(){$(r,"cx","24"),$(r,"cy","24"),$(r,"r","18"),$(r,"stroke-dasharray","113.097"),$(r,"stroke-dashoffset","56.549"),$(r,"stroke-width","4"),$(i,"class","mdc-circular-progress__indeterminate-circle-graphic"),$(i,"viewBox","0 0 48 48"),$(i,"xmlns","http://www.w3.org/2000/svg"),$(n,"class","mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left"),$(l,"cx","24"),$(l,"cy","24"),$(l,"r","18"),$(l,"stroke-dasharray","113.097"),$(l,"stroke-dashoffset","56.549"),$(l,"stroke-width","3.2"),$(a,"class","mdc-circular-progress__indeterminate-circle-graphic"),$(a,"viewBox","0 0 48 48"),$(a,"xmlns","http://www.w3.org/2000/svg"),$(o,"class","mdc-circular-progress__gap-patch"),$(d,"cx","24"),$(d,"cy","24"),$(d,"r","18"),$(d,"stroke-dasharray","113.097"),$(d,"stroke-dashoffset","56.549"),$(d,"stroke-width","4"),$(h,"class","mdc-circular-progress__indeterminate-circle-graphic"),$(h,"viewBox","0 0 48 48"),$(h,"xmlns","http://www.w3.org/2000/svg"),$(u,"class","mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right"),$(e,"class",p=ge({[t[1]]:!0,"mdc-circular-progress__spinner-layer":!0,["mdc-circular-progress__color-"+t[24]]:t[5]}))},m(g,m){Z(g,e,m),me(e,n),me(n,i),me(i,r),me(e,s),me(e,o),me(o,a),me(a,l),me(e,c),me(e,u),me(u,h),me(h,d),me(e,f)},p(g,m){m&34&&p!==(p=ge({[g[1]]:!0,"mdc-circular-progress__spinner-layer":!0,["mdc-circular-progress__color-"+g[24]]:g[5]}))&&$(e,"class",p)},d(g){g&&N(e)}}}function Hj(t){let e,n,i,r,s,o,a,l,c,u,h,d,f,p,g=[{class:"mdc-circular-progress__determinate-circle"},{cx:"24"},{cy:"24"},{r:"18"},{"stroke-dasharray":"113.097"},{"stroke-dashoffset":"113.097"},{"stroke-width":"4"},t[9]],m={};for(let O=0;O<g.length;O+=1)m=U(m,g[O]);let y=t[5]?[1,2,3,4]:[1],w=[];for(let O=0;O<y.length;O+=1)w[O]=Y0(Q0(t,y,O));let b=[{class:l=ge(at({[t[1]]:!0,"mdc-circular-progress":!0,"mdc-circular-progress--indeterminate":t[2],"mdc-circular-progress--closed":t[3]},t[7]))},{role:"progressbar"},{"aria-valuemin":c=0},{"aria-valuemax":u=1},{"aria-valuenow":h=t[2]?void 0:t[4]},t[8],t[12]],v={};for(let O=0;O<b.length;O+=1)v=U(v,b[O]);return{c(){e=_e("div"),n=_e("div"),i=vn("svg"),r=vn("circle"),s=vn("circle"),o=Ke(),a=_e("div");for(let O=0;O<w.length;O+=1)w[O].c();this.h()},l(O){e=ve(O,"DIV",{class:!0,role:!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0});var C=ie(e);n=ve(C,"DIV",{class:!0});var _=ie(n);i=On(_,"svg",{class:!0,viewBox:!0,xmlns:!0});var I=ie(i);r=On(I,"circle",{class:!0,cx:!0,cy:!0,r:!0,"stroke-width":!0}),ie(r).forEach(N),s=On(I,"circle",{class:!0,cx:!0,cy:!0,r:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-width":!0}),ie(s).forEach(N),I.forEach(N),_.forEach(N),o=Xe(C),a=ve(C,"DIV",{class:!0});var K=ie(a);for(let L=0;L<w.length;L+=1)w[L].l(K);K.forEach(N),C.forEach(N),this.h()},h(){$(r,"class","mdc-circular-progress__determinate-track"),$(r,"cx","24"),$(r,"cy","24"),$(r,"r","18"),$(r,"stroke-width","4"),Wa(s,m),$(i,"class","mdc-circular-progress__determinate-circle-graphic"),$(i,"viewBox","0 0 48 48"),$(i,"xmlns","http://www.w3.org/2000/svg"),$(n,"class","mdc-circular-progress__determinate-container"),$(a,"class","mdc-circular-progress__indeterminate-container"),ce(e,v)},m(O,C){Z(O,e,C),me(e,n),me(n,i),me(i,r),me(i,s),t[15](s),me(e,o),me(e,a);for(let _=0;_<w.length;_+=1)w[_].m(a,null);t[16](e),f||(p=[oe(d=dt.call(null,e,t[0])),oe(t[11].call(null,e))],f=!0)},p(O,[C]){if(Wa(s,m=Ae(g,[{class:"mdc-circular-progress__determinate-circle"},{cx:"24"},{cy:"24"},{r:"18"},{"stroke-dasharray":"113.097"},{"stroke-dashoffset":"113.097"},{"stroke-width":"4"},C&512&&O[9]])),C&34){y=O[5]?[1,2,3,4]:[1];let _;for(_=0;_<y.length;_+=1){const I=Q0(O,y,_);w[_]?w[_].p(I,C):(w[_]=Y0(I),w[_].c(),w[_].m(a,null))}for(;_<w.length;_+=1)w[_].d(1);w.length=y.length}ce(e,v=Ae(b,[C&142&&l!==(l=ge(at({[O[1]]:!0,"mdc-circular-progress":!0,"mdc-circular-progress--indeterminate":O[2],"mdc-circular-progress--closed":O[3]},O[7])))&&{class:l},{role:"progressbar"},{"aria-valuemin":c},{"aria-valuemax":u},C&20&&h!==(h=O[2]?void 0:O[4])&&{"aria-valuenow":h},C&256&&O[8],C&4096&&O[12]])),d&&qe(d.update)&&C&1&&d.update.call(null,O[0])},i:Bt,o:Bt,d(O){O&&N(e),t[15](null),Np(w,O),t[16](null),f=!1,Ge(p)}}}function qj(t,e,n){const i=["use","class","indeterminate","closed","progress","fourColor","getElement"];let r=ne(e,i);const s=$e(Ue());let{use:o=[]}=e,{class:a=""}=e,{indeterminate:l=!1}=e,{closed:c=!1}=e,{progress:u=0}=e,{fourColor:h=!1}=e,d,f,p={},g={},m={},y;Rn(()=>(n(14,f=new Bj({addClass:b,getDeterminateCircleAttribute:_,hasClass:w,removeClass:v,removeAttribute:C,setAttribute:O,setDeterminateCircleAttribute:I})),f.init(),()=>{f.destroy()}));function w(M){return M in p?p[M]:K().classList.contains(M)}function b(M){p[M]||n(7,p[M]=!0,p)}function v(M){(!(M in p)||p[M])&&n(7,p[M]=!1,p)}function O(M,E){g[M]!==E&&n(8,g[M]=E,g)}function C(M){(!(M in g)||g[M]!=null)&&n(8,g[M]=void 0,g)}function _(M){var E;return M in m?(E=m[M])!==null&&E!==void 0?E:null:y.getAttribute(M)}function I(M,E){m[M]!==E&&n(9,m[M]=E,m)}function K(){return d}function L(M){ue[M?"unshift":"push"](()=>{y=M,n(10,y)})}function k(M){ue[M?"unshift":"push"](()=>{d=M,n(6,d)})}return t.$$set=M=>{e=U(U({},e),ze(M)),n(12,r=ne(e,i)),"use"in M&&n(0,o=M.use),"class"in M&&n(1,a=M.class),"indeterminate"in M&&n(2,l=M.indeterminate),"closed"in M&&n(3,c=M.closed),"progress"in M&&n(4,u=M.progress),"fourColor"in M&&n(5,h=M.fourColor)},t.$$.update=()=>{t.$$.dirty&16388&&f&&f.isDeterminate()!==!l&&f.setDeterminate(!l),t.$$.dirty&16400&&f&&f.getProgress()!==u&&f.setProgress(u),t.$$.dirty&16392&&f&&(c?f.close():f.open())},[o,a,l,c,u,h,d,p,g,m,y,s,r,K,f,L,k]}class HB extends Ye{constructor(e){super();Qe(this,e,qj,Hj,We,{use:0,class:1,indeterminate:2,closed:3,progress:4,fourColor:5,getElement:13})}get getElement(){return this.$$.ctx[13]}}export{oi as $,Rn as A,U as B,Vp as C,eB as D,Pw as E,vB as F,EB as G,we as H,Ce as I,Se as J,Te as K,Kj as L,me as M,Bt as N,nB as O,iB as P,aB as Q,cB as R,Ye as S,$j as T,Gj as U,gB as V,yB as W,bB as X,gN as Y,ue as Z,uB as _,ie as a,IB as a0,si as a1,Dp as a2,Ze as a3,Ge as a4,TB as a5,ur as a6,dB as a7,tB as a8,rB as a9,qe as aA,CB as aB,vn as aC,On as aD,Yj as aE,oe as aF,Gw as aG,pB as aH,VB as aI,xB as aJ,DB as aK,FB as aL,jB as aM,BB as aN,sB as aO,UB as aP,fB as aQ,HB as aR,oB as aa,lB as ab,_B as ac,wB as ad,rM as ae,FN as af,mB as ag,Np as ah,SB as ai,Ic as aj,AB as ak,kB as al,OB as am,hB as an,RB as ao,MB as ap,NB as aq,LB as ar,PB as as,Fw as at,zj as au,Zj as av,Jj as aw,Xj as ax,Hw as ay,Bw as az,$ as b,ve as c,N as d,_e as e,Z as f,ri as g,is as h,Qe as i,Be as j,Ke as k,vt as l,it as m,Xe as n,Ve as o,Ae as p,ht as q,Ft as r,We as s,Kn as t,F as u,je as v,Ut as w,P as x,Ht as y,Qj as z};
