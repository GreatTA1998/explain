var Gw=Object.defineProperty;var Fp=Object.getOwnPropertySymbols;var zw=Object.prototype.hasOwnProperty,Kw=Object.prototype.propertyIsEnumerable;var xp=(t,e,n)=>e in t?Gw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,at=(t,e)=>{for(var n in e||(e={}))zw.call(e,n)&&xp(t,n,e[n]);if(Fp)for(var n of Fp(e))Kw.call(e,n)&&xp(t,n,e[n]);return t};function Ht(){}function x(t,e){for(const n in e)t[n]=e[n];return t}function Up(t){return t()}function jp(){return Object.create(null)}function ze(t){t.forEach(Up)}function We(t){return typeof t=="function"}function Ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ja;function dB(t,e){return Ja||(Ja=document.createElement("a")),Ja.href=e,t===Ja.href}function Xw(t){return Object.keys(t).length===0}function Vp(t,...e){if(t==null)return Ht;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function fB(t){let e;return Vp(t,n=>e=n)(),e}function Qw(t,e,n){t.$$.on_destroy.push(Vp(e,n))}function we(t,e,n,i){if(t){const r=Bp(t,e,n,i);return t[0](r)}}function Bp(t,e,n,i){return t[1]&&i?x(n.ctx.slice(),t[1](i(e))):n.ctx}function Te(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function Ce(t,e,n,i,r,s){if(r){const o=Bp(e,n,i,s);t.p(o,r)}}function Se(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Ke(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function ie(t,e){const n={};e=new Set(e);for(const i in t)!e.has(i)&&i[0]!=="$"&&(n[i]=t[i]);return n}function Yw(t){const e={};for(const n in t)e[n]=!0;return e}function pB(t){return t==null?"":t}function Jw(t,e,n){return t.set(n),e}function oe(t){return t&&We(t.destroy)?t.destroy:Ht}let Za=!1;function Zw(){Za=!0}function $w(){Za=!1}function e1(t,e,n,i){for(;t<e;){const r=t+(e-t>>1);n(r)<=i?t=r+1:e=r}return t}function t1(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const l=[];for(let c=0;c<e.length;c++){const u=e[c];u.claim_order!==void 0&&l.push(u)}e=l}const n=new Int32Array(e.length+1),i=new Int32Array(e.length);n[0]=-1;let r=0;for(let l=0;l<e.length;l++){const c=e[l].claim_order,u=(r>0&&e[n[r]].claim_order<=c?r+1:e1(1,r,d=>e[n[d]].claim_order,c))-1;i[l]=n[u]+1;const h=u+1;n[h]=l,r=Math.max(h,r)}const s=[],o=[];let a=e.length-1;for(let l=n[r]+1;l!=0;l=i[l-1]){for(s.push(e[l-1]);a>=l;a--)o.push(e[a]);a--}for(;a>=0;a--)o.push(e[a]);s.reverse(),o.sort((l,c)=>l.claim_order-c.claim_order);for(let l=0,c=0;l<o.length;l++){for(;c<s.length&&o[l].claim_order>=s[c].claim_order;)c++;const u=c<s.length?s[c]:null;t.insertBefore(o[l],u)}}function me(t,e){if(Za){for(t1(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function $(t,e,n){Za&&!n?me(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function M(t){t.parentNode.removeChild(t)}function Hp(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _e(t){return document.createElement(t)}function vn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Xn(t){return document.createTextNode(t)}function Xe(){return Xn(" ")}function vt(){return Xn("")}function $e(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function n1(t){return function(e){return e.preventDefault(),t.call(this,e)}}function i1(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function ee(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ce(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set?t[i]=e[i]:ee(t,i,e[i])}function $a(t,e){for(const n in e)ee(t,n,e[n])}function re(t){return Array.from(t.childNodes)}function r1(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function qp(t,e,n,i,r=!1){r1(t);const s=(()=>{for(let o=t.claim_info.last_index;o<t.length;o++){const a=t[o];if(e(a)){const l=n(a);return l===void 0?t.splice(o,1):t[o]=l,r||(t.claim_info.last_index=o),a}}for(let o=t.claim_info.last_index-1;o>=0;o--){const a=t[o];if(e(a)){const l=n(a);return l===void 0?t.splice(o,1):t[o]=l,r?l===void 0&&t.claim_info.last_index--:t.claim_info.last_index=o,a}}return i()})();return s.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,s}function Wp(t,e,n,i){return qp(t,r=>r.nodeName===e,r=>{const s=[];for(let o=0;o<r.attributes.length;o++){const a=r.attributes[o];n[a.name]||s.push(a.name)}s.forEach(o=>r.removeAttribute(o))},()=>i(e))}function ve(t,e,n){return Wp(t,e,n,_e)}function Rn(t,e,n){return Wp(t,e,n,vn)}function ri(t,e){return qp(t,n=>n.nodeType===3,n=>{const i=""+e;if(n.data.startsWith(i)){if(n.data.length!==i.length)return n.splitText(i.length)}else n.data=i},()=>Xn(e),!0)}function Qe(t){return ri(t," ")}function ls(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Gp(t,e){t.value=e==null?"":e}function mB(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}function gB(t,e,n){t.classList[n?"add":"remove"](e)}function s1(t,e,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,!1,e),i}let el;function tl(t){el=t}function Ue(){if(!el)throw new Error("Function called outside component initialization");return el}function Ln(t){Ue().$$.on_mount.push(t)}function _B(t){Ue().$$.after_update.push(t)}function pr(t){Ue().$$.on_destroy.push(t)}function vB(){const t=Ue();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const r=s1(e,n);i.slice().forEach(s=>{s.call(t,r)})}}}function qt(t,e){Ue().$$.context.set(t,e)}function un(t){return Ue().$$.context.get(t)}function mo(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const go=[],ue=[],nl=[],ku=[],zp=Promise.resolve();let Ou=!1;function Kp(){Ou||(Ou=!0,zp.then(Xp))}function o1(){return Kp(),zp}function Ru(t){nl.push(t)}function si(t){ku.push(t)}let Lu=!1;const Mu=new Set;function Xp(){if(!Lu){Lu=!0;do{for(let t=0;t<go.length;t+=1){const e=go[t];tl(e),a1(e.$$)}for(tl(null),go.length=0;ue.length;)ue.pop()();for(let t=0;t<nl.length;t+=1){const e=nl[t];Mu.has(e)||(Mu.add(e),e())}nl.length=0}while(go.length);for(;ku.length;)ku.pop()();Ou=!1,Lu=!1,Mu.clear()}}function a1(t){if(t.fragment!==null){t.update(),ze(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ru)}}const il=new Set;let mr;function xt(){mr={r:0,c:[],p:mr}}function Ut(){mr.r||ze(mr.c),mr=mr.p}function P(t,e){t&&t.i&&(il.delete(t),t.i(e))}function F(t,e,n,i){if(t&&t.o){if(il.has(t))return;il.add(t),mr.c.push(()=>{il.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}const l1=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function yB(t,e){F(t,1,1,()=>{e.delete(t.key)})}function bB(t,e,n,i,r,s,o,a,l,c,u,h){let d=t.length,f=s.length,p=d;const g={};for(;p--;)g[t[p].key]=p;const m=[],v=new Map,w=new Map;for(p=f;p--;){const C=h(r,s,p),_=n(C);let I=o.get(_);I?i&&I.p(C,e):(I=c(_,C),I.c()),v.set(_,m[p]=I),_ in g&&w.set(_,Math.abs(p-g[_]))}const b=new Set,y=new Set;function O(C){P(C,1),C.m(a,u),o.set(C.key,C),u=C.first,f--}for(;d&&f;){const C=m[f-1],_=t[d-1],I=C.key,K=_.key;C===_?(u=C.first,d--,f--):v.has(K)?!o.has(I)||b.has(I)?O(C):y.has(K)?d--:w.get(I)>w.get(K)?(y.add(I),O(C)):(b.add(K),d--):(l(_,o),d--)}for(;d--;){const C=t[d];v.has(C.key)||l(C,o)}for(;f;)O(m[f-1]);return m}function Ae(t,e){const n={},i={},r={$$scope:1};let s=t.length;for(;s--;){const o=t[s],a=e[s];if(a){for(const l in o)l in a||(i[l]=1);for(const l in a)r[l]||(n[l]=a[l],r[l]=1);t[s]=a}else for(const l in o)r[l]=1}for(const o in i)o in n||(n[o]=void 0);return n}function ht(t){return typeof t=="object"&&t!==null?t:{}}function oi(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function He(t){t&&t.c()}function nt(t,e){t&&t.l(e)}function Ve(t,e,n,i){const{fragment:r,on_mount:s,on_destroy:o,after_update:a}=t.$$;r&&r.m(e,n),i||Ru(()=>{const l=s.map(Up).filter(We);o?o.push(...l):ze(l),t.$$.on_mount=[]}),a.forEach(Ru)}function Be(t,e){const n=t.$$;n.fragment!==null&&(ze(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function c1(t,e){t.$$.dirty[0]===-1&&(go.push(t),Kp(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ye(t,e,n,i,r,s,o,a=[-1]){const l=el;tl(t);const c=t.$$={fragment:null,ctx:null,props:s,update:Ht,not_equal:r,bound:jp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:jp(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(h,d,...f)=>{const p=f.length?f[0]:d;return c.ctx&&r(c.ctx[h],c.ctx[h]=p)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](p),u&&c1(t,h)),d}):[],c.update(),u=!0,ze(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){Zw();const h=re(e.target);c.fragment&&c.fragment.l(h),h.forEach(M)}else c.fragment&&c.fragment.c();e.intro&&P(t.$$.fragment),Ve(t,e.target,e.anchor,e.customElement),$w(),Xp()}tl(l)}class Je{$destroy(){Be(this,1),this.$destroy=Ht}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Xw(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const cs=[];function EB(t,e){return{subscribe:Qp(t,e).subscribe}}function Qp(t,e=Ht){let n;const i=new Set;function r(a){if(Ge(t,a)&&(t=a,n)){const l=!cs.length;for(const c of i)c[1](),cs.push(c,t);if(l){for(let c=0;c<cs.length;c+=2)cs[c][0](cs[c+1]);cs.length=0}}}function s(a){r(a(t))}function o(a,l=Ht){const c=[a,l];return i.add(c),i.size===1&&(n=e(r)||Ht),a(t),()=>{i.delete(c),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z=function(t,e){if(!t)throw us(e)},us=function(t){return new Error("Firebase Database ("+Yp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)==55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)==56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},u1=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Nu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Jp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||h==null)throw Error();const d=s<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const p=c<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},h1=function(t){const e=Jp(t);return Nu.encodeByteArray(e,!0)},Pu=function(t){try{return Nu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){return Zp(void 0,t)}function Zp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!f1(n)||(t[n]=Zp(t[n],e[n]));return t}function f1(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rl(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function $p(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Du(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function p1(){return Qt().indexOf("Electron/")>=0}function em(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m1(){return Qt().indexOf("MSAppHost/")>=0}function tm(){return Yp.NODE_ADMIN===!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="FirebaseError";class Pi extends Error{constructor(e,n,i){super(n);this.code=e,this.customData=i,this.name=g1,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_o.prototype.create)}}class _o{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?_1(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Pi(r,a,i)}}function _1(t,e){return t.replace(v1,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const v1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t){return JSON.parse(t)}function Yt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=vo(Pu(s[0])||""),n=vo(Pu(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},y1=function(t){const e=nm(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},b1=function(t){const e=nm(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hs(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function sl(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ol(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function al(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(im(s)&&im(o)){if(!al(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function im(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(d<<1|d>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const d=(r<<5|r>>>27)+c+l+u+i[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=d}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function I1(t,e){const n=new w1(t,e);return n.subscribe.bind(n)}class w1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");T1(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Fu),r.error===void 0&&(r.error=Fu),r.complete===void 0&&(r.complete=Fu);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function T1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fu(){}function ds(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,z(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},ll=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class gi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ni;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k1(e))try{this.getOrInitializeService({instanceIdentifier:_r})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=_r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_r){return this.instances.has(e)}getOptions(e=_r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(!!i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:A1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_r){return this.component?this.component.multipleInstances?e:_r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A1(t){return t===_r?void 0:t}function k1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new S1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const R1={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},L1=Ze.INFO,M1={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},N1=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=M1[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cl{constructor(e){this.name=e,this._logLevel=L1,this._logHandler=N1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?R1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(D1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function D1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xu="@firebase/app",rm="0.7.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=new cl("@firebase/app"),F1="@firebase/app-compat",x1="@firebase/analytics-compat",U1="@firebase/analytics",j1="@firebase/app-check-compat",V1="@firebase/app-check",B1="@firebase/auth",H1="@firebase/auth-compat",q1="@firebase/database",W1="@firebase/database-compat",G1="@firebase/functions",z1="@firebase/functions-compat",K1="@firebase/installations",X1="@firebase/installations-compat",Q1="@firebase/messaging",Y1="@firebase/messaging-compat",J1="@firebase/performance",Z1="@firebase/performance-compat",$1="@firebase/remote-config",eT="@firebase/remote-config-compat",tT="@firebase/storage",nT="@firebase/storage-compat",iT="@firebase/firestore",rT="@firebase/firestore-compat",sT="firebase",oT="9.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="[DEFAULT]",aT={[xu]:"fire-core",[F1]:"fire-core-compat",[U1]:"fire-analytics",[x1]:"fire-analytics-compat",[V1]:"fire-app-check",[j1]:"fire-app-check-compat",[B1]:"fire-auth",[H1]:"fire-auth-compat",[q1]:"fire-rtdb",[W1]:"fire-rtdb-compat",[G1]:"fire-fn",[z1]:"fire-fn-compat",[K1]:"fire-iid",[X1]:"fire-iid-compat",[Q1]:"fire-fcm",[Y1]:"fire-fcm-compat",[J1]:"fire-perf",[Z1]:"fire-perf-compat",[$1]:"fire-rc",[eT]:"fire-rc-compat",[tT]:"fire-gcs",[nT]:"fire-gcs-compat",[iT]:"fire-fst",[rT]:"fire-fst-compat","fire-js":"fire-js",[sT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new Map,ju=new Map;function lT(t,e){try{t.container.addComponent(e)}catch(n){Uu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Di(t){const e=t.name;if(ju.has(e))return Uu.debug(`There were multiple attempts to register component ${e}.`),!1;ju.set(e,t);for(const n of ul.values())lT(n,t);return!0}function fs(t,e){return t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},hl=new _o("app","Firebase",cT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=oT;function IB(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:sm,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw hl.create("bad-app-name",{appName:String(i)});const r=ul.get(i);if(r){if(al(t,r.options)&&al(n,r.config))return r;throw hl.create("duplicate-app",{appName:i})}const s=new O1(i);for(const a of ju.values())s.addComponent(a);const o=new uT(t,n,s);return ul.set(i,o),o}function yo(t=sm){const e=ul.get(t);if(!e)throw hl.create("no-app",{appName:t});return e}function Mn(t,e,n){var i;let r=(i=aT[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Uu.warn(a.join(" "));return}Di(new gi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t){Di(new gi("platform-logger",e=>new P1(e),"PRIVATE")),Mn(xu,rm,t),Mn(xu,rm,"esm2017"),Mn("fire-js","")}hT("");var dT="firebase",fT="9.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(dT,fT,"app");var pT=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ne,Vu=Vu||{},ke=pT||self;function dl(){}function Bu(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function bo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function mT(t){return Object.prototype.hasOwnProperty.call(t,Hu)&&t[Hu]||(t[Hu]=++gT)}var Hu="closure_uid_"+(1e9*Math.random()>>>0),gT=0;function _T(t,e,n){return t.call.apply(t.bind,arguments)}function vT(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function nn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?nn=_T:nn=vT,nn.apply(null,arguments)}function fl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function rn(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Fi(){this.s=this.s,this.o=this.o}var yT=0,bT={};Fi.prototype.s=!1;Fi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),yT!=0)){var t=mT(this);delete bT[t]}};Fi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const om=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},am=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const i=t.length,r=typeof t=="string"?t.split(""):t;for(let s=0;s<i;s++)s in r&&e.call(n,r[s],s,t)};function ET(t){e:{var e=dC;const n=t.length,i=typeof t=="string"?t.split(""):t;for(let r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function lm(t){return Array.prototype.concat.apply([],arguments)}function qu(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function pl(t){return/^[\s\xa0]*$/.test(t)}var cm=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function yn(t,e){return t.indexOf(e)!=-1}function Wu(t,e){return t<e?-1:t>e?1:0}var bn;e:{var um=ke.navigator;if(um){var hm=um.userAgent;if(hm){bn=hm;break e}}bn=""}function Gu(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function dm(t){const e={};for(const n in t)e[n]=t[n];return e}var fm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pm(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<fm.length;s++)n=fm[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function zu(t){return zu[" "](t),t}zu[" "]=dl;function IT(t){var e=CT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var wT=yn(bn,"Opera"),ps=yn(bn,"Trident")||yn(bn,"MSIE"),mm=yn(bn,"Edge"),Ku=mm||ps,gm=yn(bn,"Gecko")&&!(yn(bn.toLowerCase(),"webkit")&&!yn(bn,"Edge"))&&!(yn(bn,"Trident")||yn(bn,"MSIE"))&&!yn(bn,"Edge"),TT=yn(bn.toLowerCase(),"webkit")&&!yn(bn,"Edge");function _m(){var t=ke.document;return t?t.documentMode:void 0}var ml;e:{var Xu="",Qu=function(){var t=bn;if(gm)return/rv:([^\);]+)(\)|;)/.exec(t);if(mm)return/Edge\/([\d\.]+)/.exec(t);if(ps)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(TT)return/WebKit\/(\S+)/.exec(t);if(wT)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Qu&&(Xu=Qu?Qu[1]:""),ps){var Yu=_m();if(Yu!=null&&Yu>parseFloat(Xu)){ml=String(Yu);break e}}ml=Xu}var CT={};function ST(){return IT(function(){let t=0;const e=cm(String(ml)).split("."),n=cm("9").split("."),i=Math.max(e.length,n.length);for(let o=0;t==0&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r[0].length==0&&s[0].length==0)break;t=Wu(r[1].length==0?0:parseInt(r[1],10),s[1].length==0?0:parseInt(s[1],10))||Wu(r[2].length==0,s[2].length==0)||Wu(r[2],s[2]),r=r[3],s=s[3]}while(t==0)}return 0<=t})}var Ju;if(ke.document&&ps){var vm=_m();Ju=vm||parseInt(ml,10)||void 0}else Ju=void 0;var AT=Ju,kT=function(){if(!ke.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ke.addEventListener("test",dl,e),ke.removeEventListener("test",dl,e)}catch{}return t}();function hn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}hn.prototype.h=function(){this.defaultPrevented=!0};function Eo(t,e){if(hn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(gm){e:{try{zu(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:OT[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Eo.Z.h.call(this)}}rn(Eo,hn);var OT={2:"touch",3:"pen",4:"mouse"};Eo.prototype.h=function(){Eo.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Io="closure_listenable_"+(1e6*Math.random()|0),RT=0;function LT(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ia=r,this.key=++RT,this.ca=this.fa=!1}function gl(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function _l(t){this.src=t,this.g={},this.h=0}_l.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=$u(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new LT(e,this.src,s,!!i,r),e.fa=n,t.push(e)),e};function Zu(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=om(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(gl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function $u(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==i)return r}return-1}var eh="closure_lm_"+(1e6*Math.random()|0),th={};function ym(t,e,n,i,r){if(i&&i.once)return Em(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ym(t,e[s],n,i,r);return null}return n=sh(n),t&&t[Io]?t.N(e,n,bo(i)?!!i.capture:!!i,r):bm(t,e,n,!1,i,r)}function bm(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=bo(r)?!!r.capture:!!r,a=ih(t);if(a||(t[eh]=a=new _l(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=MT(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)kT||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(wm(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function MT(){function t(n){return e.call(t.src,t.listener,n)}var e=NT;return t}function Em(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Em(t,e[s],n,i,r);return null}return n=sh(n),t&&t[Io]?t.O(e,n,bo(i)?!!i.capture:!!i,r):bm(t,e,n,!0,i,r)}function Im(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Im(t,e[s],n,i,r);else i=bo(i)?!!i.capture:!!i,n=sh(n),t&&t[Io]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=$u(s,n,i,r),-1<n&&(gl(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=ih(t))&&(e=t.g[e.toString()],t=-1,e&&(t=$u(e,n,i,r)),(n=-1<t?e[t]:null)&&nh(n))}function nh(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[Io])Zu(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(wm(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=ih(e))?(Zu(n,t),n.h==0&&(n.src=null,e[eh]=null)):gl(t)}}}function wm(t){return t in th?th[t]:th[t]="on"+t}function NT(t,e){if(t.ca)t=!0;else{e=new Eo(e,this);var n=t.listener,i=t.ia||t.src;t.fa&&nh(t),t=n.call(i,e)}return t}function ih(t){return t=t[eh],t instanceof _l?t:null}var rh="__closure_events_fn_"+(1e9*Math.random()>>>0);function sh(t){return typeof t=="function"?t:(t[rh]||(t[rh]=function(e){return t.handleEvent(e)}),t[rh])}function Jt(){Fi.call(this),this.i=new _l(this),this.P=this,this.I=null}rn(Jt,Fi);Jt.prototype[Io]=!0;Jt.prototype.removeEventListener=function(t,e,n,i){Im(this,t,e,n,i)};function sn(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,typeof e=="string")e=new hn(e,t);else if(e instanceof hn)e.target=e.target||t;else{var r=e;e=new hn(i,t),pm(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=vl(o,i,!0,e)&&r}if(o=e.g=t,r=vl(o,i,!0,e)&&r,r=vl(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=vl(o,i,!1,e)&&r}Jt.prototype.M=function(){if(Jt.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)gl(n[i]);delete t.g[e],t.h--}}this.I=null};Jt.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Jt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function vl(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Zu(t.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var oh=ke.JSON.stringify;function PT(){var t=Cm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class DT{constructor(){this.h=this.g=null}add(e,n){const i=Tm.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var Tm=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new FT,t=>t.reset());class FT{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function xT(t){ke.setTimeout(()=>{throw t},0)}function ah(t,e){lh||UT(),ch||(lh(),ch=!0),Cm.add(t,e)}var lh;function UT(){var t=ke.Promise.resolve(void 0);lh=function(){t.then(jT)}}var ch=!1,Cm=new DT;function jT(){for(var t;t=PT();){try{t.h.call(t.g)}catch(n){xT(n)}var e=Tm;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ch=!1}function yl(t,e){Jt.call(this),this.h=t||1,this.g=e||ke,this.j=nn(this.kb,this),this.l=Date.now()}rn(yl,Jt);ne=yl.prototype;ne.da=!1;ne.S=null;ne.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),sn(this,"tick"),this.da&&(uh(this),this.start()))}};ne.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function uh(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}ne.M=function(){yl.Z.M.call(this),uh(this),delete this.g};function hh(t,e,n){if(typeof t=="function")n&&(t=nn(t,n));else if(t&&typeof t.handleEvent=="function")t=nn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ke.setTimeout(t,e||0)}function Sm(t){t.g=hh(()=>{t.g=null,t.i&&(t.i=!1,Sm(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class VT extends Fi{constructor(e,n){super();this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Sm(this)}M(){super.M(),this.g&&(ke.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wo(t){Fi.call(this),this.h=t,this.g={}}rn(wo,Fi);var Am=[];function km(t,e,n,i){Array.isArray(n)||(n&&(Am[0]=n.toString()),n=Am);for(var r=0;r<n.length;r++){var s=ym(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Om(t){Gu(t.g,function(e,n){this.g.hasOwnProperty(n)&&nh(e)},t),t.g={}}wo.prototype.M=function(){wo.Z.M.call(this),Om(this)};wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function bl(){this.g=!0}bl.prototype.Aa=function(){this.g=!1};function BT(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function HT(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function ms(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+WT(t,n)+(i?" "+i:"")})}function qT(t,e){t.info(function(){return"TIMEOUT: "+e})}bl.prototype.info=function(){};function WT(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return oh(n)}catch{return e}}var yr={},Rm=null;function El(){return Rm=Rm||new Jt}yr.Ma="serverreachability";function Lm(t){hn.call(this,yr.Ma,t)}rn(Lm,hn);function To(t){const e=El();sn(e,new Lm(e,t))}yr.STAT_EVENT="statevent";function Mm(t,e){hn.call(this,yr.STAT_EVENT,t),this.stat=e}rn(Mm,hn);function En(t){const e=El();sn(e,new Mm(e,t))}yr.Na="timingevent";function Nm(t,e){hn.call(this,yr.Na,t),this.size=e}rn(Nm,hn);function Co(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ke.setTimeout(function(){t()},e)}var Il={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Pm={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function dh(){}dh.prototype.h=null;function Dm(t){return t.h||(t.h=t.i())}function Fm(){}var So={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function fh(){hn.call(this,"d")}rn(fh,hn);function ph(){hn.call(this,"c")}rn(ph,hn);var mh;function wl(){}rn(wl,dh);wl.prototype.g=function(){return new XMLHttpRequest};wl.prototype.i=function(){return{}};mh=new wl;function Ao(t,e,n,i){this.l=t,this.j=e,this.m=n,this.X=i||1,this.V=new wo(this),this.P=GT,t=Ku?125:void 0,this.W=new yl(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new xm}function xm(){this.i=null,this.g="",this.h=!1}var GT=45e3,gh={},Tl={};ne=Ao.prototype;ne.setTimeout=function(t){this.P=t};function _h(t,e,n){t.K=1,t.v=Ol(_i(e)),t.s=n,t.U=!0,Um(t,null)}function Um(t,e){t.F=Date.now(),ko(t),t.A=_i(t.v);var n=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),Km(n.h,"t",i),t.C=0,n=t.l.H,t.h=new xm,t.g=gg(t.l,n?e:null,!t.s),0<t.O&&(t.L=new VT(nn(t.Ia,t,t.g),t.O)),km(t.V,t.g,"readystatechange",t.gb),e=t.H?dm(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),To(1),BT(t.j,t.u,t.A,t.m,t.X,t.s)}ne.gb=function(t){t=t.target;const e=this.L;e&&vi(t)==3?e.l():this.Ia(t)};ne.Ia=function(t){try{if(t==this.g)e:{const u=vi(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>u)&&(u!=3||Ku||this.g&&(this.h.h||this.g.ga()||sg(this.g)))){this.I||u!=4||e==7||(e==8||0>=h?To(3):To(2)),Cl(this);var n=this.g.ba();this.N=n;t:if(jm(this)){var i=sg(this.g);t="";var r=i.length,s=vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){br(this),Oo(this);var o="";break t}this.h.i=new ke.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,HT(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pl(a)){var c=a;break t}}c=null}if(n=c)ms(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vh(this,n);else{this.i=!1,this.o=3,En(12),br(this),Oo(this);break e}}this.U?(Vm(this,u,o),Ku&&this.i&&u==3&&(km(this.V,this.W,"tick",this.fb),this.W.start())):(ms(this.j,this.m,o,null),vh(this,o)),u==4&&br(this),this.i&&!this.I&&(u==4?dg(this.l,this):(this.i=!1,ko(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,En(12)):(this.o=0,En(13)),br(this),Oo(this)}}}catch{}finally{}};function jm(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function Vm(t,e,n){let i=!0,r;for(;!t.I&&t.C<n.length;)if(r=zT(t,n),r==Tl){e==4&&(t.o=4,En(14),i=!1),ms(t.j,t.m,null,"[Incomplete Response]");break}else if(r==gh){t.o=4,En(15),ms(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else ms(t.j,t.m,r,null),vh(t,r);jm(t)&&r!=Tl&&r!=gh&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,En(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Oh(e),e.L=!0,En(11))):(ms(t.j,t.m,n,"[Invalid Chunked Response]"),br(t),Oo(t))}ne.fb=function(){if(this.g){var t=vi(this.g),e=this.g.ga();this.C<e.length&&(Cl(this),Vm(this,t,e),this.i&&t!=4&&ko(this))}};function zT(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?Tl:(n=Number(e.substring(n,i)),isNaN(n)?gh:(i+=1,i+n>e.length?Tl:(e=e.substr(i,n),t.C=i+n,e)))}ne.cancel=function(){this.I=!0,br(this)};function ko(t){t.Y=Date.now()+t.P,Bm(t,t.P)}function Bm(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Co(nn(t.eb,t),e)}function Cl(t){t.B&&(ke.clearTimeout(t.B),t.B=null)}ne.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(qT(this.j,this.A),this.K!=2&&(To(3),En(17)),br(this),this.o=2,Oo(this)):Bm(this,this.Y-t)};function Oo(t){t.l.G==0||t.I||dg(t.l,t)}function br(t){Cl(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,uh(t.W),Om(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function vh(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Eh(n.i,t))){if(n.I=t.N,!t.J&&Eh(n.i,t)&&n.G==3){try{var i=n.Ca.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0)e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Dl(n),Nl(n);else break e;kh(n),En(18)}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&n.A==0&&!n.v&&(n.v=Co(nn(n.ab,n),6e3));if(1>=Ym(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else wr(n,11)}else if((t.J||n.g==t)&&Dl(n),!pl(e))for(r=n.Ca.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.U=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.J=c[1],n.la=c[2];const u=c[3];u!=null&&(n.ma=u,n.h.info("VER="+n.ma));const h=c[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.i;!s.g&&(yn(p,"spdy")||yn(p,"quic")||yn(p,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Ih(s,s.h),s.h=null))}if(i.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.sa=g,Ct(i.F,i.D,g))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),i=n;var o=t;if(i.oa=mg(i,i.H?i.la:null,i.W),o.J){Jm(i.i,o);var a=o,l=i.K;l&&a.setTimeout(l),a.B&&(Cl(a),ko(a)),i.g=o}else ug(i);0<n.l.length&&Pl(n)}else c[0]!="stop"&&c[0]!="close"||wr(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?wr(n,7):Sh(n):c[0]!="noop"&&n.j&&n.j.wa(c),n.A=0)}}To(4)}catch{}}function KT(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Bu(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function yh(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Bu(t)||typeof t=="string")am(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Bu(t)||typeof t=="string"){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;i=KT(t),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}}function gs(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof gs)for(n=t.T(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}ne=gs.prototype;ne.R=function(){bh(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};ne.T=function(){return bh(this),this.g.concat()};function bh(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var i=t.g[e];Er(t.h,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.i!=t.g.length){var r={};for(n=e=0;e<t.g.length;)i=t.g[e],Er(r,i)||(t.g[n++]=i,r[i]=1),e++;t.g.length=n}}ne.get=function(t,e){return Er(this.h,t)?this.h[t]:e};ne.set=function(t,e){Er(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};ne.forEach=function(t,e){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);t.call(e,s,r,this)}};function Er(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Hm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function XT(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Ir(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ir){this.g=e!==void 0?e:t.g,Sl(this,t.j),this.s=t.s,Al(this,t.i),kl(this,t.m),this.l=t.l,e=t.h;var n=new Mo;n.i=e.i,e.g&&(n.g=new gs(e.g),n.h=e.h),qm(this,n),this.o=t.o}else t&&(n=String(t).match(Hm))?(this.g=!!e,Sl(this,n[1]||"",!0),this.s=Ro(n[2]||""),Al(this,n[3]||"",!0),kl(this,n[4]),this.l=Ro(n[5]||"",!0),qm(this,n[6]||"",!0),this.o=Ro(n[7]||"")):(this.g=!!e,this.h=new Mo(null,this.g))}Ir.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Lo(e,Wm,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Lo(e,Wm,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(Lo(n,n.charAt(0)=="/"?$T:ZT,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Lo(n,tC)),t.join("")};function _i(t){return new Ir(t)}function Sl(t,e,n){t.j=n?Ro(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Al(t,e,n){t.i=n?Ro(e,!0):e}function kl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function qm(t,e,n){e instanceof Mo?(t.h=e,nC(t.h,t.g)):(n||(e=Lo(e,eC)),t.h=new Mo(e,t.g))}function Ct(t,e,n){t.h.set(e,n)}function Ol(t){return Ct(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function QT(t){return t instanceof Ir?_i(t):new Ir(t,void 0)}function YT(t,e,n,i){var r=new Ir(null,void 0);return t&&Sl(r,t),e&&Al(r,e),n&&kl(r,n),i&&(r.l=i),r}function Ro(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Lo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,JT),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function JT(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Wm=/[#\/\?@]/g,ZT=/[#\?:]/g,$T=/[#\?]/g,eC=/[#\?@]/g,tC=/#/g;function Mo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function xi(t){t.g||(t.g=new gs,t.h=0,t.i&&XT(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ne=Mo.prototype;ne.add=function(t,e){xi(this),this.i=null,t=_s(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Gm(t,e){xi(t),e=_s(t,e),Er(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Er(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&bh(t)))}function zm(t,e){return xi(t),e=_s(t,e),Er(t.g.h,e)}ne.forEach=function(t,e){xi(this),this.g.forEach(function(n,i){am(n,function(r){t.call(e,r,i,this)},this)},this)};ne.T=function(){xi(this);for(var t=this.g.R(),e=this.g.T(),n=[],i=0;i<e.length;i++)for(var r=t[i],s=0;s<r.length;s++)n.push(e[i]);return n};ne.R=function(t){xi(this);var e=[];if(typeof t=="string")zm(this,t)&&(e=lm(e,this.g.get(_s(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=lm(e,t[n])}return e};ne.set=function(t,e){return xi(this),this.i=null,t=_s(this,t),zm(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ne.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function Km(t,e,n){Gm(t,e),0<n.length&&(t.i=null,t.g.set(_s(t,e),qu(n)),t.h+=n.length)}ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;i[s]!==""&&(o+="="+encodeURIComponent(String(i[s]))),t.push(o)}}return this.i=t.join("&")};function _s(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function nC(t,e){e&&!t.j&&(xi(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(Gm(this,i),Km(this,r,n))},t)),t.j=e}var iC=class{constructor(t,e){this.h=t,this.g=e}};function Xm(t){this.l=t||rC,ke.PerformanceNavigationTiming?(t=ke.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ke.g&&ke.g.Ea&&ke.g.Ea()&&ke.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var rC=10;function Qm(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Ym(t){return t.h?1:t.g?t.g.size:0}function Eh(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ih(t,e){t.g?t.g.add(e):t.h=e}function Jm(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Xm.prototype.cancel=function(){if(this.i=Zm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Zm(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return qu(t.i)}function wh(){}wh.prototype.stringify=function(t){return ke.JSON.stringify(t,void 0)};wh.prototype.parse=function(t){return ke.JSON.parse(t,void 0)};function sC(){this.g=new wh}function oC(t,e,n){const i=n||"";try{yh(t,function(r,s){let o=r;bo(r)&&(o=oh(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function aC(t,e){const n=new bl;if(ke.Image){const i=new Image;i.onload=fl(Rl,n,i,"TestLoadImage: loaded",!0,e),i.onerror=fl(Rl,n,i,"TestLoadImage: error",!1,e),i.onabort=fl(Rl,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=fl(Rl,n,i,"TestLoadImage: timeout",!1,e),ke.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Rl(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function No(t){this.l=t.$b||null,this.j=t.ib||!1}rn(No,dh);No.prototype.g=function(){return new Ll(this.l,this.j)};No.prototype.i=function(t){return function(){return t}}({});function Ll(t,e){Jt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Th,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rn(Ll,Jt);var Th=0;ne=Ll.prototype;ne.open=function(t,e){if(this.readyState!=Th)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Do(this)};ne.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ke).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=Th};ne.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Do(this)),this.g&&(this.readyState=3,Do(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof ke.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$m(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function $m(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}ne.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Po(this):Do(this),this.readyState==3&&$m(this)}};ne.Ua=function(t){this.g&&(this.response=this.responseText=t,Po(this))};ne.Ta=function(t){this.g&&(this.response=t,Po(this))};ne.ha=function(){this.g&&Po(this)};function Po(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Do(t)}ne.setRequestHeader=function(t,e){this.v.append(t,e)};ne.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ne.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Do(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var lC=ke.JSON.parse;function jt(t){Jt.call(this),this.headers=new gs,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=eg,this.K=this.L=!1}rn(jt,Jt);var eg="",cC=/^https?$/i,uC=["POST","PUT"];ne=jt.prototype;ne.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mh.g(),this.C=this.u?Dm(this.u):Dm(mh),this.g.onreadystatechange=nn(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){tg(this,s);return}t=n||"";const r=new gs(this.headers);i&&yh(i,function(s,o){r.set(o,s)}),i=ET(r.T()),n=ke.FormData&&t instanceof ke.FormData,!(0<=om(uC,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rg(this),0<this.B&&((this.K=hC(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nn(this.pa,this)):this.A=hh(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){tg(this,s)}};function hC(t){return ps&&ST()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function dC(t){return t.toLowerCase()=="content-type"}ne.pa=function(){typeof Vu!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,sn(this,"timeout"),this.abort(8))};function tg(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ng(t),Ml(t)}function ng(t){t.D||(t.D=!0,sn(t,"complete"),sn(t,"error"))}ne.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,sn(this,"complete"),sn(this,"abort"),Ml(this))};ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ml(this,!0)),jt.Z.M.call(this)};ne.Fa=function(){this.s||(this.F||this.v||this.l?ig(this):this.cb())};ne.cb=function(){ig(this)};function ig(t){if(t.h&&typeof Vu!="undefined"&&(!t.C[1]||vi(t)!=4||t.ba()!=2)){if(t.v&&vi(t)==4)hh(t.Fa,0,t);else if(sn(t,"readystatechange"),vi(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=a===0){var r=String(t.H).match(Hm)[1]||null;if(!r&&ke.self&&ke.self.location){var s=ke.self.location.protocol;r=s.substr(0,s.length-1)}i=!cC.test(r?r.toLowerCase():"")}n=i}if(n)sn(t,"complete"),sn(t,"success");else{t.m=6;try{var o=2<vi(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",ng(t)}}finally{Ml(t)}}}}function Ml(t,e){if(t.g){rg(t);const n=t.g,i=t.C[0]?dl:null;t.g=null,t.C=null,e||sn(t,"ready");try{n.onreadystatechange=i}catch{}}}function rg(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ke.clearTimeout(t.A),t.A=null)}function vi(t){return t.g?t.g.readyState:0}ne.ba=function(){try{return 2<vi(this)?this.g.status:-1}catch{return-1}};ne.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};ne.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),lC(e)}};function sg(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case eg:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}ne.Da=function(){return this.m};ne.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function fC(t){let e="";return Gu(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function Ch(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=fC(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ct(t,e,n))}function Fo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function og(t){this.za=0,this.l=[],this.h=new bl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fo("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fo("baseRetryDelayMs",5e3,t),this.$a=Fo("retryDelaySeedMs",1e4,t),this.Ya=Fo("forwardChannelMaxRetries",2,t),this.ra=Fo("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Xm(t&&t.concurrentRequestLimit),this.Ca=new sC,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}ne=og.prototype;ne.ma=8;ne.G=1;function Sh(t){if(ag(t),t.G==3){var e=t.V++,n=_i(t.F);Ct(n,"SID",t.J),Ct(n,"RID",e),Ct(n,"TYPE","terminate"),xo(t,n),e=new Ao(t,t.h,e,void 0),e.K=2,e.v=Ol(_i(n)),n=!1,ke.navigator&&ke.navigator.sendBeacon&&(n=ke.navigator.sendBeacon(e.v.toString(),"")),!n&&ke.Image&&(new Image().src=e.v,n=!0),n||(e.g=gg(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ko(e)}pg(t)}ne.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Nl(t){t.g&&(Oh(t),t.g.cancel(),t.g=null)}function ag(t){Nl(t),t.u&&(ke.clearTimeout(t.u),t.u=null),Dl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ke.clearTimeout(t.m),t.m=null)}function Ah(t,e){t.l.push(new iC(t.Za++,e)),t.G==3&&Pl(t)}function Pl(t){Qm(t.i)||t.m||(t.m=!0,ah(t.Ha,t),t.C=0)}function pC(t,e){return Ym(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=Co(nn(t.Ha,t,e),fg(t,t.C)),t.C++,!0)}ne.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const r=new Ao(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=dm(s),pm(s,this.P)):s=this.P),this.o===null&&(r.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var i=this.l[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=cg(this,r,e),n=_i(this.F),Ct(n,"RID",t),Ct(n,"CVER",22),this.D&&Ct(n,"X-HTTP-Session-Id",this.D),xo(this,n),this.o&&s&&Ch(n,this.o,s),Ih(this.i,r),this.Ra&&Ct(n,"TYPE","init"),this.ja?(Ct(n,"$req",e),Ct(n,"SID","null"),r.$=!0,_h(r,n,null)):_h(r,n,e),this.G=2}}else this.G==3&&(t?lg(this,t):this.l.length==0||Qm(this.i)||lg(this))};function lg(t,e){var n;e?n=e.m:n=t.V++;const i=_i(t.F);Ct(i,"SID",t.J),Ct(i,"RID",n),Ct(i,"AID",t.U),xo(t,i),t.o&&t.s&&Ch(i,t.o,t.s),n=new Ao(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=cg(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Ih(t.i,n),_h(n,i,e)}function xo(t,e){t.j&&yh({},function(n,i){Ct(e,i,n)})}function cg(t,e,n){n=Math.min(t.l.length,n);var i=t.j?nn(t.j.Oa,t.j,t):null;e:{var r=t.l;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=r[l].h;const u=r[l].g;if(c-=s,0>c)s=Math.max(0,r[l].h-100),a=!1;else try{oC(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,i}function ug(t){t.g||t.u||(t.Y=1,ah(t.Ga,t),t.A=0)}function kh(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=Co(nn(t.Ga,t),fg(t,t.A)),t.A++,!0)}ne.Ga=function(){if(this.u=null,hg(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Co(nn(this.bb,this),t)}};ne.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,En(10),Nl(this),hg(this))};function Oh(t){t.B!=null&&(ke.clearTimeout(t.B),t.B=null)}function hg(t){t.g=new Ao(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=_i(t.oa);Ct(e,"RID","rpc"),Ct(e,"SID",t.J),Ct(e,"CI",t.N?"0":"1"),Ct(e,"AID",t.U),xo(t,e),Ct(e,"TYPE","xmlhttp"),t.o&&t.s&&Ch(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ol(_i(e)),n.s=null,n.U=!0,Um(n,t)}ne.ab=function(){this.v!=null&&(this.v=null,Nl(this),kh(this),En(19))};function Dl(t){t.v!=null&&(ke.clearTimeout(t.v),t.v=null)}function dg(t,e){var n=null;if(t.g==e){Dl(t),Oh(t),t.g=null;var i=2}else if(Eh(t.i,e))n=e.D,Jm(t.i,e),i=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;i=El(),sn(i,new Nm(i,n,e,r)),Pl(t)}else ug(t);else if(r=e.o,r==3||r==0&&0<t.I||!(i==1&&pC(t,e)||i==2&&kh(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:wr(t,5);break;case 4:wr(t,10);break;case 3:wr(t,6);break;default:wr(t,2)}}}function fg(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function wr(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var i=nn(t.jb,t);n||(n=new Ir("//www.google.com/images/cleardot.gif"),ke.location&&ke.location.protocol=="http"||Sl(n,"https"),Ol(n)),aC(n.toString(),i)}else En(2);t.G=0,t.j&&t.j.va(e),pg(t),ag(t)}ne.jb=function(t){t?(this.h.info("Successfully pinged google.com"),En(2)):(this.h.info("Failed to ping google.com"),En(1))};function pg(t){t.G=0,t.I=-1,t.j&&((Zm(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,qu(t.l),t.l.length=0),t.j.ua())}function mg(t,e,n){let i=QT(n);if(i.i!="")e&&Al(i,e+"."+i.i),kl(i,i.m);else{const r=ke.location;i=YT(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,n)}return t.aa&&Gu(t.aa,function(r,s){Ct(i,s,r)}),e=t.D,n=t.sa,e&&n&&Ct(i,e,n),Ct(i,"VER",t.ma),xo(t,i),i}function gg(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new jt(new No({ib:!0})):new jt(t.qa),e.L=t.H,e}function _g(){}ne=_g.prototype;ne.xa=function(){};ne.wa=function(){};ne.va=function(){};ne.ua=function(){};ne.Oa=function(){};function Fl(){if(ps&&!(10<=Number(AT)))throw Error("Environmental error: no available transport.")}Fl.prototype.g=function(t,e){return new Vn(t,e)};function Vn(t,e){Jt.call(this),this.g=new og(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!pl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pl(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new vs(this)}rn(Vn,Jt);Vn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),ah(nn(t.hb,t,e))),En(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=mg(t,null,t.W),Pl(t)};Vn.prototype.close=function(){Sh(this.g)};Vn.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Ah(this.g,e)}else this.v?(e={},e.__data__=oh(t),Ah(this.g,e)):Ah(this.g,t)};Vn.prototype.M=function(){this.g.j=null,delete this.j,Sh(this.g),delete this.g,Vn.Z.M.call(this)};function vg(t){fh.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}rn(vg,fh);function yg(){ph.call(this),this.status=1}rn(yg,ph);function vs(t){this.g=t}rn(vs,_g);vs.prototype.xa=function(){sn(this.g,"a")};vs.prototype.wa=function(t){sn(this.g,new vg(t))};vs.prototype.va=function(t){sn(this.g,new yg(t))};vs.prototype.ua=function(){sn(this.g,"b")};Fl.prototype.createWebChannel=Fl.prototype.g;Vn.prototype.send=Vn.prototype.u;Vn.prototype.open=Vn.prototype.m;Vn.prototype.close=Vn.prototype.close;Il.NO_ERROR=0;Il.TIMEOUT=8;Il.HTTP_ERROR=6;Pm.COMPLETE="complete";Fm.EventType=So;So.OPEN="a";So.CLOSE="b";So.ERROR="c";So.MESSAGE="d";Jt.prototype.listen=Jt.prototype.N;jt.prototype.listenOnce=jt.prototype.O;jt.prototype.getLastError=jt.prototype.La;jt.prototype.getLastErrorCode=jt.prototype.Da;jt.prototype.getStatus=jt.prototype.ba;jt.prototype.getResponseJson=jt.prototype.Qa;jt.prototype.getResponseText=jt.prototype.ga;jt.prototype.send=jt.prototype.ea;var mC=function(){return new Fl},gC=function(){return El()},Rh=Il,_C=Pm,vC=yr,bg={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yC=No,xl=Fm,bC=jt;const Eg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ys="9.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new cl("@firebase/firestore");function Ig(){return Tr.logLevel}function de(t,...e){if(Tr.logLevel<=Ze.DEBUG){const n=e.map(Lh);Tr.debug(`Firestore (${ys}): ${t}`,...n)}}function Ui(t,...e){if(Tr.logLevel<=Ze.ERROR){const n=e.map(Lh);Tr.error(`Firestore (${ys}): ${t}`,...n)}}function wg(t,...e){if(Tr.logLevel<=Ze.WARN){const n=e.map(Lh);Tr.warn(`Firestore (${ys}): ${t}`,...n)}}function Lh(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t="Unexpected state"){const e=`FIRESTORE (${ys}) INTERNAL ASSERTION FAILED: `+t;throw Ui(e),new Error(e)}function yt(t,e){t||Re()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Error{constructor(e,n){super(n),this.code=e,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class IC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nn.UNAUTHENTICATED))}shutdown(){}}class wC{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yi,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{de("FirebaseCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(de("FirebaseCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(de("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(yt(typeof i.accessToken=="string"),new EC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string"),new Nn(e)}}class TC{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=Nn.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},n=this.h.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class CC{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new TC(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.g(i),this.p=i=>n.writeSequenceNumber(i))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mh.T=-1;class Tg{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=SC(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function lt(t,e){return t<e?-1:t>e?1:0}function bs(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Bn(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rt(e)}static min(){return new rt(new Bn(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Sg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n,i){n===void 0?n=0:n>e.length&&Re(),i===void 0?i=e.length-n:i>e.length-n&&Re(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Uo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Uo?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class St extends Uo{construct(e,n,i){return new St(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new te(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new St(n)}static emptyPath(){return new St([])}}const AC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends Uo{construct(e,n,i){return new Pn(e,n,i)}static isValidIdentifier(e){return AC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pn(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new te(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new te(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new te(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(n)}static emptyPath(){return new Pn([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.fields=e,e.sort(Pn.comparator)}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new dn(n)}static fromUint8Array(e){const n=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new dn(n)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const kC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){if(yt(!!t),typeof t=="string"){let e=0;const n=kC.exec(t);if(yt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Es(t){return typeof t=="string"?dn.fromBase64String(t):dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function kg(t){const e=t.mapValue.fields.__previous_value__;return Ag(e)?kg(e):e}function Vo(t){const e=ji(t.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){return t==null}function Ul(t){return t===0&&1/t==-1/0}function OC(t){return typeof t=="number"&&Number.isInteger(t)&&!Ul(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(St.fromString(e))}static fromName(e){return new Ee(St.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return St.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new St(e.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ag(t)?4:10:Re()}function li(t,e){const n=Sr(t);if(n!==Sr(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vo(t).isEqual(Vo(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=ji(i.timestampValue),o=ji(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return Es(i.bytesValue).isEqual(Es(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return Vt(i.geoPointValue.latitude)===Vt(r.geoPointValue.latitude)&&Vt(i.geoPointValue.longitude)===Vt(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Vt(i.integerValue)===Vt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Vt(i.doubleValue),o=Vt(r.doubleValue);return s===o?Ul(s)===Ul(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return bs(t.arrayValue.values||[],e.arrayValue.values||[],li);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(Cg(s)!==Cg(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!li(s[a],o[a])))return!1;return!0}(t,e);default:return Re()}}function Bo(t,e){return(t.values||[]).find(n=>li(n,e))!==void 0}function ws(t,e){const n=Sr(t),i=Sr(e);if(n!==i)return lt(n,i);switch(n){case 0:return 0;case 1:return lt(t.booleanValue,e.booleanValue);case 2:return function(r,s){const o=Vt(r.integerValue||r.doubleValue),a=Vt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Og(t.timestampValue,e.timestampValue);case 4:return Og(Vo(t),Vo(e));case 5:return lt(t.stringValue,e.stringValue);case 6:return function(r,s){const o=Es(r),a=Es(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=lt(o[l],a[l]);if(c!==0)return c}return lt(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,s){const o=lt(Vt(r.latitude),Vt(s.latitude));return o!==0?o:lt(Vt(r.longitude),Vt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=ws(o[l],a[l]);if(c)return c}return lt(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,s){const o=r.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=lt(a[u],c[u]);if(h!==0)return h;const d=ws(o[a[u]],l[c[u]]);if(d!==0)return d}return lt(a.length,c.length)}(t.mapValue,e.mapValue);default:throw Re()}}function Og(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lt(t,e);const n=ji(t),i=ji(e),r=lt(n.seconds,i.seconds);return r!==0?r:lt(n.nanos,i.nanos)}function Nh(t){return Ph(t)}function Ph(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const r=ji(i);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Es(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ee.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=Ph(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${Ph(i.fields[a])}`;return s+"}"}(t.mapValue):Re();var e,n}function Rg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dh(t){return!!t&&"integerValue"in t}function Fh(t){return!!t&&"arrayValue"in t}function Lg(t){return!!t&&"nullValue"in t}function Mg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jl(t){return!!t&&"mapValue"in t}function Ho(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Cr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ho(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ho(t.arrayValue.values[n]);return e}return Object.assign({},t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!jl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ho(n)}setAll(e){let n=Pn.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Ho(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());jl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];jl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Cr(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Hn(Ho(this.value))}}function Ng(t){const e=[];return Cr(t.fields,(n,i)=>{const r=new Pn([n]);if(jl(i)){const s=Ng(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new jo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,i,r,s){this.key=e,this.documentType=n,this.version=i,this.data=r,this.documentState=s}static newInvalidDocument(e){return new fn(e,0,rt.min(),Hn.empty(),0)}static newFoundDocument(e,n,i){return new fn(e,1,n,i,0)}static newNoDocument(e,n){return new fn(e,2,n,Hn.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,Hn.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new fn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.A=null}}function Pg(t,e=null,n=[],i=[],r=null,s=null,o=null){return new RC(t,e,n,i,r,s,o)}function xh(t){const e=Le(t);if(e.A===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>MC(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Is(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Vl(e.startAt)),e.endAt&&(n+="|ub:",n+=Vl(e.endAt)),e.A=n}return e.A}function LC(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(i=n).field.canonicalString()} ${i.op} ${Nh(i.value)}`;var i}).join(", ")}]`),Is(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: "+Vl(t.startAt)),t.endAt&&(e+=", endAt: "+Vl(t.endAt)),`Target(${e})`}function Uh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!VC(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],i=e.filters[r],n.op!==i.op||!n.field.isEqual(i.field)||!li(n.value,i.value))return!1;var n,i;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xg(t.startAt,e.startAt)&&xg(t.endAt,e.endAt)}function jh(t){return Ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class In extends class{}{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.R(e,n,i):new NC(e,n,i):n==="array-contains"?new FC(e,i):n==="in"?new xC(e,i):n==="not-in"?new UC(e,i):n==="array-contains-any"?new jC(e,i):new In(e,n,i)}static R(e,n,i){return n==="in"?new PC(e,i):new DC(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.P(ws(n,this.value)):n!==null&&Sr(this.value)===Sr(n)&&this.P(ws(n,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}function MC(t){return t.field.canonicalString()+t.op.toString()+Nh(t.value)}class NC extends In{constructor(e,n,i){super(e,n,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.P(n)}}class PC extends In{constructor(e,n){super(e,"in",n),this.keys=Dg("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DC extends In{constructor(e,n){super(e,"not-in",n),this.keys=Dg("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Dg(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ee.fromName(i.referenceValue))}class FC extends In{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fh(n)&&Bo(n.arrayValue,this.value)}}class xC extends In{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bo(this.value.arrayValue,n)}}class UC extends In{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Bo(this.value.arrayValue,n)}}class jC extends In{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Bo(this.value.arrayValue,i))}}class Vh{constructor(e,n){this.position=e,this.before=n}}function Vl(t){return`${t.before?"b":"a"}:${t.position.map(e=>Nh(e)).join(",")}`}class Ts{constructor(e,n="asc"){this.field=e,this.dir=n}}function VC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Fg(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=Ee.comparator(Ee.fromName(o.referenceValue),n.key):i=ws(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return t.before?i<=0:i<0}function xg(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!li(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.V=null,this.S=null,this.startAt,this.endAt}}function BC(t,e,n,i,r,s,o,a){return new Cs(t,e,n,i,r,s,o,a)}function Bl(t){return new Cs(t)}function Hl(t){return!Is(t.limit)&&t.limitType==="F"}function ql(t){return!Is(t.limit)&&t.limitType==="L"}function Bh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Hh(t){for(const e of t.filters)if(e.v())return e.field;return null}function Ug(t){return t.collectionGroup!==null}function qo(t){const e=Le(t);if(e.V===null){e.V=[];const n=Hh(e),i=Bh(e);if(n!==null&&i===null)n.isKeyField()||e.V.push(new Ts(n)),e.V.push(new Ts(Pn.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.V.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new Ts(Pn.keyField(),s))}}}return e.V}function Ar(t){const e=Le(t);if(!e.S)if(e.limitType==="F")e.S=Pg(e.path,e.collectionGroup,qo(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of qo(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Ts(s.field,o))}const i=e.endAt?new Vh(e.endAt.position,!e.endAt.before):null,r=e.startAt?new Vh(e.startAt.position,!e.startAt.before):null;e.S=Pg(e.path,e.collectionGroup,n,e.filters,e.limit,i,r)}return e.S}function HC(t,e,n){return new Cs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wl(t,e){return Uh(Ar(t),Ar(e))&&t.limitType===e.limitType}function jg(t){return`${xh(Ar(t))}|lt:${t.limitType}`}function qh(t){return`Query(target=${LC(Ar(t))}; limitType=${t.limitType})`}function Gl(t,e){return e.isFoundDocument()&&function(n,i){const r=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Ee.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,i){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const r of n.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!Fg(n.startAt,qo(n),i)||n.endAt&&Fg(n.endAt,qo(n),i))}(t,e)}function Vg(t){return(e,n)=>{let i=!1;for(const r of qo(t)){const s=qC(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function qC(t,e,n){const i=t.field.isKeyField()?Ee.comparator(e.key,n.key):function(r,s,o){const a=s.data.field(r),l=o.data.field(r);return a!==null&&l!==null?ws(a,l):Re()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ul(e)?"-0":e}}function Hg(t){return{integerValue:""+t}}function qg(t,e){return OC(e)?Hg(e):Bg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(){this._=void 0}}function WC(t,e,n){return t instanceof Wo?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(n,e):t instanceof Ss?Gg(t,e):t instanceof As?zg(t,e):function(i,r){const s=Wg(i,r),o=Kg(s)+Kg(i.C);return Dh(s)&&Dh(i.C)?Hg(o):Bg(i.N,o)}(t,e)}function GC(t,e,n){return t instanceof Ss?Gg(t,e):t instanceof As?zg(t,e):n}function Wg(t,e){return t instanceof Go?Dh(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class Wo extends zl{}class Ss extends zl{constructor(e){super(),this.elements=e}}function Gg(t,e){const n=Xg(e);for(const i of t.elements)n.some(r=>li(r,i))||n.push(i);return{arrayValue:{values:n}}}class As extends zl{constructor(e){super(),this.elements=e}}function zg(t,e){let n=Xg(e);for(const i of t.elements)n=n.filter(r=>!li(r,i));return{arrayValue:{values:n}}}class Go extends zl{constructor(e,n){super(),this.N=e,this.C=n}}function Kg(t){return Vt(t.integerValue||t.doubleValue)}function Xg(t){return Fh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.field=e,this.transform=n}}function zC(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Ss&&i instanceof Ss||n instanceof As&&i instanceof As?bs(n.elements,i.elements,li):n instanceof Go&&i instanceof Go?li(n.C,i.C):n instanceof Wo&&i instanceof Wo}(t.transform,e.transform)}class KC{constructor(e,n){this.version=e,this.transformResults=n}}class Qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ql{}function XC(t,e,n){t instanceof Yl?function(i,r,s){const o=i.value.clone(),a=Zg(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof kr?function(i,r,s){if(!Xl(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=Zg(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(Jg(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Wh(t,e,n){t instanceof Yl?function(i,r,s){if(!Xl(i.precondition,r))return;const o=i.value.clone(),a=$g(i.fieldTransforms,s,r);o.setAll(a),r.convertToFoundDocument(Yg(r),o).setHasLocalMutations()}(t,e,n):t instanceof kr?function(i,r,s){if(!Xl(i.precondition,r))return;const o=$g(i.fieldTransforms,s,r),a=r.data;a.setAll(Jg(i)),a.setAll(o),r.convertToFoundDocument(Yg(r),a).setHasLocalMutations()}(t,e,n):function(i,r){Xl(i.precondition,r)&&r.convertToNoDocument(rt.min())}(t,e)}function QC(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=Wg(i.transform,r||null);s!=null&&(n==null&&(n=Hn.empty()),n.set(i.field,s))}return n||null}function Qg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&bs(n,i,(r,s)=>zC(r,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Yg(t){return t.isFoundDocument()?t.version:rt.min()}class Yl extends Ql{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}}class kr extends Ql{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}}function Jg(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Zg(t,e,n){const i=new Map;yt(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,GC(o,a,n[r]))}return i}function $g(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,WC(s,o,e))}return i}class Gh extends Ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class YC extends Ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,qe;function ZC(t){switch(t){default:return Re();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function e_(t){if(t===void 0)return Ui("GRPC error has no .code"),U.UNKNOWN;switch(t){case Bt.OK:return U.OK;case Bt.CANCELLED:return U.CANCELLED;case Bt.UNKNOWN:return U.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return U.INTERNAL;case Bt.UNAVAILABLE:return U.UNAVAILABLE;case Bt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Bt.NOT_FOUND:return U.NOT_FOUND;case Bt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Bt.ABORTED:return U.ABORTED;case Bt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Bt.DATA_LOSS:return U.DATA_LOSS;default:return Re()}}(qe=Bt||(Bt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.comparator=e,this.root=n||on.EMPTY}insert(e,n){return new pn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jl(this.root,e,this.comparator,!0)}}class Jl{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i!=null?i:on.RED,this.left=r!=null?r:on.EMPTY,this.right=s!=null?s:on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new on(e!=null?e:this.key,n!=null?n:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return on.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(t,e,n,i,r){return this}insert(t,e,n){return new on(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.comparator=e,this.data=new pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new t_(this.data.getIterator())}getIteratorFrom(e){return new t_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new an(this.comparator);return n.data=e,n}}class t_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new pn(Ee.comparator);function Or(){return $C}const eS=new pn(Ee.comparator);function zh(){return eS}const tS=new pn(Ee.comparator);function nS(){return tS}const iS=new an(Ee.comparator);function It(...t){let e=iS;for(const n of t)e=e.add(n);return e}const rS=new an(lt);function n_(){return rS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const i=new Map;return i.set(e,zo.createSynthesizedTargetChangeForCurrentChange(e,n)),new Zl(rt.min(),i,n_(),Or(),It())}}class zo{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new zo(dn.EMPTY_BYTE_STRING,n,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n,i,r){this.k=e,this.removedTargetIds=n,this.key=i,this.$=r}}class i_{constructor(e,n){this.targetId=e,this.O=n}}class r_{constructor(e,n,i=dn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class s_{constructor(){this.F=0,this.M=a_(),this.L=dn.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return this.F!==0}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=It(),n=It(),i=It();return this.M.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Re()}}),new zo(this.L,this.B,e,n,i)}G(){this.U=!1,this.M=a_()}H(e,n){this.U=!0,this.M=this.M.insert(e,n)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class sS{constructor(e){this.tt=e,this.et=new Map,this.nt=Or(),this.st=o_(),this.it=new an(lt)}rt(e){for(const n of e.k)e.$&&e.$.isFoundDocument()?this.ot(n,e.$):this.ct(n,e.key,e.$);for(const n of e.removedTargetIds)this.ct(n,e.key,e.$)}at(e){this.forEachTarget(e,n=>{const i=this.ut(n);switch(e.state){case 0:this.ht(n)&&i.j(e.resumeToken);break;case 1:i.X(),i.q||i.G(),i.j(e.resumeToken);break;case 2:i.X(),i.q||this.removeTarget(n);break;case 3:this.ht(n)&&(i.Z(),i.j(e.resumeToken));break;case 4:this.ht(n)&&(this.lt(n),i.j(e.resumeToken));break;default:Re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.et.forEach((i,r)=>{this.ht(r)&&n(r)})}ft(e){const n=e.targetId,i=e.O.count,r=this.dt(n);if(r){const s=r.target;if(jh(s))if(i===0){const o=new Ee(s.path);this.ct(n,o,fn.newNoDocument(o,rt.min()))}else yt(i===1);else this.wt(n)!==i&&(this.lt(n),this.it=this.it.add(n))}}_t(e){const n=new Map;this.et.forEach((s,o)=>{const a=this.dt(o);if(a){if(s.current&&jh(a.target)){const l=new Ee(a.target.path);this.nt.get(l)!==null||this.gt(o,l)||this.ct(o,l,fn.newNoDocument(l,e))}s.K&&(n.set(o,s.W()),s.G())}});let i=It();this.st.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.dt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(i=i.add(s))});const r=new Zl(e,n,this.it,this.nt,i);return this.nt=Or(),this.st=o_(),this.it=new an(lt),r}ot(e,n){if(!this.ht(e))return;const i=this.gt(e,n.key)?2:0;this.ut(e).H(n.key,i),this.nt=this.nt.insert(n.key,n),this.st=this.st.insert(n.key,this.yt(n.key).add(e))}ct(e,n,i){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,n)?r.H(n,1):r.J(n),this.st=this.st.insert(n,this.yt(n).delete(e)),i&&(this.nt=this.nt.insert(n,i))}removeTarget(e){this.et.delete(e)}wt(e){const n=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let n=this.et.get(e);return n||(n=new s_,this.et.set(e,n)),n}yt(e){let n=this.st.get(e);return n||(n=new an(lt),this.st=this.st.insert(e,n)),n}ht(e){const n=this.dt(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}dt(e){const n=this.et.get(e);return n&&n.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new s_),this.tt.getRemoteKeysForTarget(e).forEach(n=>{this.ct(e,n,null)})}gt(e,n){return this.tt.getRemoteKeysForTarget(e).has(n)}}function o_(){return new pn(Ee.comparator)}function a_(){return new pn(Ee.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),aS=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class lS{constructor(e,n){this.databaseId=e,this.D=n}}function ec(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function l_(t,e){return t.D?e.toBase64():e.toUint8Array()}function cS(t,e){return ec(t,e.toTimestamp())}function bi(t){return yt(!!t),rt.fromTimestamp(function(e){const n=ji(e);return new Bn(n.seconds,n.nanos)}(t))}function Kh(t,e){return function(n){return new St(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function c_(t){const e=St.fromString(t);return yt(m_(e)),e}function Xh(t,e){return Kh(t.databaseId,e.path)}function Qh(t,e){const n=c_(e);if(n.get(1)!==t.databaseId.projectId)throw new te(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ee(u_(n))}function Yh(t,e){return Kh(t.databaseId,e)}function uS(t){const e=c_(t);return e.length===4?St.emptyPath():u_(e)}function Jh(t){return new St(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function u_(t){return yt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function h_(t,e,n){return{name:Xh(t,e),fields:n.value.mapValue.fields}}function hS(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,c){return l.D?(yt(c===void 0||typeof c=="string"),dn.fromBase64String(c||"")):(yt(c===void 0||c instanceof Uint8Array),dn.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?U.UNKNOWN:e_(l.code);return new te(c,l.message||"")}(o);n=new r_(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Qh(t,i.document.name),s=bi(i.document.updateTime),o=new Hn({mapValue:{fields:i.document.fields}}),a=fn.newFoundDocument(r,s,o),l=i.targetIds||[],c=i.removedTargetIds||[];n=new $l(l,c,a.key,a)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Qh(t,i.document),s=i.readTime?bi(i.readTime):rt.min(),o=fn.newNoDocument(r,s),a=i.removedTargetIds||[];n=new $l([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Qh(t,i.document),s=i.removedTargetIds||[];n=new $l([],s,r,null)}else{if(!("filter"in e))return Re();{e.filter;const i=e.filter;i.targetId;const r=i.count||0,s=new JC(r),o=i.targetId;n=new i_(o,s)}}return n}function dS(t,e){let n;if(e instanceof Yl)n={update:h_(t,e.key,e.value)};else if(e instanceof Gh)n={delete:Xh(t,e.key)};else if(e instanceof kr)n={update:h_(t,e.key,e.data),updateMask:IS(e.fieldMask)};else{if(!(e instanceof YC))return Re();n={verify:Xh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof Wo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ss)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof As)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Go)return{fieldPath:s.field.canonicalString(),increment:o.C};throw Re()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:cS(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Re()}(t,e.precondition)),n}function fS(t,e){return t&&t.length>0?(yt(e!==void 0),t.map(n=>function(i,r){let s=i.updateTime?bi(i.updateTime):bi(r);return s.isEqual(rt.min())&&(s=bi(r)),new KC(s,i.transformResults||[])}(n,e))):[]}function pS(t,e){return{documents:[Yh(t,e.path)]}}function mS(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Yh(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Yh(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(a){if(a.length===0)return;const l=a.map(c=>function(u){if(u.op==="=="){if(Mg(u.value))return{unaryFilter:{field:ks(u.field),op:"IS_NAN"}};if(Lg(u.value))return{unaryFilter:{field:ks(u.field),op:"IS_NULL"}}}else if(u.op==="!="){if(Mg(u.value))return{unaryFilter:{field:ks(u.field),op:"IS_NOT_NAN"}};if(Lg(u.value))return{unaryFilter:{field:ks(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(u.field),op:yS(u.op),value:u.value}}}(c));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);r&&(n.structuredQuery.where=r);const s=function(a){if(a.length!==0)return a.map(l=>function(c){return{field:ks(c.field),direction:vS(c.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(a,l){return a.D||Is(l)?l:{value:l}}(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=f_(e.startAt)),e.endAt&&(n.structuredQuery.endAt=f_(e.endAt)),n}function gS(t){let e=uS(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){yt(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=d_(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new Ts(Os(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,Is(h)?null:h}(n.limit));let l=null;n.startAt&&(l=p_(n.startAt));let c=null;return n.endAt&&(c=p_(n.endAt)),BC(e,r,o,s,a,"F",l,c)}function _S(t,e){const n=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Re()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function d_(t){return t?t.unaryFilter!==void 0?[ES(t)]:t.fieldFilter!==void 0?[bS(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>d_(e)).reduce((e,n)=>e.concat(n)):Re():[]}function f_(t){return{before:t.before,values:t.position}}function p_(t){const e=!!t.before,n=t.values||[];return new Vh(n,e)}function vS(t){return oS[t]}function yS(t){return aS[t]}function ks(t){return{fieldPath:t.canonicalString()}}function Os(t){return Pn.fromServerFormat(t.fieldPath)}function bS(t){return In.create(Os(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value)}function ES(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Os(t.unaryFilter.field);return In.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Os(t.unaryFilter.field);return In.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Os(t.unaryFilter.field);return In.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Os(t.unaryFilter.field);return In.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}function IS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function m_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}const wS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(r=>r?Z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}}function Ko(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&XC(s,e,i[r])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&Wh(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&Wh(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const i=e.get(n.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(rt.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),It())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,(n,i)=>Qg(n,i))&&bs(this.baseMutations,e.baseMutations,(n,i)=>Qg(n,i))}}class Zh{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){yt(e.mutations.length===i.length);let r=nS();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Zh(e,n,i,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,i,r,s=rt.min(),o=rt.min(),a=dn.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.Wt=e}}function AS(t){const e=gS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?HC(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this.Gt=new OS}addToCollectionParentIndex(e,n){return this.Gt.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Gt.getEntries(n))}}class OS{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new an(St.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new an(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Rs(0)}static ie(){return new Rs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==wS)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r!==void 0){for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n])}else this.inner[i]=[[e,n]]}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),!0;return!1}forEach(e){Cr(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Sg(this.inner)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.changes=new Qo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}getReadTime(e){const n=this.changes.get(e);return n?n.readTime:rt.min()}addEntry(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})}removeEntry(e,n=null){this.assertNotApplied(),this.changes.set(e,{document:fn.newInvalidDocument(e),readTime:n})}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i.document):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n,i){this.He=e,this.In=n,this.Ht=i}An(e,n){return this.In.getAllMutationBatchesAffectingDocumentKey(e,n).next(i=>this.Rn(e,n,i))}Rn(e,n,i){return this.He.getEntry(e,n).next(r=>{for(const s of i)s.applyToLocalView(r);return r})}bn(e,n){e.forEach((i,r)=>{for(const s of n)s.applyToLocalView(r)})}Pn(e,n){return this.He.getEntries(e,n).next(i=>this.vn(e,i).next(()=>i))}vn(e,n){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>this.bn(n,i))}getDocumentsMatchingQuery(e,n,i){return function(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.Vn(e,n.path):Ug(n)?this.Sn(e,n,i):this.Dn(e,n,i)}Vn(e,n){return this.An(e,new Ee(n)).next(i=>{let r=zh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Sn(e,n,i){const r=n.collectionGroup;let s=zh();return this.Ht.getCollectionParents(e,r).next(o=>Z.forEach(o,a=>{const l=function(c,u){return new Cs(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(r));return this.Dn(e,l,i).next(c=>{c.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}Dn(e,n,i){let r,s;return this.He.getDocumentsMatchingQuery(e,n,i).next(o=>(r=o,this.In.getAllMutationBatchesAffectingQuery(e,n))).next(o=>(s=o,this.Cn(e,s,r).next(a=>{r=a;for(const l of s)for(const c of l.mutations){const u=c.key;let h=r.get(u);h==null&&(h=fn.newInvalidDocument(u),r=r.insert(u,h)),Wh(c,h,l.localWriteTime),h.isFoundDocument()||(r=r.remove(u))}}))).next(()=>(r.forEach((o,a)=>{Gl(n,a)||(r=r.remove(o))}),r))}Cn(e,n,i){let r=It();for(const o of n)for(const a of o.mutations)a instanceof kr&&i.get(a.key)===null&&(r=r.add(a.key));let s=i;return this.He.getEntries(e,r).next(o=>(o.forEach((a,l)=>{l.isFoundDocument()&&(s=s.insert(a,l))}),s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Nn=i,this.xn=r}static kn(e,n){let i=It(),r=It();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new $h(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{$n(e){this.On=e}getDocumentsMatchingQuery(e,n,i,r){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||i.isEqual(rt.min())?this.Fn(e,n):this.On.Pn(e,r).next(s=>{const o=this.Mn(n,s);return(Hl(n)||ql(n))&&this.Ln(n.limitType,o,r,i)?this.Fn(e,n):(Ig()<=Ze.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qh(n)),this.On.getDocumentsMatchingQuery(e,n,i).next(a=>(o.forEach(l=>{a=a.insert(l.key,l)}),a)))})}Mn(e,n){let i=new an(Vg(e));return n.forEach((r,s)=>{Gl(e,s)&&(i=i.add(s))}),i}Ln(e,n,i,r){if(i.size!==n.size)return!0;const s=e==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Fn(e,n){return Ig()<=Ze.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",qh(n)),this.On.getDocumentsMatchingQuery(e,n,rt.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n,i,r){this.persistence=e,this.Bn=n,this.N=r,this.Un=new pn(lt),this.qn=new Qo(s=>xh(s),Uh),this.Kn=rt.min(),this.In=e.getMutationQueue(i),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new g_(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Un))}}function NS(t,e,n,i){return new MS(t,e,n,i)}async function __(t,e){const n=Le(t);let i=n.In,r=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",o=>{let a;return n.In.getAllMutationBatches(o).next(l=>(a=l,i=n.persistence.getMutationQueue(e),r=new g_(n.jn,i,n.persistence.getIndexManager()),i.getAllMutationBatches(o))).next(l=>{const c=[],u=[];let h=It();for(const d of a){c.push(d.batchId);for(const f of d.mutations)h=h.add(f.key)}for(const d of l){u.push(d.batchId);for(const f of d.mutations)h=h.add(f.key)}return r.Pn(o,h).next(d=>({Wn:d,removedBatchIds:c,addedBatchIds:u}))})});return n.In=i,n.Qn=r,n.Bn.$n(n.Qn),s}function PS(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.jn.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,h=u.keys();let d=Z.resolve();return h.forEach(f=>{d=d.next(()=>c.getEntry(a,f)).next(p=>{const g=l.docVersions.get(f);yt(g!==null),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&c.addEntry(p,l.commitVersion))})}),d.next(()=>o.In.removeMutationBatch(a,u))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.In.performConsistencyCheck(i)).next(()=>n.Qn.Pn(i,r))})}function v_(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ze.getLastRemoteSnapshotVersion(n))}function DS(t,e){const n=Le(t),i=e.snapshotVersion;let r=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.jn.newChangeBuffer({trackRemovals:!0});r=n.Un;const a=[];e.targetChanges.forEach((c,u)=>{const h=r.get(u);if(!h)return;a.push(n.ze.removeMatchingKeys(s,c.removedDocuments,u).next(()=>n.ze.addMatchingKeys(s,c.addedDocuments,u)));const d=c.resumeToken;if(d.approximateByteSize()>0){const f=h.withResumeToken(d,i).withSequenceNumber(s.currentSequenceNumber);r=r.insert(u,f),function(p,g,m){return yt(g.resumeToken.approximateByteSize()>0),p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(h,f,c)&&a.push(n.ze.updateTargetData(s,f))}});let l=Or();if(e.documentUpdates.forEach((c,u)=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(FS(s,o,e.documentUpdates,i,void 0).next(c=>{l=c})),!i.isEqual(rt.min())){const c=n.ze.getLastRemoteSnapshotVersion(s).next(u=>n.ze.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(c)}return Z.waitFor(a).next(()=>o.apply(s)).next(()=>n.Qn.vn(s,l)).next(()=>l)}).then(s=>(n.Un=r,s))}function FS(t,e,n,i,r){let s=It();return n.forEach(o=>s=s.add(o)),e.getEntries(t,s).next(o=>{let a=Or();return n.forEach((l,c)=>{const u=o.get(l),h=(r==null?void 0:r.get(l))||i;c.isNoDocument()&&c.version.isEqual(rt.min())?(e.removeEntry(l,h),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c,h),a=a.insert(l,c)):de("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),a})}function xS(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.In.getNextMutationBatchAfterBatchId(i,e)))}function US(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.ze.getTargetData(i,e).next(s=>s?(r=s,Z.resolve(r)):n.ze.allocateTargetId(i).next(o=>(r=new Rr(e,o,0,i.currentSequenceNumber),n.ze.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Un.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(i.targetId,i),n.qn.set(e,i.targetId)),i})}async function ed(t,e,n){const i=Le(t),r=i.Un.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ko(o))throw o;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Un=i.Un.remove(e),i.qn.delete(r.target)}function y_(t,e,n){const i=Le(t);let r=rt.min(),s=It();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=Le(a),h=u.qn.get(c);return h!==void 0?Z.resolve(u.Un.get(h)):u.ze.getTargetData(l,c)}(i,o,Ar(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.ze.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Bn.getDocumentsMatchingQuery(o,e,n?r:rt.min(),n?s:It())).next(a=>({documents:a,Gn:s})))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,n){return Z.resolve(this.Yn.get(n))}saveBundleMetadata(e,n){var i;return this.Yn.set(n.id,{id:(i=n).id,version:i.version,createTime:bi(i.createTime)}),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Xn.get(n))}saveNamedQuery(e,n){return this.Xn.set(n.name,function(i){return{name:i.name,query:AS(i.bundledQuery),readTime:bi(i.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this.Zn=new an(Zt.ts),this.es=new an(Zt.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const i=new Zt(e,n);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.rs(new Zt(e,n))}os(e,n){e.forEach(i=>this.removeReference(i,n))}cs(e){const n=new Ee(new St([])),i=new Zt(n,e),r=new Zt(n,e+1),s=[];return this.es.forEachInRange([i,r],o=>{this.rs(o),s.push(o.key)}),s}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new Ee(new St([])),i=new Zt(n,e),r=new Zt(n,e+1);let s=It();return this.es.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Zt(e,0),i=this.Zn.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Zt{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return Ee.comparator(e.key,n.key)||lt(e.ls,n.ls)}static ns(e,n){return lt(e.ls,n.ls)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n){this.Ht=e,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new an(Zt.ts)}checkEmpty(e){return Z.resolve(this.In.length===0)}addMutationBatch(e,n,i,r){const s=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const o=new CS(s,n,i,r);this.In.push(o);for(const a of r)this.ds=this.ds.add(new Zt(a.key,s)),this.Ht.addToCollectionParentIndex(e,a.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,n){return Z.resolve(this.ws(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this._s(i),s=r<0?0:r;return Z.resolve(this.In.length>s?this.In[s]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.In.length===0?-1:this.fs-1)}getAllMutationBatches(e){return Z.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Zt(n,0),r=new Zt(n,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([i,r],o=>{const a=this.ws(o.ls);s.push(a)}),Z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new an(lt);return n.forEach(r=>{const s=new Zt(r,0),o=new Zt(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{i=i.add(a.ls)})}),Z.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Ee.isDocumentKey(s)||(s=s.child(""));const o=new Zt(new Ee(s),0);let a=new an(lt);return this.ds.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.ls)),!0)},o),Z.resolve(this.gs(a))}gs(e){const n=[];return e.forEach(i=>{const r=this.ws(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){yt(this.ys(n.batchId,"removed")===0),this.In.shift();let i=this.ds;return Z.forEach(n.mutations,r=>{const s=new Zt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=i})}te(e){}containsKey(e,n){const i=new Zt(n,0),r=this.ds.firstAfterOrEqual(i);return Z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.In.length,Z.resolve()}ys(e,n){return this._s(e)}_s(e){return this.In.length===0?0:e-this.In[0].batchId}ws(e){const n=this._s(e);return n<0||n>=this.In.length?null:this.In[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n){this.Ht=e,this.ps=n,this.docs=new pn(Ee.comparator),this.size=0}addEntry(e,n,i){const r=n.key,s=this.docs.get(r),o=s?s.size:0,a=this.ps(n);return this.docs=this.docs.insert(r,{document:n.clone(),size:a,readTime:i}),this.size+=a-o,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.clone():fn.newInvalidDocument(n))}getEntries(e,n){let i=Or();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.clone():fn.newInvalidDocument(r))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i){let r=Or();const s=new Ee(n.path.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l,readTime:c}}=o.getNext();if(!n.path.isPrefixOf(a.path))break;c.compareTo(i)<=0||Gl(n,l)&&(r=r.insert(l.key,l.clone()))}return Z.resolve(r)}Ts(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new HS(this)}getSize(e){return Z.resolve(this.size)}}class HS extends RS{constructor(e){super(),this.Se=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.document.isValidDocument()?n.push(this.Se.addEntry(e,r.document,this.getReadTime(i))):this.Se.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.Se.getEntry(e,n)}getAllFromCache(e,n){return this.Se.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.persistence=e,this.Es=new Qo(n=>xh(n),Uh),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.Is=0,this.As=new td,this.targetCount=0,this.Rs=Rs.se()}forEachTarget(e,n){return this.Es.forEach((i,r)=>n(r)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Is&&(this.Is=n),Z.resolve()}ce(e){this.Es.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new Rs(n),this.highestTargetId=n),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,n){return this.ce(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.ce(n),Z.resolve()}removeTargetData(e,n){return this.Es.delete(n.target),this.As.cs(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Es.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Es.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Z.waitFor(s).next(()=>r)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.Es.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this.As.ss(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this.As.os(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.As.cs(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.As.hs(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n){this.bs={},this.Le=new Mh(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new qS(this),this.Ht=new kS,this.He=function(i,r){return new BS(i,r)}(this.Ht,i=>this.referenceDelegate.Ps(i)),this.N=new SS(n),this.Je=new jS(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let n=this.bs[e.toKey()];return n||(n=new VS(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=n),n}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,n,i){de("MemoryPersistence","Starting transaction:",e);const r=new GS(this.Le.next());return this.referenceDelegate.vs(),i(r).next(s=>this.referenceDelegate.Vs(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ss(e,n){return Z.or(Object.values(this.bs).map(i=>()=>i.containsKey(e,n)))}}class GS extends TS{constructor(e){super(),this.currentSequenceNumber=e}}class nd{constructor(e){this.persistence=e,this.Ds=new td,this.Cs=null}static Ns(e){return new nd(e)}get xs(){if(this.Cs)return this.Cs;throw Re()}addReference(e,n,i){return this.Ds.addReference(i,n),this.xs.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Ds.removeReference(i,n),this.xs.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.xs.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ds.cs(n.targetId).forEach(r=>this.xs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.xs.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}vs(){this.Cs=new Set}Vs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.xs,i=>{const r=Ee.fromPath(i);return this.ks(e,r).next(s=>{s||n.removeEntry(r)})}).next(()=>(this.Cs=null,n.apply(e)))}updateLimboDocument(e,n){return this.ks(e,n).next(i=>{i?this.xs.delete(n.toString()):this.xs.add(n.toString())})}Ps(e){return 0}ks(e,n){return Z.or([()=>Z.resolve(this.Ds.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ss(e,n)])}}class b_{constructor(){this.activeTargetIds=n_()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zS{constructor(){this.yi=new b_,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,n,i){this.pi[e]=n}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new b_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{Ti(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.Fi=n+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,n,i,r){const s=this.Bi(e,n);de("RestConnection","Sending: ",s,i);const o={};return this.Ui(o,r),this.qi(e,s,o,i).then(a=>(de("RestConnection","Received: ",a),a),a=>{throw wg("RestConnection",`${e} failed with error: `,a,"url: ",s,"request:",i),a})}Ki(e,n,i,r){return this.Li(e,n,i,r)}Ui(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+ys,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(const i in n.authHeaders)n.authHeaders.hasOwnProperty(i)&&(e[i]=n.authHeaders[i])}Bi(e,n){const i=XS[e];return`${this.Fi}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,n,i,r){return new Promise((s,o)=>{const a=new bC;a.listenOnce(_C.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Rh.NO_ERROR:const c=a.getResponseJson();de("Connection","XHR received:",JSON.stringify(c)),s(c);break;case Rh.TIMEOUT:de("Connection",'RPC "'+e+'" timed out'),o(new te(U.DEADLINE_EXCEEDED,"Request time out"));break;case Rh.HTTP_ERROR:const u=a.getStatus();if(de("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(p)>=0?p:U.UNKNOWN}(h.status);o(new te(d,h.message))}else o(new te(U.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new te(U.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{de("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(r);a.send(n,"POST",l,i,15)})}ji(e,n){const i=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=mC(),s=gC(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new yC({})),this.Ui(o.initMessageHeaders,n),rl()||Du()||p1()||em()||m1()||$p()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=i.join("");de("Connection","Creating WebChannel: "+a,o);const l=r.createWebChannel(a,o);let c=!1,u=!1;const h=new QS({vi:f=>{u?de("Connection","Not sending because WebChannel is closed:",f):(c||(de("Connection","Opening WebChannel transport."),l.open(),c=!0),de("Connection","WebChannel sending:",f),l.send(f))},Vi:()=>l.close()}),d=(f,p,g)=>{f.listen(p,m=>{try{g(m)}catch(v){setTimeout(()=>{throw v},0)}})};return d(l,xl.EventType.OPEN,()=>{u||de("Connection","WebChannel transport opened.")}),d(l,xl.EventType.CLOSE,()=>{u||(u=!0,de("Connection","WebChannel transport closed"),h.$i())}),d(l,xl.EventType.ERROR,f=>{u||(u=!0,wg("Connection","WebChannel transport errored:",f),h.$i(new te(U.UNAVAILABLE,"The operation could not be completed")))}),d(l,xl.EventType.MESSAGE,f=>{var p;if(!u){const g=f.data[0];yt(!!g);const m=g,v=m.error||((p=m[0])===null||p===void 0?void 0:p.error);if(v){de("Connection","WebChannel received error:",v);const w=v.status;let b=function(O){const C=Bt[O];if(C!==void 0)return e_(C)}(w),y=v.message;b===void 0&&(b=U.INTERNAL,y="Unknown error status: "+w+" with message "+v.message),u=!0,h.$i(new te(b,y)),l.close()}else de("Connection","WebChannel received:",g),h.Oi(g)}}),d(s,vC.STAT_EVENT,f=>{f.stat===bg.PROXY?de("Connection","Detected buffering proxy"):f.stat===bg.NOPROXY&&de("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.ki()},0),h}}function id(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){return new lS(t,!0)}class I_{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Oe=e,this.timerId=n,this.Qi=i,this.Wi=r,this.Gi=s,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const n=Math.floor(this.zi+this.Zi()),i=Math.max(0,Date.now()-this.Ji),r=Math.max(0,n-i);r>0&&de("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){this.Hi!==null&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){this.Hi!==null&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n,i,r,s,o,a){this.Oe=e,this.er=i,this.nr=r,this.sr=s,this.credentialsProvider=o,this.listener=a,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new I_(e,n)}ur(){return this.state===1||this.state===5||this.hr()}hr(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.lr()}async stop(){this.ur()&&await this.close(0)}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&this.rr===null&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}async _r(){if(this.hr())return this.close(0)}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(e,n){this.gr(),this.yr(),this.ar.cancel(),this.ir++,e!==4?this.ar.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Ui(n.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),this.ar.Yi()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&this.credentialsProvider.invalidateToken(),this.stream!==null&&(this.pr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ci(n)}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),n=this.ir;this.credentialsProvider.getToken().then(i=>{this.ir===n&&this.Er(i)},i=>{e(()=>{const r=new te(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Ir(r)})})}Er(e){const n=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{n(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(i=>{n(()=>this.Ir(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}lr(){this.state=5,this.ar.Xi(async()=>{this.state=0,this.start()})}Ir(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return n=>{this.Oe.enqueueAndForget(()=>this.ir===e?n():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JS extends w_{constructor(e,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s),this.N=r}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const n=hS(this.N,e),i=function(r){if(!("targetChange"in r))return rt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?rt.min():s.readTime?bi(s.readTime):rt.min()}(e);return this.listener.Rr(n,i)}br(e){const n={};n.database=Jh(this.N),n.addTarget=function(r,s){let o;const a=s.target;return o=jh(a)?{documents:pS(r,a)}:{query:mS(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=l_(r,s.resumeToken):s.snapshotVersion.compareTo(rt.min())>0&&(o.readTime=ec(r,s.snapshotVersion.toTimestamp())),o}(this.N,e);const i=_S(this.N,e);i&&(n.labels=i),this.mr(n)}Pr(e){const n={};n.database=Jh(this.N),n.removeTarget=e,this.mr(n)}}class ZS extends w_{constructor(e,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s),this.N=r,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(e){return this.sr.ji("Write",e)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.vr){this.ar.reset();const n=fS(e.writeResults,e.commitTime),i=bi(e.commitTime);return this.listener.Dr(i,n)}return yt(!e.writeResults||e.writeResults.length===0),this.vr=!0,this.listener.Cr()}Nr(){const e={};e.database=Jh(this.N),this.mr(e)}Sr(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>dS(this.N,i))};this.mr(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S extends class{}{constructor(e,n,i){super(),this.credentials=e,this.sr=n,this.N=i,this.kr=!1}$r(){if(this.kr)throw new te(U.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,n,i){return this.$r(),this.credentials.getToken().then(r=>this.sr.Li(e,n,i,r)).catch(r=>{throw r.name==="FirebaseError"?(r.code===U.UNAUTHENTICATED&&this.credentials.invalidateToken(),r):new te(U.UNKNOWN,r.toString())})}Ki(e,n,i){return this.$r(),this.credentials.getToken().then(r=>this.sr.Ki(e,n,i,r)).catch(r=>{throw r.name==="FirebaseError"?(r.code===U.UNAUTHENTICATED&&this.credentials.invalidateToken(),r):new te(U.UNKNOWN,r.toString())})}terminate(){this.kr=!0}}class eA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){this.Or===0&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){this.state==="Online"?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,e==="Online"&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(Ui(n),this.Mr=!1):de("OnlineStateTracker",n)}Kr(){this.Fr!==null&&(this.Fr.cancel(),this.Fr=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=s,this.zr.Ti(o=>{i.enqueueAndForget(async()=>{Lr(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=Le(a);l.Wr.add(4),await Yo(l),l.Hr.set("Unknown"),l.Wr.delete(4),await nc(l)}(this))})}),this.Hr=new eA(i,r)}}async function nc(t){if(Lr(t))for(const e of t.Gr)await e(!0)}async function Yo(t){for(const e of t.Gr)await e(!1)}function T_(t,e){const n=Le(t);n.Qr.has(e.targetId)||(n.Qr.set(e.targetId,e),od(n)?sd(n):Ls(n).hr()&&rd(n,e))}function C_(t,e){const n=Le(t),i=Ls(n);n.Qr.delete(e),i.hr()&&S_(n,e),n.Qr.size===0&&(i.hr()?i.wr():Lr(n)&&n.Hr.set("Unknown"))}function rd(t,e){t.Jr.Y(e.targetId),Ls(t).br(e)}function S_(t,e){t.Jr.Y(e),Ls(t).Pr(e)}function sd(t){t.Jr=new sS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>t.Qr.get(e)||null}),Ls(t).start(),t.Hr.Lr()}function od(t){return Lr(t)&&!Ls(t).ur()&&t.Qr.size>0}function Lr(t){return Le(t).Wr.size===0}function A_(t){t.Jr=void 0}async function nA(t){t.Qr.forEach((e,n)=>{rd(t,e)})}async function iA(t,e){A_(t),od(t)?(t.Hr.qr(e),sd(t)):t.Hr.set("Unknown")}async function rA(t,e,n){if(t.Hr.set("Online"),e instanceof r_&&e.state===2&&e.cause)try{await async function(i,r){const s=r.cause;for(const o of r.targetIds)i.Qr.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Qr.delete(o),i.Jr.removeTarget(o))}(t,e)}catch(i){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ic(t,i)}else if(e instanceof $l?t.Jr.rt(e):e instanceof i_?t.Jr.ft(e):t.Jr.at(e),!n.isEqual(rt.min()))try{const i=await v_(t.localStore);n.compareTo(i)>=0&&await function(r,s){const o=r.Jr._t(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.Qr.get(l);c&&r.Qr.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=r.Qr.get(a);if(!l)return;r.Qr.set(a,l.withResumeToken(dn.EMPTY_BYTE_STRING,l.snapshotVersion)),S_(r,a);const c=new Rr(l.target,a,1,l.sequenceNumber);rd(r,c)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){de("RemoteStore","Failed to raise snapshot:",i),await ic(t,i)}}async function ic(t,e,n){if(!Ko(e))throw e;t.Wr.add(1),await Yo(t),t.Hr.set("Offline"),n||(n=()=>v_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await n(),t.Wr.delete(1),await nc(t)})}function k_(t,e){return e().catch(n=>ic(t,n,e))}async function rc(t){const e=Le(t),n=Vi(e);let i=e.jr.length>0?e.jr[e.jr.length-1].batchId:-1;for(;sA(e);)try{const r=await xS(e.localStore,i);if(r===null){e.jr.length===0&&n.wr();break}i=r.batchId,oA(e,r)}catch(r){await ic(e,r)}O_(e)&&R_(e)}function sA(t){return Lr(t)&&t.jr.length<10}function oA(t,e){t.jr.push(e);const n=Vi(t);n.hr()&&n.Vr&&n.Sr(e.mutations)}function O_(t){return Lr(t)&&!Vi(t).ur()&&t.jr.length>0}function R_(t){Vi(t).start()}async function aA(t){Vi(t).Nr()}async function lA(t){const e=Vi(t);for(const n of t.jr)e.Sr(n.mutations)}async function cA(t,e,n){const i=t.jr.shift(),r=Zh.from(i,e,n);await k_(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await rc(t)}async function uA(t,e){e&&Vi(t).Vr&&await async function(n,i){if(r=i.code,ZC(r)&&r!==U.ABORTED){const s=n.jr.shift();Vi(n).dr(),await k_(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await rc(n)}var r}(t,e),O_(t)&&R_(t)}async function hA(t,e){const n=Le(t);e?(n.Wr.delete(2),await nc(n)):e||(n.Wr.add(2),await Yo(n),n.Hr.set("Unknown"))}function Ls(t){return t.Yr||(t.Yr=function(e,n,i){const r=Le(e);return r.$r(),new JS(n,r.sr,r.credentials,r.N,i)}(t.datastore,t.asyncQueue,{Si:nA.bind(null,t),Ci:iA.bind(null,t),Rr:rA.bind(null,t)}),t.Gr.push(async e=>{e?(t.Yr.dr(),od(t)?sd(t):t.Hr.set("Unknown")):(await t.Yr.stop(),A_(t))})),t.Yr}function Vi(t){return t.Xr||(t.Xr=function(e,n,i){const r=Le(e);return r.$r(),new ZS(n,r.sr,r.credentials,r.N,i)}(t.datastore,t.asyncQueue,{Si:aA.bind(null,t),Ci:uA.bind(null,t),Cr:lA.bind(null,t),Dr:cA.bind(null,t)}),t.Gr.push(async e=>{e?(t.Xr.dr(),await rc(t)):(await t.Xr.stop(),t.jr.length>0&&(de("RemoteStore",`Stopping write stream with ${t.jr.length} pending writes`),t.jr=[]))})),t.Xr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new ad(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ld(t,e){if(Ui("AsyncQueue",`${e}: ${t}`),Ko(t))return new te(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ee.comparator(n.key,i.key):(n,i)=>Ee.comparator(n.key,i.key),this.keyedMap=zh(),this.sortedSet=new pn(this.comparator)}static emptySet(e){return new Ms(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ms)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ms;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this.Zr=new pn(Ee.comparator)}track(e){const n=e.doc.key,i=this.Zr.get(n);i?e.type!==0&&i.type===3?this.Zr=this.Zr.insert(n,e):e.type===3&&i.type!==1?this.Zr=this.Zr.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Zr=this.Zr.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Zr=this.Zr.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Zr=this.Zr.remove(n):e.type===1&&i.type===2?this.Zr=this.Zr.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Zr=this.Zr.insert(n,{type:2,doc:e.doc}):Re():this.Zr=this.Zr.insert(n,e)}eo(){const e=[];return this.Zr.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ns{constructor(e,n,i,r,s,o,a,l){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,i,r){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Ns(e,n,Ms.emptySet(n),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.no=void 0,this.listeners=[]}}class fA{constructor(){this.queries=new Qo(e=>jg(e),Wl),this.onlineState="Unknown",this.so=new Set}}async function cd(t,e){const n=Le(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new dA),r)try{s.no=await n.onListen(i)}catch(o){const a=ld(o,`Initialization of query '${qh(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.listeners.push(e),e.io(n.onlineState),s.no&&e.ro(s.no)&&hd(n)}async function ud(t,e){const n=Le(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function pA(t,e){const n=Le(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.ro(r)&&(i=!0);o.no=r}}i&&hd(n)}function mA(t,e,n){const i=Le(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function hd(t){t.so.forEach(e=>{e.next()})}class dd{constructor(e,n,i){this.query=e,this.oo=n,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=i||{}}ro(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ns(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.co?this.uo(e)&&(this.oo.next(e),n=!0):this.ho(e,this.onlineState)&&(this.lo(e),n=!0),this.ao=e,n}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let n=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),n=!0),n}ho(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.fo||!i)&&(!e.docs.isEmpty()||n==="Offline")}uo(e){if(e.docChanges.length>0)return!0;const n=this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}lo(e){e=Ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e){this.key=e}}class N_{constructor(e){this.key=e}}class gA{constructor(e,n){this.query=e,this.po=n,this.To=null,this.current=!1,this.Eo=It(),this.mutatedKeys=It(),this.Io=Vg(e),this.Ao=new Ms(this.Io)}get Ro(){return this.po}bo(e,n){const i=n?n.Po:new L_,r=n?n.Ao:this.Ao;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=Hl(this.query)&&r.size===this.query.limit?r.last():null,c=ql(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const d=r.get(u),f=Gl(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;d&&f?d.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),m=!0):this.vo(d,f)||(i.track({type:2,doc:f}),m=!0,(l&&this.Io(f,l)>0||c&&this.Io(f,c)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),m=!0):d&&!f&&(i.track({type:1,doc:d}),m=!0,(l||c)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),Hl(this.query)||ql(this.query))for(;o.size>this.query.limit;){const u=Hl(this.query)?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Ao:o,Po:i,Ln:a,mutatedKeys:s}}vo(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const s=e.Po.eo();s.sort((c,u)=>function(h,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return f(h)-f(d)}(c.type,u.type)||this.Io(c.doc,u.doc)),this.Vo(i);const o=n?this.So():[],a=this.Eo.size===0&&this.current?1:0,l=a!==this.To;return this.To=a,s.length!==0||l?{snapshot:new Ns(this.query,e.Ao,r,s,e.mutatedKeys,a===0,l,!1),Do:o}:{Do:o}}io(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new L_,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(n=>this.po=this.po.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.po=this.po.delete(n)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=It(),this.Ao.forEach(i=>{this.Co(i.key)&&(this.Eo=this.Eo.add(i.key))});const n=[];return e.forEach(i=>{this.Eo.has(i)||n.push(new N_(i))}),this.Eo.forEach(i=>{e.has(i)||n.push(new M_(i))}),n}No(e){this.po=e.Gn,this.Eo=It();const n=this.bo(e.documents);return this.applyChanges(n,!0)}xo(){return Ns.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,this.To===0)}}class _A{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class vA{constructor(e){this.key=e,this.ko=!1}}class yA{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.$o={},this.Oo=new Qo(a=>jg(a),Wl),this.Fo=new Map,this.Mo=new Set,this.Lo=new pn(Ee.comparator),this.Bo=new Map,this.Uo=new td,this.qo={},this.Ko=new Map,this.jo=Rs.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return this.Qo===!0}}async function bA(t,e){const n=RA(t);let i,r;const s=n.Oo.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.xo();else{const o=await US(n.localStore,Ar(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await EA(n,e,i,a==="current"),n.isPrimaryClient&&T_(n.remoteStore,o)}return r}async function EA(t,e,n,i){t.Wo=(u,h,d)=>async function(f,p,g,m){let v=p.view.bo(g);v.Ln&&(v=await y_(f.localStore,p.query,!1).then(({documents:y})=>p.view.bo(y,v)));const w=m&&m.targetChanges.get(p.targetId),b=p.view.applyChanges(v,f.isPrimaryClient,w);return j_(f,p.targetId,b.Do),b.snapshot}(t,u,h,d);const r=await y_(t.localStore,e,!0),s=new gA(e,r.Gn),o=s.bo(r.documents),a=zo.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline"),l=s.applyChanges(o,t.isPrimaryClient,a);j_(t,n,l.Do);const c=new _A(e,n,s);return t.Oo.set(e,c),t.Fo.has(n)?t.Fo.get(n).push(e):t.Fo.set(n,[e]),l.snapshot}async function IA(t,e){const n=Le(t),i=n.Oo.get(e),r=n.Fo.get(i.targetId);if(r.length>1)return n.Fo.set(i.targetId,r.filter(s=>!Wl(s,e))),void n.Oo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await ed(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),C_(n.remoteStore,i.targetId),fd(n,i.targetId)}).catch(Xo)):(fd(n,i.targetId),await ed(n.localStore,i.targetId,!0))}async function wA(t,e,n){const i=LA(t);try{const r=await function(s,o){const a=Le(s),l=Bn.now(),c=o.reduce((h,d)=>h.add(d.key),It());let u;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>a.Qn.Pn(h,c).next(d=>{u=d;const f=[];for(const p of o){const g=QC(p,u.get(p.key));g!=null&&f.push(new kr(p.key,g,Ng(g.value.mapValue),Qn.exists(!0)))}return a.In.addMutationBatch(h,l,f,o)})).then(h=>(h.applyToLocalDocumentSet(u),{batchId:h.batchId,changes:u}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let l=s.qo[s.currentUser.toKey()];l||(l=new pn(lt)),l=l.insert(o,a),s.qo[s.currentUser.toKey()]=l}(i,r.batchId,n),await Jo(i,r.changes),await rc(i.remoteStore)}catch(r){const s=ld(r,"Failed to persist write");n.reject(s)}}async function P_(t,e){const n=Le(t);try{const i=await DS(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Bo.get(s);o&&(yt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.ko=!0:r.modifiedDocuments.size>0?yt(o.ko):r.removedDocuments.size>0&&(yt(o.ko),o.ko=!1))}),await Jo(n,i,e)}catch(i){await Xo(i)}}function D_(t,e,n){const i=Le(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Oo.forEach((s,o)=>{const a=o.view.io(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=Le(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const h of u.listeners)h.io(o)&&(l=!0)}),l&&hd(a)}(i.eventManager,e),r.length&&i.$o.Rr(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function TA(t,e,n){const i=Le(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Bo.get(e),s=r&&r.key;if(s){let o=new pn(Ee.comparator);o=o.insert(s,fn.newNoDocument(s,rt.min()));const a=It().add(s),l=new Zl(rt.min(),new Map,new an(lt),o,a);await P_(i,l),i.Lo=i.Lo.remove(s),i.Bo.delete(e),pd(i)}else await ed(i.localStore,e,!1).then(()=>fd(i,e,n)).catch(Xo)}async function CA(t,e){const n=Le(t),i=e.batch.batchId;try{const r=await PS(n.localStore,e);x_(n,i,null),F_(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Jo(n,r)}catch(r){await Xo(r)}}async function SA(t,e,n){const i=Le(t);try{const r=await function(s,o){const a=Le(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.In.lookupMutationBatch(l,o).next(u=>(yt(u!==null),c=u.keys(),a.In.removeMutationBatch(l,u))).next(()=>a.In.performConsistencyCheck(l)).next(()=>a.Qn.Pn(l,c))})}(i.localStore,e);x_(i,e,n),F_(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Jo(i,r)}catch(r){await Xo(r)}}function F_(t,e){(t.Ko.get(e)||[]).forEach(n=>{n.resolve()}),t.Ko.delete(e)}function x_(t,e,n){const i=Le(t);let r=i.qo[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.qo[i.currentUser.toKey()]=r}}function fd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Fo.get(e))t.Oo.delete(i),n&&t.$o.Go(i,n);t.Fo.delete(e),t.isPrimaryClient&&t.Uo.cs(e).forEach(i=>{t.Uo.containsKey(i)||U_(t,i)})}function U_(t,e){t.Mo.delete(e.path.canonicalString());const n=t.Lo.get(e);n!==null&&(C_(t.remoteStore,n),t.Lo=t.Lo.remove(e),t.Bo.delete(n),pd(t))}function j_(t,e,n){for(const i of n)i instanceof M_?(t.Uo.addReference(i.key,e),AA(t,i)):i instanceof N_?(de("SyncEngine","Document no longer in limbo: "+i.key),t.Uo.removeReference(i.key,e),t.Uo.containsKey(i.key)||U_(t,i.key)):Re()}function AA(t,e){const n=e.key,i=n.path.canonicalString();t.Lo.get(n)||t.Mo.has(i)||(de("SyncEngine","New document in limbo: "+n),t.Mo.add(i),pd(t))}function pd(t){for(;t.Mo.size>0&&t.Lo.size<t.maxConcurrentLimboResolutions;){const e=t.Mo.values().next().value;t.Mo.delete(e);const n=new Ee(St.fromString(e)),i=t.jo.next();t.Bo.set(i,new vA(n)),t.Lo=t.Lo.insert(n,i),T_(t.remoteStore,new Rr(Ar(Bl(n.path)),i,2,Mh.T))}}async function Jo(t,e,n){const i=Le(t),r=[],s=[],o=[];i.Oo.isEmpty()||(i.Oo.forEach((a,l)=>{o.push(i.Wo(l,e,n).then(c=>{if(c){i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),r.push(c);const u=$h.kn(l.targetId,c);s.push(u)}}))}),await Promise.all(o),i.$o.Rr(r),await async function(a,l){const c=Le(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>Z.forEach(l,h=>Z.forEach(h.Nn,d=>c.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>Z.forEach(h.xn,d=>c.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!Ko(u))throw u;de("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const d=c.Un.get(h),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);c.Un=c.Un.insert(h,p)}}}(i.localStore,s))}async function kA(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const i=await __(n.localStore,e);n.currentUser=e,function(r,s){r.Ko.forEach(o=>{o.forEach(a=>{a.reject(new te(U.CANCELLED,s))})}),r.Ko.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Jo(n,i.Wn)}}function OA(t,e){const n=Le(t),i=n.Bo.get(e);if(i&&i.ko)return It().add(i.key);{let r=It();const s=n.Fo.get(e);if(!s)return r;for(const o of s){const a=n.Oo.get(o);r=r.unionWith(a.view.Ro)}return r}}function RA(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=P_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TA.bind(null,e),e.$o.Rr=pA.bind(null,e.eventManager),e.$o.Go=mA.bind(null,e.eventManager),e}function LA(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SA.bind(null,e),e}class MA{constructor(){this.synchronizeTabs=!1}async initialize(e){this.N=tc(e.databaseInfo.databaseId),this.sharedClientState=this.Ho(e),this.persistence=this.Jo(e),await this.persistence.start(),this.gcScheduler=this.Yo(e),this.localStore=this.Xo(e)}Yo(e){return null}Xo(e){return NS(this.persistence,new LS,e.initialUser,this.N)}Jo(e){return new WS(nd.Ns,this.N)}Ho(e){return new zS}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class NA{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>D_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kA.bind(null,this.syncEngine),await hA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new fA}createDatastore(e){const n=tc(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new YS(r));var r;return function(s,o,a){return new $S(s,o,a)}(e.credentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,r=e.asyncQueue,s=a=>D_(this.syncEngine,a,0),o=E_.bt()?new E_:new KS,new tA(n,i,r,s,o);var n,i,r,s,o}createSyncEngine(e,n){return function(i,r,s,o,a,l,c){const u=new yA(i,r,s,o,a,l);return c&&(u.Qo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=Le(e);de("RemoteStore","RemoteStore shutting down."),n.Wr.add(5),await Yo(n),n.zr.shutdown(),n.Hr.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,i){this.credentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Nn.UNAUTHENTICATED,this.clientId=Tg.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(n,async r=>{de("FirestoreClient","Received user=",r.uid),await this.credentialListener(r),this.user=r})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new te(U.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),e.resolve()}catch(n){const i=ld(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function DA(t,e){t.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await __(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function FA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xA(t);de("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>async function(s,o){const a=Le(s);a.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const l=Lr(a);a.Wr.add(3),await Yo(a),l&&a.Hr.set("Unknown"),await a.remoteSyncer.handleCredentialChange(o),a.Wr.delete(3),await nc(a)}(e.remoteStore,r)),t.onlineComponents=e}async function xA(t){return t.offlineComponents||(de("FirestoreClient","Using default OfflineComponentProvider"),await DA(t,new MA)),t.offlineComponents}async function V_(t){return t.onlineComponents||(de("FirestoreClient","Using default OnlineComponentProvider"),await FA(t,new NA)),t.onlineComponents}function UA(t){return V_(t).then(e=>e.syncEngine)}async function sc(t){const e=await V_(t),n=e.eventManager;return n.onListen=bA.bind(null,e.syncEngine),n.onUnlisten=IA.bind(null,e.syncEngine),n}function jA(t,e,n={}){const i=new yi;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,l){const c=new md({next:h=>{s.enqueueAndForget(()=>ud(r,u));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new te(U.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new te(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new dd(Bl(o.path),c,{includeMetadataChanges:!0,fo:!0});return cd(r,u)}(await sc(t),t.asyncQueue,e,n,i)),i.promise}function VA(t,e,n={}){const i=new yi;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,l){const c=new md({next:h=>{s.enqueueAndForget(()=>ud(r,u)),h.fromCache&&a.source==="server"?l.reject(new te(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new dd(o,c,{includeMetadataChanges:!0,fo:!0});return cd(r,u)}(await sc(t),t.asyncQueue,e,n,i)),i.promise}class BA{constructor(e,n,i,r,s,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Zo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Zo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t,e,n){if(!n)throw new te(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HA(t,e,n,i){if(e===!0&&i===!0)throw new te(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function q_(t){if(!Ee.isDocumentKey(t))throw new te(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function W_(t){if(Ee.isDocumentKey(t))throw new te(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function oc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re()}function Dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oc(t);throw new te(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new te(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,HA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G_({}),this._settingsFrozen=!1,e instanceof Zo?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new te(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zo(i.options.projectId)}(e))}get app(){if(!this._app)throw new te(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new te(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G_(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new IC;switch(n.type){case"gapi":const i=n.client;return yt(!(typeof i!="object"||i===null||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new CC(i,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new te(U.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=B_.get(e);n&&(de("ComponentProvider","Removing Datastore"),B_.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class Mr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Mr(this.firestore,e,this._query)}}class Bi extends Mr{constructor(e,n,i){super(e,n,Bl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new Ee(e))}withConverter(e){return new Bi(this.firestore,e,this._path)}}function wB(t,e,...n){if(t=it(t),H_("collection","path",e),t instanceof gd){const i=St.fromString(e,...n);return W_(i),new Bi(t,null,i)}{if(!(t instanceof mn||t instanceof Bi))throw new te(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(St.fromString(e,...n));return W_(i),new Bi(t.firestore,null,i)}}function qA(t,e,...n){if(t=it(t),arguments.length===1&&(e=Tg.I()),H_("doc","path",e),t instanceof gd){const i=St.fromString(e,...n);return q_(i),new mn(t,null,new Ee(i))}{if(!(t instanceof mn||t instanceof Bi))throw new te(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(St.fromString(e,...n));return q_(i),new mn(t.firestore,t instanceof Bi?t.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new I_(this,"async_queue_retry"),this.Rc=()=>{const n=id();n&&de("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ar.tr()};const e=id();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const n=id();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const n=new yi;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}async vc(){if(this.mc.length!==0){try{await this.mc[0](),this.mc.shift(),this.ar.reset()}catch(e){if(!Ko(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.mc.length>0&&this.ar.Xi(()=>this.vc())}}Pc(e){const n=this._c.then(()=>(this.Ec=!0,e().catch(i=>{this.Tc=i,this.Ec=!1;const r=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(i);throw Ui("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Ec=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.bc(),this.Ac.indexOf(e)>-1&&(n=0);const r=ad.createAndSchedule(this,e,n,i,s=>this.Vc(s));return this.yc.push(r),r}bc(){this.Tc&&Re()}verifyOperationInProgress(){}async Sc(){let e;do e=this._c,await e;while(e!==this._c)}Dc(e){for(const n of this.yc)if(n.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.yc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const n=this.yc.indexOf(e);this.yc.splice(n,1)}}function z_(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const i=e;for(const r of n)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}class ci extends gd{constructor(e,n){super(e,n),this.type="firestore",this._queue=new WA,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||K_(this),this._firestoreClient.terminate()}}function TB(t=yo()){return fs(t,"firestore").getImmediate()}function $o(t){return t._firestoreClient||K_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function K_(t){var e;const n=t._freezeSettings(),i=function(r,s,o,a){return new BA(r,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new PA(t._credentials,t._queue,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ps(dn.fromBase64String(e))}catch(n){throw new te(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ps(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=/^__.*__$/;class zA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yl(e,this.data,n,this.fieldTransforms)}}class X_{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new kr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Q_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class ac{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.N=i,this.ignoreUndefinedProperties=r,s===void 0&&this.xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(e){return new ac(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.$c({path:i,Fc:!1});return r.Mc(e),r}Lc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.$c({path:i,Fc:!1});return r.xc(),r}Bc(e){return this.$c({path:void 0,Fc:!0})}Uc(e){return lc(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(e.length===0)throw this.Uc("Document fields must not be empty");if(Q_(this.kc)&&GA.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}class KA{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.N=i||tc(e)}jc(e,n,i,r=!1){return new ac({kc:e,methodName:n,Kc:i,path:Pn.emptyPath(),Fc:!1,qc:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function ta(t){const e=t._freezeSettings(),n=tc(t._databaseId);return new KA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vd(t,e,n,i,r,s={}){const o=t.jc(s.merge||s.mergeFields?2:0,e,n,r);bd("Data must be an object, but it was:",o,i);const a=$_(i,o);let l,c;if(s.merge)l=new jo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=Ed(e,h,n);if(!o.contains(d))throw new te(U.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);tv(u,d)||u.push(d)}l=new jo(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new zA(new Hn(a),l,c)}class na extends Nr{_toFieldTransform(e){if(e.kc!==2)throw e.kc===1?e.Uc(`${this._methodName}() can only appear at the top level of your update data`):e.Uc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof na}}function Y_(t,e,n){return new ac({kc:3,Kc:e.settings.Kc,methodName:t._methodName,Fc:n},e.databaseId,e.N,e.ignoreUndefinedProperties)}class yd extends Nr{_toFieldTransform(e){return new Kl(e.path,new Wo)}isEqual(e){return e instanceof yd}}class XA extends Nr{constructor(e,n){super(e),this.Qc=n}_toFieldTransform(e){const n=Y_(this,e,!0),i=this.Qc.map(s=>Pr(s,n)),r=new Ss(i);return new Kl(e.path,r)}isEqual(e){return this===e}}class QA extends Nr{constructor(e,n){super(e),this.Qc=n}_toFieldTransform(e){const n=Y_(this,e,!0),i=this.Qc.map(s=>Pr(s,n)),r=new As(i);return new Kl(e.path,r)}isEqual(e){return this===e}}class YA extends Nr{constructor(e,n){super(e),this.Wc=n}_toFieldTransform(e){const n=new Go(e.N,qg(e.N,this.Wc));return new Kl(e.path,n)}isEqual(e){return this===e}}function J_(t,e,n,i){const r=t.jc(1,e,n);bd("Data must be an object, but it was:",r,i);const s=[],o=Hn.empty();Cr(i,(l,c)=>{const u=Id(e,l,n);c=it(c);const h=r.Lc(u);if(c instanceof na)s.push(u);else{const d=Pr(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new jo(s);return new X_(o,a,r.fieldTransforms)}function Z_(t,e,n,i,r,s){const o=t.jc(1,e,n),a=[Ed(e,i,n)],l=[r];if(s.length%2!=0)throw new te(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Ed(e,s[d])),l.push(s[d+1]);const c=[],u=Hn.empty();for(let d=a.length-1;d>=0;--d)if(!tv(c,a[d])){const f=a[d];let p=l[d];p=it(p);const g=o.Lc(f);if(p instanceof na)c.push(f);else{const m=Pr(p,g);m!=null&&(c.push(f),u.set(f,m))}}const h=new jo(c);return new X_(u,h,o.fieldTransforms)}function JA(t,e,n,i=!1){return Pr(n,t.jc(i?4:3,e))}function Pr(t,e){if(ev(t=it(t)))return bd("Unsupported field value:",e,t),$_(t,e);if(t instanceof Nr)return function(n,i){if(!Q_(i.kc))throw i.Uc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Uc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&e.kc!==4)throw e.Uc("Nested arrays are not supported");return function(n,i){const r=[];let s=0;for(const o of n){let a=Pr(o,i.Bc(s));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(t,e)}return function(n,i){if((n=it(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return qg(i.N,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Bn.fromDate(n);return{timestampValue:ec(i.N,r)}}if(n instanceof Bn){const r=new Bn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ec(i.N,r)}}if(n instanceof _d)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ps)return{bytesValue:l_(i.N,n._byteString)};if(n instanceof mn){const r=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(r))throw i.Uc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Kh(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.Uc(`Unsupported field value: ${oc(n)}`)}(t,e)}function $_(t,e){const n={};return Sg(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cr(t,(i,r)=>{const s=Pr(r,e.Oc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function ev(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bn||t instanceof _d||t instanceof Ps||t instanceof mn||t instanceof Nr)}function bd(t,e,n){if(!ev(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=oc(n);throw i==="an object"?e.Uc(t+" a custom object"):e.Uc(t+" "+i)}}function Ed(t,e,n){if((e=it(e))instanceof ea)return e._internalPath;if(typeof e=="string")return Id(t,e);throw lc("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const ZA=new RegExp("[~\\*/\\[\\]]");function Id(t,e,n){if(e.search(ZA)>=0)throw lc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ea(...e.split("."))._internalPath}catch{throw lc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lc(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new te(U.INVALID_ARGUMENT,a+t+l)}function tv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $A(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $A extends nv{data(){return super.data()}}function cc(t,e){return typeof e=="string"?Id(t,e):e instanceof ea?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iv extends nv{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(cc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class uc extends iv{data(e={}){return super.data(e)}}class rv{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ia(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new uc(this._firestore,this._userDataWriter,i.key,i,new ia(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new uc(i._firestore,i._userDataWriter,o.doc.key,o.doc,new ia(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new uc(i._firestore,i._userDataWriter,o.doc.key,o.doc,new ia(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:ek(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ek(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t){if(ql(t)&&t.explicitOrderBy.length===0)throw new te(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ov{}function CB(t,...e){for(const n of e)t=n._apply(t);return t}class tk extends ov{constructor(e,n,i){super(),this.Gc=e,this.zc=n,this.Hc=i,this.type="where"}_apply(e){const n=ta(e.firestore),i=function(r,s,o,a,l,c,u){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new te(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on FieldPath.documentId().`);if(c==="in"||c==="not-in"){lv(u,c);const f=[];for(const p of u)f.push(av(a,r,p));h={arrayValue:{values:f}}}else h=av(a,r,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||lv(u,c),h=JA(o,s,u,c==="in"||c==="not-in");const d=In.create(l,c,h);return function(f,p){if(p.v()){const m=Hh(f);if(m!==null&&!m.isEqual(p.field))throw new te(U.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${m.toString()}' and '${p.field.toString()}'`);const v=Bh(f);v!==null&&cv(f,p.field,v)}const g=function(m,v){for(const w of m.filters)if(v.indexOf(w.op)>=0)return w.op;return null}(f,function(m){switch(m){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(g!==null)throw g===p.op?new te(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`):new te(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${p.op.toString()}' filters with '${g.toString()}' filters.`)}(r,d),d}(e._query,"where",n,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new Mr(e.firestore,e.converter,function(r,s){const o=r.filters.concat([s]);return new Cs(r.path,r.collectionGroup,r.explicitOrderBy.slice(),o,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}function SB(t,e,n){const i=e,r=cc("where",t);return new tk(r,i,n)}class nk extends ov{constructor(e,n){super(),this.Gc=e,this.Jc=n,this.type="orderBy"}_apply(e){const n=function(i,r,s){if(i.startAt!==null)throw new te(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new te(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Ts(r,s);return function(a,l){if(Bh(a)===null){const c=Hh(a);c!==null&&cv(a,c,l.field)}}(i,o),o}(e._query,this.Gc,this.Jc);return new Mr(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Cs(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function AB(t,e="asc"){const n=e,i=cc("orderBy",t);return new nk(i,n)}function av(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new te(U.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ug(e)&&n.indexOf("/")!==-1)throw new te(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(St.fromString(n));if(!Ee.isDocumentKey(i))throw new te(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Rg(t,new Ee(i))}if(n instanceof mn)return Rg(t,n._key);throw new te(U.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${oc(n)}.`)}function lv(t,e){if(!Array.isArray(t)||t.length===0)throw new te(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new te(U.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function cv(t,e,n){if(!n.isEqual(e))throw new te(U.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{convertValue(e,n="none"){switch(Sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Re()}}convertObject(e,n){const i={};return Cr(e.fields,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new _d(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=kg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Vo(e));default:return null}}convertTimestamp(e){const n=ji(e);return new Bn(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=St.fromString(e);yt(m_(i));const r=new Zo(i.get(1),i.get(3)),s=new Ee(i.popFirst(5));return r.isEqual(n)||Ui(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ta(e)}set(e,n,i){this._verifyNotCommitted();const r=Td(e,this._firestore),s=wd(r.converter,n,i),o=vd(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,Qn.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=Td(e,this._firestore);let o;return o=typeof(n=it(n))=="string"||n instanceof ea?Z_(this._dataReader,"WriteBatch.update",s._key,n,i,r):J_(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Td(e,this._firestore);return this._mutations=this._mutations.concat(new Gh(n._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Td(t,e){if((t=it(t)).firestore!==e)throw new te(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kB(t){t=Dn(t,mn);const e=Dn(t.firestore,ci);return jA($o(e),t._key).then(n=>uv(e,t,n))}class Cd extends ik{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function OB(t){t=Dn(t,Mr);const e=Dn(t.firestore,ci),n=$o(e),i=new Cd(e);return sv(t._query),VA(n,t._query).then(r=>new rv(e,i,t,r))}function RB(t,e,n){t=Dn(t,mn);const i=Dn(t.firestore,ci),r=wd(t.converter,e,n);return ra(i,[vd(ta(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Qn.none())])}function LB(t,e,n,...i){t=Dn(t,mn);const r=Dn(t.firestore,ci),s=ta(r);let o;return o=typeof(e=it(e))=="string"||e instanceof ea?Z_(s,"updateDoc",t._key,e,n,i):J_(s,"updateDoc",t._key,e),ra(r,[o.toMutation(t._key,Qn.exists(!0))])}function MB(t){return ra(Dn(t.firestore,ci),[new Gh(t._key,Qn.none())])}function NB(t,e){const n=Dn(t.firestore,ci),i=qA(t),r=wd(t.converter,e);return ra(n,[vd(ta(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Qn.exists(!1))]).then(()=>i)}function PB(t,...e){var n,i,r;t=it(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||z_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(z_(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,u;if(t instanceof mn)c=Dn(t.firestore,ci),u=Bl(t._key.path),l={next:h=>{e[o]&&e[o](uv(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Dn(t,Mr);c=Dn(h.firestore,ci),u=h._query;const d=new Cd(c);l={next:f=>{e[o]&&e[o](new rv(c,d,h,f))},error:e[o+1],complete:e[o+2]},sv(t._query)}return function(h,d,f,p){const g=new md(p),m=new dd(d,g,f);return h.asyncQueue.enqueueAndForget(async()=>cd(await sc(h),m)),()=>{g.ec(),h.asyncQueue.enqueueAndForget(async()=>ud(await sc(h),m))}}($o(c),u,a,l)}function ra(t,e){return function(n,i){const r=new yi;return n.asyncQueue.enqueueAndForget(async()=>wA(await UA(n),i,r)),r.promise}($o(t),e)}function uv(t,e,n){const i=n.docs.get(e._key),r=new Cd(t);return new iv(t,r,e._key,i,new ia(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DB(){return new na("deleteField")}function FB(){return new yd("serverTimestamp")}function xB(...t){return new XA("arrayUnion",t)}function UB(...t){return new QA("arrayRemove",t)}function jB(t){return new YA("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(t){return $o(t=Dn(t,ci)),new rk(t,e=>ra(t,e))}(function(t,e=!0){(function(n){ys=n})(vr),Di(new gi("firestore",(n,{options:i})=>{const r=n.getProvider("app").getImmediate(),s=new ci(r,new wC(n.getProvider("auth-internal")));return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC")),Mn(Eg,"3.3.1",t),Mn(Eg,"3.3.1","esm2017")})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sd=function(t,e){return Sd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},Sd(t,e)};function wn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Sd(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var bt=function(){return bt=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},bt.apply(this,arguments)};function Ad(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function qn(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sk(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function ok(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}function hv(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ak=hv,dv=new _o("auth","Firebase",hv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new cl("@firebase/auth");function hc(t,...e){fv.logLevel<=Ze.ERROR&&fv.error(`Auth (${vr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,...e){throw kd(t,...e)}function Wn(t,...e){return kd(t,...e)}function lk(t,e,n){const i=Object.assign(Object.assign({},ak()),{[e]:n});return new _o("auth","Firebase",i).create(e,{appName:t.name})}function kd(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return dv.create(t,...e)}function ae(t,e,...n){if(!t)throw kd(e,...n)}function Ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hc(e),new Error(e)}function wi(t,e){t||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;function Ti(t){wi(t instanceof Function,"Expected a class definition");let e=pv.get(t);return e?(wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pv.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e){const n=fs(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(al(s,e!=null?e:{}))return r;Ei(r,"already-initialized")}return n.initialize({options:e})}function uk(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ti);(e==null?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mv(){return gv()==="http:"||gv()==="https:"}function gv(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mv()||$p()||"connection"in navigator)?navigator.onLine:!0}function dk(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.shortDelay=e,this.longDelay=n,wi(n>e,"Short delay should be less than long delay!"),this.isMobile=rl()||Du()}get(){return hk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t,e){wi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new sa(3e4,6e4);function Hi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qi(t,e,n,i,r={}){return _v(t,r,()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=gr(Object.assign({key:t.config.apiKey},o)).slice(1),l=new(Ld.headers());return l.set("Content-Type","application/json"),l.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&l.set("X-Firebase-Locale",t.languageCode),Ld.fetch()(vv(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function _v(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},fk),e);try{const r=new mk(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw dc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw dc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw dc(t,"email-already-in-use",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw lk(t,u,c);Ei(t,u)}}catch(r){if(r instanceof Pi)throw r;Ei(t,"network-request-failed")}}async function oa(t,e,n,i,r={}){const s=await qi(t,e,n,i,r);return"mfaPendingCredential"in s&&Ei(t,"multi-factor-auth-required",{_serverResponse:s}),s}function vv(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Rd(t.config,r):`${t.config.apiScheme}://${r}`}class mk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Wn(this.auth,"timeout")),pk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Wn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e){return qi(t,"POST","/v1/accounts:delete",e)}async function _k(t,e){return qi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vk(t,e=!1){const n=it(t),i=await n.getIdToken(e),r=Nd(i);ae(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:aa(Md(r.auth_time)),issuedAtTime:aa(Md(r.iat)),expirationTime:aa(Md(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Md(t){return Number(t)*1e3}function Nd(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return hc("JWT malformed, contained fewer than 3 sections"),null;try{const r=Pu(n);return r?JSON.parse(r):(hc("Failed to decode base64 JWT payload"),null)}catch(r){return hc("Caught error parsing JWT payload as JSON",r),null}}function yk(t){const e=Nd(t);return ae(e,"internal-error"),ae(typeof e.exp!="undefined","internal-error"),ae(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Pi&&bk(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function bk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=aa(this.lastLoginAt),this.creationTime=aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await la(t,_k(n,{idToken:i}));ae(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=((e=s.providerUserInfo)===null||e===void 0?void 0:e.length)?Tk(s.providerUserInfo):[],a=wk(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a==null?void 0:a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new yv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Ik(t){const e=it(t);await fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wk(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Tk(t){return t.map(e=>{var{providerId:n}=e,i=Ad(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(t,e){const n=await _v(t,{},()=>{const i=gr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=vv(t,r,"/v1/token",`key=${s}`);return Ld.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken!="undefined","internal-error"),ae(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):yk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ae(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await Ck(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new ca;return i&&(ae(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ae(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ca,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t,e){ae(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Dr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Ad(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Ek(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.metadata=new yv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await la(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vk(this,e)}reload(){return Ik(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await fc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await la(this,gk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:y,isAnonymous:O,providerData:C,stsTokenManager:_}=n;ae(b&&_,e,"internal-error");const I=ca.fromJSON(this.name,_);ae(typeof b=="string",e,"internal-error"),Wi(h,e.name),Wi(d,e.name),ae(typeof y=="boolean",e,"internal-error"),ae(typeof O=="boolean",e,"internal-error"),Wi(f,e.name),Wi(p,e.name),Wi(g,e.name),Wi(m,e.name),Wi(v,e.name),Wi(w,e.name);const K=new Dr({uid:b,auth:e,email:d,emailVerified:y,displayName:h,isAnonymous:O,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:I,createdAt:v,lastLoginAt:w});return C&&Array.isArray(C)&&(K.providerData=C.map(L=>Object.assign({},L))),m&&(K._redirectEventId=m),K}static async _fromIdTokenResponse(e,n,i=!1){const r=new ca;r.updateFromServerResponse(n);const s=new Dr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await fc(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bv.type="NONE";const Ev=bv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ds{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=pc(this.userKey,r.apiKey,s),this.fullPersistenceKey=pc("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ds(Ti(Ev),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Ti(Ev);const o=pc(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Dr._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ds(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ds(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Cv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Av(e))return"Blackberry";if(kv(e))return"Webos";if(Pd(e))return"Safari";if((e.includes("chrome/")||Tv(e))&&!e.includes("edge/"))return"Chrome";if(Sv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function wv(t=Qt()){return/firefox\//i.test(t)}function Pd(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tv(t=Qt()){return/crios\//i.test(t)}function Cv(t=Qt()){return/iemobile/i.test(t)}function Sv(t=Qt()){return/android/i.test(t)}function Av(t=Qt()){return/blackberry/i.test(t)}function kv(t=Qt()){return/webos/i.test(t)}function mc(t=Qt()){return/iphone|ipad|ipod/i.test(t)}function Sk(t=Qt()){var e;return mc(t)&&!!((e=window.navigator)===null||e===void 0?void 0:e.standalone)}function Ak(){return em()&&document.documentMode===10}function Ov(t=Qt()){return mc(t)||Sv(t)||kv(t)||Av(t)||/windows phone/i.test(t)||Cv(t)}function kk(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t,e=[]){let n;switch(t){case"Browser":n=Iv(Qt());break;case"Worker":n=`${Iv(Qt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vr}/${i}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,n){this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lv(this),this.idTokenSubscription=new Lv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dv,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ti(n)),this._initializationPromise=this.queue(async()=>{var i,r;this._deleted||(this.persistenceManager=await Ds.create(this,e),!this._deleted&&(((i=this._popupRedirectResolver)===null||i===void 0?void 0:i._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)))}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var n;let i=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=i==null?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);(!r||r===s)&&(o==null?void 0:o.user)&&(i=o.user)}return i?i._redirectEventId?(ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)):this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fc(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?it(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ti(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _o("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ti(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await Ds.create(this,[Ti(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Fs(t){return it(t)}class Lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=I1(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,n){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(t,e){return oa(t,"POST","/v1/accounts:signInWithIdp",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="http://localhost";class Fr extends Dd{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){const n=new Fr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Ad(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Fr(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return xs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,xs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xs(e,n)}buildRequest(){const e={requestUri:Rk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gr(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(t,e){return qi(t,"POST","/v1/accounts:sendVerificationCode",Hi(t,e))}async function Mk(t,e){return oa(t,"POST","/v1/accounts:signInWithPhoneNumber",Hi(t,e))}async function Nk(t,e){const n=await oa(t,"POST","/v1/accounts:signInWithPhoneNumber",Hi(t,e));if(n.temporaryProof)throw dc(t,"account-exists-with-different-credential",n);return n}const Pk={USER_NOT_FOUND:"user-not-found"};async function Dk(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return oa(t,"POST","/v1/accounts:signInWithPhoneNumber",Hi(t,n),Pk)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends Dd{constructor(e){super("phone","phone");this.params=e}static _fromVerification(e,n){return new ua({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ua({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Mk(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Nk(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Dk(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new ua({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Mv{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends ha{constructor(){super("facebook.com")}static credential(e){return Fr._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends ha{constructor(){super("google.com");this.addScope("profile")}static credential(e,n){return Fr._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return zi.credential(n,i)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends ha{constructor(){super("github.com")}static credential(e){return Fr._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.GITHUB_SIGN_IN_METHOD="github.com";Ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends ha{constructor(){super("twitter.com")}static credential(e,n){return Fr._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Xi.credential(n,i)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(t,e){return oa(t,"POST","/v1/accounts:signUp",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Dr._fromIdTokenResponse(e,i,r),o=Nv(i);return new Qi({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Nv(i);return new Qi({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Nv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BB(t){var e;const n=Fs(t);if(await n._initializationPromise,(e=n.currentUser)===null||e===void 0?void 0:e.isAnonymous)return new Qi({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Fk(n,{returnSecureToken:!0}),r=await Qi._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Pi{constructor(e,n,i,r){var s;super(n.code,n.message);this.operationType=i,this.user=r,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new gc(e,n,i,r)}}function Pv(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gc._fromErrorAndOperation(t,s,e,i):s})}async function xk(t,e,n=!1){const i=await la(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qi._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await la(t,Pv(i,r,e,t),n);ae(s.idToken,i,"internal-error");const o=Nd(s.idToken);ae(o,i,"internal-error");const{sub:a}=o;return ae(t.uid===a,i,"user-mismatch"),Qi._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ei(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dv(t,e,n=!1){const i="signIn",r=await Pv(t,i,e),s=await Qi._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function jk(t,e){return Dv(Fs(t),e)}function HB(t,e,n,i){return it(t).onAuthStateChanged(e,n,i)}function qB(t){return it(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t,e){return qi(t,"POST","/v2/accounts/mfaEnrollment:start",Hi(t,e))}const _c="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_c,"1"),this.storage.removeItem(_c),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(){const t=Qt();return Pd(t)||mc(t)}const Hk=1e3,qk=10;class xv extends Fv{constructor(){super(()=>window.localStorage,"LOCAL");this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Bk()&&kk(),this.fallbackToPolling=Ov(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);Ak()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,qk):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xv.type="LOCAL";const Wk=xv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends Fv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Uv.type="SESSION";const jv=Uv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new vc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o==null?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await Gk(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Fd("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return window}function Kk(t){Wt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(){return typeof Wt().WorkerGlobalScope!="undefined"&&typeof Wt().importScripts=="function"}async function Xk(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Qk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Yk(){return xd()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="firebaseLocalStorageDb",Jk=1,yc="firebaseLocalStorage",Bv="fbase_key";class da{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bc(t,e){return t.transaction([yc],e?"readwrite":"readonly").objectStore(yc)}function Zk(){const t=indexedDB.deleteDatabase(Vv);return new da(t).toPromise()}function Ud(){const t=indexedDB.open(Vv,Jk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(yc,{keyPath:Bv})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(yc)?e(i):(i.close(),await Zk(),e(await Ud()))})})}async function Hv(t,e,n){const i=bc(t,!0).put({[Bv]:e,value:n});return new da(i).toPromise()}async function $k(t,e){const n=bc(t,!1).get(e),i=await new da(n).toPromise();return i===void 0?null:i.value}function qv(t,e){const n=bc(t,!0).delete(e);return new da(n).toPromise()}const eO=800,tO=3;class Wv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ud(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>tO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vc._getInstance(Yk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Xk(),!this.activeServiceWorker)return;this.sender=new zk(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);!i||((e=i[0])===null||e===void 0?void 0:e.fulfilled)&&((n=i[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Qk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ud();return await Hv(e,_c,"1"),await qv(e,_c),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Hv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>$k(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=bc(r,!1).getAll();return new da(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wv.type="LOCAL";const nO=Wv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t,e){return qi(t,"POST","/v2/accounts/mfaSignIn:start",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(t){return(await qi(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Gv(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Wn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",sO().appendChild(i)})}function zv(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=500,aO=6e4,Ec=1e12;class lO{constructor(e){this.auth=e,this.counter=Ec,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new cO(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;const i=e||Ec;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;const i=e||Ec;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const i=e||Ec;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""}}class cO{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;ae(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=uO(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},aO)},oO))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function uO(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=zv("rcb"),hO=new sa(3e4,6e4),dO="https://www.google.com/recaptcha/api.js?";class fO{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Wt().grecaptcha}load(e,n=""){return ae(pO(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Wt().grecaptcha):new Promise((i,r)=>{const s=Wt().setTimeout(()=>{r(Wn(e,"network-request-failed"))},hO.get());Wt()[jd]=()=>{Wt().clearTimeout(s),delete Wt()[jd];const a=Wt().grecaptcha;if(!a){r(Wn(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const h=l(c,u);return this.counter++,h},this.hostLanguage=n,i(a)};const o=`${dO}?${gr({onload:jd,render:"explicit",hl:n})}`;Gv(o).catch(()=>{clearTimeout(s),r(Wn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Wt().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function pO(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class mO{async load(e){return new lO(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="recaptcha",gO={theme:"light",type:"image"};class WB{constructor(e,n=Object.assign({},gO),i){this.parameters=n,this.type=Kv,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fs(i),this.isInvisible=this.parameters.size==="invisible",ae(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment");const r=typeof e=="string"?document.getElementById(e):e;ae(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mO:new fO,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=o=>{!o||(this.tokenChangeListeners.delete(s),r(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=Wt()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ae(mv()&&!xd(),this.auth,"internal-error"),await _O(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await rO(this.auth);ae(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function _O(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ua._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function GB(t,e,n){const i=Fs(t),r=await yO(i,e,it(n));return new vO(r,s=>jk(i,s))}async function yO(t,e,n){var i;const r=await n.verify();try{ae(typeof r=="string",t,"argument-error"),ae(n.type===Kv,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return ae(o.type==="enroll",t,"internal-error"),(await Vk(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{ae(o.type==="signin",t,"internal-error");const a=((i=s.multiFactorHint)===null||i===void 0?void 0:i.uid)||s.multiFactorUid;return ae(a,t,"missing-multi-factor-info"),(await iO(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await Lk(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t,e){return e?Ti(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends Dd{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function EO(t){return Dv(t.auth,new Vd(t),t.bypassAuthState)}function IO(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),Uk(n,new Vd(t),t.bypassAuthState)}async function wO(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),xk(n,new Vd(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EO;case"linkViaPopup":case"linkViaRedirect":return wO;case"reauthViaPopup":case"reauthViaRedirect":return IO;default:Ei(this.auth,"internal-error")}}resolve(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=new sa(2e3,1e4);class Us extends Xv{constructor(e,n,i,r,s){super(e,n,r,s);this.provider=i,this.authWindow=null,this.pollId=null,Us.currentPopupAction&&Us.currentPopupAction.cancel(),Us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){wi(this.filter.length===1,"Popup operations only handle one event");const e=Fd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Us.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0?void 0:i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,TO.get())};e()}}Us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="pendingRedirect",Bd=new Map;class SO extends Xv{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i);this.eventId=null}async execute(){let e=Bd.get(this.auth._key());if(!e){try{const i=await AO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Bd.set(this.auth._key(),e)}return this.bypassAuthState||Bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AO(t,e){const n=OO(e),i=kO(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function kO(t){return Ti(t._redirectPersistence)}function OO(t){return pc(CO,t.config.apiKey,t.name)}async function RO(t,e,n=!1){const i=Fs(t),r=bO(i,e),o=await new SO(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=10*60*1e3;class MO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Yv(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Wn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qv(e))}saveEventToCache(e){this.cachedEventUids.add(Qv(e)),this.lastProcessedEventTime=Date.now()}}function Qv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Yv({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO(t,e={}){return qi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FO=/^https?/;async function xO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await PO(t);for(const n of e)try{if(UO(n))return}catch{}Ei(t,"unauthorized-domain")}function UO(t){const e=Od(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!FO.test(n))return!1;if(DO.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=new sa(3e4,6e4);function Jv(){const t=Wt().___jsl;if(t==null?void 0:t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VO(t){return new Promise((e,n)=>{var i,r,s;function o(){Jv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jv(),n(Wn(t,"network-request-failed"))},timeout:jO.get()})}if((r=(i=Wt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0?void 0:r.Iframe)e(gapi.iframes.getContext());else if((s=Wt().gapi)===null||s===void 0?void 0:s.load)o();else{const a=zv("iframefcb");return Wt()[a]=()=>{gapi.load?o():n(Wn(t,"network-request-failed"))},Gv(`https://apis.google.com/js/api.js?onload=${a}`)}}).catch(e=>{throw Ic=null,e})}let Ic=null;function BO(t){return Ic=Ic||VO(t),Ic}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new sa(5e3,15e3),qO="__/auth/iframe",WO="emulator/auth/iframe",GO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KO(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Rd(e,WO):`https://${t.config.authDomain}/${qO}`,i={apiKey:e.apiKey,appName:t.name,v:vr},r=zO.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${gr(i).slice(1)}`}async function XO(t){const e=await BO(t),n=Wt().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:KO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GO,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Wn(t,"network-request-failed"),a=Wt().setTimeout(()=>{s(o)},HO.get());function l(){Wt().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YO=500,JO=600,ZO="_blank",$O="http://localhost";class Zv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eR(t,e,n,i=YO,r=JO){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},QO),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Qt().toLowerCase();n&&(a=Tv(c)?ZO:n),wv(c)&&(e=e||$O,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(Sk(c)&&a!=="_self")return tR(e||"",a),new Zv(null);const h=window.open(e||"",a,u);ae(h,t,"popup-blocked");try{h.focus()}catch{}return new Zv(h)}function tR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="__/auth/handler",iR="emulator/auth/handler";function $v(t,e,n,i,r,s){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:vr,eventId:r};if(e instanceof Mv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",sl(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof ha){const l=e.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${rR(t)}?${gr(a).slice(1)}`}function rR({config:t}){return t.emulator?Rd(t,iR):`https://${t.authDomain}/${nR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="webStorageSupport";class sR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jv,this._completeRedirectFn=RO}async _openPopup(e,n,i,r){var s;wi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=$v(e,n,i,Od(),r);return eR(e,o,Fd())}async _openRedirect(e,n,i,r){return await this._originValidation(e),Kk($v(e,n,i,Od(),r)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(wi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i}async initAndGetManager(e){const n=await XO(e),i=new MO(e);return n.register("authEvent",r=>(ae(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hd,{type:Hd},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Hd];o!==void 0&&n(!!o),Ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ov()||Pd()||mc()}}const oR=sR;var ey="@firebase/auth",ty="0.19.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{var r;e(((r=i)===null||r===void 0?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function cR(t){Di(new gi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:s}=i.options;return(o=>{ae(r&&!r.includes(":"),"invalid-api-key",{appName:o.name}),ae(!(s==null?void 0:s.includes(":")),"argument-error",{appName:o.name});const a={apiKey:r,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rv(t)},l=new Ok(o,a);return uk(l,n),l})(i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Di(new gi("auth-internal",e=>{const n=Fs(e.getProvider("auth").getImmediate());return(i=>new aR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(ey,ty,lR(t)),Mn(ey,ty,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zB(t=yo()){const e=fs(t,"auth");return e.isInitialized()?e.getImmediate():ck(t,{popupRedirectResolver:oR,persistence:[nO,Wk,jv]})}cR("Browser");function ge(t){return Object.entries(t).filter(([e,n])=>e!==""&&n).map(([e])=>e).join(" ")}function st(t,e,n,i={bubbles:!0},r=!1){if(typeof Event!="undefined"&&t){const s=new CustomEvent(e,Object.assign(Object.assign({},i),{detail:n}));if(t==null||t.dispatchEvent(s),r&&e.startsWith("SMUI")){const o=new CustomEvent(e.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},i),{detail:n}));t==null||t.dispatchEvent(o),o.defaultPrevented&&s.preventDefault()}return s}}function Yi(t,e){let n=Object.getOwnPropertyNames(t);const i={};for(let r=0;r<n.length;r++){const s=n[r],o=s.indexOf("$");o!==-1&&e.indexOf(s.substring(0,o+1))!==-1||e.indexOf(s)===-1&&(i[s]=t[s])}return i}const ny=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,uR=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function et(t){let e,n=[];t.$on=(r,s)=>{let o=r,a=()=>{};return e?a=e(o,s):n.push([o,s]),o.match(ny)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',o),()=>{a()}};function i(r){mo(t,r)}return r=>{const s=[],o={};e=(a,l)=>{let c=a,u=l,h=!1;const d=c.match(ny),f=c.match(uR),p=d||f;if(c.match(/^SMUI:\w+:/)){const v=c.split(":");let w="";for(let b=0;b<v.length;b++)w+=b===v.length-1?":"+v[b]:v[b].split("-").map(y=>y.slice(0,1).toUpperCase()+y.slice(1)).join("");console.warn(`The event ${c.split("$")[0]} has been renamed to ${w.split("$")[0]}.`),c=w}if(p){const v=c.split(d?":":"$");c=v[0];const w=Object.fromEntries(v.slice(1).map(b=>[b,!0]));w.passive&&(h=h||{},h.passive=!0),w.nonpassive&&(h=h||{},h.passive=!1),w.capture&&(h=h||{},h.capture=!0),w.once&&(h=h||{},h.once=!0),w.preventDefault&&(u=n1(u)),w.stopPropagation&&(u=i1(u))}const g=$e(r,c,u,h),m=()=>{g();const v=s.indexOf(m);v>-1&&s.splice(v,1)};return s.push(m),c in o||(o[c]=$e(r,c,i)),m};for(let a=0;a<n.length;a++)e(n[a][0],n[a][1]);return{destroy:()=>{for(let a=0;a<s.length;a++)s[a]();for(let a of Object.entries(o))a[1]()}}}}function kt(t,e){let n=Object.getOwnPropertyNames(t);const i={};for(let r=0;r<n.length;r++){const s=n[r];s.substring(0,e.length)===e&&(i[s.substring(e.length)]=t[s])}return i}function dt(t,e){let n=[];if(e)for(let i=0;i<e.length;i++){const r=e[i],s=Array.isArray(r)?r[0]:r;Array.isArray(r)&&r.length>1?n.push(s(t,r[1])):n.push(s(t))}return{update(i){if((i&&i.length||0)!=n.length)throw new Error("You must not change the length of an actions array.");if(i)for(let r=0;r<i.length;r++){const s=n[r];if(s&&s.update){const o=i[r];Array.isArray(o)&&o.length>1?s.update(o[1]):s.update()}}},destroy(){for(let i=0;i<n.length;i++){const r=n[i];r&&r.destroy&&r.destroy()}}}}var wc;function hR(t,e){e===void 0&&(e=!1);var n=t.CSS,i=wc;if(typeof wc=="boolean"&&!e)return wc;var r=n&&typeof n.supports=="function";if(!r)return!1;var s=n.supports("--css-vars","yes"),o=n.supports("(--css-vars: yes)")&&n.supports("color","#00000000");return i=s||o,e||(wc=i),i}function dR(t,e,n){if(!t)return{x:0,y:0};var i=e.x,r=e.y,s=i+n.left,o=r+n.top,a,l;if(t.type==="touchstart"){var c=t;a=c.changedTouches[0].pageX-s,l=c.changedTouches[0].pageY-o}else{var u=t;a=u.pageX-s,l=u.pageY-o}return{x:a,y:l}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Yn=function(){function t(e){e===void 0&&(e={}),this.adapter=e}return Object.defineProperty(t,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.destroy=function(){},t}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function fR(t){return t===void 0&&(t=window),pR(t)?{passive:!0}:!1}function pR(t){t===void 0&&(t=window);var e=!1;try{var n={get passive(){return e=!0,!1}},i=function(){};t.document.addEventListener("test",i,n),t.document.removeEventListener("test",i,n)}catch{e=!1}return e}var iy=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",applyPassive:fR});/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function mR(t,e){if(t.closest)return t.closest(e);for(var n=t;n;){if(ry(n,e))return n;n=n.parentElement}return null}function ry(t,e){var n=t.matches||t.webkitMatchesSelector||t.msMatchesSelector;return n.call(t,e)}function gR(t){var e=t;if(e.offsetParent!==null)return e.scrollWidth;var n=e.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);var i=n.scrollWidth;return document.documentElement.removeChild(n),i}var qd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",closest:mR,matches:ry,estimateScrollWidth:gR});/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _R={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},vR={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},sy={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var oy=["touchstart","pointerdown","mousedown","keydown"],ay=["touchend","pointerup","mouseup","contextmenu"],Tc=[],yR=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.activationAnimationHasEnded=!1,i.activationTimer=0,i.fgDeactivationRemovalTimer=0,i.fgScale="0",i.frame={width:0,height:0},i.initialSize=0,i.layoutFrame=0,i.maxRadius=0,i.unboundedCoords={left:0,top:0},i.activationState=i.defaultActivationState(),i.activationTimerCallback=function(){i.activationAnimationHasEnded=!0,i.runDeactivationUXLogicIfReady()},i.activateHandler=function(r){i.activateImpl(r)},i.deactivateHandler=function(){i.deactivateImpl()},i.focusHandler=function(){i.handleFocus()},i.blurHandler=function(){i.handleBlur()},i.resizeHandler=function(){i.layout()},i}return Object.defineProperty(e,"cssClasses",{get:function(){return _R},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return vR},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return sy},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=this,i=this.supportsPressRipple();if(this.registerRootHandlers(i),i){var r=e.cssClasses,s=r.ROOT,o=r.UNBOUNDED;requestAnimationFrame(function(){n.adapter.addClass(s),n.adapter.isUnbounded()&&(n.adapter.addClass(o),n.layoutInternal())})}},e.prototype.destroy=function(){var n=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(e.cssClasses.FG_DEACTIVATION));var i=e.cssClasses,r=i.ROOT,s=i.UNBOUNDED;requestAnimationFrame(function(){n.adapter.removeClass(r),n.adapter.removeClass(s),n.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},e.prototype.activate=function(n){this.activateImpl(n)},e.prototype.deactivate=function(){this.deactivateImpl()},e.prototype.layout=function(){var n=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){n.layoutInternal(),n.layoutFrame=0})},e.prototype.setUnbounded=function(n){var i=e.cssClasses.UNBOUNDED;n?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.handleFocus=function(){var n=this;requestAnimationFrame(function(){return n.adapter.addClass(e.cssClasses.BG_FOCUSED)})},e.prototype.handleBlur=function(){var n=this;requestAnimationFrame(function(){return n.adapter.removeClass(e.cssClasses.BG_FOCUSED)})},e.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},e.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers=function(n){var i,r;if(n){try{for(var s=qn(oy),o=s.next();!o.done;o=s.next()){var a=o.value;this.adapter.registerInteractionHandler(a,this.activateHandler)}}catch(l){i={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},e.prototype.registerDeactivationHandlers=function(n){var i,r;if(n.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var s=qn(ay),o=s.next();!o.done;o=s.next()){var a=o.value;this.adapter.registerDocumentInteractionHandler(a,this.deactivateHandler)}}catch(l){i={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}},e.prototype.deregisterRootHandlers=function(){var n,i;try{for(var r=qn(oy),s=r.next();!s.done;s=r.next()){var o=s.value;this.adapter.deregisterInteractionHandler(o,this.activateHandler)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},e.prototype.deregisterDeactivationHandlers=function(){var n,i;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var r=qn(ay),s=r.next();!s.done;s=r.next()){var o=s.value;this.adapter.deregisterDocumentInteractionHandler(o,this.deactivateHandler)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},e.prototype.removeCssVars=function(){var n=this,i=e.strings,r=Object.keys(i);r.forEach(function(s){s.indexOf("VAR_")===0&&n.adapter.updateCssVariable(i[s],null)})},e.prototype.activateImpl=function(n){var i=this;if(!this.adapter.isSurfaceDisabled()){var r=this.activationState;if(!r.isActivated){var s=this.previousActivationEvent,o=s&&n!==void 0&&s.type!==n.type;if(!o){r.isActivated=!0,r.isProgrammatic=n===void 0,r.activationEvent=n,r.wasActivatedByPointer=r.isProgrammatic?!1:n!==void 0&&(n.type==="mousedown"||n.type==="touchstart"||n.type==="pointerdown");var a=n!==void 0&&Tc.length>0&&Tc.some(function(l){return i.adapter.containsEventTarget(l)});if(a){this.resetActivationState();return}n!==void 0&&(Tc.push(n.target),this.registerDeactivationHandlers(n)),r.wasElementMadeActive=this.checkElementMadeActive(n),r.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){Tc=[],!r.wasElementMadeActive&&n!==void 0&&(n.key===" "||n.keyCode===32)&&(r.wasElementMadeActive=i.checkElementMadeActive(n),r.wasElementMadeActive&&i.animateActivation()),r.wasElementMadeActive||(i.activationState=i.defaultActivationState())})}}}},e.prototype.checkElementMadeActive=function(n){return n!==void 0&&n.type==="keydown"?this.adapter.isSurfaceActive():!0},e.prototype.animateActivation=function(){var n=this,i=e.strings,r=i.VAR_FG_TRANSLATE_START,s=i.VAR_FG_TRANSLATE_END,o=e.cssClasses,a=o.FG_DEACTIVATION,l=o.FG_ACTIVATION,c=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var u="",h="";if(!this.adapter.isUnbounded()){var d=this.getFgTranslationCoordinates(),f=d.startPoint,p=d.endPoint;u=f.x+"px, "+f.y+"px",h=p.x+"px, "+p.y+"px"}this.adapter.updateCssVariable(r,u),this.adapter.updateCssVariable(s,h),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(a),this.adapter.computeBoundingRect(),this.adapter.addClass(l),this.activationTimer=setTimeout(function(){n.activationTimerCallback()},c)},e.prototype.getFgTranslationCoordinates=function(){var n=this.activationState,i=n.activationEvent,r=n.wasActivatedByPointer,s;r?s=dR(i,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):s={x:this.frame.width/2,y:this.frame.height/2},s={x:s.x-this.initialSize/2,y:s.y-this.initialSize/2};var o={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:s,endPoint:o}},e.prototype.runDeactivationUXLogicIfReady=function(){var n=this,i=e.cssClasses.FG_DEACTIVATION,r=this.activationState,s=r.hasDeactivationUXRun,o=r.isActivated,a=s||!o;a&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(i),this.fgDeactivationRemovalTimer=setTimeout(function(){n.adapter.removeClass(i)},sy.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses=function(){var n=e.cssClasses.FG_ACTIVATION;this.adapter.removeClass(n),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},e.prototype.resetActivationState=function(){var n=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return n.previousActivationEvent=void 0},e.numbers.TAP_DELAY_MS)},e.prototype.deactivateImpl=function(){var n=this,i=this.activationState;if(!!i.isActivated){var r=bt({},i);i.isProgrammatic?(requestAnimationFrame(function(){n.animateDeactivation(r)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){n.activationState.hasDeactivationUXRun=!0,n.animateDeactivation(r),n.resetActivationState()}))}},e.prototype.animateDeactivation=function(n){var i=n.wasActivatedByPointer,r=n.wasElementMadeActive;(i||r)&&this.runDeactivationUXLogicIfReady()},e.prototype.layoutInternal=function(){var n=this;this.frame=this.adapter.computeBoundingRect();var i=Math.max(this.frame.height,this.frame.width),r=function(){var o=Math.sqrt(Math.pow(n.frame.width,2)+Math.pow(n.frame.height,2));return o+e.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?i:r();var s=Math.floor(i*e.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&s%2!=0?this.initialSize=s-1:this.initialSize=s,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},e.prototype.updateLayoutCssVars=function(){var n=e.strings,i=n.VAR_FG_SIZE,r=n.VAR_LEFT,s=n.VAR_TOP,o=n.VAR_FG_SCALE;this.adapter.updateCssVariable(i,this.initialSize+"px"),this.adapter.updateCssVariable(o,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(r,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(s,this.unboundedCoords.top+"px"))},e}(Yn);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Wd="mdc-dom-focus-sentinel",bR=function(){function t(e,n){n===void 0&&(n={}),this.root=e,this.options=n,this.elFocusedBeforeTrapFocus=null}return t.prototype.trapFocus=function(){var e=this.getFocusableElements(this.root);if(e.length===0)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root),this.options.skipInitialFocus||this.focusInitialElement(e,this.options.initialFocusEl)},t.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+Wd)).forEach(function(e){e.parentElement.removeChild(e)}),!this.options.skipRestoreFocus&&this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},t.prototype.wrapTabFocus=function(e){var n=this,i=this.createSentinel(),r=this.createSentinel();i.addEventListener("focus",function(){var s=n.getFocusableElements(e);s.length>0&&s[s.length-1].focus()}),r.addEventListener("focus",function(){var s=n.getFocusableElements(e);s.length>0&&s[0].focus()}),e.insertBefore(i,e.children[0]),e.appendChild(r)},t.prototype.focusInitialElement=function(e,n){var i=0;n&&(i=Math.max(e.indexOf(n),0)),e[i].focus()},t.prototype.getFocusableElements=function(e){var n=[].slice.call(e.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button"));return n.filter(function(i){var r=i.getAttribute("aria-disabled")==="true"||i.getAttribute("disabled")!=null||i.getAttribute("hidden")!=null||i.getAttribute("aria-hidden")==="true",s=i.tabIndex>=0&&i.getBoundingClientRect().width>0&&!i.classList.contains(Wd)&&!r,o=!1;if(s){var a=getComputedStyle(i);o=a.display==="none"||a.visibility==="hidden"}return s&&!o})},t.prototype.createSentinel=function(){var e=document.createElement("div");return e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","true"),e.classList.add(Wd),e},t}(),ER=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",FocusTrap:bR});/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var je={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},Tn=new Set;Tn.add(je.BACKSPACE);Tn.add(je.ENTER);Tn.add(je.SPACEBAR);Tn.add(je.PAGE_UP);Tn.add(je.PAGE_DOWN);Tn.add(je.END);Tn.add(je.HOME);Tn.add(je.ARROW_LEFT);Tn.add(je.ARROW_UP);Tn.add(je.ARROW_RIGHT);Tn.add(je.ARROW_DOWN);Tn.add(je.DELETE);Tn.add(je.ESCAPE);Tn.add(je.TAB);var Fn={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Cn=new Map;Cn.set(Fn.BACKSPACE,je.BACKSPACE);Cn.set(Fn.ENTER,je.ENTER);Cn.set(Fn.SPACEBAR,je.SPACEBAR);Cn.set(Fn.PAGE_UP,je.PAGE_UP);Cn.set(Fn.PAGE_DOWN,je.PAGE_DOWN);Cn.set(Fn.END,je.END);Cn.set(Fn.HOME,je.HOME);Cn.set(Fn.ARROW_LEFT,je.ARROW_LEFT);Cn.set(Fn.ARROW_UP,je.ARROW_UP);Cn.set(Fn.ARROW_RIGHT,je.ARROW_RIGHT);Cn.set(Fn.ARROW_DOWN,je.ARROW_DOWN);Cn.set(Fn.DELETE,je.DELETE);Cn.set(Fn.ESCAPE,je.ESCAPE);Cn.set(Fn.TAB,je.TAB);var Ji=new Set;Ji.add(je.PAGE_UP);Ji.add(je.PAGE_DOWN);Ji.add(je.END);Ji.add(je.HOME);Ji.add(je.ARROW_LEFT);Ji.add(je.ARROW_UP);Ji.add(je.ARROW_RIGHT);Ji.add(je.ARROW_DOWN);function gn(t){var e=t.key;if(Tn.has(e))return e;var n=Cn.get(t.keyCode);return n||je.UNKNOWN}const{applyPassive:Cc}=iy,{matches:IR}=qd;function xr(t,{ripple:e=!0,surface:n=!1,unbounded:i=!1,disabled:r=!1,color:s,active:o,rippleElement:a,eventTarget:l,activeTarget:c,addClass:u=p=>t.classList.add(p),removeClass:h=p=>t.classList.remove(p),addStyle:d=(p,g)=>t.style.setProperty(p,g),initPromise:f=Promise.resolve()}={}){let p,g=un("SMUI:addLayoutListener"),m,v=o,w=l,b=c;function y(){n?(u("mdc-ripple-surface"),s==="primary"?(u("smui-ripple-surface--primary"),h("smui-ripple-surface--secondary")):s==="secondary"?(h("smui-ripple-surface--primary"),u("smui-ripple-surface--secondary")):(h("smui-ripple-surface--primary"),h("smui-ripple-surface--secondary"))):(h("mdc-ripple-surface"),h("smui-ripple-surface--primary"),h("smui-ripple-surface--secondary")),p&&v!==o&&(v=o,o?p.activate():o===!1&&p.deactivate()),e&&!p?(p=new yR({addClass:u,browserSupportsCssVars:()=>hR(window),computeBoundingRect:()=>(a||t).getBoundingClientRect(),containsEventTarget:C=>t.contains(C),deregisterDocumentInteractionHandler:(C,_)=>document.documentElement.removeEventListener(C,_,Cc()),deregisterInteractionHandler:(C,_)=>(l||t).removeEventListener(C,_,Cc()),deregisterResizeHandler:C=>window.removeEventListener("resize",C),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>o==null?IR(c||t,":active"):o,isSurfaceDisabled:()=>!!r,isUnbounded:()=>!!i,registerDocumentInteractionHandler:(C,_)=>document.documentElement.addEventListener(C,_,Cc()),registerInteractionHandler:(C,_)=>(l||t).addEventListener(C,_,Cc()),registerResizeHandler:C=>window.addEventListener("resize",C),removeClass:h,updateCssVariable:d}),f.then(()=>{p&&(p.init(),p.setUnbounded(i))})):p&&!e&&f.then(()=>{p&&(p.destroy(),p=void 0)}),p&&(w!==l||b!==c)&&(w=l,b=c,p.destroy(),requestAnimationFrame(()=>{p&&(p.init(),p.setUnbounded(i))})),!e&&i&&u("mdc-ripple-upgraded--unbounded")}y(),g&&(m=g(O));function O(){p&&p.layout()}return{update(C){({ripple:e,surface:n,unbounded:i,disabled:r,color:s,active:o,rippleElement:a,eventTarget:l,activeTarget:c,addClass:u,removeClass:h,addStyle:d,initPromise:f}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:_=>t.classList.add(_),removeClass:_=>t.classList.remove(_),addStyle:(_,I)=>t.style.setProperty(_,I),initPromise:Promise.resolve()},C)),y()},destroy(){p&&(p.destroy(),p=void 0,h("mdc-ripple-surface"),h("smui-ripple-surface--primary"),h("smui-ripple-surface--secondary")),m&&m()}}}function wR(t){let e,n,i,r,s;const o=t[7].default,a=we(o,t,t[6],null);let l=[{href:t[1]},t[4]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=_e("a"),a&&a.c(),this.h()},l(u){e=ve(u,"A",{href:!0});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){ce(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),t[8](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[3].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&64)&&Ce(a,o,u,u[6],i?Te(o,u[6],h,null):Se(u[6]),null),ce(e,c=Ae(l,[(!i||h&2)&&{href:u[1]},h&16&&u[4]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[8](null),r=!1,ze(s)}}}function TR(t,e,n){const i=["use","href","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e,{href:l="javascript:void(0);"}=e;const c=et(Ue());let u;function h(){return u}function d(f){ue[f?"unshift":"push"](()=>{u=f,n(2,u)})}return t.$$set=f=>{e=x(x({},e),Ke(f)),n(4,r=ie(e,i)),"use"in f&&n(0,a=f.use),"href"in f&&n(1,l=f.href),"$$scope"in f&&n(6,o=f.$$scope)},[a,l,u,c,r,h,o,s,d]}class CR extends Je{constructor(e){super();Ye(this,e,TR,wR,Ge,{use:0,href:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function SR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=_e("button"),a&&a.c(),this.h()},l(u){e=ve(u,"BUTTON",{});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){ce(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),e.autofocus&&e.focus(),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[7](null),r=!1,ze(s)}}}function AR(t,e,n){const i=["use","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=et(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=x(x({},e),Ke(d)),n(3,r=ie(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class kR extends Je{constructor(e){super();Ye(this,e,AR,SR,Ge,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function OR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=_e("div"),a&&a.c(),this.h()},l(u){e=ve(u,"DIV",{});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){ce(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[7](null),r=!1,ze(s)}}}function RR(t,e,n){const i=["use","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=et(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=x(x({},e),Ke(d)),n(3,r=ie(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class ly extends Je{constructor(e){super();Ye(this,e,RR,OR,Ge,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function LR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=_e("h1"),a&&a.c(),this.h()},l(u){e=ve(u,"H1",{});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){ce(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[7](null),r=!1,ze(s)}}}function MR(t,e,n){const i=["use","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=et(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=x(x({},e),Ke(d)),n(3,r=ie(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class NR extends Je{constructor(e){super();Ye(this,e,MR,LR,Ge,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function PR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=_e("h2"),a&&a.c(),this.h()},l(u){e=ve(u,"H2",{});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){ce(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[7](null),r=!1,ze(s)}}}function DR(t,e,n){const i=["use","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=et(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=x(x({},e),Ke(d)),n(3,r=ie(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class FR extends Je{constructor(e){super();Ye(this,e,DR,PR,Ge,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function xR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=_e("h3"),a&&a.c(),this.h()},l(u){e=ve(u,"H3",{});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){ce(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[7](null),r=!1,ze(s)}}}function UR(t,e,n){const i=["use","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=et(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=x(x({},e),Ke(d)),n(3,r=ie(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class jR extends Je{constructor(e){super();Ye(this,e,UR,xR,Ge,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function VR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=_e("i"),a&&a.c(),this.h()},l(u){e=ve(u,"I",{});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){ce(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[7](null),r=!1,ze(s)}}}function BR(t,e,n){const i=["use","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=et(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=x(x({},e),Ke(d)),n(3,r=ie(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class HR extends Je{constructor(e){super();Ye(this,e,BR,VR,Ge,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function qR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=_e("li"),a&&a.c(),this.h()},l(u){e=ve(u,"LI",{});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){ce(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[7](null),r=!1,ze(s)}}}function WR(t,e,n){const i=["use","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=et(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=x(x({},e),Ke(d)),n(3,r=ie(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class GR extends Je{constructor(e){super();Ye(this,e,WR,qR,Ge,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function zR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=_e("nav"),a&&a.c(),this.h()},l(u){e=ve(u,"NAV",{});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){ce(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[7](null),r=!1,ze(s)}}}function KR(t,e,n){const i=["use","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=et(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=x(x({},e),Ke(d)),n(3,r=ie(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class XR extends Je{constructor(e){super();Ye(this,e,KR,zR,Ge,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function QR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=_e("span"),a&&a.c(),this.h()},l(u){e=ve(u,"SPAN",{});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){ce(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[7](null),r=!1,ze(s)}}}function YR(t,e,n){const i=["use","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=et(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=x(x({},e),Ke(d)),n(3,r=ie(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class JR extends Je{constructor(e){super();Ye(this,e,YR,QR,Ge,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function ZR(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=vn("svg"),a&&a.c(),this.h()},l(u){e=Rn(u,"svg",{});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){$a(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),$a(e,c=Ae(l,[h&8&&u[3]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[7](null),r=!1,ze(s)}}}function $R(t,e,n){const i=["use","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=et(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=x(x({},e),Ke(d)),n(3,r=ie(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class cy extends Je{constructor(e){super();Ye(this,e,$R,ZR,Ge,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function eL(t){let e,n,i,r,s;const o=t[6].default,a=we(o,t,t[5],null);let l=[t[3]],c={};for(let u=0;u<l.length;u+=1)c=x(c,l[u]);return{c(){e=_e("ul"),a&&a.c(),this.h()},l(u){e=ve(u,"UL",{});var h=re(e);a&&a.l(h),h.forEach(M),this.h()},h(){ce(e,c)},m(u,h){$(u,e,h),a&&a.m(e,null),t[7](e),i=!0,r||(s=[oe(n=dt.call(null,e,t[0])),oe(t[2].call(null,e))],r=!0)},p(u,[h]){a&&a.p&&(!i||h&32)&&Ce(a,o,u,u[5],i?Te(o,u[5],h,null):Se(u[5]),null),ce(e,c=Ae(l,[h&8&&u[3]])),n&&We(n.update)&&h&1&&n.update.call(null,u[0])},i(u){i||(P(a,u),i=!0)},o(u){F(a,u),i=!1},d(u){u&&M(e),a&&a.d(u),t[7](null),r=!1,ze(s)}}}function tL(t,e,n){const i=["use","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e;const l=et(Ue());let c;function u(){return c}function h(d){ue[d?"unshift":"push"](()=>{c=d,n(1,c)})}return t.$$set=d=>{e=x(x({},e),Ke(d)),n(3,r=ie(e,i)),"use"in d&&n(0,a=d.use),"$$scope"in d&&n(5,o=d.$$scope)},[a,c,l,r,u,o,s,h]}class nL extends Je{constructor(e){super();Ye(this,e,tL,eL,Ge,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const uy=CR,iL=kR,Ci=ly,rL=NR,sL=FR,oL=jR,aL=GR,lL=XR,Ur=JR,cL=nL;function hy(t){let e;return{c(){e=_e("div"),this.h()},l(n){e=ve(n,"DIV",{class:!0}),re(e).forEach(M),this.h()},h(){ee(e,"class","mdc-button__touch")},m(n,i){$(n,e,i)},d(n){n&&M(e)}}}function uL(t){let e,n,i,r;const s=t[26].default,o=we(s,t,t[28],null);let a=t[6]&&hy();return{c(){e=_e("div"),n=Xe(),o&&o.c(),a&&a.c(),i=vt(),this.h()},l(l){e=ve(l,"DIV",{class:!0}),re(e).forEach(M),n=Qe(l),o&&o.l(l),a&&a.l(l),i=vt(),this.h()},h(){ee(e,"class","mdc-button__ripple")},m(l,c){$(l,e,c),$(l,n,c),o&&o.m(l,c),a&&a.m(l,c),$(l,i,c),r=!0},p(l,c){o&&o.p&&(!r||c&268435456)&&Ce(o,s,l,l[28],r?Te(s,l[28],c,null):Se(l[28]),null),l[6]?a||(a=hy(),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i(l){r||(P(o,l),r=!0)},o(l){F(o,l),r=!1},d(l){l&&M(e),l&&M(n),o&&o.d(l),a&&a.d(l),l&&M(i)}}}function hL(t){let e,n,i;const r=[{use:[[xr,{ripple:t[3],unbounded:!1,color:t[4],disabled:!!t[22].disabled,addClass:t[18],removeClass:t[19],addStyle:t[20]}],t[16],...t[0]]},{class:ge(at({[t[1]]:!0,"mdc-button":!0,"mdc-button--raised":t[5]==="raised","mdc-button--unelevated":t[5]==="unelevated","mdc-button--outlined":t[5]==="outlined","smui-button--color-secondary":t[4]==="secondary","mdc-button--touch":t[6],"mdc-card__action":t[17]==="card:action","mdc-card__action--button":t[17]==="card:action","mdc-dialog__button":t[17]==="dialog:action","mdc-top-app-bar__navigation-icon":t[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":t[17]==="top-app-bar:action","mdc-snackbar__action":t[17]==="snackbar:actions","mdc-banner__secondary-action":t[17]==="banner"&&t[8],"mdc-banner__primary-action":t[17]==="banner"&&!t[8],"mdc-tooltip__action":t[17]==="tooltip:rich-actions"},t[11]))},{style:Object.entries(t[12]).map(dy).concat([t[2]]).join(" ")},t[15],t[14],t[13],{href:t[7]},t[22]];var s=t[9];function o(a){let l={$$slots:{default:[uL]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=x(l,r[c]);return{props:l}}return s&&(e=new s(o(t)),t[27](e),e.$on("click",t[21])),{c(){e&&He(e.$$.fragment),n=vt()},l(a){e&&nt(e.$$.fragment,a),n=vt()},m(a,l){e&&Ve(e,a,l),$(a,n,l),i=!0},p(a,[l]){const c=l&6289919?Ae(r,[l&6094873&&{use:[[xr,{ripple:a[3],unbounded:!1,color:a[4],disabled:!!a[22].disabled,addClass:a[18],removeClass:a[19],addStyle:a[20]}],a[16],...a[0]]},l&133490&&{class:ge(at({[a[1]]:!0,"mdc-button":!0,"mdc-button--raised":a[5]==="raised","mdc-button--unelevated":a[5]==="unelevated","mdc-button--outlined":a[5]==="outlined","smui-button--color-secondary":a[4]==="secondary","mdc-button--touch":a[6],"mdc-card__action":a[17]==="card:action","mdc-card__action--button":a[17]==="card:action","mdc-dialog__button":a[17]==="dialog:action","mdc-top-app-bar__navigation-icon":a[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":a[17]==="top-app-bar:action","mdc-snackbar__action":a[17]==="snackbar:actions","mdc-banner__secondary-action":a[17]==="banner"&&a[8],"mdc-banner__primary-action":a[17]==="banner"&&!a[8],"mdc-tooltip__action":a[17]==="tooltip:rich-actions"},a[11]))},l&4100&&{style:Object.entries(a[12]).map(dy).concat([a[2]]).join(" ")},l&32768&&ht(a[15]),l&16384&&ht(a[14]),l&8192&&ht(a[13]),l&128&&{href:a[7]},l&4194304&&ht(a[22])]):{};if(l&268435520&&(c.$$scope={dirty:l,ctx:a}),s!==(s=a[9])){if(e){xt();const u=e;F(u.$$.fragment,1,0,()=>{Be(u,1)}),Ut()}s?(e=new s(o(a)),a[27](e),e.$on("click",a[21]),He(e.$$.fragment),P(e.$$.fragment,1),Ve(e,n.parentNode,n)):e=null}else s&&e.$set(c)},i(a){i||(e&&P(e.$$.fragment,a),i=!0)},o(a){e&&F(e.$$.fragment,a),i=!1},d(a){t[27](null),a&&M(n),e&&Be(e,a)}}}const dy=([t,e])=>`${t}: ${e};`;function dL(t,e,n){let i,r,s;const o=["use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","getElement"];let a=ie(e,o),{$$slots:l={},$$scope:c}=e;const u=et(Ue());let{use:h=[]}=e,{class:d=""}=e,{style:f=""}=e,{ripple:p=!0}=e,{color:g="primary"}=e,{variant:m="text"}=e,{touch:v=!1}=e,{href:w=void 0}=e,{action:b="close"}=e,{defaultAction:y=!1}=e,{secondary:O=!1}=e,C,_={},I={},K=un("SMUI:button:context"),{component:L=w==null?iL:uy}=e;qt("SMUI:label:context","button"),qt("SMUI:icon:context","button");function k(A){_[A]||n(11,_[A]=!0,_)}function N(A){(!(A in _)||_[A])&&n(11,_[A]=!1,_)}function E(A,S){I[A]!=S&&(S===""||S==null?(delete I[A],n(12,I)):n(12,I[A]=S,I))}function D(){K==="banner"&&st(J(),O?"SMUIBannerButton:secondaryActionClick":"SMUIBannerButton:primaryActionClick")}function J(){return C.getElement()}function X(A){ue[A?"unshift":"push"](()=>{C=A,n(10,C)})}return t.$$set=A=>{n(29,e=x(x({},e),Ke(A))),n(22,a=ie(e,o)),"use"in A&&n(0,h=A.use),"class"in A&&n(1,d=A.class),"style"in A&&n(2,f=A.style),"ripple"in A&&n(3,p=A.ripple),"color"in A&&n(4,g=A.color),"variant"in A&&n(5,m=A.variant),"touch"in A&&n(6,v=A.touch),"href"in A&&n(7,w=A.href),"action"in A&&n(23,b=A.action),"defaultAction"in A&&n(24,y=A.defaultAction),"secondary"in A&&n(8,O=A.secondary),"component"in A&&n(9,L=A.component),"$$scope"in A&&n(28,c=A.$$scope)},t.$$.update=()=>{n(15,i=K==="dialog:action"&&b!=null?{"data-mdc-dialog-action":b}:{action:e.action}),n(14,r=K==="dialog:action"&&y?{"data-mdc-dialog-button-default":""}:{default:e.default}),n(13,s=K==="banner"?{}:{secondary:e.secondary})},e=Ke(e),[h,d,f,p,g,m,v,w,O,L,C,_,I,s,r,i,u,K,k,N,E,D,a,b,y,J,l,X,c]}class KB extends Je{constructor(e){super();Ye(this,e,dL,hL,Ge,{use:0,class:1,style:2,ripple:3,color:4,variant:5,touch:6,href:7,action:23,defaultAction:24,secondary:8,component:9,getElement:25})}get getElement(){return this.$$.ctx[25]}}function fL(t){let e;const n=t[9].default,i=we(n,t,t[11],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&2048)&&Ce(i,n,r,r[11],e?Te(n,r[11],s,null):Se(r[11]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function pL(t){let e,n,i;const r=[{use:[t[5],...t[0]]},{class:ge({[t[1]]:!0,"mdc-button__icon":t[6]==="button","mdc-fab__icon":t[6]==="fab","mdc-icon-button__icon":t[6]==="icon-button","mdc-icon-button__icon--on":t[6]==="icon-button"&&t[2],"mdc-tab__icon":t[6]==="tab","mdc-banner__icon":t[6]==="banner","mdc-segmented-button__icon":t[6]==="segmented-button"})},{"aria-hidden":"true"},t[3]===cy?{focusable:"false",tabindex:"-1"}:{},t[7]];var s=t[3];function o(a){let l={$$slots:{default:[fL]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=x(l,r[c]);return{props:l}}return s&&(e=new s(o(t)),t[10](e)),{c(){e&&He(e.$$.fragment),n=vt()},l(a){e&&nt(e.$$.fragment,a),n=vt()},m(a,l){e&&Ve(e,a,l),$(a,n,l),i=!0},p(a,[l]){const c=l&239?Ae(r,[l&33&&{use:[a[5],...a[0]]},l&70&&{class:ge({[a[1]]:!0,"mdc-button__icon":a[6]==="button","mdc-fab__icon":a[6]==="fab","mdc-icon-button__icon":a[6]==="icon-button","mdc-icon-button__icon--on":a[6]==="icon-button"&&a[2],"mdc-tab__icon":a[6]==="tab","mdc-banner__icon":a[6]==="banner","mdc-segmented-button__icon":a[6]==="segmented-button"})},r[2],l&8&&ht(a[3]===cy?{focusable:"false",tabindex:"-1"}:{}),l&128&&ht(a[7])]):{};if(l&2048&&(c.$$scope={dirty:l,ctx:a}),s!==(s=a[3])){if(e){xt();const u=e;F(u.$$.fragment,1,0,()=>{Be(u,1)}),Ut()}s?(e=new s(o(a)),a[10](e),He(e.$$.fragment),P(e.$$.fragment,1),Ve(e,n.parentNode,n)):e=null}else s&&e.$set(c)},i(a){i||(e&&P(e.$$.fragment,a),i=!0)},o(a){e&&F(e.$$.fragment,a),i=!1},d(a){t[10](null),a&&M(n),e&&Be(e,a)}}}function mL(t,e,n){const i=["use","class","on","component","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e;const a=et(Ue());let{use:l=[]}=e,{class:c=""}=e,{on:u=!1}=e,h,{component:d=HR}=e;const f=un("SMUI:icon:context");function p(){return h.getElement()}function g(m){ue[m?"unshift":"push"](()=>{h=m,n(4,h)})}return t.$$set=m=>{e=x(x({},e),Ke(m)),n(7,r=ie(e,i)),"use"in m&&n(0,l=m.use),"class"in m&&n(1,c=m.class),"on"in m&&n(2,u=m.on),"component"in m&&n(3,d=m.component),"$$scope"in m&&n(11,o=m.$$scope)},[l,c,u,d,h,a,f,r,p,s,g,o]}class gL extends Je{constructor(e){super();Ye(this,e,mL,pL,Ge,{use:0,class:1,on:2,component:3,getElement:8})}get getElement(){return this.$$.ctx[8]}}function _L(t){let e;const n=t[4].default,i=we(n,t,t[3],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,[s]){i&&i.p&&(!e||s&8)&&Ce(i,n,r,r[3],e?Te(n,r[3],s,null):Se(r[3]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function vL(t,e,n){let i,{$$slots:r={},$$scope:s}=e,{key:o}=e,{value:a}=e;const l=Qp(a);return Qw(t,l,c=>n(5,i=c)),qt(o,l),pr(()=>{l.set(void 0)}),t.$$set=c=>{"key"in c&&n(1,o=c.key),"value"in c&&n(2,a=c.value),"$$scope"in c&&n(3,s=c.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&Jw(l,i=a,i)},[l,o,a,s,r]}class Sc extends Je{constructor(e){super();Ye(this,e,vL,_L,Ge,{key:1,value:2})}}const XB=gL;/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var yL={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var bL=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.shakeAnimationEndHandler=function(){i.handleShakeAnimationEnd()},i}return Object.defineProperty(e,"cssClasses",{get:function(){return yL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.getWidth=function(){return this.adapter.getWidth()},e.prototype.shake=function(n){var i=e.cssClasses.LABEL_SHAKE;n?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.float=function(n){var i=e.cssClasses,r=i.LABEL_FLOAT_ABOVE,s=i.LABEL_SHAKE;n?this.adapter.addClass(r):(this.adapter.removeClass(r),this.adapter.removeClass(s))},e.prototype.setRequired=function(n){var i=e.cssClasses.LABEL_REQUIRED;n?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.handleShakeAnimationEnd=function(){var n=e.cssClasses.LABEL_SHAKE;this.adapter.removeClass(n)},e}(Yn);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var jr={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var EL=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.transitionEndHandler=function(r){i.handleTransitionEnd(r)},i}return Object.defineProperty(e,"cssClasses",{get:function(){return jr},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},e.prototype.activate=function(){this.adapter.removeClass(jr.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(jr.LINE_RIPPLE_ACTIVE)},e.prototype.setRippleCenter=function(n){this.adapter.setStyle("transform-origin",n+"px center")},e.prototype.deactivate=function(){this.adapter.addClass(jr.LINE_RIPPLE_DEACTIVATING)},e.prototype.handleTransitionEnd=function(n){var i=this.adapter.hasClass(jr.LINE_RIPPLE_DEACTIVATING);n.propertyName==="opacity"&&i&&(this.adapter.removeClass(jr.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(jr.LINE_RIPPLE_DEACTIVATING))},e}(Yn);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var IL={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},fy={NOTCH_ELEMENT_PADDING:8},wL={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var TL=function(t){wn(e,t);function e(n){return t.call(this,bt(bt({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"strings",{get:function(){return IL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return wL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return fy},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),e.prototype.notch=function(n){var i=e.cssClasses.OUTLINE_NOTCHED;n>0&&(n+=fy.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(n),this.adapter.addClass(i)},e.prototype.closeNotch=function(){var n=e.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(n),this.adapter.removeNotchWidthProperty()},e}(Yn);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Gd={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},CL={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon",WITH_INTERNAL_COUNTER:"mdc-text-field--with-internal-counter"},py={LABEL_SCALE:.75},SL=["pattern","min","max","required","step","minlength","maxlength"],AL=["color","date","datetime-local","month","range","time","week"];/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var my=["mousedown","touchstart"],gy=["click","keydown"],kL=function(t){wn(e,t);function e(n,i){i===void 0&&(i={});var r=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return r.isFocused=!1,r.receivedUserInput=!1,r.valid=!0,r.useNativeValidation=!0,r.validateOnValueChange=!0,r.helperText=i.helperText,r.characterCounter=i.characterCounter,r.leadingIcon=i.leadingIcon,r.trailingIcon=i.trailingIcon,r.inputFocusHandler=function(){r.activateFocus()},r.inputBlurHandler=function(){r.deactivateFocus()},r.inputInputHandler=function(){r.handleInput()},r.setPointerXOffset=function(s){r.setTransformOrigin(s)},r.textFieldInteractionHandler=function(){r.handleTextFieldInteraction()},r.validationAttributeChangeHandler=function(s){r.handleValidationAttributeChange(s)},r}return Object.defineProperty(e,"cssClasses",{get:function(){return CL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Gd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return py},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldAlwaysFloat",{get:function(){var n=this.getNativeInput().type;return AL.indexOf(n)>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat||this.isFocused||!!this.getValue()||this.isBadInput()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldShake",{get:function(){return!this.isFocused&&!this.isValid()&&!!this.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver(function(){})},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n,i,r,s;this.adapter.hasLabel()&&this.getNativeInput().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler);try{for(var o=qn(my),a=o.next();!a.done;a=o.next()){var l=a.value;this.adapter.registerInputInteractionHandler(l,this.setPointerXOffset)}}catch(h){n={error:h}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}try{for(var c=qn(gy),u=c.next();!u.done;u=c.next()){var l=u.value;this.adapter.registerTextFieldInteractionHandler(l,this.textFieldInteractionHandler)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(r)throw r.error}}this.validationObserver=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler),this.setcharacterCounter(this.getValue().length)},e.prototype.destroy=function(){var n,i,r,s;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler);try{for(var o=qn(my),a=o.next();!a.done;a=o.next()){var l=a.value;this.adapter.deregisterInputInteractionHandler(l,this.setPointerXOffset)}}catch(h){n={error:h}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}try{for(var c=qn(gy),u=c.next();!u.done;u=c.next()){var l=u.value;this.adapter.deregisterTextFieldInteractionHandler(l,this.textFieldInteractionHandler)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(r)throw r.error}}this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver)},e.prototype.handleTextFieldInteraction=function(){var n=this.adapter.getNativeInput();n&&n.disabled||(this.receivedUserInput=!0)},e.prototype.handleValidationAttributeChange=function(n){var i=this;n.some(function(r){return SL.indexOf(r)>-1?(i.styleValidity(!0),i.adapter.setLabelRequired(i.getNativeInput().required),!0):!1}),n.indexOf("maxlength")>-1&&this.setcharacterCounter(this.getValue().length)},e.prototype.notchOutline=function(n){if(!(!this.adapter.hasOutline()||!this.adapter.hasLabel()))if(n){var i=this.adapter.getLabelWidth()*py.LABEL_SCALE;this.adapter.notchOutline(i)}else this.adapter.closeOutline()},e.prototype.activateFocus=function(){this.isFocused=!0,this.styleFocused(this.isFocused),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.helperText&&(this.helperText.isPersistent()||!this.helperText.isValidation()||!this.valid)&&this.helperText.showToScreenReader()},e.prototype.setTransformOrigin=function(n){if(!(this.isDisabled()||this.adapter.hasOutline())){var i=n.touches,r=i?i[0]:n,s=r.target.getBoundingClientRect(),o=r.clientX-s.left;this.adapter.setLineRippleTransformOrigin(o)}},e.prototype.handleInput=function(){this.autoCompleteFocus(),this.setcharacterCounter(this.getValue().length)},e.prototype.autoCompleteFocus=function(){this.receivedUserInput||this.activateFocus()},e.prototype.deactivateFocus=function(){this.isFocused=!1,this.adapter.deactivateLineRipple();var n=this.isValid();this.styleValidity(n),this.styleFocused(this.isFocused),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput=!1)},e.prototype.getValue=function(){return this.getNativeInput().value},e.prototype.setValue=function(n){if(this.getValue()!==n&&(this.getNativeInput().value=n),this.setcharacterCounter(n.length),this.validateOnValueChange){var i=this.isValid();this.styleValidity(i)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.validateOnValueChange&&this.adapter.shakeLabel(this.shouldShake))},e.prototype.isValid=function(){return this.useNativeValidation?this.isNativeInputValid():this.valid},e.prototype.setValid=function(n){this.valid=n,this.styleValidity(n);var i=!n&&!this.isFocused&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(i)},e.prototype.setValidateOnValueChange=function(n){this.validateOnValueChange=n},e.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange},e.prototype.setUseNativeValidation=function(n){this.useNativeValidation=n},e.prototype.isDisabled=function(){return this.getNativeInput().disabled},e.prototype.setDisabled=function(n){this.getNativeInput().disabled=n,this.styleDisabled(n)},e.prototype.setHelperTextContent=function(n){this.helperText&&this.helperText.setContent(n)},e.prototype.setLeadingIconAriaLabel=function(n){this.leadingIcon&&this.leadingIcon.setAriaLabel(n)},e.prototype.setLeadingIconContent=function(n){this.leadingIcon&&this.leadingIcon.setContent(n)},e.prototype.setTrailingIconAriaLabel=function(n){this.trailingIcon&&this.trailingIcon.setAriaLabel(n)},e.prototype.setTrailingIconContent=function(n){this.trailingIcon&&this.trailingIcon.setContent(n)},e.prototype.setcharacterCounter=function(n){if(!!this.characterCounter){var i=this.getNativeInput().maxLength;if(i===-1)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter.setCounterValue(n,i)}},e.prototype.isBadInput=function(){return this.getNativeInput().validity.badInput||!1},e.prototype.isNativeInputValid=function(){return this.getNativeInput().validity.valid},e.prototype.styleValidity=function(n){var i=e.cssClasses.INVALID;if(n?this.adapter.removeClass(i):this.adapter.addClass(i),this.helperText){this.helperText.setValidity(n);var r=this.helperText.isValidation();if(!r)return;var s=this.helperText.isVisible(),o=this.helperText.getId();s&&o?this.adapter.setInputAttr(Gd.ARIA_DESCRIBEDBY,o):this.adapter.removeInputAttr(Gd.ARIA_DESCRIBEDBY)}},e.prototype.styleFocused=function(n){var i=e.cssClasses.FOCUSED;n?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.styleDisabled=function(n){var i=e.cssClasses,r=i.DISABLED,s=i.INVALID;n?(this.adapter.addClass(r),this.adapter.removeClass(s)):this.adapter.removeClass(r),this.leadingIcon&&this.leadingIcon.setDisabled(n),this.trailingIcon&&this.trailingIcon.setDisabled(n)},e.prototype.styleFloating=function(n){var i=e.cssClasses.LABEL_FLOATING;n?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.getNativeInput=function(){var n=this.adapter?this.adapter.getNativeInput():null;return n||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},e}(Yn);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ui={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg",ROOT:"mdc-text-field-helper-text"},Si={ARIA_HIDDEN:"aria-hidden",ROLE:"role",ROOT_SELECTOR:"."+ui.ROOT};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var OL=function(t){wn(e,t);function e(n){return t.call(this,bt(bt({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return ui},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Si},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),e.prototype.getId=function(){return this.adapter.getAttr("id")},e.prototype.isVisible=function(){return this.adapter.getAttr(Si.ARIA_HIDDEN)!=="true"},e.prototype.setContent=function(n){this.adapter.setContent(n)},e.prototype.isPersistent=function(){return this.adapter.hasClass(ui.HELPER_TEXT_PERSISTENT)},e.prototype.setPersistent=function(n){n?this.adapter.addClass(ui.HELPER_TEXT_PERSISTENT):this.adapter.removeClass(ui.HELPER_TEXT_PERSISTENT)},e.prototype.isValidation=function(){return this.adapter.hasClass(ui.HELPER_TEXT_VALIDATION_MSG)},e.prototype.setValidation=function(n){n?this.adapter.addClass(ui.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(ui.HELPER_TEXT_VALIDATION_MSG)},e.prototype.showToScreenReader=function(){this.adapter.removeAttr(Si.ARIA_HIDDEN)},e.prototype.setValidity=function(n){var i=this.adapter.hasClass(ui.HELPER_TEXT_PERSISTENT),r=this.adapter.hasClass(ui.HELPER_TEXT_VALIDATION_MSG),s=r&&!n;s?(this.showToScreenReader(),this.adapter.getAttr(Si.ROLE)==="alert"?this.refreshAlertRole():this.adapter.setAttr(Si.ROLE,"alert")):this.adapter.removeAttr(Si.ROLE),!i&&!s&&this.hide()},e.prototype.hide=function(){this.adapter.setAttr(Si.ARIA_HIDDEN,"true")},e.prototype.refreshAlertRole=function(){var n=this;this.adapter.removeAttr(Si.ROLE),requestAnimationFrame(function(){n.adapter.setAttr(Si.ROLE,"alert")})},e}(Yn);function RL(t){let e;return{c(){e=Xn(t[8])},l(n){e=ri(n,t[8])},m(n,i){$(n,e,i)},p(n,i){i&256&&ls(e,n[8])},i:Ht,o:Ht,d(n){n&&M(e)}}}function LL(t){let e;const n=t[13].default,i=we(n,t,t[12],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&4096)&&Ce(i,n,r,r[12],e?Te(n,r[12],s,null):Se(r[12]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function ML(t){let e,n,i,r,s,o,a,l,c;const u=[LL,RL],h=[];function d(g,m){return g[8]==null?0:1}n=d(t),i=h[n]=u[n](t);let f=[{class:r=ge(at({[t[1]]:!0,"mdc-text-field-helper-text":!0,"mdc-text-field-helper-text--persistent":t[3],"mdc-text-field-helper-text--validation-msg":t[4]},t[6]))},{"aria-hidden":s=t[3]?void 0:"true"},{id:t[2]},t[7],t[10]],p={};for(let g=0;g<f.length;g+=1)p=x(p,f[g]);return{c(){e=_e("div"),i.c(),this.h()},l(g){e=ve(g,"DIV",{class:!0,"aria-hidden":!0,id:!0});var m=re(e);i.l(m),m.forEach(M),this.h()},h(){ce(e,p)},m(g,m){$(g,e,m),h[n].m(e,null),t[14](e),a=!0,l||(c=[oe(o=dt.call(null,e,t[0])),oe(t[9].call(null,e))],l=!0)},p(g,[m]){let v=n;n=d(g),n===v?h[n].p(g,m):(xt(),F(h[v],1,1,()=>{h[v]=null}),Ut(),i=h[n],i?i.p(g,m):(i=h[n]=u[n](g),i.c()),P(i,1),i.m(e,null)),ce(e,p=Ae(f,[(!a||m&90&&r!==(r=ge(at({[g[1]]:!0,"mdc-text-field-helper-text":!0,"mdc-text-field-helper-text--persistent":g[3],"mdc-text-field-helper-text--validation-msg":g[4]},g[6]))))&&{class:r},(!a||m&8&&s!==(s=g[3]?void 0:"true"))&&{"aria-hidden":s},(!a||m&4)&&{id:g[2]},m&128&&g[7],m&1024&&g[10]])),o&&We(o.update)&&m&1&&o.update.call(null,g[0])},i(g){a||(P(i),a=!0)},o(g){F(i),a=!1},d(g){g&&M(e),h[n].d(),t[14](null),l=!1,ze(c)}}}let NL=0;function PL(t,e,n){const i=["use","class","id","persistent","validationMsg","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e;const a=et(Ue());let{use:l=[]}=e,{class:c=""}=e,{id:u="SMUI-textfield-helper-text-"+NL++}=e,{persistent:h=!1}=e,{validationMsg:d=!1}=e,f,p,g={},m={},v;Ln(()=>(p=new OL({addClass:b,removeClass:y,hasClass:w,getAttr:O,setAttr:C,removeAttr:_,setContent:L=>{n(8,v=L)}}),u.startsWith("SMUI-textfield-helper-text-")&&st(I(),"SMUITextfieldHelperText:id",u),st(I(),"SMUITextfieldHelperText:mount",p),p.init(),()=>{st(I(),"SMUITextfieldHelperText:unmount",p),p.destroy()}));function w(L){return L in g?g[L]:I().classList.contains(L)}function b(L){g[L]||n(6,g[L]=!0,g)}function y(L){(!(L in g)||g[L])&&n(6,g[L]=!1,g)}function O(L){var k;return L in m?(k=m[L])!==null&&k!==void 0?k:null:I().getAttribute(L)}function C(L,k){m[L]!==k&&n(7,m[L]=k,m)}function _(L){(!(L in m)||m[L]!=null)&&n(7,m[L]=void 0,m)}function I(){return f}function K(L){ue[L?"unshift":"push"](()=>{f=L,n(5,f)})}return t.$$set=L=>{e=x(x({},e),Ke(L)),n(10,r=ie(e,i)),"use"in L&&n(0,l=L.use),"class"in L&&n(1,c=L.class),"id"in L&&n(2,u=L.id),"persistent"in L&&n(3,h=L.persistent),"validationMsg"in L&&n(4,d=L.validationMsg),"$$scope"in L&&n(12,o=L.$$scope)},[l,c,u,h,d,f,g,m,v,a,r,I,o,s,K]}class QB extends Je{constructor(e){super();Ye(this,e,PL,ML,Ge,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}function DL(t){let e,n,i,r,s,o,a,l;const c=t[22].default,u=we(c,t,t[21],null);let h=[{class:n=ge(at({[t[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":t[0],"mdc-floating-label--required":t[1]},t[8]))},{style:i=Object.entries(t[9]).map(vy).concat([t[4]]).join(" ")},{for:r=t[5]||(t[11]?t[11].id:void 0)},t[12]],d={};for(let f=0;f<h.length;f+=1)d=x(d,h[f]);return{c(){e=_e("label"),u&&u.c(),this.h()},l(f){e=ve(f,"LABEL",{class:!0,style:!0,for:!0});var p=re(e);u&&u.l(p),p.forEach(M),this.h()},h(){ce(e,d)},m(f,p){$(f,e,p),u&&u.m(e,null),t[24](e),o=!0,a||(l=[oe(s=dt.call(null,e,t[2])),oe(t[10].call(null,e))],a=!0)},p(f,p){u&&u.p&&(!o||p&2097152)&&Ce(u,c,f,f[21],o?Te(c,f[21],p,null):Se(f[21]),null),ce(e,d=Ae(h,[(!o||p&267&&n!==(n=ge(at({[f[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":f[0],"mdc-floating-label--required":f[1]},f[8]))))&&{class:n},(!o||p&528&&i!==(i=Object.entries(f[9]).map(vy).concat([f[4]]).join(" ")))&&{style:i},(!o||p&32&&r!==(r=f[5]||(f[11]?f[11].id:void 0)))&&{for:r},p&4096&&f[12]])),s&&We(s.update)&&p&4&&s.update.call(null,f[2])},i(f){o||(P(u,f),o=!0)},o(f){F(u,f),o=!1},d(f){f&&M(e),u&&u.d(f),t[24](null),a=!1,ze(l)}}}function FL(t){let e,n,i,r,s,o,a;const l=t[22].default,c=we(l,t,t[21],null);let u=[{class:n=ge(at({[t[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":t[0],"mdc-floating-label--required":t[1]},t[8]))},{style:i=Object.entries(t[9]).map(_y).concat([t[4]]).join(" ")},t[12]],h={};for(let d=0;d<u.length;d+=1)h=x(h,u[d]);return{c(){e=_e("span"),c&&c.c(),this.h()},l(d){e=ve(d,"SPAN",{class:!0,style:!0});var f=re(e);c&&c.l(f),f.forEach(M),this.h()},h(){ce(e,h)},m(d,f){$(d,e,f),c&&c.m(e,null),t[23](e),s=!0,o||(a=[oe(r=dt.call(null,e,t[2])),oe(t[10].call(null,e))],o=!0)},p(d,f){c&&c.p&&(!s||f&2097152)&&Ce(c,l,d,d[21],s?Te(l,d[21],f,null):Se(d[21]),null),ce(e,h=Ae(u,[(!s||f&267&&n!==(n=ge(at({[d[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":d[0],"mdc-floating-label--required":d[1]},d[8]))))&&{class:n},(!s||f&528&&i!==(i=Object.entries(d[9]).map(_y).concat([d[4]]).join(" ")))&&{style:i},f&4096&&d[12]])),r&&We(r.update)&&f&4&&r.update.call(null,d[2])},i(d){s||(P(c,d),s=!0)},o(d){F(c,d),s=!1},d(d){d&&M(e),c&&c.d(d),t[23](null),o=!1,ze(a)}}}function xL(t){let e,n,i,r;const s=[FL,DL],o=[];function a(l,c){return l[6]?0:1}return e=a(t),n=o[e]=s[e](t),{c(){n.c(),i=vt()},l(l){n.l(l),i=vt()},m(l,c){o[e].m(l,c),$(l,i,c),r=!0},p(l,[c]){let u=e;e=a(l),e===u?o[e].p(l,c):(xt(),F(o[u],1,1,()=>{o[u]=null}),Ut(),n=o[e],n?n.p(l,c):(n=o[e]=s[e](l),n.c()),P(n,1),n.m(i.parentNode,i))},i(l){r||(P(n),r=!0)},o(l){F(n),r=!1},d(l){o[e].d(l),l&&M(i)}}}const _y=([t,e])=>`${t}: ${e};`,vy=([t,e])=>`${t}: ${e};`;function UL(t,e,n){const i=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e;var a;const l=et(Ue());let{use:c=[]}=e,{class:u=""}=e,{style:h=""}=e,{for:d=void 0}=e,{floatAbove:f=!1}=e,{required:p=!1}=e,{wrapped:g=!1}=e,m,v,w={},b={},y=(a=un("SMUI:generic:input:props"))!==null&&a!==void 0?a:{},O=f,C=p;Ln(()=>{n(18,v=new bL({addClass:_,removeClass:I,getWidth:()=>{var R,j;const Q=J(),he=Q.cloneNode(!0);(R=Q.parentNode)===null||R===void 0||R.appendChild(he),he.classList.add("smui-floating-label--remove-transition"),he.classList.add("smui-floating-label--force-size"),he.classList.remove("mdc-floating-label--float-above");const W=he.scrollWidth;return(j=Q.parentNode)===null||j===void 0||j.removeChild(he),W},registerInteractionHandler:(R,j)=>J().addEventListener(R,j),deregisterInteractionHandler:(R,j)=>J().removeEventListener(R,j)}));const S={get element(){return J()},addStyle:K,removeStyle:L};return st(m,"SMUIFloatingLabel:mount",S),v.init(),()=>{st(m,"SMUIFloatingLabel:unmount",S),v.destroy()}});function _(S){w[S]||n(8,w[S]=!0,w)}function I(S){(!(S in w)||w[S])&&n(8,w[S]=!1,w)}function K(S,R){b[S]!=R&&(R===""||R==null?(delete b[S],n(9,b)):n(9,b[S]=R,b))}function L(S){S in b&&(delete b[S],n(9,b))}function k(S){v.shake(S)}function N(S){n(0,f=S)}function E(S){n(1,p=S)}function D(){return v.getWidth()}function J(){return m}function X(S){ue[S?"unshift":"push"](()=>{m=S,n(7,m)})}function A(S){ue[S?"unshift":"push"](()=>{m=S,n(7,m)})}return t.$$set=S=>{e=x(x({},e),Ke(S)),n(12,r=ie(e,i)),"use"in S&&n(2,c=S.use),"class"in S&&n(3,u=S.class),"style"in S&&n(4,h=S.style),"for"in S&&n(5,d=S.for),"floatAbove"in S&&n(0,f=S.floatAbove),"required"in S&&n(1,p=S.required),"wrapped"in S&&n(6,g=S.wrapped),"$$scope"in S&&n(21,o=S.$$scope)},t.$$.update=()=>{t.$$.dirty&786433&&v&&O!==f&&(n(19,O=f),v.float(f)),t.$$.dirty&1310722&&v&&C!==p&&(n(20,C=p),v.setRequired(p))},[f,p,c,u,h,d,g,m,w,b,l,y,r,k,N,E,D,J,v,O,C,o,s,X,A]}class yy extends Je{constructor(e){super();Ye(this,e,UL,xL,Ge,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function jL(t){let e,n,i,r,s,o,a=[{class:n=ge(at({[t[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":t[3]},t[5]))},{style:i=Object.entries(t[6]).map(by).concat([t[2]]).join(" ")},t[8]],l={};for(let c=0;c<a.length;c+=1)l=x(l,a[c]);return{c(){e=_e("div"),this.h()},l(c){e=ve(c,"DIV",{class:!0,style:!0}),re(e).forEach(M),this.h()},h(){ce(e,l)},m(c,u){$(c,e,u),t[13](e),s||(o=[oe(r=dt.call(null,e,t[0])),oe(t[7].call(null,e))],s=!0)},p(c,[u]){ce(e,l=Ae(a,[u&42&&n!==(n=ge(at({[c[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":c[3]},c[5])))&&{class:n},u&68&&i!==(i=Object.entries(c[6]).map(by).concat([c[2]]).join(" "))&&{style:i},u&256&&c[8]])),r&&We(r.update)&&u&1&&r.update.call(null,c[0])},i:Ht,o:Ht,d(c){c&&M(e),t[13](null),s=!1,ze(o)}}}const by=([t,e])=>`${t}: ${e};`;function VL(t,e,n){const i=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let r=ie(e,i);const s=et(Ue());let{use:o=[]}=e,{class:a=""}=e,{style:l=""}=e,{active:c=!1}=e,u,h,d={},f={};Ln(()=>(h=new EL({addClass:g,removeClass:m,hasClass:p,setStyle:v,registerEventHandler:(_,I)=>O().addEventListener(_,I),deregisterEventHandler:(_,I)=>O().removeEventListener(_,I)}),h.init(),()=>{h.destroy()}));function p(_){return _ in d?d[_]:O().classList.contains(_)}function g(_){d[_]||n(5,d[_]=!0,d)}function m(_){(!(_ in d)||d[_])&&n(5,d[_]=!1,d)}function v(_,I){f[_]!=I&&(I===""||I==null?(delete f[_],n(6,f)):n(6,f[_]=I,f))}function w(){h.activate()}function b(){h.deactivate()}function y(_){h.setRippleCenter(_)}function O(){return u}function C(_){ue[_?"unshift":"push"](()=>{u=_,n(4,u)})}return t.$$set=_=>{e=x(x({},e),Ke(_)),n(8,r=ie(e,i)),"use"in _&&n(0,o=_.use),"class"in _&&n(1,a=_.class),"style"in _&&n(2,l=_.style),"active"in _&&n(3,c=_.active)},[o,a,l,c,u,d,f,s,r,w,b,y,O,C]}class BL extends Je{constructor(e){super();Ye(this,e,VL,jL,Ge,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function Ey(t){let e,n,i;const r=t[14].default,s=we(r,t,t[13],null);return{c(){e=_e("div"),s&&s.c(),this.h()},l(o){e=ve(o,"DIV",{class:!0,style:!0});var a=re(e);s&&s.l(a),a.forEach(M),this.h()},h(){ee(e,"class","mdc-notched-outline__notch"),ee(e,"style",n=Object.entries(t[7]).map(Iy).join(" "))},m(o,a){$(o,e,a),s&&s.m(e,null),i=!0},p(o,a){s&&s.p&&(!i||a&8192)&&Ce(s,r,o,o[13],i?Te(r,o[13],a,null):Se(o[13]),null),(!i||a&128&&n!==(n=Object.entries(o[7]).map(Iy).join(" ")))&&ee(e,"style",n)},i(o){i||(P(s,o),i=!0)},o(o){F(s,o),i=!1},d(o){o&&M(e),s&&s.d(o)}}}function HL(t){let e,n,i,r,s,o,a,l,c,u,h=!t[3]&&Ey(t),d=[{class:o=ge(at({[t[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":t[2],"mdc-notched-outline--no-label":t[3]},t[6]))},t[9]],f={};for(let p=0;p<d.length;p+=1)f=x(f,d[p]);return{c(){e=_e("div"),n=_e("div"),i=Xe(),h&&h.c(),r=Xe(),s=_e("div"),this.h()},l(p){e=ve(p,"DIV",{class:!0});var g=re(e);n=ve(g,"DIV",{class:!0}),re(n).forEach(M),i=Qe(g),h&&h.l(g),r=Qe(g),s=ve(g,"DIV",{class:!0}),re(s).forEach(M),g.forEach(M),this.h()},h(){ee(n,"class","mdc-notched-outline__leading"),ee(s,"class","mdc-notched-outline__trailing"),ce(e,f)},m(p,g){$(p,e,g),me(e,n),me(e,i),h&&h.m(e,null),me(e,r),me(e,s),t[15](e),l=!0,c||(u=[oe(a=dt.call(null,e,t[0])),oe(t[8].call(null,e)),$e(e,"SMUIFloatingLabel:mount",t[16]),$e(e,"SMUIFloatingLabel:unmount",t[17])],c=!0)},p(p,[g]){p[3]?h&&(xt(),F(h,1,1,()=>{h=null}),Ut()):h?(h.p(p,g),g&8&&P(h,1)):(h=Ey(p),h.c(),P(h,1),h.m(e,r)),ce(e,f=Ae(d,[(!l||g&78&&o!==(o=ge(at({[p[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":p[2],"mdc-notched-outline--no-label":p[3]},p[6]))))&&{class:o},g&512&&p[9]])),a&&We(a.update)&&g&1&&a.update.call(null,p[0])},i(p){l||(P(h),l=!0)},o(p){F(h),l=!1},d(p){p&&M(e),h&&h.d(),t[15](null),c=!1,ze(u)}}}const Iy=([t,e])=>`${t}: ${e};`;function qL(t,e,n){const i=["use","class","notched","noLabel","notch","closeNotch","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e;const a=et(Ue());let{use:l=[]}=e,{class:c=""}=e,{notched:u=!1}=e,{noLabel:h=!1}=e,d,f,p,g={},m={};Ln(()=>(f=new TL({addClass:v,removeClass:w,setNotchWidthProperty:k=>b("width",k+"px"),removeNotchWidthProperty:()=>y("width")}),f.init(),()=>{f.destroy()}));function v(k){g[k]||n(6,g[k]=!0,g)}function w(k){(!(k in g)||g[k])&&n(6,g[k]=!1,g)}function b(k,N){m[k]!=N&&(N===""||N==null?(delete m[k],n(7,m)):n(7,m[k]=N,m))}function y(k){k in m&&(delete m[k],n(7,m))}function O(k){f.notch(k)}function C(){f.closeNotch()}function _(){return d}function I(k){ue[k?"unshift":"push"](()=>{d=k,n(5,d)})}const K=k=>n(4,p=k.detail),L=()=>n(4,p=void 0);return t.$$set=k=>{e=x(x({},e),Ke(k)),n(9,r=ie(e,i)),"use"in k&&n(0,l=k.use),"class"in k&&n(1,c=k.class),"notched"in k&&n(2,u=k.notched),"noLabel"in k&&n(3,h=k.noLabel),"$$scope"in k&&n(13,o=k.$$scope)},t.$$.update=()=>{t.$$.dirty&16&&(p?(p.addStyle("transition-duration","0s"),v("mdc-notched-outline--upgraded"),requestAnimationFrame(()=>{p&&p.removeStyle("transition-duration")})):w("mdc-notched-outline--upgraded"))},[l,c,u,h,p,d,g,m,a,r,O,C,_,o,s,I,K,L]}class WL extends Je{constructor(e){super();Ye(this,e,qL,HL,Ge,{use:0,class:1,notched:2,noLabel:3,notch:10,closeNotch:11,getElement:12})}get notch(){return this.$$.ctx[10]}get closeNotch(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function GL(t){let e;const n=t[10].default,i=we(n,t,t[12],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&4096)&&Ce(i,n,r,r[12],e?Te(n,r[12],s,null):Se(r[12]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function zL(t){let e,n,i;const r=[{use:[t[7],...t[0]]},{class:ge(at({[t[1]]:!0,[t[5]]:!0},t[4]))},t[6],t[8]];var s=t[2];function o(a){let l={$$slots:{default:[GL]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=x(l,r[c]);return{props:l}}return s&&(e=new s(o(t)),t[11](e)),{c(){e&&He(e.$$.fragment),n=vt()},l(a){e&&nt(e.$$.fragment,a),n=vt()},m(a,l){e&&Ve(e,a,l),$(a,n,l),i=!0},p(a,[l]){const c=l&499?Ae(r,[l&129&&{use:[a[7],...a[0]]},l&50&&{class:ge(at({[a[1]]:!0,[a[5]]:!0},a[4]))},l&64&&ht(a[6]),l&256&&ht(a[8])]):{};if(l&4096&&(c.$$scope={dirty:l,ctx:a}),s!==(s=a[2])){if(e){xt();const u=e;F(u.$$.fragment,1,0,()=>{Be(u,1)}),Ut()}s?(e=new s(o(a)),a[11](e),He(e.$$.fragment),P(e.$$.fragment,1),Ve(e,n.parentNode,n)):e=null}else s&&e.$set(c)},i(a){i||(e&&P(e.$$.fragment,a),i=!0)},o(a){e&&F(e.$$.fragment,a),i=!1},d(a){t[11](null),a&&M(n),e&&Be(e,a)}}}const Zi={component:ly,class:"",classMap:{},contexts:{},props:{}};function KL(t,e,n){const i=["use","class","component","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e,{use:a=[]}=e,{class:l=""}=e,c;const u=Zi.class,h={},d=[],f=Zi.contexts,p=Zi.props;let{component:g=Zi.component}=e;Object.entries(Zi.classMap).forEach(([b,y])=>{const O=un(y);O&&"subscribe"in O&&d.push(O.subscribe(C=>{n(4,h[b]=C,h)}))});const m=et(Ue());for(let b in f)f.hasOwnProperty(b)&&qt(b,f[b]);pr(()=>{for(const b of d)b()});function v(){return c.getElement()}function w(b){ue[b?"unshift":"push"](()=>{c=b,n(3,c)})}return t.$$set=b=>{e=x(x({},e),Ke(b)),n(8,r=ie(e,i)),"use"in b&&n(0,a=b.use),"class"in b&&n(1,l=b.class),"component"in b&&n(2,g=b.component),"$$scope"in b&&n(12,o=b.$$scope)},[a,l,g,c,h,u,p,m,r,v,s,w,o]}class XL extends Je{constructor(e){super();Ye(this,e,KL,zL,Ge,{use:0,class:1,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const wy=Object.assign({},Zi);function Gt(t){return new Proxy(XL,{construct:function(e,n){return Object.assign(Zi,wy,t),new e(...n)},get:function(e,n){return Object.assign(Zi,wy,t),e[n]}})}var QL=Gt({class:"mdc-text-field-helper-line",component:Ci}),YL=Gt({class:"mdc-text-field__affix mdc-text-field__affix--prefix",component:Ur}),JL=Gt({class:"mdc-text-field__affix mdc-text-field__affix--suffix",component:Ur});function ZL(t){let e,n,i,r,s,o=[{class:n=ge({[t[1]]:!0,"mdc-text-field__input":!0})},{type:t[2]},{placeholder:t[3]},t[4],t[6],t[10]],a={};for(let l=0;l<o.length;l+=1)a=x(a,o[l]);return{c(){e=_e("input"),this.h()},l(l){e=ve(l,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){ce(e,a)},m(l,c){$(l,e,c),e.autofocus&&e.focus(),t[26](e),r||(s=[oe(i=dt.call(null,e,t[0])),oe(t[7].call(null,e)),$e(e,"input",t[27]),$e(e,"change",t[9]),$e(e,"blur",t[24]),$e(e,"focus",t[25])],r=!0)},p(l,[c]){ce(e,a=Ae(o,[c&2&&n!==(n=ge({[l[1]]:!0,"mdc-text-field__input":!0}))&&{class:n},c&4&&{type:l[2]},c&8&&{placeholder:l[3]},c&16&&l[4],c&64&&l[6],c&1024&&l[10]])),i&&We(i.update)&&c&1&&i.update.call(null,l[0])},i:Ht,o:Ht,d(l){l&&M(e),t[26](null),r=!1,ze(s)}}}function $L(t){if(t===""){const e=new Number(Number.NaN);return e.length=0,e}return+t}function eM(t,e,n){const i=["use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","emptyValueNull","emptyValueUndefined","getAttr","addAttr","removeAttr","focus","blur","getElement"];let r=ie(e,i);const s=et(Ue());let o=()=>{};function a(R){return R===o}let{use:l=[]}=e,{class:c=""}=e,{type:u="text"}=e,{placeholder:h=" "}=e,{value:d=o}=e;const f=a(d);f&&(d="");let{files:p=null}=e,{dirty:g=!1}=e,{invalid:m=!1}=e,{updateInvalid:v=!0}=e,{emptyValueNull:w=d===null}=e;f&&w&&(d=null);let{emptyValueUndefined:b=d===void 0}=e;f&&b&&(d=void 0);let y,O={},C={};Ln(()=>{v&&n(14,m=y.matches(":invalid"))});function _(R){if(u==="file"){n(12,p=R.currentTarget.files);return}if(R.currentTarget.value===""&&w){n(11,d=null);return}if(R.currentTarget.value===""&&b){n(11,d=void 0);return}switch(u){case"number":case"range":n(11,d=$L(R.currentTarget.value));break;default:n(11,d=R.currentTarget.value);break}}function I(R){(u==="file"||u==="range")&&_(R),n(13,g=!0),v&&n(14,m=y.matches(":invalid"))}function K(R){var j;return R in O?(j=O[R])!==null&&j!==void 0?j:null:D().getAttribute(R)}function L(R,j){O[R]!==j&&n(6,O[R]=j,O)}function k(R){(!(R in O)||O[R]!=null)&&n(6,O[R]=void 0,O)}function N(){D().focus()}function E(){D().blur()}function D(){return y}function J(R){mo.call(this,t,R)}function X(R){mo.call(this,t,R)}function A(R){ue[R?"unshift":"push"](()=>{y=R,n(5,y)})}const S=R=>u!=="file"&&_(R);return t.$$set=R=>{e=x(x({},e),Ke(R)),n(10,r=ie(e,i)),"use"in R&&n(0,l=R.use),"class"in R&&n(1,c=R.class),"type"in R&&n(2,u=R.type),"placeholder"in R&&n(3,h=R.placeholder),"value"in R&&n(11,d=R.value),"files"in R&&n(12,p=R.files),"dirty"in R&&n(13,g=R.dirty),"invalid"in R&&n(14,m=R.invalid),"updateInvalid"in R&&n(15,v=R.updateInvalid),"emptyValueNull"in R&&n(16,w=R.emptyValueNull),"emptyValueUndefined"in R&&n(17,b=R.emptyValueUndefined)},t.$$.update=()=>{t.$$.dirty&2068&&(u==="file"?(delete C.value,n(4,C),n(2,u),n(11,d)):n(4,C.value=d==null?"":d,C))},[l,c,u,h,C,y,O,s,_,I,r,d,p,g,m,v,w,b,K,L,k,N,E,D,J,X,A,S]}class tM extends Je{constructor(e){super();Ye(this,e,eM,ZL,Ge,{use:0,class:1,type:2,placeholder:3,value:11,files:12,dirty:13,invalid:14,updateInvalid:15,emptyValueNull:16,emptyValueUndefined:17,getAttr:18,addAttr:19,removeAttr:20,focus:21,blur:22,getElement:23})}get getAttr(){return this.$$.ctx[18]}get addAttr(){return this.$$.ctx[19]}get removeAttr(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}get blur(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}function nM(t){let e,n,i,r,s,o,a=[{class:n=ge({[t[2]]:!0,"mdc-text-field__input":!0})},{style:i=`${t[4]?"":"resize: none; "}${t[3]}`},t[6],t[9]],l={};for(let c=0;c<a.length;c+=1)l=x(l,a[c]);return{c(){e=_e("textarea"),this.h()},l(c){e=ve(c,"TEXTAREA",{class:!0,style:!0}),re(e).forEach(M),this.h()},h(){ce(e,l)},m(c,u){$(c,e,u),e.autofocus&&e.focus(),t[21](e),Gp(e,t[0]),s||(o=[oe(r=dt.call(null,e,t[1])),oe(t[7].call(null,e)),$e(e,"change",t[8]),$e(e,"blur",t[19]),$e(e,"focus",t[20]),$e(e,"input",t[22])],s=!0)},p(c,[u]){ce(e,l=Ae(a,[u&4&&n!==(n=ge({[c[2]]:!0,"mdc-text-field__input":!0}))&&{class:n},u&24&&i!==(i=`${c[4]?"":"resize: none; "}${c[3]}`)&&{style:i},u&64&&c[6],u&512&&c[9]])),r&&We(r.update)&&u&2&&r.update.call(null,c[1]),u&1&&Gp(e,c[0])},i:Ht,o:Ht,d(c){c&&M(e),t[21](null),s=!1,ze(o)}}}function iM(t,e,n){const i=["use","class","style","value","dirty","invalid","updateInvalid","resizable","getAttr","addAttr","removeAttr","focus","blur","getElement"];let r=ie(e,i);const s=et(Ue());let{use:o=[]}=e,{class:a=""}=e,{style:l=""}=e,{value:c=""}=e,{dirty:u=!1}=e,{invalid:h=!1}=e,{updateInvalid:d=!0}=e,{resizable:f=!0}=e,p,g={};Ln(()=>{d&&n(11,h=p.matches(":invalid"))});function m(){n(10,u=!0),d&&n(11,h=p.matches(":invalid"))}function v(k){var N;return k in g?(N=g[k])!==null&&N!==void 0?N:null:C().getAttribute(k)}function w(k,N){g[k]!==N&&n(6,g[k]=N,g)}function b(k){(!(k in g)||g[k]!=null)&&n(6,g[k]=void 0,g)}function y(){C().focus()}function O(){C().blur()}function C(){return p}function _(k){mo.call(this,t,k)}function I(k){mo.call(this,t,k)}function K(k){ue[k?"unshift":"push"](()=>{p=k,n(5,p)})}function L(){c=this.value,n(0,c)}return t.$$set=k=>{e=x(x({},e),Ke(k)),n(9,r=ie(e,i)),"use"in k&&n(1,o=k.use),"class"in k&&n(2,a=k.class),"style"in k&&n(3,l=k.style),"value"in k&&n(0,c=k.value),"dirty"in k&&n(10,u=k.dirty),"invalid"in k&&n(11,h=k.invalid),"updateInvalid"in k&&n(12,d=k.updateInvalid),"resizable"in k&&n(4,f=k.resizable)},[c,o,a,l,f,p,g,s,m,r,u,h,d,v,w,b,y,O,C,_,I,K,L]}class rM extends Je{constructor(e){super();Ye(this,e,iM,nM,Ge,{use:1,class:2,style:3,value:0,dirty:10,invalid:11,updateInvalid:12,resizable:4,getAttr:13,addAttr:14,removeAttr:15,focus:16,blur:17,getElement:18})}get getAttr(){return this.$$.ctx[13]}get addAttr(){return this.$$.ctx[14]}get removeAttr(){return this.$$.ctx[15]}get focus(){return this.$$.ctx[16]}get blur(){return this.$$.ctx[17]}get getElement(){return this.$$.ctx[18]}}const sM=t=>({}),Ty=t=>({}),oM=t=>({}),Cy=t=>({}),aM=t=>({}),Sy=t=>({}),lM=t=>({}),Ay=t=>({}),cM=t=>({}),ky=t=>({}),uM=t=>({}),Oy=t=>({}),hM=t=>({}),Ry=t=>({}),dM=t=>({}),Ly=t=>({}),fM=t=>({}),My=t=>({}),pM=t=>({}),Ny=t=>({}),mM=t=>({}),Py=t=>({}),gM=t=>({}),Dy=t=>({});function _M(t){let e,n,i,r,s,o,a,l,c,u,h,d,f,p;const g=t[51].label,m=we(g,t,t[90],ky);i=new Sc({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[yM]},$$scope:{ctx:t}}});const v=t[51].default,w=we(v,t,t[90],null);o=new Sc({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[bM]},$$scope:{ctx:t}}});const b=t[51].ripple,y=we(b,t,t[90],Cy);let O=[{class:l=ge(at({[t[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":t[12],"mdc-text-field--textarea":t[14],"mdc-text-field--filled":t[15]==="filled","mdc-text-field--outlined":t[15]==="outlined","smui-text-field--standard":t[15]==="standard"&&!t[14],"mdc-text-field--no-label":t[16]||!t[42].label,"mdc-text-field--with-leading-icon":t[42].leadingIcon,"mdc-text-field--with-trailing-icon":t[42].trailingIcon,"mdc-text-field--invalid":t[1]},t[25]))},{style:c=Object.entries(t[26]).map(zy).concat([t[10]]).join(" ")},Yi(t[41],["input$","label$","ripple$","outline$","helperLine$"])],C={};for(let _=0;_<O.length;_+=1)C=x(C,O[_]);return{c(){e=_e("div"),m&&m.c(),n=Xe(),He(i.$$.fragment),r=Xe(),w&&w.c(),s=Xe(),He(o.$$.fragment),a=Xe(),y&&y.c(),this.h()},l(_){e=ve(_,"DIV",{class:!0,style:!0});var I=re(e);m&&m.l(I),n=Qe(I),nt(i.$$.fragment,I),r=Qe(I),w&&w.l(I),s=Qe(I),nt(o.$$.fragment,I),a=Qe(I),y&&y.l(I),I.forEach(M),this.h()},h(){ce(e,C)},m(_,I){$(_,e,I),m&&m.m(e,null),me(e,n),Ve(i,e,null),me(e,r),w&&w.m(e,null),me(e,s),Ve(o,e,null),me(e,a),y&&y.m(e,null),t[80](e),d=!0,f||(p=[oe(u=xr.call(null,e,{ripple:t[11],unbounded:!1,addClass:t[38],removeClass:t[39],addStyle:t[40]})),oe(h=dt.call(null,e,t[8])),oe(t[34].call(null,e)),$e(e,"SMUITextfieldLeadingIcon:mount",t[81]),$e(e,"SMUITextfieldLeadingIcon:unmount",t[82]),$e(e,"SMUITextfieldTrailingIcon:mount",t[83]),$e(e,"SMUITextfieldTrailingIcon:unmount",t[84])],f=!0)},p(_,I){m&&m.p&&(!d||I[2]&268435456)&&Ce(m,g,_,_[90],d?Te(g,_[90],I,cM):Se(_[90]),ky);const K={};I[2]&268435456&&(K.$$scope={dirty:I,ctx:_}),i.$set(K),w&&w.p&&(!d||I[2]&268435456)&&Ce(w,v,_,_[90],d?Te(v,_[90],I,null):Se(_[90]),null);const L={};I[2]&268435456&&(L.$$scope={dirty:I,ctx:_}),o.$set(L),y&&y.p&&(!d||I[2]&268435456)&&Ce(y,b,_,_[90],d?Te(b,_[90],I,oM):Se(_[90]),Cy),ce(e,C=Ae(O,[(!d||I[0]&33673730|I[1]&2048&&l!==(l=ge(at({[_[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":_[12],"mdc-text-field--textarea":_[14],"mdc-text-field--filled":_[15]==="filled","mdc-text-field--outlined":_[15]==="outlined","smui-text-field--standard":_[15]==="standard"&&!_[14],"mdc-text-field--no-label":_[16]||!_[42].label,"mdc-text-field--with-leading-icon":_[42].leadingIcon,"mdc-text-field--with-trailing-icon":_[42].trailingIcon,"mdc-text-field--invalid":_[1]},_[25]))))&&{class:l},(!d||I[0]&67109888&&c!==(c=Object.entries(_[26]).map(zy).concat([_[10]]).join(" ")))&&{style:c},I[1]&1024&&Yi(_[41],["input$","label$","ripple$","outline$","helperLine$"])])),u&&We(u.update)&&I[0]&2048&&u.update.call(null,{ripple:_[11],unbounded:!1,addClass:_[38],removeClass:_[39],addStyle:_[40]}),h&&We(h.update)&&I[0]&256&&h.update.call(null,_[8])},i(_){d||(P(m,_),P(i.$$.fragment,_),P(w,_),P(o.$$.fragment,_),P(y,_),d=!0)},o(_){F(m,_),F(i.$$.fragment,_),F(w,_),F(o.$$.fragment,_),F(y,_),d=!1},d(_){_&&M(e),m&&m.d(_),Be(i),w&&w.d(_),Be(o),y&&y.d(_),t[80](null),f=!1,ze(p)}}}function vM(t){let e,n,i,r,s,o,a,l,c,u,h,d,f,p,g,m,v,w,b=!t[14]&&t[15]!=="outlined"&&Fy(t),y=(t[14]||t[15]==="outlined")&&jy(t);r=new Sc({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[TM]},$$scope:{ctx:t}}});const O=t[51].default,C=we(O,t,t[90],null),_=[SM,CM],I=[];function K(E,D){return E[14]&&typeof E[0]=="string"?0:1}a=K(t),l=I[a]=_[a](t),u=new Sc({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[OM]},$$scope:{ctx:t}}});let L=!t[14]&&t[15]!=="outlined"&&t[11]&&qy(t),k=[{class:d=ge(at({[t[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":t[12],"mdc-text-field--textarea":t[14],"mdc-text-field--filled":t[15]==="filled","mdc-text-field--outlined":t[15]==="outlined","smui-text-field--standard":t[15]==="standard"&&!t[14],"mdc-text-field--no-label":t[16]||t[17]==null&&!t[42].label,"mdc-text-field--label-floating":t[28]||t[0]!=null&&t[0]!=="","mdc-text-field--with-leading-icon":t[35](t[22])?t[42].leadingIcon:t[22],"mdc-text-field--with-trailing-icon":t[35](t[23])?t[42].trailingIcon:t[23],"mdc-text-field--with-internal-counter":t[14]&&t[42].internalCounter,"mdc-text-field--invalid":t[1]},t[25]))},{style:f=Object.entries(t[26]).map(Gy).concat([t[10]]).join(" ")},{for:void 0},Yi(t[41],["input$","label$","ripple$","outline$","helperLine$"])],N={};for(let E=0;E<k.length;E+=1)N=x(N,k[E]);return{c(){e=_e("label"),b&&b.c(),n=Xe(),y&&y.c(),i=Xe(),He(r.$$.fragment),s=Xe(),C&&C.c(),o=Xe(),l.c(),c=Xe(),He(u.$$.fragment),h=Xe(),L&&L.c(),this.h()},l(E){e=ve(E,"LABEL",{class:!0,style:!0,for:!0});var D=re(e);b&&b.l(D),n=Qe(D),y&&y.l(D),i=Qe(D),nt(r.$$.fragment,D),s=Qe(D),C&&C.l(D),o=Qe(D),l.l(D),c=Qe(D),nt(u.$$.fragment,D),h=Qe(D),L&&L.l(D),D.forEach(M),this.h()},h(){ce(e,N)},m(E,D){$(E,e,D),b&&b.m(e,null),me(e,n),y&&y.m(e,null),me(e,i),Ve(r,e,null),me(e,s),C&&C.m(e,null),me(e,o),I[a].m(e,null),me(e,c),Ve(u,e,null),me(e,h),L&&L.m(e,null),t[73](e),m=!0,v||(w=[oe(p=xr.call(null,e,{ripple:!t[14]&&t[15]==="filled",unbounded:!1,addClass:t[38],removeClass:t[39],addStyle:t[40],eventTarget:t[33],activeTarget:t[33],initPromise:t[37]})),oe(g=dt.call(null,e,t[8])),oe(t[34].call(null,e)),$e(e,"SMUITextfieldLeadingIcon:mount",t[74]),$e(e,"SMUITextfieldLeadingIcon:unmount",t[75]),$e(e,"SMUITextfieldTrailingIcon:mount",t[76]),$e(e,"SMUITextfieldTrailingIcon:unmount",t[77]),$e(e,"SMUITextfieldCharacterCounter:mount",t[78]),$e(e,"SMUITextfieldCharacterCounter:unmount",t[79])],v=!0)},p(E,D){!E[14]&&E[15]!=="outlined"?b?(b.p(E,D),D[0]&49152&&P(b,1)):(b=Fy(E),b.c(),P(b,1),b.m(e,n)):b&&(xt(),F(b,1,1,()=>{b=null}),Ut()),E[14]||E[15]==="outlined"?y?(y.p(E,D),D[0]&49152&&P(y,1)):(y=jy(E),y.c(),P(y,1),y.m(e,i)):y&&(xt(),F(y,1,1,()=>{y=null}),Ut());const J={};D[2]&268435456&&(J.$$scope={dirty:D,ctx:E}),r.$set(J),C&&C.p&&(!m||D[2]&268435456)&&Ce(C,O,E,E[90],m?Te(O,E[90],D,null):Se(E[90]),null);let X=a;a=K(E),a===X?I[a].p(E,D):(xt(),F(I[X],1,1,()=>{I[X]=null}),Ut(),l=I[a],l?l.p(E,D):(l=I[a]=_[a](E),l.c()),P(l,1),l.m(e,c));const A={};D[2]&268435456&&(A.$$scope={dirty:D,ctx:E}),u.$set(A),!E[14]&&E[15]!=="outlined"&&E[11]?L?(L.p(E,D),D[0]&51200&&P(L,1)):(L=qy(E),L.c(),P(L,1),L.m(e,null)):L&&(xt(),F(L,1,1,()=>{L=null}),Ut()),ce(e,N=Ae(k,[(!m||D[0]&314823171|D[1]&2048&&d!==(d=ge(at({[E[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":E[12],"mdc-text-field--textarea":E[14],"mdc-text-field--filled":E[15]==="filled","mdc-text-field--outlined":E[15]==="outlined","smui-text-field--standard":E[15]==="standard"&&!E[14],"mdc-text-field--no-label":E[16]||E[17]==null&&!E[42].label,"mdc-text-field--label-floating":E[28]||E[0]!=null&&E[0]!=="","mdc-text-field--with-leading-icon":E[35](E[22])?E[42].leadingIcon:E[22],"mdc-text-field--with-trailing-icon":E[35](E[23])?E[42].trailingIcon:E[23],"mdc-text-field--with-internal-counter":E[14]&&E[42].internalCounter,"mdc-text-field--invalid":E[1]},E[25]))))&&{class:d},(!m||D[0]&67109888&&f!==(f=Object.entries(E[26]).map(Gy).concat([E[10]]).join(" ")))&&{style:f},{for:void 0},D[1]&1024&&Yi(E[41],["input$","label$","ripple$","outline$","helperLine$"])])),p&&We(p.update)&&D[0]&49152|D[1]&4&&p.update.call(null,{ripple:!E[14]&&E[15]==="filled",unbounded:!1,addClass:E[38],removeClass:E[39],addStyle:E[40],eventTarget:E[33],activeTarget:E[33],initPromise:E[37]}),g&&We(g.update)&&D[0]&256&&g.update.call(null,E[8])},i(E){m||(P(b),P(y),P(r.$$.fragment,E),P(C,E),P(l),P(u.$$.fragment,E),P(L),m=!0)},o(E){F(b),F(y),F(r.$$.fragment,E),F(C,E),F(l),F(u.$$.fragment,E),F(L),m=!1},d(E){E&&M(e),b&&b.d(),y&&y.d(),Be(r),C&&C.d(E),I[a].d(),Be(u),L&&L.d(),t[73](null),v=!1,ze(w)}}}function yM(t){let e;const n=t[51].leadingIcon,i=we(n,t,t[90],Ay);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[2]&268435456)&&Ce(i,n,r,r[90],e?Te(n,r[90],s,lM):Se(r[90]),Ay)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function bM(t){let e;const n=t[51].trailingIcon,i=we(n,t,t[90],Sy);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[2]&268435456)&&Ce(i,n,r,r[90],e?Te(n,r[90],s,aM):Se(r[90]),Sy)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function Fy(t){let e,n,i,r=t[15]==="filled"&&xy(),s=!t[16]&&(t[17]!=null||t[42].label)&&Uy(t);return{c(){r&&r.c(),e=Xe(),s&&s.c(),n=vt()},l(o){r&&r.l(o),e=Qe(o),s&&s.l(o),n=vt()},m(o,a){r&&r.m(o,a),$(o,e,a),s&&s.m(o,a),$(o,n,a),i=!0},p(o,a){o[15]==="filled"?r||(r=xy(),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),!o[16]&&(o[17]!=null||o[42].label)?s?(s.p(o,a),a[0]&196608|a[1]&2048&&P(s,1)):(s=Uy(o),s.c(),P(s,1),s.m(n.parentNode,n)):s&&(xt(),F(s,1,1,()=>{s=null}),Ut())},i(o){i||(P(s),i=!0)},o(o){F(s),i=!1},d(o){r&&r.d(o),o&&M(e),s&&s.d(o),o&&M(n)}}}function xy(t){let e;return{c(){e=_e("span"),this.h()},l(n){e=ve(n,"SPAN",{class:!0}),re(e).forEach(M),this.h()},h(){ee(e,"class","mdc-text-field__ripple")},m(n,i){$(n,e,i)},d(n){n&&M(e)}}}function Uy(t){let e,n;const i=[{floatAbove:t[28]||t[0]!=null&&t[0]!==""},{required:t[13]},{wrapped:!0},kt(t[41],"label$")];let r={$$slots:{default:[EM]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)r=x(r,i[s]);return e=new yy({props:r}),t[52](e),{c(){He(e.$$.fragment)},l(s){nt(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[0]&268443649|o[1]&1024?Ae(i,[o[0]&268435457&&{floatAbove:s[28]||s[0]!=null&&s[0]!==""},o[0]&8192&&{required:s[13]},i[2],o[1]&1024&&ht(kt(s[41],"label$"))]):{};o[0]&131072|o[2]&268435456&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){t[52](null),Be(e,s)}}}function EM(t){let e=(t[17]==null?"":t[17])+"",n,i;const r=t[51].label,s=we(r,t,t[90],Dy);return{c(){n=Xn(e),s&&s.c()},l(o){n=ri(o,e),s&&s.l(o)},m(o,a){$(o,n,a),s&&s.m(o,a),i=!0},p(o,a){(!i||a[0]&131072)&&e!==(e=(o[17]==null?"":o[17])+"")&&ls(n,e),s&&s.p&&(!i||a[2]&268435456)&&Ce(s,r,o,o[90],i?Te(r,o[90],a,gM):Se(o[90]),Dy)},i(o){i||(P(s,o),i=!0)},o(o){F(s,o),i=!1},d(o){o&&M(n),s&&s.d(o)}}}function jy(t){let e,n;const i=[{noLabel:t[16]||t[17]==null&&!t[42].label},kt(t[41],"outline$")];let r={$$slots:{default:[wM]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)r=x(r,i[s]);return e=new WL({props:r}),t[54](e),{c(){He(e.$$.fragment)},l(s){nt(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[0]&196608|o[1]&3072?Ae(i,[o[0]&196608|o[1]&2048&&{noLabel:s[16]||s[17]==null&&!s[42].label},o[1]&1024&&ht(kt(s[41],"outline$"))]):{};o[0]&268640289|o[1]&3072|o[2]&268435456&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){t[54](null),Be(e,s)}}}function Vy(t){let e,n;const i=[{floatAbove:t[28]||t[0]!=null&&t[0]!==""},{required:t[13]},{wrapped:!0},kt(t[41],"label$")];let r={$$slots:{default:[IM]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)r=x(r,i[s]);return e=new yy({props:r}),t[53](e),{c(){He(e.$$.fragment)},l(s){nt(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[0]&268443649|o[1]&1024?Ae(i,[o[0]&268435457&&{floatAbove:s[28]||s[0]!=null&&s[0]!==""},o[0]&8192&&{required:s[13]},i[2],o[1]&1024&&ht(kt(s[41],"label$"))]):{};o[0]&131072|o[2]&268435456&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){t[53](null),Be(e,s)}}}function IM(t){let e=(t[17]==null?"":t[17])+"",n,i;const r=t[51].label,s=we(r,t,t[90],Py);return{c(){n=Xn(e),s&&s.c()},l(o){n=ri(o,e),s&&s.l(o)},m(o,a){$(o,n,a),s&&s.m(o,a),i=!0},p(o,a){(!i||a[0]&131072)&&e!==(e=(o[17]==null?"":o[17])+"")&&ls(n,e),s&&s.p&&(!i||a[2]&268435456)&&Ce(s,r,o,o[90],i?Te(r,o[90],a,mM):Se(o[90]),Py)},i(o){i||(P(s,o),i=!0)},o(o){F(s,o),i=!1},d(o){o&&M(n),s&&s.d(o)}}}function wM(t){let e,n,i=!t[16]&&(t[17]!=null||t[42].label)&&Vy(t);return{c(){i&&i.c(),e=vt()},l(r){i&&i.l(r),e=vt()},m(r,s){i&&i.m(r,s),$(r,e,s),n=!0},p(r,s){!r[16]&&(r[17]!=null||r[42].label)?i?(i.p(r,s),s[0]&196608|s[1]&2048&&P(i,1)):(i=Vy(r),i.c(),P(i,1),i.m(e.parentNode,e)):i&&(xt(),F(i,1,1,()=>{i=null}),Ut())},i(r){n||(P(i),n=!0)},o(r){F(i),n=!1},d(r){i&&i.d(r),r&&M(e)}}}function TM(t){let e;const n=t[51].leadingIcon,i=we(n,t,t[90],Ny);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[2]&268435456)&&Ce(i,n,r,r[90],e?Te(n,r[90],s,pM):Se(r[90]),Ny)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function CM(t){let e,n,i,r,s,o,a,l,c,u;const h=t[51].prefix,d=we(h,t,t[90],Ly);let f=t[20]!=null&&By(t);const p=[{type:t[18]},{disabled:t[12]},{required:t[13]},{updateInvalid:t[19]},{"aria-controls":t[27]},{"aria-describedby":t[27]},t[16]&&t[17]!=null?{placeholder:t[17]}:{},kt(t[41],"input$")];function g(_){t[64](_)}function m(_){t[65](_)}function v(_){t[66](_)}function w(_){t[67](_)}let b={};for(let _=0;_<p.length;_+=1)b=x(b,p[_]);t[0]!==void 0&&(b.value=t[0]),t[3]!==void 0&&(b.files=t[3]),t[4]!==void 0&&(b.dirty=t[4]),t[1]!==void 0&&(b.invalid=t[1]),i=new tM({props:b}),t[63](i),ue.push(()=>oi(i,"value",g)),ue.push(()=>oi(i,"files",m)),ue.push(()=>oi(i,"dirty",v)),ue.push(()=>oi(i,"invalid",w)),i.$on("blur",t[68]),i.$on("focus",t[69]),i.$on("blur",t[70]),i.$on("focus",t[71]);let y=t[21]!=null&&Hy(t);const O=t[51].suffix,C=we(O,t,t[90],Ry);return{c(){d&&d.c(),e=Xe(),f&&f.c(),n=Xe(),He(i.$$.fragment),l=Xe(),y&&y.c(),c=Xe(),C&&C.c()},l(_){d&&d.l(_),e=Qe(_),f&&f.l(_),n=Qe(_),nt(i.$$.fragment,_),l=Qe(_),y&&y.l(_),c=Qe(_),C&&C.l(_)},m(_,I){d&&d.m(_,I),$(_,e,I),f&&f.m(_,I),$(_,n,I),Ve(i,_,I),$(_,l,I),y&&y.m(_,I),$(_,c,I),C&&C.m(_,I),u=!0},p(_,I){d&&d.p&&(!u||I[2]&268435456)&&Ce(d,h,_,_[90],u?Te(h,_[90],I,dM):Se(_[90]),Ly),_[20]!=null?f?(f.p(_,I),I[0]&1048576&&P(f,1)):(f=By(_),f.c(),P(f,1),f.m(n.parentNode,n)):f&&(xt(),F(f,1,1,()=>{f=null}),Ut());const K=I[0]&135213056|I[1]&1024?Ae(p,[I[0]&262144&&{type:_[18]},I[0]&4096&&{disabled:_[12]},I[0]&8192&&{required:_[13]},I[0]&524288&&{updateInvalid:_[19]},I[0]&134217728&&{"aria-controls":_[27]},I[0]&134217728&&{"aria-describedby":_[27]},I[0]&196608&&ht(_[16]&&_[17]!=null?{placeholder:_[17]}:{}),I[1]&1024&&ht(kt(_[41],"input$"))]):{};!r&&I[0]&1&&(r=!0,K.value=_[0],si(()=>r=!1)),!s&&I[0]&8&&(s=!0,K.files=_[3],si(()=>s=!1)),!o&&I[0]&16&&(o=!0,K.dirty=_[4],si(()=>o=!1)),!a&&I[0]&2&&(a=!0,K.invalid=_[1],si(()=>a=!1)),i.$set(K),_[21]!=null?y?(y.p(_,I),I[0]&2097152&&P(y,1)):(y=Hy(_),y.c(),P(y,1),y.m(c.parentNode,c)):y&&(xt(),F(y,1,1,()=>{y=null}),Ut()),C&&C.p&&(!u||I[2]&268435456)&&Ce(C,O,_,_[90],u?Te(O,_[90],I,hM):Se(_[90]),Ry)},i(_){u||(P(d,_),P(f),P(i.$$.fragment,_),P(y),P(C,_),u=!0)},o(_){F(d,_),F(f),F(i.$$.fragment,_),F(y),F(C,_),u=!1},d(_){d&&d.d(_),_&&M(e),f&&f.d(_),_&&M(n),t[63](null),Be(i,_),_&&M(l),y&&y.d(_),_&&M(c),C&&C.d(_)}}}function SM(t){let e,n,i,r,s,o,a,l;const c=[{disabled:t[12]},{required:t[13]},{updateInvalid:t[19]},{"aria-controls":t[27]},{"aria-describedby":t[27]},kt(t[41],"input$")];function u(m){t[56](m)}function h(m){t[57](m)}function d(m){t[58](m)}let f={};for(let m=0;m<c.length;m+=1)f=x(f,c[m]);t[0]!==void 0&&(f.value=t[0]),t[4]!==void 0&&(f.dirty=t[4]),t[1]!==void 0&&(f.invalid=t[1]),n=new rM({props:f}),t[55](n),ue.push(()=>oi(n,"value",u)),ue.push(()=>oi(n,"dirty",h)),ue.push(()=>oi(n,"invalid",d)),n.$on("blur",t[59]),n.$on("focus",t[60]),n.$on("blur",t[61]),n.$on("focus",t[62]);const p=t[51].internalCounter,g=we(p,t,t[90],My);return{c(){e=_e("span"),He(n.$$.fragment),o=Xe(),g&&g.c(),this.h()},l(m){e=ve(m,"SPAN",{class:!0});var v=re(e);nt(n.$$.fragment,v),o=Qe(v),g&&g.l(v),v.forEach(M),this.h()},h(){ee(e,"class",a=ge({"mdc-text-field__resizer":!("input$resizable"in t[41])||t[41].input$resizable}))},m(m,v){$(m,e,v),Ve(n,e,null),me(e,o),g&&g.m(e,null),l=!0},p(m,v){const w=v[0]&134754304|v[1]&1024?Ae(c,[v[0]&4096&&{disabled:m[12]},v[0]&8192&&{required:m[13]},v[0]&524288&&{updateInvalid:m[19]},v[0]&134217728&&{"aria-controls":m[27]},v[0]&134217728&&{"aria-describedby":m[27]},v[1]&1024&&ht(kt(m[41],"input$"))]):{};!i&&v[0]&1&&(i=!0,w.value=m[0],si(()=>i=!1)),!r&&v[0]&16&&(r=!0,w.dirty=m[4],si(()=>r=!1)),!s&&v[0]&2&&(s=!0,w.invalid=m[1],si(()=>s=!1)),n.$set(w),g&&g.p&&(!l||v[2]&268435456)&&Ce(g,p,m,m[90],l?Te(p,m[90],v,fM):Se(m[90]),My),(!l||v[1]&1024&&a!==(a=ge({"mdc-text-field__resizer":!("input$resizable"in m[41])||m[41].input$resizable})))&&ee(e,"class",a)},i(m){l||(P(n.$$.fragment,m),P(g,m),l=!0)},o(m){F(n.$$.fragment,m),F(g,m),l=!1},d(m){m&&M(e),t[55](null),Be(n),g&&g.d(m)}}}function By(t){let e,n;return e=new YL({props:{$$slots:{default:[AM]},$$scope:{ctx:t}}}),{c(){He(e.$$.fragment)},l(i){nt(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[0]&1048576|r[2]&268435456&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){Be(e,i)}}}function AM(t){let e;return{c(){e=Xn(t[20])},l(n){e=ri(n,t[20])},m(n,i){$(n,e,i)},p(n,i){i[0]&1048576&&ls(e,n[20])},d(n){n&&M(e)}}}function Hy(t){let e,n;return e=new JL({props:{$$slots:{default:[kM]},$$scope:{ctx:t}}}),{c(){He(e.$$.fragment)},l(i){nt(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[0]&2097152|r[2]&268435456&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){Be(e,i)}}}function kM(t){let e;return{c(){e=Xn(t[21])},l(n){e=ri(n,t[21])},m(n,i){$(n,e,i)},p(n,i){i[0]&2097152&&ls(e,n[21])},d(n){n&&M(e)}}}function OM(t){let e;const n=t[51].trailingIcon,i=we(n,t,t[90],Oy);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[2]&268435456)&&Ce(i,n,r,r[90],e?Te(n,r[90],s,uM):Se(r[90]),Oy)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function qy(t){let e,n;const i=[kt(t[41],"ripple$")];let r={};for(let s=0;s<i.length;s+=1)r=x(r,i[s]);return e=new BL({props:r}),t[72](e),{c(){He(e.$$.fragment)},l(s){nt(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[1]&1024?Ae(i,[ht(kt(s[41],"ripple$"))]):{};e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){t[72](null),Be(e,s)}}}function Wy(t){let e,n;const i=[kt(t[41],"helperLine$")];let r={$$slots:{default:[RM]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)r=x(r,i[s]);return e=new QL({props:r}),e.$on("SMUITextfieldHelperText:id",t[85]),e.$on("SMUITextfieldHelperText:mount",t[86]),e.$on("SMUITextfieldHelperText:unmount",t[87]),e.$on("SMUITextfieldCharacterCounter:mount",t[88]),e.$on("SMUITextfieldCharacterCounter:unmount",t[89]),{c(){He(e.$$.fragment)},l(s){nt(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[1]&1024?Ae(i,[ht(kt(s[41],"helperLine$"))]):{};o[2]&268435456&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){Be(e,s)}}}function RM(t){let e;const n=t[51].helper,i=we(n,t,t[90],Ty);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[2]&268435456)&&Ce(i,n,r,r[90],e?Te(n,r[90],s,sM):Se(r[90]),Ty)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function LM(t){let e,n,i,r,s;const o=[vM,_M],a=[];function l(u,h){return u[36]?0:1}e=l(t),n=a[e]=o[e](t);let c=t[42].helper&&Wy(t);return{c(){n.c(),i=Xe(),c&&c.c(),r=vt()},l(u){n.l(u),i=Qe(u),c&&c.l(u),r=vt()},m(u,h){a[e].m(u,h),$(u,i,h),c&&c.m(u,h),$(u,r,h),s=!0},p(u,h){n.p(u,h),u[42].helper?c?(c.p(u,h),h[1]&2048&&P(c,1)):(c=Wy(u),c.c(),P(c,1),c.m(r.parentNode,r)):c&&(xt(),F(c,1,1,()=>{c=null}),Ut())},i(u){s||(P(n),P(c),s=!0)},o(u){F(n),F(c),s=!1},d(u){a[e].d(u),u&&M(i),c&&c.d(u),u&&M(r)}}}const Gy=([t,e])=>`${t}: ${e};`,zy=([t,e])=>`${t}: ${e};`;function MM(t,e,n){let i;const r=["use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","focus","blur","layout","getElement"];let s=ie(e,r),{$$slots:o={},$$scope:a}=e;const l=Yw(o),{applyPassive:c}=iy,u=et(Ue());let h=()=>{};function d(T){return T===h}let{use:f=[]}=e,{class:p=""}=e,{style:g=""}=e,{ripple:m=!0}=e,{disabled:v=!1}=e,{required:w=!1}=e,{textarea:b=!1}=e,{variant:y=b?"outlined":"standard"}=e,{noLabel:O=!1}=e,{label:C=void 0}=e,{type:_="text"}=e,{value:I=s.input$emptyValueUndefined?void 0:h}=e,{files:K=h}=e;const L=!d(I)||!d(K);d(I)&&(I=void 0),d(K)&&(K=null);let{invalid:k=h}=e,{updateInvalid:N=d(k)}=e;d(k)&&(k=!1);let{dirty:E=!1}=e,{prefix:D=void 0}=e,{suffix:J=void 0}=e,{validateOnValueChange:X=N}=e,{useNativeValidation:A=N}=e,{withLeadingIcon:S=h}=e,{withTrailingIcon:R=h}=e,{input:j=void 0}=e,{floatingLabel:Q=void 0}=e,{lineRipple:he=void 0}=e,{notchedOutline:W=void 0}=e,De,be,Ie={},Oe={},gt,G=!1,fe=un("SMUI:addLayoutListener"),Dt,Ot,q=new Promise(T=>Ot=T),pe,pt,Xt,On,ii=I;fe&&(Dt=fe($n)),Ln(()=>{if(n(49,be=new kL({addClass:hr,removeClass:as,hasClass:po,registerTextFieldInteractionHandler:(T,Ft)=>mi().addEventListener(T,Ft),deregisterTextFieldInteractionHandler:(T,Ft)=>mi().removeEventListener(T,Ft),registerValidationAttributeChangeHandler:T=>{const Ft=Su=>Su.map(Au=>Au.attributeName).filter(Au=>Au),Dp=new MutationObserver(Su=>{A&&T(Ft(Su))}),Ww={attributes:!0};return j&&Dp.observe(j.getElement(),Ww),Dp},deregisterValidationAttributeChangeHandler:T=>{T.disconnect()},getNativeInput:()=>{var T;return(T=j==null?void 0:j.getElement())!==null&&T!==void 0?T:null},setInputAttr:(T,Ft)=>{j==null||j.addAttr(T,Ft)},removeInputAttr:T=>{j==null||j.removeAttr(T)},isFocused:()=>document.activeElement===(j==null?void 0:j.getElement()),registerInputInteractionHandler:(T,Ft)=>{j==null||j.getElement().addEventListener(T,Ft,c())},deregisterInputInteractionHandler:(T,Ft)=>{j==null||j.getElement().removeEventListener(T,Ft,c())},floatLabel:T=>Q&&Q.float(T),getLabelWidth:()=>Q?Q.getWidth():0,hasLabel:()=>!!Q,shakeLabel:T=>Q&&Q.shake(T),setLabelRequired:T=>Q&&Q.setRequired(T),activateLineRipple:()=>he&&he.activate(),deactivateLineRipple:()=>he&&he.deactivate(),setLineRippleTransformOrigin:T=>he&&he.setRippleCenter(T),closeOutline:()=>W&&W.closeNotch(),hasOutline:()=>!!W,notchOutline:T=>W&&W.notch(T)},{get helperText(){return Xt},get characterCounter(){return On},get leadingIcon(){return pe},get trailingIcon(){return pt}})),L){if(j==null)throw new Error("SMUI Textfield initialized without Input component.");be.init()}else o1().then(()=>{if(j==null)throw new Error("SMUI Textfield initialized without Input component.");be.init()});return Ot(),()=>{be.destroy()}}),pr(()=>{Dt&&Dt()});function po(T){var Ft;return T in Ie?(Ft=Ie[T])!==null&&Ft!==void 0?Ft:null:mi().classList.contains(T)}function hr(T){Ie[T]||n(25,Ie[T]=!0,Ie)}function as(T){(!(T in Ie)||Ie[T])&&n(25,Ie[T]=!1,Ie)}function Kn(T,Ft){Oe[T]!=Ft&&(Ft===""||Ft==null?(delete Oe[T],n(26,Oe)):n(26,Oe[T]=Ft,Oe))}function V(){j==null||j.focus()}function ot(){j==null||j.blur()}function $n(){if(be){const T=be.shouldFloat;be.notchOutline(T)}}function mi(){return De}function dr(T){ue[T?"unshift":"push"](()=>{Q=T,n(5,Q)})}function H(T){ue[T?"unshift":"push"](()=>{Q=T,n(5,Q)})}function le(T){ue[T?"unshift":"push"](()=>{W=T,n(7,W)})}function se(T){ue[T?"unshift":"push"](()=>{j=T,n(2,j)})}function _t(T){I=T,n(0,I)}function fr(T){E=T,n(4,E)}function Cu(T){k=T,n(1,k),n(49,be),n(19,N)}const fw=()=>n(28,G=!1),pw=()=>n(28,G=!0),mw=T=>st(De,"blur",T),gw=T=>st(De,"focus",T);function _w(T){ue[T?"unshift":"push"](()=>{j=T,n(2,j)})}function vw(T){I=T,n(0,I)}function yw(T){K=T,n(3,K)}function bw(T){E=T,n(4,E)}function Ew(T){k=T,n(1,k),n(49,be),n(19,N)}const Iw=()=>n(28,G=!1),ww=()=>n(28,G=!0),Tw=T=>st(De,"blur",T),Cw=T=>st(De,"focus",T);function Sw(T){ue[T?"unshift":"push"](()=>{he=T,n(6,he)})}function Aw(T){ue[T?"unshift":"push"](()=>{De=T,n(24,De)})}const kw=T=>n(29,pe=T.detail),Ow=()=>n(29,pe=void 0),Rw=T=>n(30,pt=T.detail),Lw=()=>n(30,pt=void 0),Mw=T=>n(32,On=T.detail),Nw=()=>n(32,On=void 0);function Pw(T){ue[T?"unshift":"push"](()=>{De=T,n(24,De)})}const Dw=T=>n(29,pe=T.detail),Fw=()=>n(29,pe=void 0),xw=T=>n(30,pt=T.detail),Uw=()=>n(30,pt=void 0),jw=T=>n(27,gt=T.detail),Vw=T=>n(31,Xt=T.detail),Bw=()=>{n(27,gt=void 0),n(31,Xt=void 0)},Hw=T=>n(32,On=T.detail),qw=()=>n(32,On=void 0);return t.$$set=T=>{e=x(x({},e),Ke(T)),n(41,s=ie(e,r)),"use"in T&&n(8,f=T.use),"class"in T&&n(9,p=T.class),"style"in T&&n(10,g=T.style),"ripple"in T&&n(11,m=T.ripple),"disabled"in T&&n(12,v=T.disabled),"required"in T&&n(13,w=T.required),"textarea"in T&&n(14,b=T.textarea),"variant"in T&&n(15,y=T.variant),"noLabel"in T&&n(16,O=T.noLabel),"label"in T&&n(17,C=T.label),"type"in T&&n(18,_=T.type),"value"in T&&n(0,I=T.value),"files"in T&&n(3,K=T.files),"invalid"in T&&n(1,k=T.invalid),"updateInvalid"in T&&n(19,N=T.updateInvalid),"dirty"in T&&n(4,E=T.dirty),"prefix"in T&&n(20,D=T.prefix),"suffix"in T&&n(21,J=T.suffix),"validateOnValueChange"in T&&n(43,X=T.validateOnValueChange),"useNativeValidation"in T&&n(44,A=T.useNativeValidation),"withLeadingIcon"in T&&n(22,S=T.withLeadingIcon),"withTrailingIcon"in T&&n(23,R=T.withTrailingIcon),"input"in T&&n(2,j=T.input),"floatingLabel"in T&&n(5,Q=T.floatingLabel),"lineRipple"in T&&n(6,he=T.lineRipple),"notchedOutline"in T&&n(7,W=T.notchedOutline),"$$scope"in T&&n(90,a=T.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&4&&n(33,i=j&&j.getElement()),t.$$.dirty[0]&524290|t.$$.dirty[1]&262144&&be&&be.isValid()!==!k&&(N?n(1,k=!be.isValid()):be.setValid(!k)),t.$$.dirty[1]&266240&&be&&be.getValidateOnValueChange()!==X&&be.setValidateOnValueChange(d(X)?!1:X),t.$$.dirty[1]&270336&&be&&be.setUseNativeValidation(d(A)?!0:A),t.$$.dirty[0]&4096|t.$$.dirty[1]&262144&&be&&be.setDisabled(v),t.$$.dirty[0]&1|t.$$.dirty[1]&786432&&be&&L&&ii!==I){n(50,ii=I);const T=`${I}`;be.getValue()!==T&&be.setValue(T)}},[I,k,j,K,E,Q,he,W,f,p,g,m,v,w,b,y,O,C,_,N,D,J,S,R,De,Ie,Oe,gt,G,pe,pt,Xt,On,i,u,d,L,q,hr,as,Kn,s,l,X,A,V,ot,$n,mi,be,ii,o,dr,H,le,se,_t,fr,Cu,fw,pw,mw,gw,_w,vw,yw,bw,Ew,Iw,ww,Tw,Cw,Sw,Aw,kw,Ow,Rw,Lw,Mw,Nw,Pw,Dw,Fw,xw,Uw,jw,Vw,Bw,Hw,qw,a]}class NM extends Je{constructor(e){super();Ye(this,e,MM,LM,Ge,{use:8,class:9,style:10,ripple:11,disabled:12,required:13,textarea:14,variant:15,noLabel:16,label:17,type:18,value:0,files:3,invalid:1,updateInvalid:19,dirty:4,prefix:20,suffix:21,validateOnValueChange:43,useNativeValidation:44,withLeadingIcon:22,withTrailingIcon:23,input:2,floatingLabel:5,lineRipple:6,notchedOutline:7,focus:45,blur:46,layout:47,getElement:48},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[45]}get blur(){return this.$$.ctx[46]}get layout(){return this.$$.ctx[47]}get getElement(){return this.$$.ctx[48]}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var $i,Ai,Me={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};$i={},$i[""+Me.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",$i[""+Me.LIST_ITEM_CLASS]="mdc-list-item",$i[""+Me.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",$i[""+Me.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",$i[""+Me.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",$i[""+Me.ROOT]="mdc-list";var js=(Ai={},Ai[""+Me.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",Ai[""+Me.LIST_ITEM_CLASS]="mdc-deprecated-list-item",Ai[""+Me.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",Ai[""+Me.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",Ai[""+Me.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",Ai[""+Me.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",Ai[""+Me.ROOT]="mdc-deprecated-list",Ai),er={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+Me.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+Me.LIST_ITEM_CLASS+` a,
    .`+js[Me.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+js[Me.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+Me.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+Me.LIST_ITEM_CLASS+` a,
    .`+Me.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+Me.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+js[Me.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+js[Me.LIST_ITEM_CLASS]+` a,
    .`+js[Me.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+js[Me.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},zt={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var PM=["input","button","textarea","select"],Vr=function(t){var e=t.target;if(!!e){var n=(""+e.tagName).toLowerCase();PM.indexOf(n)===-1&&t.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function DM(){var t={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return t}function FM(t,e){for(var n=new Map,i=0;i<t;i++){var r=e(i).trim();if(!!r){var s=r[0].toLowerCase();n.has(s)||n.set(s,[]),n.get(s).push({text:r.toLowerCase(),index:i})}}return n.forEach(function(o){o.sort(function(a,l){return a.index-l.index})}),n}function zd(t,e){var n=t.nextChar,i=t.focusItemAtIndex,r=t.sortedIndexByFirstChar,s=t.focusedItemIndex,o=t.skipFocus,a=t.isItemAtIndexDisabled;clearTimeout(e.bufferClearTimeout),e.bufferClearTimeout=setTimeout(function(){Xy(e)},zt.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),e.typeaheadBuffer=e.typeaheadBuffer+n;var l;return e.typeaheadBuffer.length===1?l=xM(r,s,a,e):l=UM(r,a,e),l!==-1&&!o&&i(l),l}function xM(t,e,n,i){var r=i.typeaheadBuffer[0],s=t.get(r);if(!s)return-1;if(r===i.currentFirstChar&&s[i.sortedIndexCursor].index===e){i.sortedIndexCursor=(i.sortedIndexCursor+1)%s.length;var o=s[i.sortedIndexCursor].index;if(!n(o))return o}i.currentFirstChar=r;var a=-1,l;for(l=0;l<s.length;l++)if(!n(s[l].index)){a=l;break}for(;l<s.length;l++)if(s[l].index>e&&!n(s[l].index)){a=l;break}return a!==-1?(i.sortedIndexCursor=a,s[i.sortedIndexCursor].index):-1}function UM(t,e,n){var i=n.typeaheadBuffer[0],r=t.get(i);if(!r)return-1;var s=r[n.sortedIndexCursor];if(s.text.lastIndexOf(n.typeaheadBuffer,0)===0&&!e(s.index))return s.index;for(var o=(n.sortedIndexCursor+1)%r.length,a=-1;o!==n.sortedIndexCursor;){var l=r[o],c=l.text.lastIndexOf(n.typeaheadBuffer,0)===0,u=!e(l.index);if(c&&u){a=o;break}o=(o+1)%r.length}return a!==-1?(n.sortedIndexCursor=a,r[n.sortedIndexCursor].index):-1}function Ky(t){return t.typeaheadBuffer.length>0}function Xy(t){t.typeaheadBuffer=""}function Qy(t,e){var n=t.event,i=t.isTargetListItem,r=t.focusedItemIndex,s=t.focusItemAtIndex,o=t.sortedIndexByFirstChar,a=t.isItemAtIndexDisabled,l=gn(n)==="ArrowLeft",c=gn(n)==="ArrowUp",u=gn(n)==="ArrowRight",h=gn(n)==="ArrowDown",d=gn(n)==="Home",f=gn(n)==="End",p=gn(n)==="Enter",g=gn(n)==="Spacebar";if(n.ctrlKey||n.metaKey||l||c||u||h||d||f||p)return-1;var m=!g&&n.key.length===1;if(m){Vr(n);var v={focusItemAtIndex:s,focusedItemIndex:r,nextChar:n.key.toLowerCase(),sortedIndexByFirstChar:o,skipFocus:!1,isItemAtIndexDisabled:a};return zd(v,e)}if(!g)return-1;i&&Vr(n);var w=i&&Ky(e);if(w){var v={focusItemAtIndex:s,focusedItemIndex:r,nextChar:" ",sortedIndexByFirstChar:o,skipFocus:!1,isItemAtIndexDisabled:a};return zd(v,e)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function jM(t){return t instanceof Array}var VM=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.wrapFocus=!1,i.isVertical=!0,i.isSingleSelectionList=!1,i.selectedIndex=zt.UNSET_INDEX,i.focusedItemIndex=zt.UNSET_INDEX,i.useActivatedClass=!1,i.useSelectedAttr=!1,i.ariaCurrentAttrValue=null,i.isCheckboxList=!1,i.isRadioList=!1,i.hasTypeahead=!1,i.typeaheadState=DM(),i.sortedIndexByFirstChar=new Map,i}return Object.defineProperty(e,"strings",{get:function(){return er},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return Me},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return zt},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),e.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},e.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},e.prototype.setWrapFocus=function(n){this.wrapFocus=n},e.prototype.setVerticalOrientation=function(n){this.isVertical=n},e.prototype.setSingleSelection=function(n){this.isSingleSelectionList=n,n&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},e.prototype.maybeInitializeSingleSelection=function(){var n=this.getSelectedIndexFromDOM();if(n!==zt.UNSET_INDEX){var i=this.adapter.listItemAtIndexHasClass(n,Me.LIST_ITEM_ACTIVATED_CLASS);i&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=n}},e.prototype.getSelectedIndexFromDOM=function(){for(var n=zt.UNSET_INDEX,i=this.adapter.getListItemCount(),r=0;r<i;r++){var s=this.adapter.listItemAtIndexHasClass(r,Me.LIST_ITEM_SELECTED_CLASS),o=this.adapter.listItemAtIndexHasClass(r,Me.LIST_ITEM_ACTIVATED_CLASS);if(!!(s||o)){n=r;break}}return n},e.prototype.setHasTypeahead=function(n){this.hasTypeahead=n,n&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},e.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&Ky(this.typeaheadState)},e.prototype.setUseActivatedClass=function(n){this.useActivatedClass=n},e.prototype.setUseSelectedAttribute=function(n){this.useSelectedAttr=n},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(n,i){var r=i===void 0?{}:i,s=r.forceUpdate;!this.isIndexValid(n)||(this.isCheckboxList?this.setCheckboxAtIndex(n):this.isRadioList?this.setRadioAtIndex(n):this.setSingleSelectionAtIndex(n,{forceUpdate:s}))},e.prototype.handleFocusIn=function(n){n>=0&&(this.focusedItemIndex=n,this.adapter.setAttributeForElementIndex(n,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(n,"0"))},e.prototype.handleFocusOut=function(n){var i=this;n>=0&&(this.adapter.setAttributeForElementIndex(n,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(n,"-1")),setTimeout(function(){i.adapter.isFocusInsideList()||i.setTabindexToFirstSelectedOrFocusedItem()},0)},e.prototype.handleKeydown=function(n,i,r){var s=this,o=gn(n)==="ArrowLeft",a=gn(n)==="ArrowUp",l=gn(n)==="ArrowRight",c=gn(n)==="ArrowDown",u=gn(n)==="Home",h=gn(n)==="End",d=gn(n)==="Enter",f=gn(n)==="Spacebar",p=n.key==="A"||n.key==="a";if(this.adapter.isRootFocused()){if(a||h?(n.preventDefault(),this.focusLastElement()):(c||u)&&(n.preventDefault(),this.focusFirstElement()),this.hasTypeahead){var g={event:n,focusItemAtIndex:function(w){s.focusItemAtIndex(w)},focusedItemIndex:-1,isTargetListItem:i,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(w){return s.adapter.listItemAtIndexHasClass(w,Me.LIST_ITEM_DISABLED_CLASS)}};Qy(g,this.typeaheadState)}return}var m=this.adapter.getFocusedElementIndex();if(!(m===-1&&(m=r,m<0))){if(this.isVertical&&c||!this.isVertical&&l)Vr(n),this.focusNextElement(m);else if(this.isVertical&&a||!this.isVertical&&o)Vr(n),this.focusPrevElement(m);else if(u)Vr(n),this.focusFirstElement();else if(h)Vr(n),this.focusLastElement();else if(p&&n.ctrlKey&&this.isCheckboxList)n.preventDefault(),this.toggleAll(this.selectedIndex===zt.UNSET_INDEX?[]:this.selectedIndex);else if((d||f)&&i){var v=n.target;if(v&&v.tagName==="A"&&d||(Vr(n),this.adapter.listItemAtIndexHasClass(m,Me.LIST_ITEM_DISABLED_CLASS)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(m),this.adapter.notifyAction(m))}if(this.hasTypeahead){var g={event:n,focusItemAtIndex:function(b){s.focusItemAtIndex(b)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:i,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(b){return s.adapter.listItemAtIndexHasClass(b,Me.LIST_ITEM_DISABLED_CLASS)}};Qy(g,this.typeaheadState)}}},e.prototype.handleClick=function(n,i){n!==zt.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(n,Me.LIST_ITEM_DISABLED_CLASS)||(this.isSelectableList()&&this.setSelectedIndexOnAction(n,i),this.adapter.notifyAction(n)))},e.prototype.focusNextElement=function(n){var i=this.adapter.getListItemCount(),r=n+1;if(r>=i)if(this.wrapFocus)r=0;else return n;return this.focusItemAtIndex(r),r},e.prototype.focusPrevElement=function(n){var i=n-1;if(i<0)if(this.wrapFocus)i=this.adapter.getListItemCount()-1;else return n;return this.focusItemAtIndex(i),i},e.prototype.focusFirstElement=function(){return this.focusItemAtIndex(0),0},e.prototype.focusLastElement=function(){var n=this.adapter.getListItemCount()-1;return this.focusItemAtIndex(n),n},e.prototype.focusInitialElement=function(){var n=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(n),n},e.prototype.setEnabled=function(n,i){!this.isIndexValid(n)||(i?(this.adapter.removeClassForElementIndex(n,Me.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(n,er.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(n,Me.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(n,er.ARIA_DISABLED,"true")))},e.prototype.setSingleSelectionAtIndex=function(n,i){var r=i===void 0?{}:i,s=r.forceUpdate;if(!(this.selectedIndex===n&&!s)){var o=Me.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(o=Me.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==zt.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,o),this.setAriaForSingleSelectionAtIndex(n),this.setTabindexAtIndex(n),n!==zt.UNSET_INDEX&&this.adapter.addClassForElementIndex(n,o),this.selectedIndex=n}},e.prototype.setAriaForSingleSelectionAtIndex=function(n){this.selectedIndex===zt.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(n,er.ARIA_CURRENT));var i=this.ariaCurrentAttrValue!==null,r=i?er.ARIA_CURRENT:er.ARIA_SELECTED;if(this.selectedIndex!==zt.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,r,"false"),n!==zt.UNSET_INDEX){var s=i?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(n,r,s)}},e.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?er.ARIA_SELECTED:er.ARIA_CHECKED},e.prototype.setRadioAtIndex=function(n){var i=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(n,!0),this.selectedIndex!==zt.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,i,"false"),this.adapter.setAttributeForElementIndex(n,i,"true"),this.selectedIndex=n},e.prototype.setCheckboxAtIndex=function(n){for(var i=this.getSelectionAttribute(),r=0;r<this.adapter.getListItemCount();r++){var s=!1;n.indexOf(r)>=0&&(s=!0),this.adapter.setCheckedCheckboxOrRadioAtIndex(r,s),this.adapter.setAttributeForElementIndex(r,i,s?"true":"false")}this.selectedIndex=n},e.prototype.setTabindexAtIndex=function(n){this.focusedItemIndex===zt.UNSET_INDEX&&n!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==n&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==n&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),n!==zt.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(n,"tabindex","0")},e.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},e.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var n=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(n)},e.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==zt.UNSET_INDEX?this.selectedIndex:jM(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(n,i){return Math.min(n,i)}):0:Math.max(this.focusedItemIndex,0)},e.prototype.isIndexValid=function(n){var i=this;if(n instanceof Array){if(!this.isCheckboxList)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return n.length===0?!0:n.some(function(r){return i.isIndexInRange(r)})}else if(typeof n=="number"){if(this.isCheckboxList)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+n);return this.isIndexInRange(n)||this.isSingleSelectionList&&n===zt.UNSET_INDEX}else return!1},e.prototype.isIndexInRange=function(n){var i=this.adapter.getListItemCount();return n>=0&&n<i},e.prototype.setSelectedIndexOnAction=function(n,i){i===void 0&&(i=!0),this.isCheckboxList?this.toggleCheckboxAtIndex(n,i):this.setSelectedIndex(n)},e.prototype.toggleCheckboxAtIndex=function(n,i){var r=this.getSelectionAttribute(),s=this.adapter.isCheckboxCheckedAtIndex(n);i&&(s=!s,this.adapter.setCheckedCheckboxOrRadioAtIndex(n,s)),this.adapter.setAttributeForElementIndex(n,r,s?"true":"false");var o=this.selectedIndex===zt.UNSET_INDEX?[]:this.selectedIndex.slice();s?o.push(n):o=o.filter(function(a){return a!==n}),this.selectedIndex=o},e.prototype.focusItemAtIndex=function(n){this.adapter.focusItemAtIndex(n),this.focusedItemIndex=n},e.prototype.toggleAll=function(n){var i=this.adapter.getListItemCount();if(n.length===i)this.setCheckboxAtIndex([]);else{for(var r=[],s=0;s<i;s++)(!this.adapter.listItemAtIndexHasClass(s,Me.LIST_ITEM_DISABLED_CLASS)||n.indexOf(s)>-1)&&r.push(s);this.setCheckboxAtIndex(r)}},e.prototype.typeaheadMatchItem=function(n,i,r){var s=this;r===void 0&&(r=!1);var o={focusItemAtIndex:function(a){s.focusItemAtIndex(a)},focusedItemIndex:i||this.focusedItemIndex,nextChar:n,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:r,isItemAtIndexDisabled:function(a){return s.adapter.listItemAtIndexHasClass(a,Me.LIST_ITEM_DISABLED_CLASS)}};return zd(o,this.typeaheadState)},e.prototype.typeaheadInitSortedIndex=function(){return FM(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},e.prototype.clearTypeaheadBuffer=function(){Xy(this.typeaheadState)},e}(Yn);function BM(t){let e;const n=t[37].default,i=we(n,t,t[43],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[1]&4096)&&Ce(i,n,r,r[43],e?Te(n,r[43],s,null):Se(r[43]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function HM(t){let e,n,i;const r=[{use:[t[17],...t[0]]},{class:ge({[t[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":t[2],"mdc-deprecated-list--dense":t[3],"mdc-deprecated-list--textual-list":t[4],"mdc-deprecated-list--avatar-list":t[5]||t[18],"mdc-deprecated-list--icon-list":t[6],"mdc-deprecated-list--image-list":t[7],"mdc-deprecated-list--thumbnail-list":t[8],"mdc-deprecated-list--video-list":t[9],"mdc-deprecated-list--two-line":t[10],"smui-list--three-line":t[11]&&!t[10]})},{role:t[15]},t[23]];var s=t[12];function o(a){let l={$$slots:{default:[BM]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=x(l,r[c]);return{props:l}}return s&&(e=new s(o(t)),t[38](e),e.$on("keydown",t[39]),e.$on("focusin",t[40]),e.$on("focusout",t[41]),e.$on("click",t[42]),e.$on("SMUIListItem:mount",t[19]),e.$on("SMUIListItem:unmount",t[20]),e.$on("SMUI:action",t[21])),{c(){e&&He(e.$$.fragment),n=vt()},l(a){e&&nt(e.$$.fragment,a),n=vt()},m(a,l){e&&Ve(e,a,l),$(a,n,l),i=!0},p(a,l){const c=l[0]&8818687?Ae(r,[l[0]&131073&&{use:[a[17],...a[0]]},l[0]&266238&&{class:ge({[a[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":a[2],"mdc-deprecated-list--dense":a[3],"mdc-deprecated-list--textual-list":a[4],"mdc-deprecated-list--avatar-list":a[5]||a[18],"mdc-deprecated-list--icon-list":a[6],"mdc-deprecated-list--image-list":a[7],"mdc-deprecated-list--thumbnail-list":a[8],"mdc-deprecated-list--video-list":a[9],"mdc-deprecated-list--two-line":a[10],"smui-list--three-line":a[11]&&!a[10]})},l[0]&32768&&{role:a[15]},l[0]&8388608&&ht(a[23])]):{};if(l[1]&4096&&(c.$$scope={dirty:l,ctx:a}),s!==(s=a[12])){if(e){xt();const u=e;F(u.$$.fragment,1,0,()=>{Be(u,1)}),Ut()}s?(e=new s(o(a)),a[38](e),e.$on("keydown",a[39]),e.$on("focusin",a[40]),e.$on("focusout",a[41]),e.$on("click",a[42]),e.$on("SMUIListItem:mount",a[19]),e.$on("SMUIListItem:unmount",a[20]),e.$on("SMUI:action",a[21]),He(e.$$.fragment),P(e.$$.fragment,1),Ve(e,n.parentNode,n)):e=null}else s&&e.$set(c)},i(a){i||(e&&P(e.$$.fragment,a),i=!0)},o(a){e&&F(e.$$.fragment,a),i=!1},d(a){t[38](null),a&&M(n),e&&Be(e,a)}}}function qM(t,e,n){const i=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","selectedIndex","radioList","checkList","hasTypeahead","component","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e;var a;const{closest:l,matches:c}=qd,u=et(Ue());let{use:h=[]}=e,{class:d=""}=e,{nonInteractive:f=!1}=e,{dense:p=!1}=e,{textualList:g=!1}=e,{avatarList:m=!1}=e,{iconList:v=!1}=e,{imageList:w=!1}=e,{thumbnailList:b=!1}=e,{videoList:y=!1}=e,{twoLine:O=!1}=e,{threeLine:C=!1}=e,{vertical:_=!0}=e,{wrapFocus:I=(a=un("SMUI:list:wrapFocus"))!==null&&a!==void 0?a:!1}=e,{singleSelection:K=!1}=e,{selectedIndex:L=-1}=e,{radioList:k=!1}=e,{checkList:N=!1}=e,{hasTypeahead:E=!1}=e,D,J,X=[],A=un("SMUI:list:role"),S=un("SMUI:list:nav");const R=new WeakMap;let j=un("SMUI:dialog:selection"),Q=un("SMUI:addLayoutListener"),he,{component:W=S?lL:cL}=e;qt("SMUI:list:nonInteractive",f),qt("SMUI:separator:context","list"),A||(K?(A="listbox",qt("SMUI:list:item:role","option")):k?(A="radiogroup",qt("SMUI:list:item:role","radio")):N?(A="group",qt("SMUI:list:item:role","checkbox")):(A="list",qt("SMUI:list:item:role",void 0))),Q&&(he=Q(On)),Ln(()=>{n(13,J=new VM({addClassForElementIndex:fe,focusItemAtIndex:gt,getAttributeForElementIndex:(le,se)=>{var _t,fr;return(fr=(_t=Oe()[le])===null||_t===void 0?void 0:_t.getAttr(se))!==null&&fr!==void 0?fr:null},getFocusedElementIndex:()=>document.activeElement?Oe().map(le=>le.element).indexOf(document.activeElement):-1,getListItemCount:()=>X.length,getPrimaryTextAtIndex:pt,hasCheckboxAtIndex:le=>{var se,_t;return(_t=(se=Oe()[le])===null||se===void 0?void 0:se.hasCheckbox)!==null&&_t!==void 0?_t:!1},hasRadioAtIndex:le=>{var se,_t;return(_t=(se=Oe()[le])===null||se===void 0?void 0:se.hasRadio)!==null&&_t!==void 0?_t:!1},isCheckboxCheckedAtIndex:le=>{var se;const _t=Oe()[le];return(se=(_t==null?void 0:_t.hasCheckbox)&&_t.checked)!==null&&se!==void 0?se:!1},isFocusInsideList:()=>D!=null&&Kn()!==document.activeElement&&Kn().contains(document.activeElement),isRootFocused:()=>D!=null&&document.activeElement===Kn(),listItemAtIndexHasClass:G,notifyAction:le=>{n(24,L=le),D!=null&&st(Kn(),"SMUIList:action",{index:le},void 0,!0)},removeClassForElementIndex:Dt,setAttributeForElementIndex:Ot,setCheckedCheckboxOrRadioAtIndex:(le,se)=>{Oe()[le].checked=se},setTabIndexForListItemChildren:(le,se)=>{const _t=Oe()[le],fr="button:not(:disabled), a";Array.prototype.forEach.call(_t.element.querySelectorAll(fr),Cu=>{Cu.setAttribute("tabindex",se)})}}));const H={get element(){return Kn()},get items(){return X},get typeaheadInProgress(){return J.isTypeaheadInProgress()},typeaheadMatchItem(le,se){return J.typeaheadMatchItem(le,se,!0)},getOrderedList:Oe,focusItemAtIndex:gt,addClassForElementIndex:fe,removeClassForElementIndex:Dt,setAttributeForElementIndex:Ot,removeAttributeForElementIndex:q,getAttributeFromElementIndex:pe,getPrimaryTextAtIndex:pt};return st(Kn(),"SMUIList:mount",H),J.init(),()=>{J.destroy()}}),pr(()=>{he&&he()});function De(H){X.push(H.detail),R.set(H.detail.element,H.detail),K&&H.detail.selected&&n(24,L=Xt(H.detail.element)),H.stopPropagation()}function be(H){var le;const se=(le=H.detail&&X.indexOf(H.detail))!==null&&le!==void 0?le:-1;se!==-1&&(X.splice(se,1),X=X,R.delete(H.detail.element)),H.stopPropagation()}function Ie(H){if(k||N){const le=Xt(H.target);if(le!==-1){const se=Oe()[le];se&&(k&&!se.checked||N)&&(se.checked=!se.checked,se.activateRipple(),window.requestAnimationFrame(()=>{se.deactivateRipple()}))}}}function Oe(){return D==null?[]:[...Kn().children].map(H=>R.get(H)).filter(H=>H&&H._smui_list_item_accessor)}function gt(H){const le=Oe()[H];le&&"focus"in le.element&&le.element.focus()}function G(H,le){var se;const _t=Oe()[H];return(se=_t&&_t.hasClass(le))!==null&&se!==void 0?se:!1}function fe(H,le){const se=Oe()[H];se&&se.addClass(le)}function Dt(H,le){const se=Oe()[H];se&&se.removeClass(le)}function Ot(H,le,se){const _t=Oe()[H];_t&&_t.addAttr(le,se)}function q(H,le){const se=Oe()[H];se&&se.removeAttr(le)}function pe(H,le){const se=Oe()[H];return se?se.getAttr(le):null}function pt(H){var le;const se=Oe()[H];return(le=se&&se.getPrimaryText())!==null&&le!==void 0?le:""}function Xt(H){const le=l(H,".mdc-deprecated-list-item, .mdc-deprecated-list");return le&&c(le,".mdc-deprecated-list-item")?Oe().map(se=>se==null?void 0:se.element).indexOf(le):-1}function On(){return J.layout()}function ii(H,le){return J.setEnabled(H,le)}function po(){return J.isTypeaheadInProgress()}function hr(){return J.getSelectedIndex()}function as(){return J.getFocusedItemIndex()}function Kn(){return D.getElement()}function V(H){ue[H?"unshift":"push"](()=>{D=H,n(14,D)})}const ot=H=>J&&J.handleKeydown(H,H.target.classList.contains("mdc-deprecated-list-item"),Xt(H.target)),$n=H=>J&&J.handleFocusIn(Xt(H.target)),mi=H=>J&&J.handleFocusOut(Xt(H.target)),dr=H=>J&&J.handleClick(Xt(H.target),!c(H.target,'input[type="checkbox"], input[type="radio"]'));return t.$$set=H=>{e=x(x({},e),Ke(H)),n(23,r=ie(e,i)),"use"in H&&n(0,h=H.use),"class"in H&&n(1,d=H.class),"nonInteractive"in H&&n(2,f=H.nonInteractive),"dense"in H&&n(3,p=H.dense),"textualList"in H&&n(4,g=H.textualList),"avatarList"in H&&n(5,m=H.avatarList),"iconList"in H&&n(6,v=H.iconList),"imageList"in H&&n(7,w=H.imageList),"thumbnailList"in H&&n(8,b=H.thumbnailList),"videoList"in H&&n(9,y=H.videoList),"twoLine"in H&&n(10,O=H.twoLine),"threeLine"in H&&n(11,C=H.threeLine),"vertical"in H&&n(25,_=H.vertical),"wrapFocus"in H&&n(26,I=H.wrapFocus),"singleSelection"in H&&n(27,K=H.singleSelection),"selectedIndex"in H&&n(24,L=H.selectedIndex),"radioList"in H&&n(28,k=H.radioList),"checkList"in H&&n(29,N=H.checkList),"hasTypeahead"in H&&n(30,E=H.hasTypeahead),"component"in H&&n(12,W=H.component),"$$scope"in H&&n(43,o=H.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&33562624&&J&&J.setVerticalOrientation(_),t.$$.dirty[0]&67117056&&J&&J.setWrapFocus(I),t.$$.dirty[0]&1073750016&&J&&J.setHasTypeahead(E),t.$$.dirty[0]&134225920&&J&&J.setSingleSelection(K),t.$$.dirty[0]&151003136&&J&&K&&hr()!==L&&J.setSelectedIndex(L)},[h,d,f,p,g,m,v,w,b,y,O,C,W,J,D,A,c,u,j,De,be,Ie,Xt,r,L,_,I,K,k,N,E,On,ii,po,hr,as,Kn,s,V,ot,$n,mi,dr,o]}class WM extends Je{constructor(e){super();Ye(this,e,qM,HM,Ge,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:25,wrapFocus:26,singleSelection:27,selectedIndex:24,radioList:28,checkList:29,hasTypeahead:30,component:12,layout:31,setEnabled:32,getTypeaheadInProgress:33,getSelectedIndex:34,getFocusedItemIndex:35,getElement:36},null,[-1,-1])}get layout(){return this.$$.ctx[31]}get setEnabled(){return this.$$.ctx[32]}get getTypeaheadInProgress(){return this.$$.ctx[33]}get getSelectedIndex(){return this.$$.ctx[34]}get getFocusedItemIndex(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}function Yy(t){let e;return{c(){e=_e("span"),this.h()},l(n){e=ve(n,"SPAN",{class:!0}),re(e).forEach(M),this.h()},h(){ee(e,"class","mdc-deprecated-list-item__ripple")},m(n,i){$(n,e,i)},d(n){n&&M(e)}}}function GM(t){let e,n,i=t[7]&&Yy();const r=t[32].default,s=we(r,t,t[35],null);return{c(){i&&i.c(),e=vt(),s&&s.c()},l(o){i&&i.l(o),e=vt(),s&&s.l(o)},m(o,a){i&&i.m(o,a),$(o,e,a),s&&s.m(o,a),n=!0},p(o,a){o[7]?i||(i=Yy(),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),s&&s.p&&(!n||a[1]&16)&&Ce(s,r,o,o[35],n?Te(r,o[35],a,null):Se(o[35]),null)},i(o){n||(P(s,o),n=!0)},o(o){F(s,o),n=!1},d(o){i&&i.d(o),o&&M(e),s&&s.d(o)}}}function zM(t){let e,n,i;const r=[{use:[...t[6]?[]:[[xr,{ripple:!t[14],unbounded:!1,color:(t[1]||t[0])&&t[5]==null?"primary":t[5],disabled:t[9],addClass:t[22],removeClass:t[23],addStyle:t[24]}]],t[20],...t[2]]},{class:ge(at({[t[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":t[1],"mdc-deprecated-list-item--selected":t[0],"mdc-deprecated-list-item--disabled":t[9],"mdc-menu-item--selected":!t[21]&&t[8]==="menuitem"&&t[0],"smui-menu-item--non-interactive":t[6]},t[16]))},{style:Object.entries(t[17]).map(Jy).concat([t[4]]).join(" ")},t[21]&&t[1]?{"aria-current":"page"}:{},t[21]?{}:{role:t[8]},!t[21]&&t[8]==="option"?{"aria-selected":t[0]?"true":"false"}:{},!t[21]&&(t[8]==="radio"||t[8]==="checkbox")?{"aria-checked":t[14]&&t[14].checked?"true":"false"}:{},t[21]?{}:{"aria-disabled":t[9]?"true":"false"},{"data-menu-item-skip-restore-focus":t[10]||void 0},{tabindex:t[19]},{href:t[11]},t[18],t[27]];var s=t[12];function o(a){let l={$$slots:{default:[GM]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=x(l,r[c]);return{props:l}}return s&&(e=new s(o(t)),t[33](e),e.$on("click",t[13]),e.$on("keydown",t[25]),e.$on("SMUIGenericInput:mount",t[26]),e.$on("SMUIGenericInput:unmount",t[34])),{c(){e&&He(e.$$.fragment),n=vt()},l(a){e&&nt(e.$$.fragment,a),n=vt()},m(a,l){e&&Ve(e,a,l),$(a,n,l),i=!0},p(a,l){const c=l[0]&167726975?Ae(r,[l[0]&30425703&&{use:[...a[6]?[]:[[xr,{ripple:!a[14],unbounded:!1,color:(a[1]||a[0])&&a[5]==null?"primary":a[5],disabled:a[9],addClass:a[22],removeClass:a[23],addStyle:a[24]}]],a[20],...a[2]]},l[0]&2163531&&{class:ge(at({[a[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":a[1],"mdc-deprecated-list-item--selected":a[0],"mdc-deprecated-list-item--disabled":a[9],"mdc-menu-item--selected":!a[21]&&a[8]==="menuitem"&&a[0],"smui-menu-item--non-interactive":a[6]},a[16]))},l[0]&131088&&{style:Object.entries(a[17]).map(Jy).concat([a[4]]).join(" ")},l[0]&2097154&&ht(a[21]&&a[1]?{"aria-current":"page"}:{}),l[0]&2097408&&ht(a[21]?{}:{role:a[8]}),l[0]&2097409&&ht(!a[21]&&a[8]==="option"?{"aria-selected":a[0]?"true":"false"}:{}),l[0]&2113792&&ht(!a[21]&&(a[8]==="radio"||a[8]==="checkbox")?{"aria-checked":a[14]&&a[14].checked?"true":"false"}:{}),l[0]&2097664&&ht(a[21]?{}:{"aria-disabled":a[9]?"true":"false"}),l[0]&1024&&{"data-menu-item-skip-restore-focus":a[10]||void 0},l[0]&524288&&{tabindex:a[19]},l[0]&2048&&{href:a[11]},l[0]&262144&&ht(a[18]),l[0]&134217728&&ht(a[27])]):{};if(l[0]&128|l[1]&16&&(c.$$scope={dirty:l,ctx:a}),s!==(s=a[12])){if(e){xt();const u=e;F(u.$$.fragment,1,0,()=>{Be(u,1)}),Ut()}s?(e=new s(o(a)),a[33](e),e.$on("click",a[13]),e.$on("keydown",a[25]),e.$on("SMUIGenericInput:mount",a[26]),e.$on("SMUIGenericInput:unmount",a[34]),He(e.$$.fragment),P(e.$$.fragment,1),Ve(e,n.parentNode,n)):e=null}else s&&e.$set(c)},i(a){i||(e&&P(e.$$.fragment,a),i=!0)},o(a){e&&F(e.$$.fragment,a),i=!1},d(a){t[33](null),a&&M(n),e&&Be(e,a)}}}let KM=0;const Jy=([t,e])=>`${t}: ${e};`;function XM(t,e,n){let i;const r=["use","class","style","color","nonInteractive","ripple","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","action","getPrimaryText","getElement"];let s=ie(e,r),{$$slots:o={},$$scope:a}=e;var l;const c=et(Ue());let u=()=>{};function h(q){return q===u}let{use:d=[]}=e,{class:f=""}=e,{style:p=""}=e,{color:g=void 0}=e,{nonInteractive:m=(l=un("SMUI:list:nonInteractive"))!==null&&l!==void 0?l:!1}=e;qt("SMUI:list:nonInteractive",void 0);let{ripple:v=!m}=e,{activated:w=!1}=e,{role:b=un("SMUI:list:item:role")}=e;qt("SMUI:list:item:role",void 0);let{selected:y=!1}=e,{disabled:O=!1}=e,{skipRestoreFocus:C=!1}=e,{tabindex:_=u}=e,{inputId:I="SMUI-form-field-list-"+KM++}=e,{href:K=void 0}=e,L,k={},N={},E={},D,J,X=un("SMUI:list:item:nav"),{component:A=X?K?uy:Ur:aL}=e;qt("SMUI:generic:input:props",{id:I}),qt("SMUI:separator:context",void 0),Ln(()=>{if(!y&&!m){let pe=!0,pt=L;for(;pt.previousSibling;)if(pt=pt.previousSibling,pt.nodeType===1&&pt.classList.contains("mdc-deprecated-list-item")&&!pt.classList.contains("mdc-deprecated-list-item--disabled")){pe=!1;break}pe&&(J=window.requestAnimationFrame(be))}const q={_smui_list_item_accessor:!0,get element(){return fe()},get selected(){return y},set selected(pe){n(0,y=pe)},hasClass:S,addClass:R,removeClass:j,getAttr:he,addAttr:W,removeAttr:De,getPrimaryText:G,get checked(){var pe;return(pe=D&&D.checked)!==null&&pe!==void 0?pe:!1},set checked(pe){D&&n(14,D.checked=!!pe,D)},get hasCheckbox(){return!!(D&&"_smui_checkbox_accessor"in D)},get hasRadio(){return!!(D&&"_smui_radio_accessor"in D)},activateRipple(){D&&D.activateRipple()},deactivateRipple(){D&&D.deactivateRipple()},getValue(){return s.value},action:gt,get tabindex(){return i},set tabindex(pe){n(28,_=pe)},get disabled(){return O},get activated(){return w},set activated(pe){n(1,w=pe)}};return st(fe(),"SMUIListItem:mount",q),()=>{st(fe(),"SMUIListItem:unmount",q)}}),pr(()=>{J&&window.cancelAnimationFrame(J)});function S(q){return q in k?k[q]:fe().classList.contains(q)}function R(q){k[q]||n(16,k[q]=!0,k)}function j(q){(!(q in k)||k[q])&&n(16,k[q]=!1,k)}function Q(q,pe){N[q]!=pe&&(pe===""||pe==null?(delete N[q],n(17,N)):n(17,N[q]=pe,N))}function he(q){var pe;return q in E?(pe=E[q])!==null&&pe!==void 0?pe:null:fe().getAttribute(q)}function W(q,pe){E[q]!==pe&&n(18,E[q]=pe,E)}function De(q){(!(q in E)||E[q]!=null)&&n(18,E[q]=void 0,E)}function be(){let q=!0,pe=L.getElement();for(;pe.nextElementSibling;)if(pe=pe.nextElementSibling,pe.nodeType===1&&pe.classList.contains("mdc-deprecated-list-item")){const pt=pe.attributes.getNamedItem("tabindex");if(pt&&pt.value==="0"){q=!1;break}}q&&n(19,i=0)}function Ie(q){const pe=q.key==="Enter",pt=q.key==="Space";(pe||pt)&&gt(q)}function Oe(q){("_smui_checkbox_accessor"in q.detail||"_smui_radio_accessor"in q.detail)&&n(14,D=q.detail)}function gt(q){O||st(fe(),"SMUI:action",q)}function G(){var q,pe,pt;const Xt=fe(),On=Xt.querySelector(".mdc-deprecated-list-item__primary-text");if(On)return(q=On.textContent)!==null&&q!==void 0?q:"";const ii=Xt.querySelector(".mdc-deprecated-list-item__text");return ii?(pe=ii.textContent)!==null&&pe!==void 0?pe:"":(pt=Xt.textContent)!==null&&pt!==void 0?pt:""}function fe(){return L.getElement()}function Dt(q){ue[q?"unshift":"push"](()=>{L=q,n(15,L)})}const Ot=()=>n(14,D=void 0);return t.$$set=q=>{e=x(x({},e),Ke(q)),n(27,s=ie(e,r)),"use"in q&&n(2,d=q.use),"class"in q&&n(3,f=q.class),"style"in q&&n(4,p=q.style),"color"in q&&n(5,g=q.color),"nonInteractive"in q&&n(6,m=q.nonInteractive),"ripple"in q&&n(7,v=q.ripple),"activated"in q&&n(1,w=q.activated),"role"in q&&n(8,b=q.role),"selected"in q&&n(0,y=q.selected),"disabled"in q&&n(9,O=q.disabled),"skipRestoreFocus"in q&&n(10,C=q.skipRestoreFocus),"tabindex"in q&&n(28,_=q.tabindex),"inputId"in q&&n(29,I=q.inputId),"href"in q&&n(11,K=q.href),"component"in q&&n(12,A=q.component),"$$scope"in q&&n(35,a=q.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&268452417&&n(19,i=h(_)?!m&&!O&&(y||D&&D.checked)?0:-1:_)},[y,w,d,f,p,g,m,v,b,O,C,K,A,gt,D,L,k,N,E,i,c,X,R,j,Q,Ie,Oe,s,_,I,G,fe,o,Dt,Ot,a]}class QM extends Je{constructor(e){super();Ye(this,e,XM,zM,Ge,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,activated:1,role:8,selected:0,disabled:9,skipRestoreFocus:10,tabindex:28,inputId:29,href:11,component:12,action:13,getPrimaryText:30,getElement:31},null,[-1,-1])}get action(){return this.$$.ctx[13]}get getPrimaryText(){return this.$$.ctx[30]}get getElement(){return this.$$.ctx[31]}}var Ac=Gt({class:"mdc-deprecated-list-item__text",component:Ur});Gt({class:"mdc-deprecated-list-item__primary-text",component:Ur});Gt({class:"mdc-deprecated-list-item__secondary-text",component:Ur});function YM(t){let e,n,i,r,s,o;const a=t[8].default,l=we(a,t,t[7],null);let c=[{class:n=ge({[t[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":t[4]})},t[5]],u={};for(let h=0;h<c.length;h+=1)u=x(u,c[h]);return{c(){e=_e("span"),l&&l.c(),this.h()},l(h){e=ve(h,"SPAN",{class:!0});var d=re(e);l&&l.l(d),d.forEach(M),this.h()},h(){ce(e,u)},m(h,d){$(h,e,d),l&&l.m(e,null),t[9](e),r=!0,s||(o=[oe(i=dt.call(null,e,t[0])),oe(t[3].call(null,e))],s=!0)},p(h,[d]){l&&l.p&&(!r||d&128)&&Ce(l,a,h,h[7],r?Te(a,h[7],d,null):Se(h[7]),null),ce(e,u=Ae(c,[(!r||d&2&&n!==(n=ge({[h[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":h[4]})))&&{class:n},d&32&&h[5]])),i&&We(i.update)&&d&1&&i.update.call(null,h[0])},i(h){r||(P(l,h),r=!0)},o(h){F(l,h),r=!1},d(h){h&&M(e),l&&l.d(h),t[9](null),s=!1,ze(o)}}}function JM(t,e,n){const i=["use","class","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e;const a=et(Ue());let{use:l=[]}=e,{class:c=""}=e,u,h=un("SMUI:list:graphic:menu-selection-group");function d(){return u}function f(p){ue[p?"unshift":"push"](()=>{u=p,n(2,u)})}return t.$$set=p=>{e=x(x({},e),Ke(p)),n(5,r=ie(e,i)),"use"in p&&n(0,l=p.use),"class"in p&&n(1,c=p.class),"$$scope"in p&&n(7,o=p.$$scope)},[l,c,u,a,h,r,d,o,s,f]}class ZM extends Je{constructor(e){super();Ye(this,e,JM,YM,Ge,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}Gt({class:"mdc-deprecated-list-item__meta",component:Ur});Gt({class:"mdc-deprecated-list-group",component:Ci});Gt({class:"mdc-deprecated-list-group__subheader",component:oL});const kc=QM,$M=ZM;/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var eN={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},tN={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},fa={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30},Rt;(function(t){t[t.BOTTOM=1]="BOTTOM",t[t.CENTER=2]="CENTER",t[t.RIGHT=4]="RIGHT",t[t.FLIP_RTL=8]="FLIP_RTL"})(Rt||(Rt={}));var Vs;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=4]="TOP_RIGHT",t[t.BOTTOM_LEFT=1]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",t[t.TOP_START=8]="TOP_START",t[t.TOP_END=12]="TOP_END",t[t.BOTTOM_START=9]="BOTTOM_START",t[t.BOTTOM_END=13]="BOTTOM_END"})(Vs||(Vs={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Zy=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.isSurfaceOpen=!1,i.isQuickOpen=!1,i.isHoistedElement=!1,i.isFixedPosition=!1,i.isHorizontallyCenteredOnViewport=!1,i.maxHeight=0,i.openAnimationEndTimerId=0,i.closeAnimationEndTimerId=0,i.animationRequestId=0,i.anchorCorner=Vs.TOP_START,i.originCorner=Vs.TOP_START,i.anchorMargin={top:0,right:0,bottom:0,left:0},i.position={x:0,y:0},i}return Object.defineProperty(e,"cssClasses",{get:function(){return eN},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return tN},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return fa},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Corner",{get:function(){return Vs},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=e.cssClasses,i=n.ROOT,r=n.OPEN;if(!this.adapter.hasClass(i))throw new Error(i+" class required in root element.");this.adapter.hasClass(r)&&(this.isSurfaceOpen=!0)},e.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},e.prototype.setAnchorCorner=function(n){this.anchorCorner=n},e.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^Rt.RIGHT},e.prototype.setAnchorMargin=function(n){this.anchorMargin.top=n.top||0,this.anchorMargin.right=n.right||0,this.anchorMargin.bottom=n.bottom||0,this.anchorMargin.left=n.left||0},e.prototype.setIsHoisted=function(n){this.isHoistedElement=n},e.prototype.setFixedPosition=function(n){this.isFixedPosition=n},e.prototype.isFixed=function(){return this.isFixedPosition},e.prototype.setAbsolutePosition=function(n,i){this.position.x=this.isFinite(n)?n:0,this.position.y=this.isFinite(i)?i:0},e.prototype.setIsHorizontallyCenteredOnViewport=function(n){this.isHorizontallyCenteredOnViewport=n},e.prototype.setQuickOpen=function(n){this.isQuickOpen=n},e.prototype.setMaxHeight=function(n){this.maxHeight=n},e.prototype.isOpen=function(){return this.isSurfaceOpen},e.prototype.open=function(){var n=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(e.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(e.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){n.dimensions=n.adapter.getInnerDimensions(),n.autoposition(),n.adapter.addClass(e.cssClasses.OPEN),n.openAnimationEndTimerId=setTimeout(function(){n.openAnimationEndTimerId=0,n.adapter.removeClass(e.cssClasses.ANIMATING_OPEN),n.adapter.notifyOpen()},fa.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},e.prototype.close=function(n){var i=this;if(n===void 0&&(n=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,n||this.maybeRestoreFocus(),this.adapter.removeClass(e.cssClasses.OPEN),this.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(e.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){i.adapter.removeClass(e.cssClasses.OPEN),i.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),i.closeAnimationEndTimerId=setTimeout(function(){i.closeAnimationEndTimerId=0,i.adapter.removeClass(e.cssClasses.ANIMATING_CLOSED),i.adapter.notifyClose()},fa.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,n||this.maybeRestoreFocus()}},e.prototype.handleBodyClick=function(n){var i=n.target;this.adapter.isElementInContainer(i)||this.close()},e.prototype.handleKeydown=function(n){var i=n.keyCode,r=n.key,s=r==="Escape"||i===27;s&&this.close()},e.prototype.autoposition=function(){var n;this.measurements=this.getAutoLayoutmeasurements();var i=this.getoriginCorner(),r=this.getMenuSurfaceMaxHeight(i),s=this.hasBit(i,Rt.BOTTOM)?"bottom":"top",o=this.hasBit(i,Rt.RIGHT)?"right":"left",a=this.getHorizontalOriginOffset(i),l=this.getVerticalOriginOffset(i),c=this.measurements,u=c.anchorSize,h=c.surfaceSize,d=(n={},n[o]=a,n[s]=l,n);u.width/h.width>fa.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(o="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(d),this.adapter.setTransformOrigin(o+" "+s),this.adapter.setPosition(d),this.adapter.setMaxHeight(r?r+"px":""),this.hasBit(i,Rt.BOTTOM)||this.adapter.addClass(e.cssClasses.IS_OPEN_BELOW)},e.prototype.getAutoLayoutmeasurements=function(){var n=this.adapter.getAnchorDimensions(),i=this.adapter.getBodyDimensions(),r=this.adapter.getWindowDimensions(),s=this.adapter.getWindowScroll();return n||(n={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:n,bodySize:i,surfaceSize:this.dimensions,viewportDistance:{top:n.top,right:r.width-n.right,bottom:r.height-n.bottom,left:n.left},viewportSize:r,windowScroll:s}},e.prototype.getoriginCorner=function(){var n=this.originCorner,i=this.measurements,r=i.viewportDistance,s=i.anchorSize,o=i.surfaceSize,a=e.numbers.MARGIN_TO_EDGE,l=this.hasBit(this.anchorCorner,Rt.BOTTOM),c,u;l?(c=r.top-a+this.anchorMargin.bottom,u=r.bottom-a-this.anchorMargin.bottom):(c=r.top-a+this.anchorMargin.top,u=r.bottom-a+s.height-this.anchorMargin.top);var h=u-o.height>0;!h&&c>u&&(n=this.setBit(n,Rt.BOTTOM));var d=this.adapter.isRtl(),f=this.hasBit(this.anchorCorner,Rt.FLIP_RTL),p=this.hasBit(this.anchorCorner,Rt.RIGHT)||this.hasBit(n,Rt.RIGHT),g=!1;d&&f?g=!p:g=p;var m,v;g?(m=r.left+s.width+this.anchorMargin.right,v=r.right-this.anchorMargin.right):(m=r.left+this.anchorMargin.left,v=r.right+s.width-this.anchorMargin.left);var w=m-o.width>0,b=v-o.width>0,y=this.hasBit(n,Rt.FLIP_RTL)&&this.hasBit(n,Rt.RIGHT);return b&&y&&d||!w&&y?n=this.unsetBit(n,Rt.RIGHT):(w&&g&&d||w&&!g&&p||!b&&m>=v)&&(n=this.setBit(n,Rt.RIGHT)),n},e.prototype.getMenuSurfaceMaxHeight=function(n){if(this.maxHeight>0)return this.maxHeight;var i=this.measurements.viewportDistance,r=0,s=this.hasBit(n,Rt.BOTTOM),o=this.hasBit(this.anchorCorner,Rt.BOTTOM),a=e.numbers.MARGIN_TO_EDGE;return s?(r=i.top+this.anchorMargin.top-a,o||(r+=this.measurements.anchorSize.height)):(r=i.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-a,o&&(r-=this.measurements.anchorSize.height)),r},e.prototype.getHorizontalOriginOffset=function(n){var i=this.measurements.anchorSize,r=this.hasBit(n,Rt.RIGHT),s=this.hasBit(this.anchorCorner,Rt.RIGHT);if(r){var o=s?i.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?o-(this.measurements.viewportSize.width-this.measurements.bodySize.width):o}return s?i.width-this.anchorMargin.right:this.anchorMargin.left},e.prototype.getVerticalOriginOffset=function(n){var i=this.measurements.anchorSize,r=this.hasBit(n,Rt.BOTTOM),s=this.hasBit(this.anchorCorner,Rt.BOTTOM),o=0;return r?o=s?i.height-this.anchorMargin.top:-this.anchorMargin.bottom:o=s?i.height+this.anchorMargin.bottom:this.anchorMargin.top,o},e.prototype.adjustPositionForHoistedElement=function(n){var i,r,s=this.measurements,o=s.windowScroll,a=s.viewportDistance,l=s.surfaceSize,c=s.viewportSize,u=Object.keys(n);try{for(var h=qn(u),d=h.next();!d.done;d=h.next()){var f=d.value,p=n[f]||0;if(this.isHorizontallyCenteredOnViewport&&(f==="left"||f==="right")){n[f]=(c.width-l.width)/2;continue}p+=a[f],this.isFixedPosition||(f==="top"?p+=o.y:f==="bottom"?p-=o.y:f==="left"?p+=o.x:p-=o.x),n[f]=p}}catch(g){i={error:g}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}},e.prototype.maybeRestoreFocus=function(){var n=this,i=this.adapter.isFocused(),r=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(i||r)&&setTimeout(function(){n.adapter.restoreFocus()},fa.TOUCH_EVENT_WAIT_MS)},e.prototype.hasBit=function(n,i){return Boolean(n&i)},e.prototype.setBit=function(n,i){return n|i},e.prototype.unsetBit=function(n,i){return n^i},e.prototype.isFinite=function(n){return typeof n=="number"&&isFinite(n)},e}(Yn);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Bs={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},Hs={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},nN={FOCUS_ROOT_INDEX:-1},qs;(function(t){t[t.NONE=0]="NONE",t[t.LIST_ROOT=1]="LIST_ROOT",t[t.FIRST_ITEM=2]="FIRST_ITEM",t[t.LAST_ITEM=3]="LAST_ITEM"})(qs||(qs={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var iN=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.closeAnimationEndTimerId=0,i.defaultFocusState=qs.LIST_ROOT,i.selectedIndex=-1,i}return Object.defineProperty(e,"cssClasses",{get:function(){return Bs},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Hs},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return nN},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},e.prototype.handleKeydown=function(n){var i=n.key,r=n.keyCode,s=i==="Tab"||r===9;s&&this.adapter.closeSurface(!0)},e.prototype.handleItemAction=function(n){var i=this,r=this.adapter.getElementIndex(n);if(!(r<0)){this.adapter.notifySelected({index:r});var s=this.adapter.getAttributeFromElementAtIndex(r,Hs.SKIP_RESTORE_FOCUS)==="true";this.adapter.closeSurface(s),this.closeAnimationEndTimerId=setTimeout(function(){var o=i.adapter.getElementIndex(n);o>=0&&i.adapter.isSelectableItemAtIndex(o)&&i.setSelectedIndex(o)},Zy.numbers.TRANSITION_CLOSE_DURATION)}},e.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case qs.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case qs.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case qs.NONE:break;default:this.adapter.focusListRoot();break}},e.prototype.setDefaultFocusState=function(n){this.defaultFocusState=n},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(n){if(this.validatedIndex(n),!this.adapter.isSelectableItemAtIndex(n))throw new Error("MDCMenuFoundation: No selection group at specified index.");var i=this.adapter.getSelectedSiblingOfItemAtIndex(n);i>=0&&(this.adapter.removeAttributeFromElementAtIndex(i,Hs.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(i,Bs.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(n,Bs.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(n,Hs.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=n},e.prototype.setEnabled=function(n,i){this.validatedIndex(n),i?(this.adapter.removeClassFromElementAtIndex(n,Me.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(n,Hs.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(n,Me.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(n,Hs.ARIA_DISABLED_ATTR,"true"))},e.prototype.validatedIndex=function(n){var i=this.adapter.getMenuItemCount(),r=n>=0&&n<i;if(!r)throw new Error("MDCMenuFoundation: No list item at specified index.")},e}(Yn);const{document:rN}=l1;function sN(t){let e,n,i,r,s,o,a,l;const c=t[31].default,u=we(c,t,t[30],null);let h=[{class:i=ge(at({[t[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":t[5],"mdc-menu-surface--open":t[4],"smui-menu-surface--static":t[4],"mdc-menu-surface--fullwidth":t[7]},t[10]))},{style:r=Object.entries(t[11]).map($y).concat([t[3]]).join(" ")},t[13]],d={};for(let f=0;f<h.length;f+=1)d=x(d,h[f]);return{c(){e=Xe(),n=_e("div"),u&&u.c(),this.h()},l(f){e=Qe(f),n=ve(f,"DIV",{class:!0,style:!0});var p=re(n);u&&u.l(p),p.forEach(M),this.h()},h(){ce(n,d)},m(f,p){$(f,e,p),$(f,n,p),u&&u.m(n,null),t[33](n),o=!0,a||(l=[$e(rN.body,"click",t[32],!0),oe(s=dt.call(null,n,t[1])),oe(t[12].call(null,n)),$e(n,"keydown",t[34])],a=!0)},p(f,p){u&&u.p&&(!o||p[0]&1073741824)&&Ce(u,c,f,f[30],o?Te(c,f[30],p,null):Se(f[30]),null),ce(n,d=Ae(h,[(!o||p[0]&1204&&i!==(i=ge(at({[f[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":f[5],"mdc-menu-surface--open":f[4],"smui-menu-surface--static":f[4],"mdc-menu-surface--fullwidth":f[7]},f[10]))))&&{class:i},(!o||p[0]&2056&&r!==(r=Object.entries(f[11]).map($y).concat([f[3]]).join(" ")))&&{style:r},p[0]&8192&&f[13]])),s&&We(s.update)&&p[0]&2&&s.update.call(null,f[1])},i(f){o||(P(u,f),o=!0)},o(f){F(u,f),o=!1},d(f){f&&M(e),f&&M(n),u&&u.d(f),t[33](null),a=!1,ze(l)}}}const $y=([t,e])=>`${t}: ${e};`;function oN(t,e,n){const i=["use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","isOpen","setOpen","setAbsolutePosition","setIsHoisted","isFixed","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e;var a,l,c;const u=et(Ue());let{use:h=[]}=e,{class:d=""}=e,{style:f=""}=e,{static:p=!1}=e,{anchor:g=!0}=e,{fixed:m=!1}=e,{open:v=p}=e,{managed:w=!1}=e,{fullWidth:b=!1}=e,{quickOpen:y=!1}=e,{anchorElement:O=void 0}=e,{anchorCorner:C=void 0}=e,{anchorMargin:_={top:0,right:0,bottom:0,left:0}}=e,{maxHeight:I=0}=e,{horizontallyCenteredOnViewport:K=!1}=e,L,k,N={},E={},D;qt("SMUI:list:role","menu"),qt("SMUI:list:item:role","menuitem");const J=Vs;Ln(()=>(n(9,k=new Zy({addClass:A,removeClass:S,hasClass:X,hasAnchor:()=>!!O,notifyClose:()=>{w||n(0,v=p),v||st(L,"SMUIMenuSurface:closed",void 0,void 0,!0)},notifyClosing:()=>{w||n(0,v=p),v||st(L,"SMUIMenuSurface:closing",void 0,void 0,!0)},notifyOpen:()=>{w||n(0,v=!0),v&&st(L,"SMUIMenuSurface:opened",void 0,void 0,!0)},isElementInContainer:fe=>L.contains(fe),isRtl:()=>getComputedStyle(L).getPropertyValue("direction")==="rtl",setTransformOrigin:fe=>{n(11,E["transform-origin"]=fe,E)},isFocused:()=>document.activeElement===L,saveFocus:()=>{var fe;D=(fe=document.activeElement)!==null&&fe!==void 0?fe:void 0},restoreFocus:()=>{(!L||L.contains(document.activeElement))&&D&&document.contains(D)&&"focus"in D&&D.focus()},getInnerDimensions:()=>({width:L.offsetWidth,height:L.offsetHeight}),getAnchorDimensions:()=>O?O.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:fe=>{n(11,E.left="left"in fe?`${fe.left}px`:"",E),n(11,E.right="right"in fe?`${fe.right}px`:"",E),n(11,E.top="top"in fe?`${fe.top}px`:"",E),n(11,E.bottom="bottom"in fe?`${fe.bottom}px`:"",E)},setMaxHeight:fe=>{n(11,E.maxHeight=fe,E)}})),st(L,"SMUIMenuSurface:mount",{get open(){return v},set open(fe){n(0,v=fe)},closeProgrammatic:R}),k.init(),()=>{var fe;const Dt=k.isHoistedElement;k.destroy(),Dt&&((fe=L.parentNode)===null||fe===void 0||fe.removeChild(L))})),pr(()=>{var G;g&&L&&((G=L.parentElement)===null||G===void 0||G.classList.remove("mdc-menu-surface--anchor"))});function X(G){return G in N?N[G]:be().classList.contains(G)}function A(G){N[G]||n(10,N[G]=!0,N)}function S(G){(!(G in N)||N[G])&&n(10,N[G]=!1,N)}function R(G){k.close(G),n(0,v=!1)}function j(){return v}function Q(G){n(0,v=G)}function he(G,fe){return k.setAbsolutePosition(G,fe)}function W(G){return k.setIsHoisted(G)}function De(){return k.isFixed()}function be(){return L}const Ie=G=>k&&v&&!w&&k.handleBodyClick(G);function Oe(G){ue[G?"unshift":"push"](()=>{L=G,n(8,L)})}const gt=G=>k&&k.handleKeydown(G);return t.$$set=G=>{e=x(x({},e),Ke(G)),n(13,r=ie(e,i)),"use"in G&&n(1,h=G.use),"class"in G&&n(2,d=G.class),"style"in G&&n(3,f=G.style),"static"in G&&n(4,p=G.static),"anchor"in G&&n(15,g=G.anchor),"fixed"in G&&n(5,m=G.fixed),"open"in G&&n(0,v=G.open),"managed"in G&&n(6,w=G.managed),"fullWidth"in G&&n(7,b=G.fullWidth),"quickOpen"in G&&n(16,y=G.quickOpen),"anchorElement"in G&&n(14,O=G.anchorElement),"anchorCorner"in G&&n(17,C=G.anchorCorner),"anchorMargin"in G&&n(18,_=G.anchorMargin),"maxHeight"in G&&n(19,I=G.maxHeight),"horizontallyCenteredOnViewport"in G&&n(20,K=G.horizontallyCenteredOnViewport),"$$scope"in G&&n(30,o=G.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&939557120&&L&&g&&!(n(27,a=L.parentElement)===null||a===void 0?void 0:a.classList.contains("mdc-menu-surface--anchor"))&&(n(28,l=L.parentElement)===null||l===void 0||l.classList.add("mdc-menu-surface--anchor"),n(14,O=n(29,c=L.parentElement)!==null&&c!==void 0?c:void 0)),t.$$.dirty[0]&513&&k&&k.isOpen()!==v&&(v?k.open():k.close()),t.$$.dirty[0]&66048&&k&&k.setQuickOpen(y),t.$$.dirty[0]&544&&k&&k.setFixedPosition(m),t.$$.dirty[0]&524800&&k&&I>0&&k.setMaxHeight(I),t.$$.dirty[0]&1049088&&k&&k.setIsHorizontallyCenteredOnViewport(K),t.$$.dirty[0]&131584&&k&&C!=null&&(typeof C=="string"?k.setAnchorCorner(J[C]):k.setAnchorCorner(C)),t.$$.dirty[0]&262656&&k&&k.setAnchorMargin(_)},[v,h,d,f,p,m,w,b,L,k,N,E,u,r,O,g,y,C,_,I,K,j,Q,he,W,De,be,a,l,c,o,s,Ie,Oe,gt]}class aN extends Je{constructor(e){super();Ye(this,e,oN,sN,Ge,{use:1,class:2,style:3,static:4,anchor:15,fixed:5,open:0,managed:6,fullWidth:7,quickOpen:16,anchorElement:14,anchorCorner:17,anchorMargin:18,maxHeight:19,horizontallyCenteredOnViewport:20,isOpen:21,setOpen:22,setAbsolutePosition:23,setIsHoisted:24,isFixed:25,getElement:26},null,[-1,-1])}get isOpen(){return this.$$.ctx[21]}get setOpen(){return this.$$.ctx[22]}get setAbsolutePosition(){return this.$$.ctx[23]}get setIsHoisted(){return this.$$.ctx[24]}get isFixed(){return this.$$.ctx[25]}get getElement(){return this.$$.ctx[26]}}function lN(t,{addClass:e=i=>t.classList.add(i),removeClass:n=i=>t.classList.remove(i)}={}){return e("mdc-menu-surface--anchor"),{destroy(){n("mdc-menu-surface--anchor")}}}function cN(t){let e;const n=t[16].default,i=we(n,t,t[21],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&2097152)&&Ce(i,n,r,r[21],e?Te(n,r[21],s,null):Se(r[21]),null)},i(r){e||(P(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function uN(t){let e,n,i;const r=[{use:t[5]},{class:ge({[t[1]]:!0,"mdc-menu":!0})},t[9]];function s(a){t[18](a)}let o={$$slots:{default:[cN]},$$scope:{ctx:t}};for(let a=0;a<r.length;a+=1)o=x(o,r[a]);return t[0]!==void 0&&(o.open=t[0]),e=new aN({props:o}),t[17](e),ue.push(()=>oi(e,"open",s)),e.$on("SMUIMenuSurface:mount",t[7]),e.$on("SMUIList:mount",t[8]),e.$on("SMUIMenuSurface:opened",t[19]),e.$on("keydown",t[6]),e.$on("SMUIList:action",t[20]),{c(){He(e.$$.fragment)},l(a){nt(e.$$.fragment,a)},m(a,l){Ve(e,a,l),i=!0},p(a,[l]){const c=l&546?Ae(r,[l&32&&{use:a[5]},l&2&&{class:ge({[a[1]]:!0,"mdc-menu":!0})},l&512&&ht(a[9])]):{};l&2097152&&(c.$$scope={dirty:l,ctx:a}),!n&&l&1&&(n=!0,c.open=a[0],si(()=>n=!1)),e.$set(c)},i(a){i||(P(e.$$.fragment,a),i=!0)},o(a){F(e.$$.fragment,a),i=!1},d(a){t[17](null),Be(e,a)}}}function hN(t,e,n){let i;const r=["use","class","open","isOpen","setOpen","setDefaultFocusState","getSelectedIndex","getElement"];let s=ie(e,r),{$$slots:o={},$$scope:a}=e;const{closest:l}=qd,c=et(Ue());let{use:u=[]}=e,{class:h=""}=e,{open:d=!1}=e,f,p,g,m;Ln(()=>(n(3,p=new iN({addClassToElementAtIndex:(E,D)=>{m.addClassForElementIndex(E,D)},removeClassFromElementAtIndex:(E,D)=>{m.removeClassForElementIndex(E,D)},addAttributeToElementAtIndex:(E,D,J)=>{m.setAttributeForElementIndex(E,D,J)},removeAttributeFromElementAtIndex:(E,D)=>{m.removeAttributeForElementIndex(E,D)},getAttributeFromElementAtIndex:(E,D)=>m.getAttributeFromElementIndex(E,D),elementContainsClass:(E,D)=>E.classList.contains(D),closeSurface:E=>g.closeProgrammatic(E),getElementIndex:E=>m.getOrderedList().map(D=>D.element).indexOf(E),notifySelected:E=>st(I(),"SMUIMenu:selected",{index:E.index,item:m.getOrderedList()[E.index].element},void 0,!0),getMenuItemCount:()=>m.items.length,focusItemAtIndex:E=>m.focusItemAtIndex(E),focusListRoot:()=>"focus"in m.element&&m.element.focus(),isSelectableItemAtIndex:E=>!!l(m.getOrderedList()[E].element,`.${Bs.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:E=>{const D=m.getOrderedList(),J=l(D[E].element,`.${Bs.MENU_SELECTION_GROUP}`),X=J==null?void 0:J.querySelector(`.${Bs.MENU_SELECTED_LIST_ITEM}`);return X?D.map(A=>A.element).indexOf(X):-1}})),st(I(),"SMUIMenu:mount",p),p.init(),()=>{p.destroy()}));function v(E){p&&p.handleKeydown(E)}function w(E){g||(g=E.detail)}function b(E){m||n(4,m=E.detail)}function y(){return d}function O(E){n(0,d=E)}function C(E){p.setDefaultFocusState(E)}function _(){return p.getSelectedIndex()}function I(){return f.getElement()}function K(E){ue[E?"unshift":"push"](()=>{f=E,n(2,f)})}function L(E){d=E,n(0,d)}const k=()=>p&&p.handleMenuSurfaceOpened(),N=E=>p&&p.handleItemAction(m.getOrderedList()[E.detail.index].element);return t.$$set=E=>{e=x(x({},e),Ke(E)),n(9,s=ie(e,r)),"use"in E&&n(10,u=E.use),"class"in E&&n(1,h=E.class),"open"in E&&n(0,d=E.open),"$$scope"in E&&n(21,a=E.$$scope)},t.$$.update=()=>{t.$$.dirty&1024&&n(5,i=[c,...u])},[d,h,f,p,m,i,v,w,b,s,u,y,O,C,_,I,o,K,L,k,N,a]}class dN extends Je{constructor(e){super();Ye(this,e,hN,uN,Ge,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getSelectedIndex:14,getElement:15})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getSelectedIndex(){return this.$$.ctx[14]}get getElement(){return this.$$.ctx[15]}}Gt({class:"mdc-menu__selection-group-icon",component:$M});/**
 * @license
 * Copyright 2021 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Br;(function(t){t.PROCESSING="mdc-switch--processing",t.SELECTED="mdc-switch--selected",t.UNSELECTED="mdc-switch--unselected"})(Br||(Br={}));var eb;(function(t){t.RIPPLE=".mdc-switch__ripple"})(eb||(eb={}));/**
 * @license
 * Copyright 2021 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function fN(t,e,n){var i=pN(t,e),r=i.getObservers(e);return r.push(n),function(){r.splice(r.indexOf(n),1)}}var Oc=new WeakMap;function pN(t,e){var n=new Map;Oc.has(t)||Oc.set(t,{isEnabled:!0,getObservers:function(c){var u=n.get(c)||[];return n.has(c)||n.set(c,u),u},installedProperties:new Set});var i=Oc.get(t);if(i.installedProperties.has(e))return i;var r=mN(t,e)||{configurable:!0,enumerable:!0,value:t[e],writable:!0},s=bt({},r),o=r.get,a=r.set;if("value"in r){delete s.value,delete s.writable;var l=r.value;o=function(){return l},r.writable&&(a=function(c){l=c})}return o&&(s.get=function(){return o.call(this)}),a&&(s.set=function(c){var u,h,d=o?o.call(this):c;if(a.call(this,c),i.isEnabled&&(!o||c!==d))try{for(var f=qn(i.getObservers(e)),p=f.next();!p.done;p=f.next()){var g=p.value;g(c,d)}}catch(m){u={error:m}}finally{try{p&&!p.done&&(h=f.return)&&h.call(f)}finally{if(u)throw u.error}}}),i.installedProperties.add(e),Object.defineProperty(t,e,s),i}function mN(t,e){for(var n=t,i;n&&(i=Object.getOwnPropertyDescriptor(n,e),!i);)n=Object.getPrototypeOf(n);return i}function gN(t,e){var n=Oc.get(t);n&&(n.isEnabled=e)}/**
 * @license
 * Copyright 2021 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _N=function(t){wn(e,t);function e(n){var i=t.call(this,n)||this;return i.unobserves=new Set,i}return e.prototype.destroy=function(){t.prototype.destroy.call(this),this.unobserve()},e.prototype.observe=function(n,i){var r,s,o=this,a=[];try{for(var l=qn(Object.keys(i)),c=l.next();!c.done;c=l.next()){var u=c.value,h=i[u].bind(this);a.push(this.observeProperty(n,u,h))}}catch(f){r={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}var d=function(){var f,p;try{for(var g=qn(a),m=g.next();!m.done;m=g.next()){var v=m.value;v()}}catch(w){f={error:w}}finally{try{m&&!m.done&&(p=g.return)&&p.call(g)}finally{if(f)throw f.error}}o.unobserves.delete(d)};return this.unobserves.add(d),d},e.prototype.observeProperty=function(n,i,r){return fN(n,i,r)},e.prototype.setObserversEnabled=function(n,i){gN(n,i)},e.prototype.unobserve=function(){var n,i;try{for(var r=qn(ok([],sk(this.unobserves))),s=r.next();!s.done;s=r.next()){var o=s.value;o()}}catch(a){n={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},e}(Yn);/**
 * @license
 * Copyright 2021 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var vN=function(t){wn(e,t);function e(n){var i=t.call(this,n)||this;return i.handleClick=i.handleClick.bind(i),i}return e.prototype.init=function(){this.observe(this.adapter.state,{disabled:this.stopProcessingIfDisabled,processing:this.stopProcessingIfDisabled})},e.prototype.handleClick=function(){this.adapter.state.disabled||(this.adapter.state.selected=!this.adapter.state.selected)},e.prototype.stopProcessingIfDisabled=function(){this.adapter.state.disabled&&(this.adapter.state.processing=!1)},e}(_N),yN=function(t){wn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(){t.prototype.init.call(this),this.observe(this.adapter.state,{disabled:this.onDisabledChange,processing:this.onProcessingChange,selected:this.onSelectedChange})},e.prototype.initFromDOM=function(){this.setObserversEnabled(this.adapter.state,!1),this.adapter.state.selected=this.adapter.hasClass(Br.SELECTED),this.onSelectedChange(),this.adapter.state.disabled=this.adapter.isDisabled(),this.adapter.state.processing=this.adapter.hasClass(Br.PROCESSING),this.setObserversEnabled(this.adapter.state,!0),this.stopProcessingIfDisabled()},e.prototype.onDisabledChange=function(){this.adapter.setDisabled(this.adapter.state.disabled)},e.prototype.onProcessingChange=function(){this.toggleClass(this.adapter.state.processing,Br.PROCESSING)},e.prototype.onSelectedChange=function(){this.adapter.setAriaChecked(String(this.adapter.state.selected)),this.toggleClass(this.adapter.state.selected,Br.SELECTED),this.toggleClass(!this.adapter.state.selected,Br.UNSELECTED)},e.prototype.toggleClass=function(n,i){n?this.adapter.addClass(i):this.adapter.removeClass(i)},e}(vN);function tb(t){let e,n,i,r,s,o,a,l,c,u,h=[{class:a=ge({[t[7]]:!0,"mdc-switch__icons":!0})},kt(t[18],"icons$")],d={};for(let f=0;f<h.length;f+=1)d=x(d,h[f]);return{c(){e=_e("div"),n=vn("svg"),i=vn("path"),r=Xe(),s=vn("svg"),o=vn("path"),this.h()},l(f){e=ve(f,"DIV",{class:!0});var p=re(e);n=Rn(p,"svg",{class:!0,viewBox:!0});var g=re(n);i=Rn(g,"path",{d:!0}),re(i).forEach(M),g.forEach(M),r=Qe(p),s=Rn(p,"svg",{class:!0,viewBox:!0});var m=re(s);o=Rn(m,"path",{d:!0}),re(o).forEach(M),m.forEach(M),p.forEach(M),this.h()},h(){ee(i,"d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"),ee(n,"class","mdc-switch__icon mdc-switch__icon--on"),ee(n,"viewBox","0 0 24 24"),ee(o,"d","M20 13H4v-2h16v2z"),ee(s,"class","mdc-switch__icon mdc-switch__icon--off"),ee(s,"viewBox","0 0 24 24"),ce(e,d)},m(f,p){$(f,e,p),me(e,n),me(n,i),me(e,r),me(e,s),me(s,o),c||(u=oe(l=dt.call(null,e,t[6])),c=!0)},p(f,p){ce(e,d=Ae(h,[p[0]&128&&a!==(a=ge({[f[7]]:!0,"mdc-switch__icons":!0}))&&{class:a},p[0]&262144&&kt(f[18],"icons$")])),l&&We(l.update)&&p[0]&64&&l.update.call(null,f[6])},d(f){f&&M(e),c=!1,u()}}}function bN(t){let e,n,i,r,s,o,a,l,c,u,h,d,f,p,g,m,v=t[5]&&tb(t),w=[{class:h=ge(at({[t[3]]:!0,"mdc-switch":!0,"mdc-switch--unselected":!t[9],"mdc-switch--selected":t[9],"mdc-switch--processing":t[1],"smui-switch--color-secondary":t[4]==="secondary"},t[11]))},{type:"button"},{role:"switch"},{"aria-checked":d=t[9]?"true":"false"},{disabled:t[0]},t[15],Yi(t[18],["icons$"])],b={};for(let y=0;y<w.length;y+=1)b=x(b,w[y]);return{c(){e=_e("button"),n=_e("div"),i=Xe(),r=_e("div"),s=_e("div"),o=_e("div"),a=_e("div"),l=Xe(),c=_e("div"),u=Xe(),v&&v.c(),this.h()},l(y){e=ve(y,"BUTTON",{class:!0,type:!0,role:!0,"aria-checked":!0});var O=re(e);n=ve(O,"DIV",{class:!0}),re(n).forEach(M),i=Qe(O),r=ve(O,"DIV",{class:!0});var C=re(r);s=ve(C,"DIV",{class:!0});var _=re(s);o=ve(_,"DIV",{class:!0});var I=re(o);a=ve(I,"DIV",{class:!0}),re(a).forEach(M),I.forEach(M),l=Qe(_),c=ve(_,"DIV",{class:!0}),re(c).forEach(M),u=Qe(_),v&&v.l(_),_.forEach(M),C.forEach(M),O.forEach(M),this.h()},h(){ee(n,"class","mdc-switch__track"),ee(a,"class","mdc-elevation-overlay"),ee(o,"class","mdc-switch__shadow"),ee(c,"class","mdc-switch__ripple"),ee(s,"class","mdc-switch__handle"),ee(r,"class","mdc-switch__handle-track"),ce(e,b)},m(y,O){$(y,e,O),me(e,n),me(e,i),me(e,r),me(r,s),me(s,o),me(o,a),me(s,l),me(s,c),t[27](c),me(s,u),v&&v.m(s,null),e.autofocus&&e.focus(),t[28](e),g||(m=[oe(f=dt.call(null,e,t[2])),oe(t[14].call(null,e)),oe(p=xr.call(null,e,{unbounded:!0,color:t[4],active:t[13],rippleElement:t[12],disabled:t[0],addClass:t[16],removeClass:t[17]})),$e(e,"click",t[29])],g=!0)},p(y,O){y[5]?v?v.p(y,O):(v=tb(y),v.c(),v.m(s,null)):v&&(v.d(1),v=null),ce(e,b=Ae(w,[O[0]&2586&&h!==(h=ge(at({[y[3]]:!0,"mdc-switch":!0,"mdc-switch--unselected":!y[9],"mdc-switch--selected":y[9],"mdc-switch--processing":y[1],"smui-switch--color-secondary":y[4]==="secondary"},y[11])))&&{class:h},{type:"button"},{role:"switch"},O[0]&512&&d!==(d=y[9]?"true":"false")&&{"aria-checked":d},O[0]&1&&{disabled:y[0]},y[15],O[0]&262144&&Yi(y[18],["icons$"])])),f&&We(f.update)&&O[0]&4&&f.update.call(null,y[2]),p&&We(p.update)&&O[0]&12305&&p.update.call(null,{unbounded:!0,color:y[4],active:y[13],rippleElement:y[12],disabled:y[0],addClass:y[16],removeClass:y[17]})},i:Ht,o:Ht,d(y){y&&M(e),t[27](null),v&&v.d(),t[28](null),g=!1,ze(m)}}}function EN(t,e,n){const i=["use","class","disabled","color","group","checked","value","processing","icons","icons$use","icons$class","getId","getElement"];let r=ie(e,i);var s;const o=et(Ue());let a=()=>{};function l(W){return W===a}let{use:c=[]}=e,{class:u=""}=e,{disabled:h=!1}=e,{color:d="primary"}=e,{group:f=a}=e,{checked:p=a}=e,{value:g=null}=e,{processing:m=!1}=e,{icons:v=!0}=e,{icons$use:w=[]}=e,{icons$class:b=""}=e,y,O,C={},_,I=!1,K=(s=un("SMUI:generic:input:props"))!==null&&s!==void 0?s:{},L=l(f)?l(p)?!1:p:f.indexOf(g)!==-1,k={get disabled(){return h},set disabled(W){n(0,h=W)},get processing(){return m},set processing(W){n(1,m=W)},get selected(){return L},set selected(W){n(9,L=W)}},N=p,E=l(f)?[]:[...f],D=L;Ln(()=>{n(10,O=new yN({addClass:X,hasClass:J,isDisabled:()=>h,removeClass:A,setAriaChecked:()=>{},setDisabled:De=>{n(0,h=De)},state:k}));const W={get element(){return R()},get checked(){return L},set checked(De){L!==De&&(k.selected=De,y&&st(y,"SMUISwitch:change",{selected:De,value:g}))},activateRipple(){h||n(13,I=!0)},deactivateRipple(){n(13,I=!1)}};return st(y,"SMUIGenericInput:mount",W),O.init(),O.initFromDOM(),()=>{st(y,"SMUIGenericInput:unmount",W),O.destroy()}});function J(W){return W in C?C[W]:R().classList.contains(W)}function X(W){C[W]||n(11,C[W]=!0,C)}function A(W){(!(W in C)||C[W])&&n(11,C[W]=!1,C)}function S(){return K&&K.id}function R(){return y}function j(W){ue[W?"unshift":"push"](()=>{_=W,n(12,_)})}function Q(W){ue[W?"unshift":"push"](()=>{y=W,n(8,y)})}const he=()=>O&&O.handleClick();return t.$$set=W=>{e=x(x({},e),Ke(W)),n(18,r=ie(e,i)),"use"in W&&n(2,c=W.use),"class"in W&&n(3,u=W.class),"disabled"in W&&n(0,h=W.disabled),"color"in W&&n(4,d=W.color),"group"in W&&n(19,f=W.group),"checked"in W&&n(20,p=W.checked),"value"in W&&n(21,g=W.value),"processing"in W&&n(1,m=W.processing),"icons"in W&&n(5,v=W.icons),"icons$use"in W&&n(6,w=W.icons$use),"icons$class"in W&&n(7,b=W.icons$class)},t.$$.update=()=>{if(t.$$.dirty[0]&121111296){let W=!1;if(!l(f))if(D!==L){const De=f.indexOf(g);L&&De===-1?(f.push(g),n(19,f),n(26,D),n(9,L),n(21,g),n(25,E),n(20,p),n(24,N),n(8,y)):!L&&De!==-1&&(f.splice(De,1),n(19,f),n(26,D),n(9,L),n(21,g),n(25,E),n(20,p),n(24,N),n(8,y)),W=!0}else{const De=E.indexOf(g),be=f.indexOf(g);De>-1&&be===-1?k.selected=!1:be>-1&&De===-1&&(k.selected=!0)}l(p)?D!==L&&(W=!0):p!==L&&(p===N?(n(20,p=L),W=!0):k.selected=p),n(24,N=p),n(25,E=l(f)?[]:[...f]),n(26,D=L),W&&y&&st(y,"SMUISwitch:change",{selected:L,value:g})}},[h,m,c,u,d,v,w,b,y,L,O,C,_,I,o,K,X,A,r,f,p,g,S,R,N,E,D,j,Q,he]}class YB extends Je{constructor(e){super();Ye(this,e,EN,bN,Ge,{use:2,class:3,disabled:0,color:4,group:19,checked:20,value:21,processing:1,icons:5,icons$use:6,icons$class:7,getId:22,getElement:23},null,[-1,-1])}get getId(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}function nb(t,e,n){const i=t.slice();return i[55]=e[n],i[57]=n,i}const IN=t=>({}),ib=t=>({}),wN=t=>({match:t[0]&32768}),rb=t=>({match:t[55]}),TN=t=>({}),sb=t=>({}),CN=t=>({}),ob=t=>({});function SN(t){let e,n,i;const r=[{label:t[6]},{disabled:t[7]},kt(t[27],"textfield$")];function s(a){t[43](a)}let o={};for(let a=0;a<r.length;a+=1)o=x(o,r[a]);return t[1]!==void 0&&(o.value=t[1]),e=new NM({props:o}),ue.push(()=>oi(e,"value",s)),{c(){He(e.$$.fragment)},l(a){nt(e.$$.fragment,a)},m(a,l){Ve(e,a,l),i=!0},p(a,l){const c=l[0]&134217920?Ae(r,[l[0]&64&&{label:a[6]},l[0]&128&&{disabled:a[7]},l[0]&134217728&&ht(kt(a[27],"textfield$"))]):{};!n&&l[0]&2&&(n=!0,c.value=a[1],si(()=>n=!1)),e.$set(c)},i(a){i||(P(e.$$.fragment,a),i=!0)},o(a){F(e.$$.fragment,a),i=!1},d(a){Be(e,a)}}}function AN(t){let e,n,i=t[15],r=[];for(let a=0;a<i.length;a+=1)r[a]=lb(nb(t,i,a));const s=a=>F(r[a],1,1,()=>{r[a]=null});let o=null;return i.length||(o=ab(t)),{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=vt(),o&&o.c()},l(a){for(let l=0;l<r.length;l+=1)r[l].l(a);e=vt(),o&&o.l(a)},m(a,l){for(let c=0;c<r.length;c+=1)r[c].m(a,l);$(a,e,l),o&&o.m(a,l),n=!0},p(a,l){if(l[0]&25396017|l[1]&2097152){i=a[15];let c;for(c=0;c<i.length;c+=1){const u=nb(a,i,c);r[c]?(r[c].p(u,l),P(r[c],1)):(r[c]=lb(u),r[c].c(),P(r[c],1),r[c].m(e.parentNode,e))}for(xt(),c=i.length;c<r.length;c+=1)s(c);Ut(),!i.length&&o?o.p(a,l):i.length?o&&(xt(),F(o,1,1,()=>{o=null}),Ut()):(o=ab(a),o.c(),P(o,1),o.m(e.parentNode,e))}},i(a){if(!n){for(let l=0;l<i.length;l+=1)P(r[l]);n=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)F(r[l]);n=!1},d(a){Hp(r,a),a&&M(e),o&&o.d(a)}}}function kN(t){let e,n;return e=new kc({props:{disabled:!0,$$slots:{default:[UN]},$$scope:{ctx:t}}}),{c(){He(e.$$.fragment)},l(i){nt(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){Be(e,i)}}}function ON(t){let e,n;return e=new kc({props:{disabled:!0,$$slots:{default:[BN]},$$scope:{ctx:t}}}),{c(){He(e.$$.fragment)},l(i){nt(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){Be(e,i)}}}function ab(t){let e,n;return e=new kc({props:{disabled:t[9],$$slots:{default:[MN]},$$scope:{ctx:t}}}),e.$on("SMUI:action",t[49]),{c(){He(e.$$.fragment)},l(i){nt(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[0]&512&&(s.disabled=i[9]),r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){Be(e,i)}}}function RN(t){let e;return{c(){e=Xn("No matches found.")},l(n){e=ri(n,"No matches found.")},m(n,i){$(n,e,i)},d(n){n&&M(e)}}}function LN(t){let e,n;return e=new Ac({props:{$$slots:{default:[RN]},$$scope:{ctx:t}}}),{c(){He(e.$$.fragment)},l(i){nt(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){Be(e,i)}}}function MN(t){let e,n;const i=t[42]["no-matches"],r=we(i,t,t[52],ib),s=r||LN(t);return{c(){s&&s.c(),e=Xe()},l(o){s&&s.l(o),e=Qe(o)},m(o,a){s&&s.m(o,a),$(o,e,a),n=!0},p(o,a){r&&r.p&&(!n||a[1]&2097152)&&Ce(r,i,o,o[52],n?Te(i,o[52],a,IN):Se(o[52]),ib)},i(o){n||(P(s,o),n=!0)},o(o){F(s,o),n=!1},d(o){s&&s.d(o),o&&M(e)}}}function NN(t){let e=t[5](t[55])+"",n;return{c(){n=Xn(e)},l(i){n=ri(i,e)},m(i,r){$(i,n,r)},p(i,r){r[0]&32800&&e!==(e=i[5](i[55])+"")&&ls(n,e)},d(i){i&&M(n)}}}function PN(t){let e,n;return e=new Ac({props:{$$slots:{default:[NN]},$$scope:{ctx:t}}}),{c(){He(e.$$.fragment)},l(i){nt(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[0]&32800|r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){Be(e,i)}}}function DN(t){let e,n;const i=t[42].match,r=we(i,t,t[52],rb),s=r||PN(t);return{c(){s&&s.c(),e=Xe()},l(o){s&&s.l(o),e=Qe(o)},m(o,a){s&&s.m(o,a),$(o,e,a),n=!0},p(o,a){r?r.p&&(!n||a[0]&32768|a[1]&2097152)&&Ce(r,i,o,o[52],n?Te(i,o[52],a,wN):Se(o[52]),rb):s&&s.p&&(!n||a[0]&32800)&&s.p(o,n?a:[-1,-1])},i(o){n||(P(s,o),n=!0)},o(o){F(s,o),n=!1},d(o){s&&s.d(o),o&&M(e)}}}function lb(t){let e,n;function i(){return t[47](t[57])}function r(){return t[48](t[55])}return e=new kc({props:{disabled:t[4](t[55]),selected:t[55]===t[0],$$slots:{default:[DN]},$$scope:{ctx:t}}}),e.$on("mouseenter",i),e.$on("SMUI:action",r),{c(){He(e.$$.fragment)},l(s){nt(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){t=s;const a={};o[0]&32784&&(a.disabled=t[4](t[55])),o[0]&32769&&(a.selected=t[55]===t[0]),o[0]&32800|o[1]&2097152&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){Be(e,s)}}}function FN(t){let e;return{c(){e=Xn("Error while fetching suggestions.")},l(n){e=ri(n,"Error while fetching suggestions.")},m(n,i){$(n,e,i)},d(n){n&&M(e)}}}function xN(t){let e,n;return e=new Ac({props:{$$slots:{default:[FN]},$$scope:{ctx:t}}}),{c(){He(e.$$.fragment)},l(i){nt(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){Be(e,i)}}}function UN(t){let e;const n=t[42].error,i=we(n,t,t[52],sb),r=i||xN(t);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,o){r&&r.m(s,o),e=!0},p(s,o){i&&i.p&&(!e||o[1]&2097152)&&Ce(i,n,s,s[52],e?Te(n,s[52],o,TN):Se(s[52]),sb)},i(s){e||(P(r,s),e=!0)},o(s){F(r,s),e=!1},d(s){r&&r.d(s)}}}function jN(t){let e;return{c(){e=Xn("Loading...")},l(n){e=ri(n,"Loading...")},m(n,i){$(n,e,i)},d(n){n&&M(e)}}}function VN(t){let e,n;return e=new Ac({props:{$$slots:{default:[jN]},$$scope:{ctx:t}}}),{c(){He(e.$$.fragment)},l(i){nt(e.$$.fragment,i)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){Be(e,i)}}}function BN(t){let e;const n=t[42].loading,i=we(n,t,t[52],ob),r=i||VN(t);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,o){r&&r.m(s,o),e=!0},p(s,o){i&&i.p&&(!e||o[1]&2097152)&&Ce(i,n,s,s[52],e?Te(n,s[52],o,CN):Se(s[52]),ob)},i(s){e||(P(r,s),e=!0)},o(s){F(r,s),e=!1},d(s){r&&r.d(s)}}}function HN(t){let e,n,i,r;const s=[ON,kN,AN],o=[];function a(l,c){return l[13]?0:l[19]?1:2}return e=a(t),n=o[e]=s[e](t),{c(){n.c(),i=vt()},l(l){n.l(l),i=vt()},m(l,c){o[e].m(l,c),$(l,i,c),r=!0},p(l,c){let u=e;e=a(l),e===u?o[e].p(l,c):(xt(),F(o[u],1,1,()=>{o[u]=null}),Ut(),n=o[e],n?n.p(l,c):(n=o[e]=s[e](l),n.c()),P(n,1),n.m(i.parentNode,i))},i(l){r||(P(n),r=!0)},o(l){F(n),r=!1},d(l){o[e].d(l),l&&M(i)}}}function qN(t){let e,n;const i=[kt(t[27],"list$")];let r={$$slots:{default:[HN]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)r=x(r,i[s]);return e=new WM({props:r}),{c(){He(e.$$.fragment)},l(s){nt(e.$$.fragment,s)},m(s,o){Ve(e,s,o),n=!0},p(s,o){const a=o[0]&134217728?Ae(i,[ht(kt(s[27],"list$"))]):{};o[0]&762673|o[1]&2097152&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),n=!1},d(s){Be(e,s)}}}function WN(t){let e,n,i,r,s,o,a,l,c,u;const h=t[42].default,d=we(h,t,t[52],null),f=d||SN(t),p=[{class:ge({[t[10]]:!0,"smui-autocomplete__menu":!0})},{managed:!0},{open:t[20]},{anchor:t[11]},{anchorCorner:t[12]},kt(t[27],"menu$")];function g(b){t[50](b)}let m={$$slots:{default:[qN]},$$scope:{ctx:t}};for(let b=0;b<p.length;b+=1)m=x(m,p[b]);t[17]!==void 0&&(m.anchorElement=t[17]),r=new dN({props:m}),ue.push(()=>oi(r,"anchorElement",g)),r.$on("SMUIList:mount",t[22]);let v=[{class:o=ge({[t[3]]:!0,"smui-autocomplete":!0})},Yi(t[27],["menu$","textfield$","list$"])],w={};for(let b=0;b<v.length;b+=1)w=x(w,v[b]);return{c(){e=_e("div"),n=_e("div"),f&&f.c(),i=Xe(),He(r.$$.fragment),this.h()},l(b){e=ve(b,"DIV",{class:!0});var y=re(e);n=ve(y,"DIV",{});var O=re(n);f&&f.l(O),O.forEach(M),i=Qe(y),nt(r.$$.fragment,y),y.forEach(M),this.h()},h(){ce(e,w)},m(b,y){$(b,e,y),me(e,n),f&&f.m(n,null),t[44](n),me(e,i),Ve(r,e,null),t[51](e),l=!0,c||(u=[$e(n,"focusin",t[45]),$e(n,"focusout",t[26]),$e(n,"input",t[46]),$e(n,"keydown",t[25],!0),oe(lN.call(null,e)),oe(a=dt.call(null,e,t[2])),oe(t[21].call(null,e))],c=!0)},p(b,y){d?d.p&&(!l||y[1]&2097152)&&Ce(d,h,b,b[52],l?Te(h,b[52],y,null):Se(b[52]),null):f&&f.p&&(!l||y[0]&134217922)&&f.p(b,l?y:[-1,-1]);const O=y[0]&135273472?Ae(p,[y[0]&1024&&{class:ge({[b[10]]:!0,"smui-autocomplete__menu":!0})},p[1],y[0]&1048576&&{open:b[20]},y[0]&2048&&{anchor:b[11]},y[0]&4096&&{anchorCorner:b[12]},y[0]&134217728&&ht(kt(b[27],"menu$"))]):{};y[0]&134980401|y[1]&2097152&&(O.$$scope={dirty:y,ctx:b}),!s&&y[0]&131072&&(s=!0,O.anchorElement=b[17],si(()=>s=!1)),r.$set(O),ce(e,w=Ae(v,[(!l||y[0]&8&&o!==(o=ge({[b[3]]:!0,"smui-autocomplete":!0})))&&{class:o},y[0]&134217728&&Yi(b[27],["menu$","textfield$","list$"])])),a&&We(a.update)&&y[0]&4&&a.update.call(null,b[2])},i(b){l||(P(f,b),P(r.$$.fragment,b),l=!0)},o(b){F(f,b),F(r.$$.fragment,b),l=!1},d(b){b&&M(e),f&&f.d(b),t[44](null),Be(r),t[51](null),c=!1,ze(u)}}}function GN(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function zN(t,e,n){let i;const r=["use","class","options","value","getOptionDisabled","getOptionLabel","text","label","disabled","toggle","combobox","clearOnBlur","selectOnExactMatch","showMenuWithNoInput","noMatchesActionDisabled","search","menu$class","menu$anchor","menu$anchorCorner","focus","blur","getElement"];let s=ie(e,r),{$$slots:o={},$$scope:a}=e;const l=et(Ue());let{use:c=[]}=e,{class:u=""}=e,{options:h=[]}=e,{value:d=void 0}=e,{getOptionDisabled:f=()=>!1}=e,{getOptionLabel:p=V=>V==null?"":`${V}`}=e,{text:g=p(d)}=e,{label:m=void 0}=e,{disabled:v=!1}=e,{toggle:w=!1}=e,{combobox:b=!1}=e,{clearOnBlur:y=!b}=e,{selectOnExactMatch:O=!0}=e,{showMenuWithNoInput:C=!0}=e,{noMatchesActionDisabled:_=!0}=e,{search:I=async V=>{const ot=V.toLowerCase(),$n=typeof h=="function"?await h():h||[];if(ot==="")return $n;const mi=$n.filter(dr=>p(dr).toLowerCase().includes(ot));return mi.sort((dr,H)=>{const le=p(dr).toLowerCase(),se=p(H).toLowerCase();return le.startsWith(ot)&&!se.startsWith(ot)?-1:se.startsWith(ot)&&!le.startsWith(ot)?1:0}),mi}}=e,{menu$class:K=""}=e,{menu$anchor:L=!1}=e,{menu$anchorCorner:k="BOTTOM_START"}=e,N,E,D=!1,J=!1,X=!1,A,S=[],R=-1,j,Q,he=d,W;function De(V){A||n(37,A=V.detail)}function be(V,ot=!0){ot&&n(1,g=p(V)),n(0,d=V),ot||n(40,he=V),st(N,"SMUIAutocomplete:selected",V)}function Ie(V,ot=!0){ot&&n(1,g=""),n(0,d=void 0),ot||n(40,he=void 0),st(N,"SMUIAutocomplete:deselected",V)}function Oe(V){V===d?Ie(V):be(V)}function gt(){return A?A.getOrderedList().filter(V=>!V.disabled):[]}function G(V){if(!(b&&!S.length)){if(V.key==="ArrowDown")V.preventDefault(),R===-1||R===gt().length-1?n(16,R=0):n(16,R++,R);else if(V.key==="ArrowUp")V.preventDefault(),R===-1||R===0?n(16,R=gt().length-1):n(16,R--,R);else if(V.key==="Enter"){V.preventDefault();const ot=gt();j&&(ot[R]&&ot[R].action(V),n(16,R=-1))}}}async function fe(V){V.relatedTarget&&gt().map(ot=>ot.element).indexOf(V.relatedTarget)!==-1||(n(16,R=-1),n(14,X=!1),y&&d==null&&n(1,g=""))}function Dt(){if(E){const V=E.querySelector("input.mdc-text-field__input");V&&V.focus()}}function Ot(){if(E){const V=E.querySelector("input.mdc-text-field__input");V&&V.blur()}}function q(){return N}function pe(V){g=V,n(1,g),n(29,b),n(40,he),n(0,d),n(5,p)}function pt(V){ue[V?"unshift":"push"](()=>{E=V,n(18,E)})}const Xt=()=>{n(14,X=!0)},On=()=>{n(16,R=-1)},ii=V=>{n(16,R=V)},po=V=>w?Oe(V):be(V),hr=V=>st(N,"SMUIAutocomplete:noMatchesAction",V);function as(V){N=V,n(17,N)}function Kn(V){ue[V?"unshift":"push"](()=>{N=V,n(17,N)})}return t.$$set=V=>{e=x(x({},e),Ke(V)),n(27,s=ie(e,r)),"use"in V&&n(2,c=V.use),"class"in V&&n(3,u=V.class),"options"in V&&n(28,h=V.options),"value"in V&&n(0,d=V.value),"getOptionDisabled"in V&&n(4,f=V.getOptionDisabled),"getOptionLabel"in V&&n(5,p=V.getOptionLabel),"text"in V&&n(1,g=V.text),"label"in V&&n(6,m=V.label),"disabled"in V&&n(7,v=V.disabled),"toggle"in V&&n(8,w=V.toggle),"combobox"in V&&n(29,b=V.combobox),"clearOnBlur"in V&&n(30,y=V.clearOnBlur),"selectOnExactMatch"in V&&n(31,O=V.selectOnExactMatch),"showMenuWithNoInput"in V&&n(32,C=V.showMenuWithNoInput),"noMatchesActionDisabled"in V&&n(9,_=V.noMatchesActionDisabled),"search"in V&&n(33,I=V.search),"menu$class"in V&&n(10,K=V.menu$class),"menu$anchor"in V&&n(11,L=V.menu$anchor),"menu$anchorCorner"in V&&n(12,k=V.menu$anchorCorner),"$$scope"in V&&n(52,a=V.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&536870947|t.$$.dirty[1]&512&&(!b&&he!==d?(n(1,g=p(d)),n(40,he=d)):b&&n(0,d=g)),t.$$.dirty[0]&536903715|t.$$.dirty[1]&261&&Q!==g&&(!b&&d!=null&&p(d)!==g&&Ie(d,!1),(async()=>{n(13,D=!0),n(19,J=!1);try{const V=await I(g);if(V!==!1&&(n(15,S=V),O)){const ot=S.find($n=>p($n)===g);ot&&d!==ot&&be(ot)}}catch{n(19,J=!0)}n(13,D=!1)})(),n(39,Q=g)),t.$$.dirty[0]&536928259|t.$$.dirty[1]&2&&n(20,i=X&&(g!==""||C)&&(D||!b&&!(S.length===1&&S[0]===d)||b&&!!S.length&&!(S.length===1&&S[0]===d))),t.$$.dirty[0]&65536|t.$$.dirty[1]&1216&&W!==R){const V=gt();R===-1?n(38,j=void 0):(n(38,j=V[R]),j&&(n(38,j.activated=!0,j),GN(j.element)||j.element.scrollIntoView({block:"end",inline:"nearest"}))),V.forEach((ot,$n)=>{$n!==R&&(ot.activated=!1)}),A&&A.getOrderedList().forEach(ot=>{ot.tabindex=-1}),n(41,W=R)}},[d,g,c,u,f,p,m,v,w,_,K,L,k,D,X,S,R,N,E,J,i,l,De,be,Oe,G,fe,s,h,b,y,O,C,I,Dt,Ot,q,A,j,Q,he,W,o,pe,pt,Xt,On,ii,po,hr,as,Kn,a]}class JB extends Je{constructor(e){super();Ye(this,e,zN,WN,Ge,{use:2,class:3,options:28,value:0,getOptionDisabled:4,getOptionLabel:5,text:1,label:6,disabled:7,toggle:8,combobox:29,clearOnBlur:30,selectOnExactMatch:31,showMenuWithNoInput:32,noMatchesActionDisabled:9,search:33,menu$class:10,menu$anchor:11,menu$anchorCorner:12,focus:34,blur:35,getElement:36},null,[-1,-1])}get focus(){return this.$$.ctx[34]}get blur(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var xn={ANIMATE:"mdc-drawer--animate",CLOSING:"mdc-drawer--closing",DISMISSIBLE:"mdc-drawer--dismissible",MODAL:"mdc-drawer--modal",OPEN:"mdc-drawer--open",OPENING:"mdc-drawer--opening",ROOT:"mdc-drawer"},KN={APP_CONTENT_SELECTOR:".mdc-drawer-app-content",CLOSE_EVENT:"MDCDrawer:closed",OPEN_EVENT:"MDCDrawer:opened",SCRIM_SELECTOR:".mdc-drawer-scrim",LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",LIST_ITEM_ACTIVATED_SELECTOR:".mdc-list-item--activated,.mdc-deprecated-list-item--activated"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var cb=function(t){wn(e,t);function e(n){var i=t.call(this,bt(bt({},e.defaultAdapter),n))||this;return i.animationFrame=0,i.animationTimer=0,i}return Object.defineProperty(e,"strings",{get:function(){return KN},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return xn},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},elementHasClass:function(){return!1},notifyClose:function(){},notifyOpen:function(){},saveFocus:function(){},restoreFocus:function(){},focusActiveNavigationItem:function(){},trapFocus:function(){},releaseFocus:function(){}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.animationTimer&&clearTimeout(this.animationTimer)},e.prototype.open=function(){var n=this;this.isOpen()||this.isOpening()||this.isClosing()||(this.adapter.addClass(xn.OPEN),this.adapter.addClass(xn.ANIMATE),this.runNextAnimationFrame(function(){n.adapter.addClass(xn.OPENING)}),this.adapter.saveFocus())},e.prototype.close=function(){!this.isOpen()||this.isOpening()||this.isClosing()||this.adapter.addClass(xn.CLOSING)},e.prototype.isOpen=function(){return this.adapter.hasClass(xn.OPEN)},e.prototype.isOpening=function(){return this.adapter.hasClass(xn.OPENING)||this.adapter.hasClass(xn.ANIMATE)},e.prototype.isClosing=function(){return this.adapter.hasClass(xn.CLOSING)},e.prototype.handleKeydown=function(n){var i=n.keyCode,r=n.key,s=r==="Escape"||i===27;s&&this.close()},e.prototype.handleTransitionEnd=function(n){var i=xn.OPENING,r=xn.CLOSING,s=xn.OPEN,o=xn.ANIMATE,a=xn.ROOT,l=this.isElement(n.target)&&this.adapter.elementHasClass(n.target,a);!l||(this.isClosing()?(this.adapter.removeClass(s),this.closed(),this.adapter.restoreFocus(),this.adapter.notifyClose()):(this.adapter.focusActiveNavigationItem(),this.opened(),this.adapter.notifyOpen()),this.adapter.removeClass(o),this.adapter.removeClass(i),this.adapter.removeClass(r))},e.prototype.opened=function(){},e.prototype.closed=function(){},e.prototype.runNextAnimationFrame=function(n){var i=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){i.animationFrame=0,clearTimeout(i.animationTimer),i.animationTimer=setTimeout(n,0)})},e.prototype.isElement=function(n){return Boolean(n.classList)},e}(Yn);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var XN=function(t){wn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.handleScrimClick=function(){this.close()},e.prototype.opened=function(){this.adapter.trapFocus()},e.prototype.closed=function(){this.adapter.releaseFocus()},e}(cb);function QN(t){let e,n,i,r,s,o;const a=t[15].default,l=we(a,t,t[14],null);let c=[{class:n=ge(at({[t[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":t[2]==="dismissible","mdc-drawer--modal":t[2]==="modal","smui-drawer__absolute":t[2]==="modal"&&!t[3]},t[6]))},t[8]],u={};for(let h=0;h<c.length;h+=1)u=x(u,c[h]);return{c(){e=_e("aside"),l&&l.c(),this.h()},l(h){e=ve(h,"ASIDE",{class:!0});var d=re(e);l&&l.l(d),d.forEach(M),this.h()},h(){ce(e,u)},m(h,d){$(h,e,d),l&&l.m(e,null),t[16](e),r=!0,s||(o=[oe(i=dt.call(null,e,t[0])),oe(t[7].call(null,e)),$e(e,"keydown",t[17]),$e(e,"transitionend",t[18])],s=!0)},p(h,[d]){l&&l.p&&(!r||d&16384)&&Ce(l,a,h,h[14],r?Te(a,h[14],d,null):Se(h[14]),null),ce(e,u=Ae(c,[(!r||d&78&&n!==(n=ge(at({[h[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":h[2]==="dismissible","mdc-drawer--modal":h[2]==="modal","smui-drawer__absolute":h[2]==="modal"&&!h[3]},h[6]))))&&{class:n},d&256&&h[8]])),i&&We(i.update)&&d&1&&i.update.call(null,h[0])},i(h){r||(P(l,h),r=!0)},o(h){F(l,h),r=!1},d(h){h&&M(e),l&&l.d(h),t[16](null),s=!1,ze(o)}}}function YN(t,e,n){const i=["use","class","variant","open","fixed","setOpen","isOpen","getElement"];let r=ie(e,i),{$$slots:s={},$$scope:o}=e;const{FocusTrap:a}=ER,l=et(Ue());let{use:c=[]}=e,{class:u=""}=e,{variant:h=void 0}=e,{open:d=!1}=e,{fixed:f=!0}=e,p,g,m={},v=null,w,b=!1;qt("SMUI:list:nav",!0),qt("SMUI:list:item:nav",!0),qt("SMUI:list:wrapFocus",!0);let y=h;Ln(()=>{w=new a(p,{skipInitialFocus:!0}),n(4,g=O()),g&&g.init()}),pr(()=>{g&&g.destroy(),b&&b.removeEventListener("SMUIDrawerScrim:click",K)});function O(){var X,A;b&&b.removeEventListener("SMUIDrawerScrim:click",K),h==="modal"&&(b=(A=(X=p.parentNode)===null||X===void 0?void 0:X.querySelector(".mdc-drawer-scrim"))!==null&&A!==void 0?A:!1,b&&b.addEventListener("SMUIDrawerScrim:click",K));const S=h==="dismissible"?cb:h==="modal"?XN:void 0;return S?new S({addClass:_,removeClass:I,hasClass:C,elementHasClass:(R,j)=>R.classList.contains(j),saveFocus:()=>v=document.activeElement,restoreFocus:()=>{v&&"focus"in v&&p.contains(document.activeElement)&&v.focus()},focusActiveNavigationItem:()=>{const R=p.querySelector(".mdc-list-item--activated,.mdc-deprecated-list-item--activated");R&&R.focus()},notifyClose:()=>{n(9,d=!1),st(p,"SMUIDrawer:closed",void 0,void 0,!0)},notifyOpen:()=>{n(9,d=!0),st(p,"SMUIDrawer:opened",void 0,void 0,!0)},trapFocus:()=>w.trapFocus(),releaseFocus:()=>w.releaseFocus()}):void 0}function C(X){return X in m?m[X]:N().classList.contains(X)}function _(X){m[X]||n(6,m[X]=!0,m)}function I(X){(!(X in m)||m[X])&&n(6,m[X]=!1,m)}function K(){g&&"handleScrimClick"in g&&g.handleScrimClick()}function L(X){n(9,d=X)}function k(){return d}function N(){return p}function E(X){ue[X?"unshift":"push"](()=>{p=X,n(5,p)})}const D=X=>g&&g.handleKeydown(X),J=X=>g&&g.handleTransitionEnd(X);return t.$$set=X=>{e=x(x({},e),Ke(X)),n(8,r=ie(e,i)),"use"in X&&n(0,c=X.use),"class"in X&&n(1,u=X.class),"variant"in X&&n(2,h=X.variant),"open"in X&&n(9,d=X.open),"fixed"in X&&n(3,f=X.fixed),"$$scope"in X&&n(14,o=X.$$scope)},t.$$.update=()=>{t.$$.dirty&8212&&y!==h&&(n(13,y=h),g&&g.destroy(),n(6,m={}),n(4,g=O()),g&&g.init()),t.$$.dirty&528&&g&&g.isOpen()!==d&&(d?g.open():g.close())},[c,u,h,f,g,p,m,l,r,d,L,k,N,y,o,s,E,D,J]}class ZB extends Je{constructor(e){super();Ye(this,e,YN,QN,Ge,{use:0,class:1,variant:2,open:9,fixed:3,setOpen:10,isOpen:11,getElement:12})}get setOpen(){return this.$$.ctx[10]}get isOpen(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}var $B=Gt({class:"mdc-drawer-app-content",component:Ci}),e4=Gt({class:"mdc-drawer__content",component:Ci});Gt({class:"mdc-drawer__header",component:Ci});Gt({class:"mdc-drawer__title",component:rL});Gt({class:"mdc-drawer__subtitle",component:sL});Gt({class:"smui-card__content",component:Ci});Gt({class:"mdc-card__media-content",component:Ci});Gt({class:"mdc-card__action-buttons",component:Ci});Gt({class:"mdc-card__action-icons",component:Ci});const ub="@firebase/database",hb="0.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let db="";function JN(t){db=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Yt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:vo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ai(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=function(t){try{if(typeof window!="undefined"&&typeof window[t]!="undefined"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ZN(e)}}catch{}return new $N},Hr=fb("localStorage"),Kd=fb("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new cl("@firebase/database"),eP=function(){let t=1;return function(){return t++}}(),pb=function(t){const e=C1(t),n=new E1;n.update(e);const i=n.digest();return Nu.encodeByteArray(i)},pa=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=pa.apply(null,i):typeof i=="object"?e+=Yt(i):e+=i,e+=" "}return e};let qr=null,mb=!0;const tP=function(t,e){z(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ws.logLevel=Ze.VERBOSE,qr=Ws.log.bind(Ws),e&&Kd.set("logging_enabled",!0)):typeof t=="function"?qr=t:(qr=null,Kd.remove("logging_enabled"))},ln=function(...t){if(mb===!0&&(mb=!1,qr===null&&Kd.get("logging_enabled")===!0&&tP(!0)),qr){const e=pa.apply(null,t);qr(e)}},ma=function(t){return function(...e){ln(t,...e)}},Xd=function(...t){const e="FIREBASE INTERNAL ERROR: "+pa(...t);Ws.error(e)},Wr=function(...t){const e=`FIREBASE FATAL ERROR: ${pa(...t)}`;throw Ws.error(e),new Error(e)},Gn=function(...t){const e="FIREBASE WARNING: "+pa(...t);Ws.warn(e)},nP=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Gn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Rc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},iP=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Gs="[MIN_NAME]",Gr="[MAX_NAME]",zr=function(t,e){if(t===e)return 0;if(t===Gs||e===Gr)return-1;if(e===Gs||t===Gr)return 1;{const n=vb(t),i=vb(e);return n!==null?i!==null?n-i==0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},rP=function(t,e){return t===e?0:t<e?-1:1},ga=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Yt(e))},Qd=function(t){if(typeof t!="object"||t===null)return Yt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Yt(e[i]),n+=":",n+=Qd(t[e[i]]);return n+="}",n},gb=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function _n(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const _b=function(t){z(!Rc(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,o,a,l;t===0?(s=0,o=0,r=1/t==-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},sP=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oP=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function aP(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const lP=new RegExp("^-?(0*)\\d{1,10}$"),cP=-2147483648,uP=2147483647,vb=function(t){if(lP.test(t)){const e=Number(t);if(e>=cP&&e<=uP)return e}return null},zs=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Gn("Exception was thrown by user callback.",n),e},Math.floor(0))}},hP=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},_a=function(t,e){const n=setTimeout(t,e);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Gn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ln("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gn(e)}}class Yd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Yd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="5",yb="v",bb="s",Eb="r",Ib="f",wb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Tb="ls",pP="p",Zd="ac",Cb="websocket",Sb="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,n,i,r,s=!1,o="",a=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function gP(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Ab(t,e,n){z(typeof e=="string","typeof type must == string"),z(typeof n=="object","typeof params must == object");let i;if(e===Cb)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Sb)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);gP(t)&&(n.ns=t.namespace);const r=[];return _n(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.counters_={}}incrementCounter(e,n=1){ai(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return d1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d={},ef={};function tf(t){const e=t.toString();return $d[e]||($d[e]=new _P),$d[e]}function vP(t,e){const n=t.toString();return ef[n]||(ef[n]=e()),ef[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&zs(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="start",bP="close",EP="pLPCommand",IP="pRTLPCB",Ob="id",Rb="pw",Lb="ser",wP="cb",TP="seg",CP="ts",SP="d",AP="dframe",Mb=1870,Nb=30,kP=Mb-Nb,OP=25e3,RP=3e4;class Ks{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ma(e),this.stats_=tf(n),this.urlFn=l=>(this.appCheckToken&&(l[Zd]=this.appCheckToken),Ab(n,Sb,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new yP(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(RP)),iP(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nf((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===kb)this.id=a,this.password=l;else if(o===bP)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[kb]="t",i[Lb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[wP]=this.scriptTagHolder.uniqueCallbackIdentifier),i[yb]=Jd,this.transportSessionId&&(i[bb]=this.transportSessionId),this.lastSessionId&&(i[Tb]=this.lastSessionId),this.applicationId&&(i[pP]=this.applicationId),this.appCheckToken&&(i[Zd]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&wb.test(location.hostname)&&(i[Eb]=Ib);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ks.forceAllow_=!0}static forceDisallow(){Ks.forceDisallow_=!0}static isAvailable(){return Ks.forceAllow_?!0:!Ks.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!sP()&&!oP()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Yt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=h1(n),r=gb(i,kP);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[AP]="t",i[Ob]=e,i[Rb]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Yt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class nf{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=eP(),window[EP+this.uniqueCallbackIdentifier]=e,window[IP+this.uniqueCallbackIdentifier]=n,this.myIFrame=nf.createIFrame_();let s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,"javascript:".length)==="javascript:"){const a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ln("frame writing exception"),a.stack&&ln(a.stack),ln(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ln("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Ob]=this.myID,e[Rb]=this.myPW,e[Lb]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Nb+i.length<=Mb;){const o=this.pendingSegs.shift();i=i+"&"+TP+r+"="+o.seg+"&"+CP+r+"="+o.ts+"&"+SP+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(OP)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{ln("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=16384,MP=45e3;let Lc=null;typeof MozWebSocket!="undefined"?Lc=MozWebSocket:typeof WebSocket!="undefined"&&(Lc=WebSocket);class ei{constructor(e,n,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ma(this.connId),this.stats_=tf(n),this.connURL=ei.connectionURL_(n,o,a,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r){const s={};return s[yb]=Jd,typeof location!="undefined"&&location.hostname&&wb.test(location.hostname)&&(s[Eb]=Ib),n&&(s[bb]=n),i&&(s[Tb]=i),r&&(s[Zd]=r),Ab(e,Cb,s)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hr.set("previous_websocket_failure",!0);try{if(!tm()){const i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Lc(this.connURL,[],i)}}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){ei.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Lc!==null&&!ei.forceDisallow_}static previouslyFailed(){return Hr.isInMemoryStorage||Hr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=vo(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(z(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Yt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=gb(n,LP);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(MP))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ei.responsesRequiredToBeHealthy=2;ei.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ks,ei]}initTransports_(e){const n=ei&&ei.isAvailable();let i=n&&!ei.previouslyFailed();if(e.webSocketOnly&&(n||Gn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ei];else{const r=this.transports_=[];for(const s of rf.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=6e4,PP=5e3,DP=10*1024,FP=100*1024,sf="t",Pb="d",xP="s",Db="r",UP="e",Fb="o",xb="a",Ub="n",jb="p",jP="h";class VP{constructor(e,n,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ma("c:"+this.id+":"),this.transportManager_=new rf(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=_a(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>FP?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>DP?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(sf in e){const n=e[sf];n===xb?this.upgradeIfSecondaryHealthy_():n===Db?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Fb&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ga("t",e),i=ga("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:jb,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:xb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ub,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ga("t",e),i=ga("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ga(sf,e);if(Pb in e){const i=e[Pb];if(n===jP)this.onHandshake_(i);else if(n===Ub){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===xP?this.onConnectionShutdown_(i):n===Db?this.onReset_(i):n===UP?Xd("Server Error: "+i):n===Fb?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xd("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Jd!==i&&Gn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),_a(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(NP))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_a(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(PP))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:jb,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){this.allowedEvents_=e,this.listeners_={},z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){z(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends Bb{constructor(){super(["online"]);this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!rl()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Mc}getInitialEvent(e){return z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=32,qb=768;class ct{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function tt(){return new ct("")}function Pe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function tr(t){return t.pieces_.length-t.pieceNum_}function mt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ct(t.pieces_,e)}function of(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function BP(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function va(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Wb(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ct(e,0)}function Lt(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof ct)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ct(n,0)}function Fe(t){return t.pieceNum_>=t.pieces_.length}function Un(t,e){const n=Pe(t),i=Pe(e);if(n===null)return e;if(n===i)return Un(mt(t),mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function HP(t,e){const n=va(t,0),i=va(e,0);for(let r=0;r<n.length&&r<i.length;r++){const s=zr(n[r],i[r]);if(s!==0)return s}return n.length===i.length?0:n.length<i.length?-1:1}function af(t,e){if(tr(t)!==tr(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Jn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(tr(t)>tr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class qP{constructor(e,n){this.errorPrefix_=n,this.parts_=va(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ll(this.parts_[i]);Gb(this)}}function WP(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ll(e),Gb(t)}function GP(t){const e=t.parts_.pop();t.byteLength_-=ll(e),t.parts_.length>0&&(t.byteLength_-=1)}function Gb(t){if(t.byteLength_>qb)throw new Error(t.errorPrefix_+"has a key path longer than "+qb+" bytes ("+t.byteLength_+").");if(t.parts_.length>Hb)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Hb+") or object contains a cycle "+Kr(t))}function Kr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends Bb{constructor(){super(["visible"]);let e,n;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(n="visibilitychange",e="hidden"):typeof document.mozHidden!="undefined"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden!="undefined"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden!="undefined"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new lf}getInitialEvent(e){return z(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=1e3,zP=60*5*1e3,KP=3*1e3,zb=30*1e3,XP=1.3,QP=3e4,YP="server_kill",Kb=3;class ki extends Vb{constructor(e,n,i,r,s,o,a,l){super();if(this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ki.nextPersistentConnectionId_++,this.log_=ma("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ya,this.maxReconnectDelay_=zP,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!tm())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");lf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Mc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(Yt(s)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Ni,i={p:e._path.toString(),q:e._queryObject},r={action:"g",request:i,onComplete:o=>{const a=o.d;o.s==="ok"?(this.onDataUpdate_(i.p,a,!1,null),n.resolve(a)):n.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const o=this.outstandingGets_[s];o===void 0||r!==o||(delete this.outstandingGets_[s],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},KP),this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;ki.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ai(e,"w")){const i=hs(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Gn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||b1(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=zb)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=y1(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const o={p:n,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Yt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Xd("Unrecognized action received from server: "+Yt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ya,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ya,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>QP&&(this.reconnectDelay_=ya),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*XP)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ki.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(h){z(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?ln("getToken() completed but was canceled"):(ln("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new VP(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,f=>{Gn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(YP)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Gn(h),l())}}}interrupt(e){ln("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ln("Resuming connection for reason: "+e),delete this.interruptReasons_[e],sl(this.interruptReasons_)&&(this.reconnectDelay_=ya,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>Qd(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new ct(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){ln("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Kb&&(this.reconnectDelay_=zb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ln("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Kb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+db.replace(/\./g,"-")]=1,rl()?e["framework.cordova"]=1:Du()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Mc.getInstance().currentlyOnline();return sl(this.interruptReasons_)&&e}}ki.nextPersistentConnectionId_=0;ki.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new xe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new xe(Gs,e),r=new xe(Gs,n);return this.compare(i,r)!==0}minPost(){return xe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc;class Xb extends Nc{static get __EMPTY_NODE(){return Pc}static set __EMPTY_NODE(e){Pc=e}compare(e,n){return zr(e.name,n.name)}isDefinedOn(e){throw us("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return xe.MIN}maxPost(){return new xe(Gr,Pc)}makePost(e,n){return z(typeof e=="string","KeyIndex indexValue must always be a string."),new xe(e,Pc)}toString(){return".key"}}const Xs=new Xb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class $t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i!=null?i:$t.RED,this.left=r!=null?r:jn.EMPTY_NODE,this.right=s!=null?s:jn.EMPTY_NODE}copy(e,n,i,r,s){return new $t(e!=null?e:this.key,n!=null?n:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return jn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return jn.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}$t.RED=!0;$t.BLACK=!1;class JP{copy(e,n,i,r,s){return this}insert(e,n,i){return new $t(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class jn{constructor(e,n=jn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new jn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,$t.BLACK,null,null))}remove(e){return new jn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$t.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Dc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Dc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Dc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Dc(this.root_,null,this.comparator_,!0,e)}}jn.EMPTY_NODE=new JP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e){return zr(t.name,e.name)}function cf(t,e){return zr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf;function $P(t){uf=t}const Qb=function(t){return typeof t=="number"?"number:"+_b(t):"string:"+t},Yb=function(t){if(t.isLeafNode()){const e=t.val();z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ai(e,".sv"),"Priority must be a string or number.")}else z(t===uf||t.isEmpty(),"priority of unexpected type.");z(t===uf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jb;class en{constructor(e,n=en.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Yb(this.priorityNode_)}static set __childrenNodeConstructor(e){Jb=e}static get __childrenNodeConstructor(){return Jb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new en(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Fe(e)?this:Pe(e)===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:en.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Pe(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(z(i!==".priority"||tr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,en.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Qb(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=_b(this.value_):e+=this.value_,this.lazyHash_=pb(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===en.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof en.__childrenNodeConstructor?-1:(z(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=en.VALUE_TYPE_ORDER.indexOf(n),s=en.VALUE_TYPE_ORDER.indexOf(i);return z(r>=0,"Unknown leaf type: "+n),z(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}en.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zb,$b;function eD(t){Zb=t}function tD(t){$b=t}class nD extends Nc{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?zr(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return xe.MIN}maxPost(){return new xe(Gr,new en("[PRIORITY-POST]",$b))}makePost(e,n){const i=Zb(e);return new xe(n,new en("[PRIORITY-POST]",i))}toString(){return".priority"}}const At=new nD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=Math.log(2);class rD{constructor(e){const n=s=>parseInt(Math.log(s)/iD,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fc=function(t,e,n,i){t.sort(e);const r=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new $t(d,h.node,$t.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=r(l,f),g=r(f+1,c);return h=t[f],d=n?n(h):h,new $t(d,h.node,$t.BLACK,p,g)}},s=function(l){let c=null,u=null,h=t.length;const d=function(p,g){const m=h-p,v=h;h-=p;const w=r(m+1,v),b=t[m],y=n?n(b):b;f(new $t(y,b.node,g,null,w))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),m=Math.pow(2,l.count-(p+1));g?d(m,$t.BLACK):(d(m,$t.BLACK),d(m,$t.RED))}return u},o=new rD(t.length),a=s(o);return new jn(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf;const Qs={};class Oi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return z(Qs&&At,"ChildrenNode.ts has not been loaded"),hf=hf||new Oi({".priority":Qs},{".priority":At}),hf}get(e){const n=hs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof jn?n:null}hasIndex(e){return ai(this.indexSet_,e.toString())}addIndex(e,n){z(e!==Xs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(xe.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Fc(i,e.getCompare()):a=Qs;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Oi(u,c)}addToIndexes(e,n){const i=ol(this.indexes_,(r,s)=>{const o=hs(this.indexSet_,s);if(z(o,"Missing index implementation for "+s),r===Qs)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(xe.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Fc(a,o.getCompare())}else return Qs;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new xe(e.name,a))),l.insert(e,e.node)}});return new Oi(i,this.indexSet_)}removeFromIndexes(e,n){const i=ol(this.indexes_,r=>{if(r===Qs)return r;{const s=n.get(e.name);return s?r.remove(new xe(e.name,s)):r}});return new Oi(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba;class ye{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Yb(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ba||(ba=new ye(new jn(cf),null,Oi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ba}updatePriority(e){return this.children_.isEmpty()?this:new ye(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ba:n}}getChild(e){const n=Pe(e);return n===null?this:this.getImmediateChild(n).getChild(mt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(z(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new xe(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?ba:this.priorityNode_;return new ye(r,o,s)}}updateChild(e,n){const i=Pe(e);if(i===null)return n;{z(Pe(e)!==".priority"||tr(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(mt(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(At,(o,a)=>{n[o]=a.val(e),i++,s&&ye.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Qb(this.getPriority().val())+":"),this.forEachChild(At,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":pb(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new xe(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new xe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new xe(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,xe.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,xe.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ea?-1:0}withIndex(e){if(e===Xs||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ye(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Xs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(At),r=n.getIterator(At);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Xs?null:this.indexMap_.get(e.toString())}}ye.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class sD extends ye{constructor(){super(new jn(cf),ye.EMPTY_NODE,Oi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ye.EMPTY_NODE}isEmpty(){return!1}}const Ea=new sD;Object.defineProperties(xe,{MIN:{value:new xe(Gs,ye.EMPTY_NODE)},MAX:{value:new xe(Gr,Ea)}});Xb.__EMPTY_NODE=ye.EMPTY_NODE;en.__childrenNodeConstructor=ye;$P(Ea);tD(Ea);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=!0;function Kt(t,e=null){if(t===null)return ye.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new en(n,Kt(e))}if(!(t instanceof Array)&&oD){const n=[];let i=!1;if(_n(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Kt(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new xe(o,l)))}}),n.length===0)return ye.EMPTY_NODE;const s=Fc(n,ZP,o=>o.name,cf);if(i){const o=Fc(n,At.getCompare());return new ye(s,Kt(e),new Oi({".priority":o},{".priority":At}))}else return new ye(s,Kt(e),Oi.Default)}else{let n=ye.EMPTY_NODE;return _n(t,(i,r)=>{if(ai(t,i)&&i.substring(0,1)!=="."){const s=Kt(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(Kt(e))}}eD(Kt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD extends Nc{constructor(e){super();this.indexPath_=e,z(!Fe(e)&&Pe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?zr(e.name,n.name):s}makePost(e,n){const i=Kt(e),r=ye.EMPTY_NODE.updateChild(this.indexPath_,i);return new xe(n,r)}maxPost(){const e=ye.EMPTY_NODE.updateChild(this.indexPath_,Ea);return new xe(Gr,e)}toString(){return va(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD extends Nc{compare(e,n){const i=e.node.compareTo(n.node);return i===0?zr(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return xe.MIN}maxPost(){return xe.MAX}makePost(e,n){const i=Kt(e);return new xe(n,i)}toString(){return".value"}}const cD=new lD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){return{type:"value",snapshotNode:t}}function Ys(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ia(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function wa(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function uD(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.index_=e}updateChild(e,n,i,r,s,o){z(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(Ia(n,a)):z(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ys(n,i)):o.trackChildChange(wa(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(At,(r,s)=>{n.hasChild(r)||i.trackChildChange(Ia(r,s))}),n.isLeafNode()||n.forEachChild(At,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(wa(r,s,o))}else i.trackChildChange(Ys(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ye.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.indexedFilter_=new df(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ta.getStartPost_(e),this.endPost_=Ta.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,n,i,r,s,o){return this.matches(new xe(n,i))||(i=ye.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,s,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=ye.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ye.EMPTY_NODE);const s=this;return n.forEachChild(At,(o,a)=>{s.matches(new xe(o,a))||(r=r.updateImmediateChild(o,ye.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.rangedFilter_=new Ta(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,n,i,r,s,o){return this.rangedFilter_.matches(new xe(n,i))||(i=ye.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,s,o):this.fullLimitUpdateChild_(e,n,i,s,o)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=ye.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ye.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:l=this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,l)r=r.updateImmediateChild(a.name,a.node),o++;else break}}else{r=n.withIndex(this.index_),r=r.updatePriority(ye.EMPTY_NODE);let s,o,a,l;if(this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const h=this.index_.getCompare();a=(d,f)=>h(f,d)}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,u=!1;for(;l.hasNext();){const h=l.getNext();!u&&a(s,h)<=0&&(u=!0),u&&c<this.limit_&&a(h,o)<=0?c++:r=r.updateImmediateChild(h.name,ye.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(d,f)=>h(f,d)}else o=this.index_.getCompare();const a=e;z(a.numChildren()===this.limit_,"");const l=new xe(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let d=r.getChildAfterChild(this.index_,c,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);const f=d==null?1:o(d,l);if(u&&!i.isEmpty()&&f>=0)return s!=null&&s.trackChildChange(wa(n,i,h)),a.updateImmediateChild(n,i);{s!=null&&s.trackChildChange(Ia(n,h));const g=a.updateImmediateChild(n,ye.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(s!=null&&s.trackChildChange(Ys(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}}else return i.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Ia(c.name,c.node)),s.trackChildChange(Ys(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,ye.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=At}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gs}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===At}copy(){const e=new ff;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function dD(t){return t.loadsAllData()?new df(t.getIndex()):t.hasLimit()?new hD(t):new Ta(t)}function tE(t){const e={};if(t.isDefault())return e;let n;return t.index_===At?n="$priority":t.index_===cD?n="$value":t.index_===Xs?n="$key":(z(t.index_ instanceof aD,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Yt(n),t.startSet_&&(e.startAt=Yt(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+Yt(t.indexStartName_))),t.endSet_&&(e.endAt=Yt(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+Yt(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function nE(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==At&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends Vb{constructor(e,n,i,r){super();this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=ma("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=xc.getListenId_(e,i),a={};this.listens_[o]=a;const l=tE(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,i),hs(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",r(d,null)}})}unlisten(e,n){const i=xc.getListenId_(e,n);delete this.listens_[i]}get(e){const n=tE(e._queryParams),i=e._path.toString(),r=new Ni;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+gr(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=vo(a.responseText)}catch{Gn("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Gn("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this.rootNode_=ye.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(){return{value:null,children:new Map}}function Js(t,e,n){if(Fe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Pe(e);t.children.has(i)||t.children.set(i,Uc());const r=t.children.get(i);e=mt(e),Js(r,e,n)}}function pf(t,e){if(Fe(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(At,(i,r)=>{Js(t,new ct(i),r)}),pf(t,e)}}else if(t.children.size>0){const n=Pe(e);return e=mt(e),t.children.has(n)&&pf(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function mf(t,e,n){t.value!==null?n(e,t.value):pD(t,(i,r)=>{const s=new ct(e.toString()+"/"+i);mf(r,s,n)})}function pD(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&_n(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=10*1e3,gD=30*1e3,_D=5*60*1e3;class vD{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new mD(e);const i=iE+(gD-iE)*Math.random();_a(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;_n(e,(r,s)=>{s>0&&ai(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),_a(this.reportStats_.bind(this),Math.floor(Math.random()*2*_D))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ti;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ti||(ti={}));function rE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function gf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _f(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=ti.ACK_USER_WRITE,this.source=rE()}operationForChild(e){if(Fe(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ct(e));return new jc(tt(),n,this.revert)}}else return z(Pe(this.path)===e,"operationForChild called for unrelated child."),new jc(mt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n){this.source=e,this.path=n,this.type=ti.LISTEN_COMPLETE}operationForChild(e){return Fe(this.path)?new Ca(this.source,tt()):new Ca(this.source,mt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=ti.OVERWRITE}operationForChild(e){return Fe(this.path)?new Xr(this.source,tt(),this.snap.getImmediateChild(e)):new Xr(this.source,mt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=ti.MERGE}operationForChild(e){if(Fe(this.path)){const n=this.children.subtree(new ct(e));return n.isEmpty()?null:n.value?new Xr(this.source,tt(),n.value):new Sa(this.source,tt(),n)}else return z(Pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Sa(this.source,mt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Fe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Pe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bD(t,e,n,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(uD(o.childName,o.snapshotNode))}),Aa(t,r,"child_removed",e,i,n),Aa(t,r,"child_added",e,i,n),Aa(t,r,"child_moved",s,i,n),Aa(t,r,"child_changed",e,i,n),Aa(t,r,"value",e,i,n),r}function Aa(t,e,n,i,r,s){const o=i.filter(a=>a.type===n);o.sort((a,l)=>ID(t,a,l)),o.forEach(a=>{const l=ED(t,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function ED(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ID(t,e,n){if(e.childName==null||n.childName==null)throw us("Should only compare child_ events.");const i=new xe(e.childName,e.snapshotNode),r=new xe(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t,e){return{eventCache:t,serverCache:e}}function ka(t,e,n,i){return Vc(new Qr(e,n,i),t.serverCache)}function sE(t,e,n,i){return Vc(t.eventCache,new Qr(e,n,i))}function vf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Yr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf;const wD=()=>(yf||(yf=new jn(rP)),yf);class wt{constructor(e,n=wD()){this.value=e,this.children=n}static fromObject(e){let n=new wt(null);return _n(e,(i,r)=>{n=n.set(new ct(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:tt(),value:this.value};if(Fe(e))return null;{const i=Pe(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(mt(e),n);return s!=null?{path:Lt(new ct(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Fe(e))return this;{const n=Pe(e),i=this.children.get(n);return i!==null?i.subtree(mt(e)):new wt(null)}}set(e,n){if(Fe(e))return new wt(n,this.children);{const i=Pe(e),s=(this.children.get(i)||new wt(null)).set(mt(e),n),o=this.children.insert(i,s);return new wt(this.value,o)}}remove(e){if(Fe(e))return this.children.isEmpty()?new wt(null):new wt(null,this.children);{const n=Pe(e),i=this.children.get(n);if(i){const r=i.remove(mt(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new wt(null):new wt(this.value,s)}else return this}}get(e){if(Fe(e))return this.value;{const n=Pe(e),i=this.children.get(n);return i?i.get(mt(e)):null}}setTree(e,n){if(Fe(e))return n;{const i=Pe(e),s=(this.children.get(i)||new wt(null)).setTree(mt(e),n);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new wt(this.value,o)}}fold(e){return this.fold_(tt(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Lt(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,tt(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(Fe(e))return null;{const s=Pe(e),o=this.children.get(s);return o?o.findOnPath_(mt(e),Lt(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,tt(),n)}foreachOnPath_(e,n,i){if(Fe(e))return this;{this.value&&i(n,this.value);const r=Pe(e),s=this.children.get(r);return s?s.foreachOnPath_(mt(e),Lt(n,r),i):new wt(null)}}foreach(e){this.foreach_(tt(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Lt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.writeTree_=e}static empty(){return new ni(new wt(null))}}function Oa(t,e,n){if(Fe(e))return new ni(new wt(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=Un(r,e);return s=s.updateChild(o,n),new ni(t.writeTree_.set(r,s))}else{const r=new wt(n),s=t.writeTree_.setTree(e,r);return new ni(s)}}}function oE(t,e,n){let i=t;return _n(n,(r,s)=>{i=Oa(i,Lt(e,r),s)}),i}function aE(t,e){if(Fe(e))return ni.empty();{const n=t.writeTree_.setTree(e,new wt(null));return new ni(n)}}function bf(t,e){return Jr(t,e)!=null}function Jr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Un(n.path,e)):null}function lE(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(At,(i,r)=>{e.push(new xe(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new xe(i,r.value))}),e}function nr(t,e){if(Fe(e))return t;{const n=Jr(t,e);return n!=null?new ni(new wt(n)):new ni(t.writeTree_.subtree(e))}}function Ef(t){return t.writeTree_.isEmpty()}function Zs(t,e){return cE(tt(),t.writeTree_,e)}function cE(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(z(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=cE(Lt(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Lt(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t,e){return pE(e,t)}function TD(t,e,n,i,r){z(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Oa(t.visibleWrites,e,n)),t.lastWriteId=i}function CD(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function SD(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);z(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&AD(a,i.path)?r=!1:Jn(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return kD(t),!0;if(i.snap)t.visibleWrites=aE(t.visibleWrites,i.path);else{const a=i.children;_n(a,l=>{t.visibleWrites=aE(t.visibleWrites,Lt(i.path,l))})}return!0}else return!1}function AD(t,e){if(t.snap)return Jn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Jn(Lt(t.path,n),e))return!0;return!1}function kD(t){t.visibleWrites=uE(t.allWrites,OD,tt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function OD(t){return t.visible}function uE(t,e,n){let i=ni.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const o=s.path;let a;if(s.snap)Jn(n,o)?(a=Un(n,o),i=Oa(i,a,s.snap)):Jn(o,n)&&(a=Un(o,n),i=Oa(i,tt(),s.snap.getChild(a)));else if(s.children){if(Jn(n,o))a=Un(n,o),i=oE(i,a,s.children);else if(Jn(o,n))if(a=Un(o,n),Fe(a))i=oE(i,tt(),s.children);else{const l=hs(s.children,Pe(a));if(l){const c=l.getChild(mt(a));i=Oa(i,tt(),c)}}}else throw us("WriteRecord should have .snap or .children")}}return i}function hE(t,e,n,i,r){if(!i&&!r){const s=Jr(t.visibleWrites,e);if(s!=null)return s;{const o=nr(t.visibleWrites,e);if(Ef(o))return n;if(n==null&&!bf(o,tt()))return null;{const a=n||ye.EMPTY_NODE;return Zs(o,a)}}}else{const s=nr(t.visibleWrites,e);if(!r&&Ef(s))return n;if(!r&&n==null&&!bf(s,tt()))return null;{const o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Jn(c.path,e)||Jn(e,c.path))},a=uE(t.allWrites,o,e),l=n||ye.EMPTY_NODE;return Zs(a,l)}}}function RD(t,e,n){let i=ye.EMPTY_NODE;const r=Jr(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(At,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){const s=nr(t.visibleWrites,e);return n.forEachChild(At,(o,a)=>{const l=Zs(nr(s,new ct(o)),a);i=i.updateImmediateChild(o,l)}),lE(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=nr(t.visibleWrites,e);return lE(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function LD(t,e,n,i,r){z(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Lt(e,n);if(bf(t.visibleWrites,s))return null;{const o=nr(t.visibleWrites,s);return Ef(o)?r.getChild(n):Zs(o,r.getChild(n))}}function MD(t,e,n,i){const r=Lt(e,n),s=Jr(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const o=nr(t.visibleWrites,r);return Zs(o,i.getNode().getImmediateChild(n))}else return null}function ND(t,e){return Jr(t.visibleWrites,e)}function PD(t,e,n,i,r,s,o){let a;const l=nr(t.visibleWrites,e),c=Jr(l,tt());if(c!=null)a=c;else if(n!=null)a=Zs(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let f=d.getNext();for(;f&&u.length<r;)h(f,i)!==0&&u.push(f),f=d.getNext();return u}else return[]}function DD(){return{visibleWrites:ni.empty(),allWrites:[],lastWriteId:-1}}function Bc(t,e,n,i){return hE(t.writeTree,t.treePath,e,n,i)}function wf(t,e){return RD(t.writeTree,t.treePath,e)}function dE(t,e,n,i){return LD(t.writeTree,t.treePath,e,n,i)}function Hc(t,e){return ND(t.writeTree,Lt(t.treePath,e))}function FD(t,e,n,i,r,s){return PD(t.writeTree,t.treePath,e,n,i,r,s)}function Tf(t,e,n){return MD(t.writeTree,t.treePath,e,n)}function fE(t,e){return pE(Lt(t.treePath,e),t.writeTree)}function pE(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;z(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),z(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,wa(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,Ia(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,Ys(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,wa(i,e.snapshotNode,r.oldSnap));else throw us("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const mE=new UD;class Cf{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Qr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tf(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Yr(this.viewCache_),s=FD(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t){return{filter:t}}function VD(t,e){z(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),z(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function BD(t,e,n,i,r){const s=new xD;let o,a;if(n.type===ti.OVERWRITE){const c=n;c.source.fromUser?o=Sf(t,e,c.path,c.snap,i,r,s):(z(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Fe(c.path),o=qc(t,e,c.path,c.snap,i,r,a,s))}else if(n.type===ti.MERGE){const c=n;c.source.fromUser?o=qD(t,e,c.path,c.children,i,r,s):(z(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Af(t,e,c.path,c.children,i,r,a,s))}else if(n.type===ti.ACK_USER_WRITE){const c=n;c.revert?o=zD(t,e,c.path,i,r,s):o=WD(t,e,c.path,c.affectedTree,i,r,s)}else if(n.type===ti.LISTEN_COMPLETE)o=GD(t,e,n.path,i,s);else throw us("Unknown operation type: "+n.type);const l=s.getChanges();return HD(e,o,l),{viewCache:o,changes:l}}function HD(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=vf(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(eE(vf(e)))}}function gE(t,e,n,i,r,s){const o=e.eventCache;if(Hc(i,n)!=null)return e;{let a,l;if(Fe(n))if(z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Yr(e),u=c instanceof ye?c:ye.EMPTY_NODE,h=wf(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=Bc(i,Yr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Pe(n);if(c===".priority"){z(tr(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=dE(i,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=mt(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=dE(i,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=Tf(i,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,r,s):a=o.getNode()}}return ka(e,a,o.isFullyInitialized()||Fe(n),t.filter.filtersNodes())}}function qc(t,e,n,i,r,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Fe(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Pe(n);if(!l.isCompleteForPath(n)&&tr(n)>1)return e;const p=mt(n),m=l.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?c=u.updatePriority(l.getNode(),m):c=u.updateChild(l.getNode(),f,m,p,mE,null)}const h=sE(e,c,l.isFullyInitialized()||Fe(n),u.filtersNodes()),d=new Cf(r,h,s);return gE(t,h,n,r,d,a)}function Sf(t,e,n,i,r,s,o){const a=e.eventCache;let l,c;const u=new Cf(r,e,s);if(Fe(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=ka(e,c,!0,t.filter.filtersNodes());else{const h=Pe(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=ka(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=mt(n),f=a.getNode().getImmediateChild(h);let p;if(Fe(d))p=i;else{const g=u.getCompleteChild(h);g!=null?of(d)===".priority"&&g.getChild(Wb(d)).isEmpty()?p=g:p=g.updateChild(d,i):p=ye.EMPTY_NODE}if(f.equals(p))l=e;else{const g=t.filter.updateChild(a.getNode(),h,p,d,u,o);l=ka(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function _E(t,e){return t.eventCache.isCompleteForChild(e)}function qD(t,e,n,i,r,s,o){let a=e;return i.foreach((l,c)=>{const u=Lt(n,l);_E(e,Pe(u))&&(a=Sf(t,a,u,c,r,s,o))}),i.foreach((l,c)=>{const u=Lt(n,l);_E(e,Pe(u))||(a=Sf(t,a,u,c,r,s,o))}),a}function vE(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Af(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Fe(n)?c=i:c=new wt(null).setTree(n,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=vE(t,f,d);l=qc(t,l,new ct(h),p,r,s,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===void 0;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),g=vE(t,p,d);l=qc(t,l,new ct(h),g,r,s,o,a)}}),l}function WD(t,e,n,i,r,s,o){if(Hc(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(Fe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return qc(t,e,n,l.getNode().getChild(n),r,s,a,o);if(Fe(n)){let c=new wt(null);return l.getNode().forEachChild(Xs,(u,h)=>{c=c.set(new ct(u),h)}),Af(t,e,n,c,r,s,a,o)}else return e}else{let c=new wt(null);return i.foreach((u,h)=>{const d=Lt(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),Af(t,e,n,c,r,s,a,o)}}function GD(t,e,n,i,r){const s=e.serverCache,o=sE(e,s.getNode(),s.isFullyInitialized()||Fe(n),s.isFiltered());return gE(t,o,n,i,mE,r)}function zD(t,e,n,i,r,s){let o;if(Hc(i,n)!=null)return e;{const a=new Cf(i,e,r),l=e.eventCache.getNode();let c;if(Fe(n)||Pe(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Bc(i,Yr(e));else{const h=e.serverCache.getNode();z(h instanceof ye,"serverChildren would be complete if leaf node"),u=wf(i,h)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Pe(n);let h=Tf(i,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,mt(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,ye.EMPTY_NODE,mt(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Bc(i,Yr(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Hc(i,tt())!=null,ka(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new df(i.getIndex()),s=dD(i);this.processor_=jD(s);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(ye.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ye.EMPTY_NODE,a.getNode(),null),u=new Qr(l,o.isFullyInitialized(),r.filtersNodes()),h=new Qr(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Vc(h,u),this.eventGenerator_=new yD(this.query_)}get query(){return this.query_}}function XD(t){return t.viewCache_.serverCache.getNode()}function QD(t,e){const n=Yr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Fe(e)&&!n.getImmediateChild(Pe(e)).isEmpty())?n.getChild(e):null}function yE(t){return t.eventRegistrations_.length===0}function YD(t,e){t.eventRegistrations_.push(e)}function bE(t,e,n){const i=[];if(n){z(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function EE(t,e,n,i){e.type===ti.MERGE&&e.source.queryId!==null&&(z(Yr(t.viewCache_),"We should always have a full cache before handling merges"),z(vf(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=BD(t.processor_,r,e,n,i);return VD(t.processor_,s.viewCache),z(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,IE(t,s.changes,s.viewCache.eventCache.getNode(),null)}function JD(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(At,(s,o)=>{i.push(Ys(s,o))}),n.isFullyInitialized()&&i.push(eE(n.getNode())),IE(t,i,n.getNode(),e)}function IE(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return bD(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc;class ZD{constructor(){this.views=new Map}}function $D(t){z(!Wc,"__referenceConstructor has already been defined"),Wc=t}function eF(){return z(Wc,"Reference.ts has not been loaded"),Wc}function tF(t){return t.views.size===0}function kf(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return z(s!=null,"SyncTree gave us an op for an invalid query."),EE(s,e,n,i)}else{let s=[];for(const o of t.views.values())s=s.concat(EE(o,e,n,i));return s}}function nF(t,e,n,i,r){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Bc(n,r?i:null),l=!1;a?l=!0:i instanceof ye?(a=wf(n,i),l=!1):(a=ye.EMPTY_NODE,l=!1);const c=Vc(new Qr(a,l,!1),new Qr(i,r,!1));return new KD(e,c)}return o}function iF(t,e,n,i,r,s){const o=nF(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),YD(o,n),JD(o,n)}function rF(t,e,n,i){const r=e._queryIdentifier,s=[];let o=[];const a=ir(t);if(r==="default")for(const[l,c]of t.views.entries())o=o.concat(bE(c,n,i)),yE(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(r);l&&(o=o.concat(bE(l,n,i)),yE(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!ir(t)&&s.push(new(eF())(e._repo,e._path)),{removed:s,events:o}}function wE(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function $s(t,e){let n=null;for(const i of t.views.values())n=n||QD(i,e);return n}function TE(t,e){if(e._queryParams.loadsAllData())return Gc(t);{const i=e._queryIdentifier;return t.views.get(i)}}function CE(t,e){return TE(t,e)!=null}function ir(t){return Gc(t)!=null}function Gc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc;function sF(t){z(!zc,"__referenceConstructor has already been defined"),zc=t}function oF(){return z(zc,"Reference.ts has not been loaded"),zc}let aF=1;class SE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new wt(null),this.pendingWriteTree_=DD(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lF(t,e,n,i,r){return TD(t.pendingWriteTree_,e,n,i,r),r?Ra(t,new Xr(rE(),e,n)):[]}function eo(t,e,n=!1){const i=CD(t.pendingWriteTree_,e);if(SD(t.pendingWriteTree_,e)){let s=new wt(null);return i.snap!=null?s=s.set(tt(),!0):_n(i.children,o=>{s=s.set(new ct(o),!0)}),Ra(t,new jc(i.path,s,n))}else return[]}function Kc(t,e,n){return Ra(t,new Xr(gf(),e,n))}function cF(t,e,n){const i=wt.fromObject(n);return Ra(t,new Sa(gf(),e,i))}function uF(t,e){return Ra(t,new Ca(gf(),e))}function hF(t,e,n){const i=Rf(t,n);if(i){const r=Lf(i),s=r.path,o=r.queryId,a=Un(s,e),l=new Ca(_f(o),a);return Mf(t,s,l)}else return[]}function Of(t,e,n,i){const r=e._path,s=t.syncPointTree_.get(r);let o=[];if(s&&(e._queryIdentifier==="default"||CE(s,e))){const a=rF(s,e,n,i);tF(s)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const l=a.removed;o=a.events;const c=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=t.syncPointTree_.findOnPath(r,(h,d)=>ir(d));if(c&&!u){const h=t.syncPointTree_.subtree(r);if(!h.isEmpty()){const d=pF(h);for(let f=0;f<d.length;++f){const p=d[f],g=p.query,m=LE(t,p);t.listenProvider_.startListening(La(g),Xc(t,g),m.hashFn,m.onComplete)}}}if(!u&&l.length>0&&!i)if(c){const h=null;t.listenProvider_.stopListening(La(e),h)}else l.forEach(h=>{const d=t.queryToTagMap.get(Qc(h));t.listenProvider_.stopListening(La(h),d)});mF(t,l)}return o}function dF(t,e,n,i){const r=Rf(t,i);if(r!=null){const s=Lf(r),o=s.path,a=s.queryId,l=Un(o,e),c=new Xr(_f(a),l,n);return Mf(t,o,c)}else return[]}function fF(t,e,n,i){const r=Rf(t,i);if(r){const s=Lf(r),o=s.path,a=s.queryId,l=Un(o,e),c=wt.fromObject(n),u=new Sa(_f(a),l,c);return Mf(t,o,u)}else return[]}function AE(t,e,n){const i=e._path;let r=null,s=!1;t.syncPointTree_.foreachOnPath(i,(h,d)=>{const f=Un(h,i);r=r||$s(d,f),s=s||ir(d)});let o=t.syncPointTree_.get(i);o?(s=s||ir(o),r=r||$s(o,tt())):(o=new ZD,t.syncPointTree_=t.syncPointTree_.set(i,o));let a;r!=null?a=!0:(a=!1,r=ye.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((d,f)=>{const p=$s(f,tt());p&&(r=r.updateImmediateChild(d,p))}));const l=CE(o,e);if(!l&&!e._queryParams.loadsAllData()){const h=Qc(e);z(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const d=gF();t.queryToTagMap.set(h,d),t.tagToQueryMap.set(d,h)}const c=If(t.pendingWriteTree_,i);let u=iF(o,e,n,c,r,a);if(!l&&!s){const h=TE(o,e);u=u.concat(_F(t,e,h))}return u}function kE(t,e,n){const i=!0,r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Un(o,e),c=$s(a,l);if(c)return c});return hE(r,e,s,n,i)}function Ra(t,e){return OE(e,t.syncPointTree_,null,If(t.pendingWriteTree_,tt()))}function OE(t,e,n,i){if(Fe(t.path))return RE(t,e,n,i);{const r=e.get(tt());n==null&&r!=null&&(n=$s(r,tt()));let s=[];const o=Pe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=fE(i,o);s=s.concat(OE(a,l,c,u))}return r&&(s=s.concat(kf(r,t,i,n))),s}}function RE(t,e,n,i){const r=e.get(tt());n==null&&r!=null&&(n=$s(r,tt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=fE(i,o),u=t.operationForChild(o);u&&(s=s.concat(RE(u,a,l,c)))}),r&&(s=s.concat(kf(r,t,i,n))),s}function LE(t,e){const n=e.query,i=Xc(t,n);return{hashFn:()=>(XD(e)||ye.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?hF(t,n._path,i):uF(t,n._path);{const s=aP(r,n);return Of(t,n,null,s)}}}}function Xc(t,e){const n=Qc(e);return t.queryToTagMap.get(n)}function Qc(t){return t._path.toString()+"$"+t._queryIdentifier}function Rf(t,e){return t.tagToQueryMap.get(e)}function Lf(t){const e=t.indexOf("$");return z(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ct(t.substr(0,e))}}function Mf(t,e,n){const i=t.syncPointTree_.get(e);z(i,"Missing sync point for query tag that we're tracking");const r=If(t.pendingWriteTree_,e);return kf(i,n,r,null)}function pF(t){return t.fold((e,n,i)=>{if(n&&ir(n))return[Gc(n)];{let r=[];return n&&(r=wE(n)),_n(i,(s,o)=>{r=r.concat(o)}),r}})}function La(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(oF())(t._repo,t._path):t}function mF(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Qc(i),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}function gF(){return aF++}function _F(t,e,n){const i=e._path,r=Xc(t,e),s=LE(t,n),o=t.listenProvider_.startListening(La(e),r,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(i);if(r)z(!ir(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!Fe(c)&&u&&ir(u))return[Gc(u).query];{let d=[];return u&&(d=d.concat(wE(u).map(f=>f.query))),_n(h,(f,p)=>{d=d.concat(p)}),d}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(La(u),Xc(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Nf(n)}node(){return this.node_}}class Pf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Lt(this.path_,e);return new Pf(this.syncTree_,n)}node(){return kE(this.syncTree_,this.path_)}}const vF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},ME=function(t,e,n){if(!t||typeof t!="object")return t;if(z(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return yF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return bF(t[".sv"],e);z(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},yF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:z(!1,"Unexpected server value: "+t)}},bF=function(t,e,n){t.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&z(!1,"Unexpected increment value: "+i);const r=e.node();if(z(r!==null&&typeof r!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},EF=function(t,e,n,i){return Df(e,new Pf(n,t),i)},IF=function(t,e,n){return Df(t,new Nf(e),n)};function Df(t,e,n){const i=t.getPriority().val(),r=ME(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=ME(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new en(a,Kt(r)):t}else{const o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new en(r))),o.forEachChild(At,(a,l)=>{const c=Df(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function xf(t,e){let n=e instanceof ct?e:new ct(e),i=t,r=Pe(n);for(;r!==null;){const s=hs(i.node.children,r)||{children:{},childCount:0};i=new Ff(r,i,s),n=mt(n),r=Pe(n)}return i}function to(t){return t.node.value}function NE(t,e){t.node.value=e,Uf(t)}function PE(t){return t.node.childCount>0}function wF(t){return to(t)===void 0&&!PE(t)}function Yc(t,e){_n(t.node.children,(n,i)=>{e(new Ff(n,t,i))})}function DE(t,e,n,i){n&&!i&&e(t),Yc(t,r=>{DE(r,e,!0,i)}),n&&i&&e(t)}function TF(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Ma(t){return new ct(t.parent===null?t.name:Ma(t.parent)+"/"+t.name)}function Uf(t){t.parent!==null&&CF(t.parent,t.name,t)}function CF(t,e,n){const i=wF(n),r=ai(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,Uf(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,Uf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=/[\[\].#$\/\u0000-\u001F\u007F]/,AF=/[\[\].#$\u0000-\u001F\u007F]/,jf=10*1024*1024,Vf=function(t){return typeof t=="string"&&t.length!==0&&!SF.test(t)},FE=function(t){return typeof t=="string"&&t.length!==0&&!AF.test(t)},kF=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),FE(t)},xE=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Rc(t)||t&&typeof t=="object"&&ai(t,".sv")},UE=function(t,e,n,i){i&&e===void 0||Jc(ds(t,"value"),e,n)},Jc=function(t,e,n){const i=n instanceof ct?new qP(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Kr(i));if(typeof e=="function")throw new Error(t+"contains a function "+Kr(i)+" with contents = "+e.toString());if(Rc(e))throw new Error(t+"contains "+e.toString()+" "+Kr(i));if(typeof e=="string"&&e.length>jf/3&&ll(e)>jf)throw new Error(t+"contains a string greater than "+jf+" utf8 bytes "+Kr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(_n(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Vf(o)))throw new Error(t+" contains an invalid key ("+o+") "+Kr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);WP(i,o),Jc(t,a,i),GP(i)}),r&&s)throw new Error(t+' contains ".value" child '+Kr(i)+" in addition to actual children.")}},OF=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const s=va(i);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Vf(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(HP);let r=null;for(n=0;n<e.length;n++){if(i=e[n],r!==null&&Jn(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},RF=function(t,e,n,i){if(i&&e===void 0)return;const r=ds(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];_n(e,(o,a)=>{const l=new ct(o);if(Jc(r,a,Lt(n,l)),of(l)===".priority"&&!xE(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),OF(r,s)},LF=function(t,e,n){if(!(n&&e===void 0)){if(Rc(e))throw new Error(ds(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xE(e))throw new Error(ds(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},jE=function(t,e,n,i){if(!(i&&n===void 0)&&!FE(n))throw new Error(ds(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},MF=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jE(t,e,n,i)},Zc=function(t,e){if(Pe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},NF=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Vf(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!kF(n))throw new Error(ds(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function VE(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!af(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function BE(t,e,n){VE(t,n),HE(t,i=>af(i,e))}function Zr(t,e,n){VE(t,n),HE(t,i=>Jn(i,e)||Jn(e,i))}function HE(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(DF(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function DF(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();qr&&ln("event: "+n.toString()),zs(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF="repo_interrupt",xF=25;class UF{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Uc(),this.transactionQueueTree_=new Ff,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jF(t,e,n){if(t.stats_=tf(t.repoInfo_),t.forceRestClient_||hP())t.server_=new xc(t.repoInfo_,(i,r,s,o)=>{WE(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>GE(t,!0),0);else{if(typeof n!="undefined"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Yt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new ki(t.repoInfo_,e,(i,r,s,o)=>{WE(t,i,r,s,o)},i=>{GE(t,i)},i=>{BF(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=vP(t.repoInfo_,()=>new vD(t.stats_,t.server_)),t.infoData_=new fD,t.infoSyncTree_=new SE({startListening:(i,r,s,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=Kc(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Bf(t,"connected",!1),t.serverSyncTree_=new SE({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);Zr(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function VF(t){const n=t.infoData_.getNode(new ct(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function qE(t){return vF({timestamp:VF(t)})}function WE(t,e,n,i,r){t.dataUpdateCount++;const s=new ct(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){const l=ol(n,c=>Kt(c));o=fF(t.serverSyncTree_,s,l,r)}else{const l=Kt(n);o=dF(t.serverSyncTree_,s,l,r)}else if(i){const l=ol(n,c=>Kt(c));o=cF(t.serverSyncTree_,s,l)}else{const l=Kt(n);o=Kc(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=qf(t,s)),Zr(t.eventQueue_,a,o)}function GE(t,e){Bf(t,"connected",e),e===!1&&qF(t)}function BF(t,e){_n(e,(n,i)=>{Bf(t,n,i)})}function Bf(t,e,n){const i=new ct("/.info/"+e),r=Kt(n);t.infoData_.updateSnapshot(i,r);const s=Kc(t.infoSyncTree_,i,r);Zr(t.eventQueue_,i,s)}function HF(t){return t.nextWriteId_++}function qF(t){XE(t,"onDisconnectEvents");const e=qE(t),n=Uc();mf(t.onDisconnect_,tt(),(r,s)=>{const o=EF(r,s,t.serverSyncTree_,e);Js(n,r,o)});let i=[];mf(n,tt(),(r,s)=>{i=i.concat(Kc(t.serverSyncTree_,r,s));const o=JF(t,r);qf(t,o)}),t.onDisconnect_=Uc(),Zr(t.eventQueue_,tt(),i)}function WF(t,e,n){t.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&pf(t.onDisconnect_,e),Na(t,n,i,r)})}function zE(t,e,n,i){const r=Kt(n);t.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{s==="ok"&&Js(t.onDisconnect_,e,r),Na(t,i,s,o)})}function GF(t,e,n,i,r){const s=Kt(n,i);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Js(t.onDisconnect_,e,s),Na(t,r,o,a)})}function zF(t,e,n,i){if(sl(n)){ln("onDisconnect().update() called with empty data.  Don't do anything."),Na(t,i,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(r,s)=>{r==="ok"&&_n(n,(o,a)=>{const l=Kt(a);Js(t.onDisconnect_,Lt(e,o),l)}),Na(t,i,r,s)})}function KF(t,e,n){let i;Pe(e._path)===".info"?i=AE(t.infoSyncTree_,e,n):i=AE(t.serverSyncTree_,e,n),BE(t.eventQueue_,e._path,i)}function KE(t,e,n){let i;Pe(e._path)===".info"?i=Of(t.infoSyncTree_,e,n):i=Of(t.serverSyncTree_,e,n),BE(t.eventQueue_,e._path,i)}function XF(t){t.persistentConnection_&&t.persistentConnection_.interrupt(FF)}function XE(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ln(n,...e)}function Na(t,e,n,i){e&&zs(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function QE(t,e,n){return kE(t.serverSyncTree_,e,n)||ye.EMPTY_NODE}function Hf(t,e=t.transactionQueueTree_){if(e||$c(t,e),to(e)){const n=JE(t,e);z(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&QF(t,Ma(e),n)}else PE(e)&&Yc(e,n=>{Hf(t,n)})}function QF(t,e,n){const i=n.map(c=>c.currentWriteId),r=QE(t,e,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const u=n[c];z(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Un(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{XE(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(eo(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();$c(t,xf(t.transactionQueueTree_,e)),Hf(t,t.transactionQueueTree_),Zr(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)zs(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Gn("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}qf(t,e)}},o)}function qf(t,e){const n=YE(t,e),i=Ma(n),r=JE(t,n);return YF(t,r,i),i}function YF(t,e,n){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Un(n,l.path);let u=!1,h;if(z(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,r=r.concat(eo(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=xF)u=!0,h="maxretry",r=r.concat(eo(t.serverSyncTree_,l.currentWriteId,!0));else{const d=QE(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){Jc("transaction failed: Data returned ",f,l.path);let p=Kt(f);typeof f=="object"&&f!=null&&ai(f,".priority")||(p=p.updatePriority(d.getPriority()));const m=l.currentWriteId,v=qE(t),w=IF(p,d,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=w,l.currentWriteId=HF(t),o.splice(o.indexOf(m),1),r=r.concat(lF(t.serverSyncTree_,l.path,w,l.currentWriteId,l.applyLocally)),r=r.concat(eo(t.serverSyncTree_,m,!0))}else u=!0,h="nodata",r=r.concat(eo(t.serverSyncTree_,l.currentWriteId,!0))}Zr(t.eventQueue_,n,r),r=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}$c(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)zs(i[a]);Hf(t,t.transactionQueueTree_)}function YE(t,e){let n,i=t.transactionQueueTree_;for(n=Pe(e);n!==null&&to(i)===void 0;)i=xf(i,n),e=mt(e),n=Pe(e);return i}function JE(t,e){const n=[];return ZE(t,e,n),n.sort((i,r)=>i.order-r.order),n}function ZE(t,e,n){const i=to(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Yc(e,r=>{ZE(t,r,n)})}function $c(t,e){const n=to(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,NE(e,n.length>0?n:void 0)}Yc(e,i=>{$c(t,i)})}function JF(t,e){const n=Ma(YE(t,e)),i=xf(t.transactionQueueTree_,e);return TF(i,r=>{Wf(t,r)}),Wf(t,i),DE(i,r=>{Wf(t,r)}),n}function Wf(t,e){const n=to(e);if(n){const i=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(z(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(z(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(eo(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?NE(e,void 0):n.length=s+1,Zr(t.eventQueue_,Ma(e),r);for(let o=0;o<i.length;o++)zs(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function $F(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Gn(`Invalid query segment '${n}' in query '${t}'`)}return e}const $E=function(t,e){const n=e2(t),i=n.namespace;n.domain==="firebase.com"&&Wr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Wr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||nP();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new mP(n.host,n.secure,i,e,r,"",i!==n.subdomain),path:new ct(n.pathString)}},e2=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(r=ZF(t.substring(u,h)));const d=$F(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=i}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Yt(this.snapshot.exportVal())}}class tI{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Ni;return WF(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Zc("OnDisconnect.remove",this._path);const e=new Ni;return zE(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Zc("OnDisconnect.set",this._path),UE("OnDisconnect.set",e,this._path,!1);const n=new Ni;return zE(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Zc("OnDisconnect.setWithPriority",this._path),UE("OnDisconnect.setWithPriority",e,this._path,!1),LF("OnDisconnect.setWithPriority",n,!1);const i=new Ni;return GF(this._repo,this._path,e,n,i.wrapCallback(()=>{})),i.promise}update(e){Zc("OnDisconnect.update",this._path),RF("OnDisconnect.update",e,this._path,!1);const n=new Ni;return zF(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return Fe(this._path)?null:of(this._path)}get ref(){return new Ri(this._repo,this._path)}get _queryIdentifier(){const e=nE(this._queryParams),n=Qd(e);return n==="{}"?"default":n}get _queryObject(){return nE(this._queryParams)}isEqual(e){if(e=it(e),!(e instanceof Gf))return!1;const n=this._repo===e._repo,i=af(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+BP(this._path)}}class Ri extends Gf{constructor(e,n){super(e,n,new ff,!1)}get parent(){const e=Wb(this._path);return e===null?null:new Ri(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Pa{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ct(e),i=eu(this.ref,e);return new Pa(this._node.getChild(n),i,At)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Pa(r,eu(this.ref,i),At)))}hasChild(e){const n=new ct(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function t4(t,e){return t=it(t),t._checkNotDeleted("ref"),e!==void 0?eu(t._root,e):t._root}function eu(t,e){return t=it(t),Pe(t._path)===null?MF("child","path",e,!1):jE("child","path",e,!1),new Ri(t._repo,Lt(t._path,e))}function n4(t){return t=it(t),new n2(t._repo,t._path)}class zf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new eI("value",this,new Pa(e.snapshotNode,new Ri(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new tI(this,e,n):null}matches(e){return e instanceof zf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Kf{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new tI(this,e,n):null}createEvent(e,n){z(e.childName!=null,"Child events should have a childName.");const i=eu(new Ri(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new eI(e.type,this,new Pa(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Kf?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function i2(t,e,n,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){const l=n,c=(u,h)=>{KE(t._repo,t,a),l(u,h)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new t2(n,s||void 0),a=e==="value"?new zf(o):new Kf(e,o);return KF(t._repo,t,a),()=>KE(t._repo,t,a)}function i4(t,e,n,i){return i2(t,"value",e,n,i)}$D(Ri);sF(Ri);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="FIREBASE_DATABASE_EMULATOR_HOST",Xf={};let s2=!1;function o2(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||Wr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ln("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=$E(s,r),a=o.repoInfo,l,c;typeof process!="undefined"&&(c=process.env[r2]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=$E(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const u=r&&l?new Yd(Yd.OWNER):new fP(t.name,t.options,e);NF("Invalid Firebase Database URL",o),Fe(o.path)||Wr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=l2(a,t,u,new dP(t.name,n));return new c2(h,t)}function a2(t,e){const n=Xf[e];(!n||n[t.key]!==t)&&Wr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),XF(t),delete n[t.key]}function l2(t,e,n,i){let r=Xf[e.name];r||(r={},Xf[e.name]=r);let s=r[t.toURLString()];return s&&Wr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new UF(t,s2,n,i),r[t.toURLString()]=s,s}class c2{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ri(this._repo,tt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(a2(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Wr("Cannot call "+e+" on a deleted database.")}}function r4(t=yo(),e){return fs(t,"database").getImmediate({identifier:e})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){JN(vr),Di(new gi("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return o2(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Mn(ub,hb,t),Mn(ub,hb,"esm2017")}ki.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ki.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};u2();var Da={exports:{}},no=typeof Reflect=="object"?Reflect:null,nI=no&&typeof no.apply=="function"?no.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},tu;no&&typeof no.ownKeys=="function"?tu=no.ownKeys:Object.getOwnPropertySymbols?tu=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:tu=function(e){return Object.getOwnPropertyNames(e)};function h2(t){console&&console.warn&&console.warn(t)}var iI=Number.isNaN||function(e){return e!==e};function ft(){ft.init.call(this)}Da.exports=ft;Da.exports.once=m2;ft.EventEmitter=ft;ft.prototype._events=void 0;ft.prototype._eventsCount=0;ft.prototype._maxListeners=void 0;var rI=10;function nu(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ft,"defaultMaxListeners",{enumerable:!0,get:function(){return rI},set:function(t){if(typeof t!="number"||t<0||iI(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");rI=t}});ft.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ft.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||iI(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function sI(t){return t._maxListeners===void 0?ft.defaultMaxListeners:t._maxListeners}ft.prototype.getMaxListeners=function(){return sI(this)};ft.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")nI(l,this,n);else for(var c=l.length,u=uI(l,c),i=0;i<c;++i)nI(u[i],this,n);return!0};function oI(t,e,n,i){var r,s,o;if(nu(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=sI(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,h2(a)}return t}ft.prototype.addListener=function(e,n){return oI(this,e,n,!1)};ft.prototype.on=ft.prototype.addListener;ft.prototype.prependListener=function(e,n){return oI(this,e,n,!0)};function d2(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function aI(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=d2.bind(i);return r.listener=n,i.wrapFn=r,r}ft.prototype.once=function(e,n){return nu(n),this.on(e,aI(this,e,n)),this};ft.prototype.prependOnceListener=function(e,n){return nu(n),this.prependListener(e,aI(this,e,n)),this};ft.prototype.removeListener=function(e,n){var i,r,s,o,a;if(nu(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount==0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():f2(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};ft.prototype.off=ft.prototype.removeListener;ft.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function lI(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?p2(r):uI(r,r.length)}ft.prototype.listeners=function(e){return lI(this,e,!0)};ft.prototype.rawListeners=function(e){return lI(this,e,!1)};ft.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):cI.call(t,e)};ft.prototype.listenerCount=cI;function cI(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ft.prototype.eventNames=function(){return this._eventsCount>0?tu(this._events):[]};function uI(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function f2(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function p2(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function m2(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}hI(t,e,s,{once:!0}),e!=="error"&&g2(t,r,{once:!0})})}function g2(t,e,n){typeof t.on=="function"&&hI(t,"error",e,n)}function hI(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var iu=Da.exports,_2=function(t){if(Array.isArray(t))return t},v2=function(t,e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(l){r=!0,s=l}finally{try{i||a.return==null||a.return()}finally{if(r)throw s}}return n}},dI=function(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},y2=function(t,e){if(t){if(typeof t=="string")return dI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dI(t,e):void 0}},b2=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},Qf=function(t,e){return _2(t)||v2(t,e)||y2(t,e)||b2()},E2=function(t,e){if(t==null)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r},I2=function(t,e){if(t==null)return{};var n,i,r=E2(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r},ru=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function rr(t,e){return t(e={exports:{}},e.exports),e.exports}var Y=rr(function(t){var e=function(n){var i,r=Object.prototype,s=r.hasOwnProperty,o=typeof Symbol=="function"?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(A,S,R){return Object.defineProperty(A,S,{value:R,enumerable:!0,configurable:!0,writable:!0}),A[S]}try{u({},"")}catch{u=function(S,R,j){return S[R]=j}}function h(A,S,R,j){var Q=S&&S.prototype instanceof w?S:w,he=Object.create(Q.prototype),W=new D(j||[]);return he._invoke=function(De,be,Ie){var Oe=f;return function(gt,G){if(Oe===g)throw new Error("Generator is already running");if(Oe===m){if(gt==="throw")throw G;return X()}for(Ie.method=gt,Ie.arg=G;;){var fe=Ie.delegate;if(fe){var Dt=k(fe,Ie);if(Dt){if(Dt===v)continue;return Dt}}if(Ie.method==="next")Ie.sent=Ie._sent=Ie.arg;else if(Ie.method==="throw"){if(Oe===f)throw Oe=m,Ie.arg;Ie.dispatchException(Ie.arg)}else Ie.method==="return"&&Ie.abrupt("return",Ie.arg);Oe=g;var Ot=d(De,be,Ie);if(Ot.type==="normal"){if(Oe=Ie.done?m:p,Ot.arg===v)continue;return{value:Ot.arg,done:Ie.done}}Ot.type==="throw"&&(Oe=m,Ie.method="throw",Ie.arg=Ot.arg)}}}(A,R,W),he}function d(A,S,R){try{return{type:"normal",arg:A.call(S,R)}}catch(j){return{type:"throw",arg:j}}}n.wrap=h;var f="suspendedStart",p="suspendedYield",g="executing",m="completed",v={};function w(){}function b(){}function y(){}var O={};O[a]=function(){return this};var C=Object.getPrototypeOf,_=C&&C(C(J([])));_&&_!==r&&s.call(_,a)&&(O=_);var I=y.prototype=w.prototype=Object.create(O);function K(A){["next","throw","return"].forEach(function(S){u(A,S,function(R){return this._invoke(S,R)})})}function L(A,S){var R;this._invoke=function(j,Q){function he(){return new S(function(W,De){(function be(Ie,Oe,gt,G){var fe=d(A[Ie],A,Oe);if(fe.type!=="throw"){var Dt=fe.arg,Ot=Dt.value;return Ot&&typeof Ot=="object"&&s.call(Ot,"__await")?S.resolve(Ot.__await).then(function(q){be("next",q,gt,G)},function(q){be("throw",q,gt,G)}):S.resolve(Ot).then(function(q){Dt.value=q,gt(Dt)},function(q){return be("throw",q,gt,G)})}G(fe.arg)})(j,Q,W,De)})}return R=R?R.then(he,he):he()}}function k(A,S){var R=A.iterator[S.method];if(R===i){if(S.delegate=null,S.method==="throw"){if(A.iterator.return&&(S.method="return",S.arg=i,k(A,S),S.method==="throw"))return v;S.method="throw",S.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var j=d(R,A.iterator,S.arg);if(j.type==="throw")return S.method="throw",S.arg=j.arg,S.delegate=null,v;var Q=j.arg;return Q?Q.done?(S[A.resultName]=Q.value,S.next=A.nextLoc,S.method!=="return"&&(S.method="next",S.arg=i),S.delegate=null,v):Q:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,v)}function N(A){var S={tryLoc:A[0]};1 in A&&(S.catchLoc=A[1]),2 in A&&(S.finallyLoc=A[2],S.afterLoc=A[3]),this.tryEntries.push(S)}function E(A){var S=A.completion||{};S.type="normal",delete S.arg,A.completion=S}function D(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(N,this),this.reset(!0)}function J(A){if(A){var S=A[a];if(S)return S.call(A);if(typeof A.next=="function")return A;if(!isNaN(A.length)){var R=-1,j=function Q(){for(;++R<A.length;)if(s.call(A,R))return Q.value=A[R],Q.done=!1,Q;return Q.value=i,Q.done=!0,Q};return j.next=j}}return{next:X}}function X(){return{value:i,done:!0}}return b.prototype=I.constructor=y,y.constructor=b,b.displayName=u(y,c,"GeneratorFunction"),n.isGeneratorFunction=function(A){var S=typeof A=="function"&&A.constructor;return!!S&&(S===b||(S.displayName||S.name)==="GeneratorFunction")},n.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,y):(A.__proto__=y,u(A,c,"GeneratorFunction")),A.prototype=Object.create(I),A},n.awrap=function(A){return{__await:A}},K(L.prototype),L.prototype[l]=function(){return this},n.AsyncIterator=L,n.async=function(A,S,R,j,Q){Q===void 0&&(Q=Promise);var he=new L(h(A,S,R,j),Q);return n.isGeneratorFunction(S)?he:he.next().then(function(W){return W.done?W.value:he.next()})},K(I),u(I,c,"Generator"),I[a]=function(){return this},I.toString=function(){return"[object Generator]"},n.keys=function(A){var S=[];for(var R in A)S.push(R);return S.reverse(),function j(){for(;S.length;){var Q=S.pop();if(Q in A)return j.value=Q,j.done=!1,j}return j.done=!0,j}},n.values=J,D.prototype={constructor:D,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(E),!A)for(var S in this)S.charAt(0)==="t"&&s.call(this,S)&&!isNaN(+S.slice(1))&&(this[S]=i)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var S=this;function R(be,Ie){return he.type="throw",he.arg=A,S.next=be,Ie&&(S.method="next",S.arg=i),!!Ie}for(var j=this.tryEntries.length-1;j>=0;--j){var Q=this.tryEntries[j],he=Q.completion;if(Q.tryLoc==="root")return R("end");if(Q.tryLoc<=this.prev){var W=s.call(Q,"catchLoc"),De=s.call(Q,"finallyLoc");if(W&&De){if(this.prev<Q.catchLoc)return R(Q.catchLoc,!0);if(this.prev<Q.finallyLoc)return R(Q.finallyLoc)}else if(W){if(this.prev<Q.catchLoc)return R(Q.catchLoc,!0)}else{if(!De)throw new Error("try statement without catch or finally");if(this.prev<Q.finallyLoc)return R(Q.finallyLoc)}}}},abrupt:function(A,S){for(var R=this.tryEntries.length-1;R>=0;--R){var j=this.tryEntries[R];if(j.tryLoc<=this.prev&&s.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var Q=j;break}}Q&&(A==="break"||A==="continue")&&Q.tryLoc<=S&&S<=Q.finallyLoc&&(Q=null);var he=Q?Q.completion:{};return he.type=A,he.arg=S,Q?(this.method="next",this.next=Q.finallyLoc,v):this.complete(he)},complete:function(A,S){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&S&&(this.next=S),v},finish:function(A){for(var S=this.tryEntries.length-1;S>=0;--S){var R=this.tryEntries[S];if(R.finallyLoc===A)return this.complete(R.completion,R.afterLoc),E(R),v}},catch:function(A){for(var S=this.tryEntries.length-1;S>=0;--S){var R=this.tryEntries[S];if(R.tryLoc===A){var j=R.completion;if(j.type==="throw"){var Q=j.arg;E(R)}return Q}}throw new Error("illegal catch attempt")},delegateYield:function(A,S,R){return this.delegate={iterator:J(A),resultName:S,nextLoc:R},this.method==="next"&&(this.arg=i),v}},n}(t.exports);try{regeneratorRuntime=e}catch{Function("r","regeneratorRuntime = r")(e)}});function fI(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(i,r)}var Ne=function(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function o(l){fI(s,i,r,o,a,"next",l)}function a(l){fI(s,i,r,o,a,"throw",l)}o(void 0)})}},sr=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},hi=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};function pI(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var or=function(t,e,n){return e&&pI(t.prototype,e),n&&pI(t,n),t},Yf=rr(function(t){function e(n,i){return t.exports=e=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},e(n,i)}t.exports=e}),su=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yf(t,e)},Sn=rr(function(t){function e(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t.exports=e=function(i){return typeof i}:t.exports=e=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e(n)}t.exports=e}),ou=function(t,e){return!e||Sn(e)!=="object"&&typeof e!="function"?hi(t):e},Li=rr(function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},e(n)}t.exports=e}),di=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},w2=typeof Map=="function",T2=typeof Set=="function",C2=typeof WeakSet=="function",mI=Object.keys,gI=function(t,e){return t&&typeof t=="object"&&e.add(t)},_I=function(t,e,n,i){for(var r,s=0;s<t.length;s++)if(n((r=t[s])[0],e[0],i)&&n(r[1],e[1],i))return!0;return!1},Jf=function(t,e,n,i){for(var r=0;r<t.length;r++)if(n(t[r],e,i))return!0;return!1},Fa=function(t,e){return t===e||t!=t&&e!=e},vI=function(t){return t.constructor===Object},yI=function(t){return typeof t.then=="function"},bI=function(t){return!(!t.$$typeof||!t._store)},EI=function(t){return function(e){var n=t||e;return function(i,r,s){s===void 0&&(s=C2?new WeakSet:Object.create({_values:[],add:function(l){this._values.push(l)},has:function(l){return!!~this._values.indexOf(l)}}));var o=s.has(i),a=s.has(r);return o||a?o&&a:(gI(i,s),gI(r,s),n(i,r,s))}}},II=function(t){var e=[];return t.forEach(function(n,i){return e.push([i,n])}),e},wI=function(t){var e=[];return t.forEach(function(n){return e.push(n)}),e},S2=function(t,e,n,i){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e[r],i))return!1;return!0},A2=function(t,e,n,i){if(t.size!==e.size)return!1;for(var r=II(t),s=II(e),o=0;o<r.length;o++)if(!_I(s,r[o],n,i)||!_I(r,s[o],n,i))return!1;return!0},TI=function(t,e,n,i){var r,s=mI(t),o=mI(e);if(s.length!==o.length)return!1;for(var a=0;a<s.length;a++)if(r=s[a],!Jf(o,r,Fa)||(r!=="_owner"||!bI(t)||!bI(e))&&!n(t[r],e[r],i))return!1;return!0},k2=function(t,e){return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.unicode===e.unicode&&t.sticky===e.sticky&&t.lastIndex===e.lastIndex},O2=function(t,e,n,i){if(t.size!==e.size)return!1;for(var r=wI(t),s=wI(e),o=0;o<r.length;o++)if(!Jf(s,r[o],n,i)||!Jf(r,s[o],n,i))return!1;return!0},CI=Array.isArray,au=function(t){var e=typeof t=="function"?t(n):n;function n(i,r,s){if(Fa(i,r))return!0;var o=typeof i;if(o!==typeof r||o!=="object"||!i||!r)return!1;if(vI(i)&&vI(r))return TI(i,r,e,s);var a=CI(i),l=CI(r);if(a||l)return a===l&&S2(i,r,e,s);var c=i instanceof Date,u=r instanceof Date;if(c||u)return c===u&&Fa(i.getTime(),r.getTime());var h=i instanceof RegExp,d=r instanceof RegExp;if(h||d)return h===d&&k2(i,r);if(yI(i)||yI(r))return i===r;if(w2){var f=i instanceof Map,p=r instanceof Map;if(f||p)return f===p&&A2(i,r,e,s)}if(T2){var g=i instanceof Set,m=r instanceof Set;if(g||m)return g===m&&O2(i,r,e,s)}return TI(i,r,e,s)}return n},xa=(au(EI()),au(EI(Fa)),au());au(function(){return Fa});const R2={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},SI={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Mt={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},An={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ar={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class B{static getFirstMatch(e,n){const i=n.match(e);return i&&i.length>0&&i[1]||""}static getSecondMatch(e,n){const i=n.match(e);return i&&i.length>1&&i[2]||""}static matchAndReturnConst(e,n,i){if(e.test(n))return i}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(i=>parseInt(i,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(i=>parseInt(i,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,i=!1){const r=B.getVersionPrecision(e),s=B.getVersionPrecision(n);let o=Math.max(r,s),a=0;const l=B.map([e,n],c=>{const u=o-B.getVersionPrecision(c),h=c+new Array(u+1).join(".0");return B.map(h.split("."),d=>new Array(20-d.length).join("0")+d).reverse()});for(i&&(a=o-Math.min(r,s)),o-=1;o>=a;){if(l[0][o]>l[1][o])return 1;if(l[0][o]===l[1][o]){if(o===a)return 0;o-=1}else if(l[0][o]<l[1][o])return-1}}static map(e,n){const i=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(r=0;r<e.length;r+=1)i.push(n(e[r]));return i}static find(e,n){let i,r;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(i=0,r=e.length;i<r;i+=1){const s=e[i];if(n(s,i))return s}}static assign(e,...n){const i=e;let r,s;if(Object.assign)return Object.assign(e,...n);for(r=0,s=n.length;r<s;r+=1){const o=n[r];typeof o=="object"&&o!==null&&Object.keys(o).forEach(a=>{i[a]=o[a]})}return e}static getBrowserAlias(e){return R2[e]}static getBrowserTypeByAlias(e){return SI[e]||""}}const Et=/version\/(\d+(\.?_?\d+)+)/i,L2=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=B.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=B.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=B.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=B.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=B.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=B.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=B.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=B.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=B.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=B.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=B.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=B.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=B.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=B.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=B.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=B.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=B.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=B.getFirstMatch(Et,t)||B.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=B.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=B.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=B.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=B.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=B.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=B.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=B.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=B.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=B.getFirstMatch(Et,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:B.getFirstMatch(e,t),version:B.getSecondMatch(e,t)}}}];var M2=[{test:[/Roku\/DVP/],describe(t){const e=B.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:An.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=B.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:An.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=B.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=B.getWindowsVersionName(e);return{name:An.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe(t){const e=B.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return{name:An.iOS,version:e}}},{test:[/macintosh/i],describe(t){const e=B.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=B.getMacOSVersionName(e),i={name:An.MacOS,version:e};return n&&(i.versionName=n),i}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=B.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:An.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=B.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=B.getAndroidVersionName(e),i={name:An.Android,version:e};return n&&(i.versionName=n),i}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=B.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:An.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=B.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||B.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||B.getFirstMatch(/\bbb(\d+)/i,t);return{name:An.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=B.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:An.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=B.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:An.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:An.Linux})},{test:[/CrOS/],describe:()=>({name:An.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=B.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:An.PlayStation4,version:e}}}],N2=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=B.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:Mt.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Mt.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Mt.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:()=>({type:Mt.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Mt.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Mt.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Mt.tablet})},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=B.getFirstMatch(/(ipod|iphone)/i,t);return{type:Mt.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Mt.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Mt.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:Mt.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:Mt.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:Mt.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:Mt.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:Mt.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:Mt.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:Mt.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:Mt.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:Mt.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:Mt.tv})}],P2=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:ar.Blink};const e=B.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:ar.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:ar.Trident},n=B.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:ar.Presto},n=B.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:ar.Gecko},n=B.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:ar.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:ar.WebKit},n=B.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class AI{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=B.find(L2,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=B.find(M2,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=B.find(N2,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=B.find(P2,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return B.assign({},this.parsedResult)}satisfies(e){const n={};let i=0;const r={};let s=0;if(Object.keys(e).forEach(o=>{const a=e[o];typeof a=="string"?(r[o]=a,s+=1):typeof a=="object"&&(n[o]=a,i+=1)}),i>0){const o=Object.keys(n),a=B.find(o,c=>this.isOS(c));if(a){const c=this.satisfies(n[a]);if(c!==void 0)return c}const l=B.find(o,c=>this.isPlatform(c));if(l){const c=this.satisfies(n[l]);if(c!==void 0)return c}}if(s>0){const o=Object.keys(r),a=B.find(o,l=>this.isBrowser(l,!0));if(a!==void 0)return this.compareVersion(r[a])}}isBrowser(e,n=!1){const i=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const s=B.getBrowserTypeByAlias(r);return n&&s&&(r=s.toLowerCase()),r===i}compareVersion(e){let n=[0],i=e,r=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(i=e.substr(1),e[1]==="="?(r=!0,i=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?i=e.substr(1):e[0]==="~"&&(r=!0,i=e.substr(1)),n.indexOf(B.compareVersions(s,i,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}var kI="new",Zf="loading",Ua="joining-meeting",cn="joined-meeting",$r="left-meeting",es="error",$f="unknown",D2="base",F2="*",OI="available-devices-updated",io="fullscreen",ro="exited-fullscreen",lu="daily-custom-track",cu={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image"},ep={PLAY:"play",PAUSE:"pause"},x2="playing",U2="paused",RI=10,tp=["jpg","png","jpeg"];function fi(){return!Nt()&&typeof window!="undefined"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function Nt(){return typeof navigator!="undefined"&&navigator.product&&navigator.product==="ReactNative"}function LI(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function j2(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&function(t,e){if(!t||!e)return!0;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0}(uu(),function(){switch(uu()){case"Chrome":return PI();case"Safari":return FI();case"Firefox":return xI();case"Edge":return function(){var t=0,e=0;if(typeof window!="undefined"){var n=fi(),i=n.match(/Edge\/(\d+).(\d+)/);if(i)try{t=parseInt(i[1]),e=parseInt(i[2])}catch{}}return{major:t,minor:e}}()}}())}function MI(){if(Nt()||!document)return!1;var t=document.createElement("iframe");return!!t.requestFullscreen||!!t.webkitRequestFullscreen}var V2=["Chrome","Firefox"];function B2(){return!Nt()&&!function(){var t=fi();if(t.match(/Mobi/)||t.match(/Android/)||fi().match(/DailyAnd\//))return!0}()&&V2.includes(uu())}function np(){return!!Nt()||NI()}function NI(){return LI()&&!function(){var t,e=uu();if(!fi())return!0;switch(e){case"Chrome":return(t=PI()).major&&t.major>0&&t.major<61;case"Firefox":return(t=xI()).major<78;case"Safari":return(t=FI()).major<12;default:return!0}}()}function uu(){if(typeof window!="undefined"){var t=fi();return DI()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function PI(){var t=0,e=0,n=0,i=0,r=!1;if(typeof window!="undefined"){var s=fi(),o=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(o)try{t=parseInt(o[1]),e=parseInt(o[2]),n=parseInt(o[3]),i=parseInt(o[4]),r=s.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:n,patch:i,opera:r}}function DI(){return!!fi().match(/iPad|iPhone|iPod/i)&&LI()}function FI(){var t=0,e=0,n=0;if(typeof window!="undefined"){var i=fi().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(i)try{t=parseInt(i[1]),e=parseInt(i[2]),n=parseInt(i[4])}catch{}else DI()&&(t=14,e=0,n=3)}return{major:t,minor:e,point:n}}function xI(){var t=0,e=0;if(typeof window!="undefined"){var n=fi().match(/Firefox\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}function ip(){return Date.now()+Math.random().toString()}function ja(){throw new Error("Method must be implemented in subclass")}function Va(t){var e=t?new URL(t).origin:null;return!e||e.match(/https:\/\/[^.]+\.daily\.co/)?np()?"https://c.daily.co/static/call-machine-object-bundle.js":"https://c.daily.co/static/call-machine-object-nosfu-bundle.js":(e||(console.warn("No baseUrl provided for call object bundle. Defaulting to production CDN..."),e="https://c.daily.co"),np()?"".concat(e,"/static/call-machine-object-bundle.js"):"".concat(e,"/static/call-machine-object-nosfu-bundle.js"))}function UI(t){try{new URL(t)}catch{return!1}return!0}var jI=function(){function t(){sr(this,t)}return or(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,i){ja()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,i){ja()}},{key:"sendMessageToCallMachine",value:function(e,n,i,r){ja()}},{key:"sendMessageToDailyJs",value:function(e,n,i){ja()}},{key:"removeListener",value:function(e){ja()}}]),t}();function VI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function rp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VI(Object(n),!0).forEach(function(i){di(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function H2(t){var e=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Li(t);if(e){var r=Li(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ou(this,n)}}var q2=function(t){su(n,jI);var e=H2(n);function n(){var i;return sr(this,n),(i=e.call(this))._wrappedListeners={},i._messageCallbacks={},i}return or(n,[{key:"addListenerForMessagesFromCallMachine",value:function(i,r,s){var o=this,a=function(l){if(l.data&&l.data.what==="iframe-call-message"&&(!l.data.callFrameId||l.data.callFrameId===r)&&(!l.data.from||l.data.from!=="module")){var c=rp({},l.data);if(delete c.from,c.callbackStamp&&o._messageCallbacks[c.callbackStamp]){var u=c.callbackStamp;o._messageCallbacks[u].call(s,c),delete o._messageCallbacks[u]}delete c.what,delete c.callbackStamp,i.call(s,c)}};this._wrappedListeners[i]=a,window.addEventListener("message",a)}},{key:"addListenerForMessagesFromDailyJs",value:function(i,r,s){var o=function(a){if(!(!a.data||a.data.what!=="iframe-call-message"||!a.data.action||a.data.from&&a.data.from!=="module"||a.data.callFrameId&&r&&a.data.callFrameId!==r)){var l=a.data;i.call(s,l)}};this._wrappedListeners[i]=o,window.addEventListener("message",o)}},{key:"sendMessageToCallMachine",value:function(i,r,s,o){var a=rp({},i);if(a.what="iframe-call-message",a.from="module",a.callFrameId=o,r){var l=ip();this._messageCallbacks[l]=r,a.callbackStamp=l}(s?s.contentWindow:window).postMessage(a,"*")}},{key:"sendMessageToDailyJs",value:function(i,r,s){i.what="iframe-call-message",i.callFrameId=s,i.from="embedded",(r?window:window.parent).postMessage(i,"*")}},{key:"removeListener",value:function(i){var r=this._wrappedListeners[i];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[i])}},{key:"forwardPackagedMessageToCallMachine",value:function(i,r,s){var o=rp({},i);o.callFrameId=s,(r?r.contentWindow:window).postMessage(o,"*")}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(i,r){var s=function(o){if(o.data&&o.data.what==="iframe-call-message"&&(!o.data.callFrameId||o.data.callFrameId===r)&&(!o.data.from||o.data.from!=="module")){var a=o.data;i(a)}};return this._wrappedListeners[i]=s,window.addEventListener("message",s),i}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(i){var r=this._wrappedListeners[i];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[i])}}]),n}();function W2(t){var e=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Li(t);if(e){var r=Li(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ou(this,n)}}global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new Da.exports.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new Da.exports.EventEmitter;var G2=function(t){su(n,jI);var e=W2(n);function n(){var i;return sr(this,n),(i=e.call(this))._wrappedListeners={},i._messageCallbacks={},i}return or(n,[{key:"addListenerForMessagesFromCallMachine",value:function(i,r,s){this._addListener(i,global.callMachineToDailyJsEmitter,s,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(i,r,s){this._addListener(i,global.dailyJsToCallMachineEmitter,s,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(i,r){this._sendMessage(i,global.dailyJsToCallMachineEmitter,"sending message to call machine",r)}},{key:"sendMessageToDailyJs",value:function(i){this._sendMessage(i,global.callMachineToDailyJsEmitter,"sending message to daily-js")}},{key:"removeListener",value:function(i){var r=this._wrappedListeners[i];r&&(global.callMachineToDailyJsEmitter.removeListener("message",r),global.dailyJsToCallMachineEmitter.removeListener("message",r),delete this._wrappedListeners[i])}},{key:"_addListener",value:function(i,r,s,o){var a=this,l=function(c){if(c.callbackStamp&&a._messageCallbacks[c.callbackStamp]){var u=c.callbackStamp;a._messageCallbacks[u].call(s,c),delete a._messageCallbacks[u]}i.call(s,c)};this._wrappedListeners[i]=l,r.addListener("message",l)}},{key:"_sendMessage",value:function(i,r,s,o){if(o){var a=ip();this._messageCallbacks[a]=o,i.callbackStamp=a}r.emit("message",i)}}]),n}(),z2=function(t){return Function.toString.call(t).indexOf("[native code]")!==-1},K2=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}},X2=rr(function(t){function e(n,i,r){return K2()?t.exports=e=Reflect.construct:t.exports=e=function(s,o,a){var l=[null];l.push.apply(l,o);var c=new(Function.bind.apply(s,l));return a&&Yf(c,a.prototype),c},e.apply(null,arguments)}t.exports=e}),Q2=rr(function(t){function e(n){var i=typeof Map=="function"?new Map:void 0;return t.exports=e=function(r){if(r===null||!z2(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(r))return i.get(r);i.set(r,s)}function s(){return X2(r,arguments,Li(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Yf(s,r)},e(n)}t.exports=e});function Y2(t){var e=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Li(t);if(e){var r=Li(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ou(this,n)}}var J2=function(){function t(){sr(this,t),this._currentLoad=null}return or(t,[{key:"load",value:function(e,n,i,r){if(this.loaded)return window._dailyCallObjectSetup(n),void i(!0);(function(s){window._dailyConfig||(window._dailyConfig={}),window._dailyConfig.callFrameId=s})(n),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new $2(e,n,function(){i(!1)},r),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel()}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),t}(),Z2=3,$2=function(){function t(e,n,i,r){sr(this,t),this._attemptsRemaining=Z2,this._currentAttempt=null,this._meetingOrBaseUrl=e,this._callFrameId=n,this._successCallback=i,this._failureCallback=r}return or(t,[{key:"start",value:function(){var e=this;this._currentAttempt||(this._currentAttempt=new BI(this._meetingOrBaseUrl,this._callFrameId,this._successCallback,function n(i){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(i,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout(function(){e._currentAttempt.cancelled||(e._currentAttempt=new BI(e._meetingOrBaseUrl,e._callFrameId,e._successCallback,n),e._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),t}(),sp=function(t){su(n,t);var e=Y2(n);function n(){return sr(this,n),e.apply(this,arguments)}return n}(Q2(Error)),BI=function(){function t(e,n,i,r){sr(this,t),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache!="undefined"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._meetingOrBaseUrl=e,this._callFrameId=n,this._successCallback=i,this._failureCallback=r}return or(t,[{key:"start",value:function(){var e=Ne(Y.mark(function n(){var i;return Y.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0,i=Va(this._meetingOrBaseUrl),r.next=8;break;case 4:return r.prev=4,r.t0=r.catch(0),this._failureCallback("Failed to get call object bundle URL ".concat(i,": ").concat(r.t0)),r.abrupt("return");case 8:return r.next=10,this._tryLoadFromIOSCache(i);case 10:!r.sent&&this._loadFromNetwork(i);case 12:case"end":return r.stop()}},n,this,[[0,4]])}));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:function(){var e=Ne(Y.mark(function n(i){var r;return Y.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this._iosCache){s.next=2;break}return s.abrupt("return",!1);case 2:return s.prev=2,s.next=5,this._iosCache.get(i);case 5:if(r=s.sent,!this.cancelled){s.next=8;break}return s.abrupt("return",!0);case 8:if(r){s.next=10;break}return s.abrupt("return",!1);case 10:if(r.code){s.next=13;break}return this._refetchHeaders=r.refetchHeaders,s.abrupt("return",!1);case 13:return Function('"use strict";'+r.code)(),this.succeeded=!0,this._successCallback(),s.abrupt("return",!0);case 19:return s.prev=19,s.t0=s.catch(2),s.abrupt("return",!1);case 22:case"end":return s.stop()}},n,this,[[2,19]])}));return function(n){return e.apply(this,arguments)}}()},{key:"_loadFromNetwork",value:function(){var e=Ne(Y.mark(function n(i){var r,s,o,a=this;return Y.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._networkTimeout=setTimeout(function(){a._networkTimedOut=!0,a._failureCallback("Timed out (>".concat(2e4," ms) when loading call object bundle ").concat(i))},2e4),l.prev=1,r=this._refetchHeaders?{headers:this._refetchHeaders}:{},l.next=5,fetch(i,r);case 5:if(s=l.sent,clearTimeout(this._networkTimeout),!this.cancelled&&!this._networkTimedOut){l.next=9;break}throw new sp;case 9:return l.next=11,this._getBundleCodeFromResponse(i,s);case 11:if(o=l.sent,!this.cancelled){l.next=14;break}throw new sp;case 14:Function('"use strict";'+o)(),this._iosCache&&this._iosCache.set(i,o,s.headers),this.succeeded=!0,this._successCallback(),l.next=26;break;case 20:if(l.prev=20,l.t0=l.catch(1),clearTimeout(this._networkTimeout),!(l.t0 instanceof sp||this.cancelled||this._networkTimedOut)){l.next=25;break}return l.abrupt("return");case 25:this._failureCallback("Failed to load call object bundle ".concat(i,": ").concat(l.t0));case 26:case"end":return l.stop()}},n,this,[[1,20]])}));return function(n){return e.apply(this,arguments)}}()},{key:"_getBundleCodeFromResponse",value:function(){var e=Ne(Y.mark(function n(i,r){var s;return Y.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!r.ok){o.next=4;break}return o.next=3,r.text();case 3:return o.abrupt("return",o.sent);case 4:if(!this._iosCache||r.status!==304){o.next=9;break}return o.next=7,this._iosCache.renew(i,r.headers);case 7:return s=o.sent,o.abrupt("return",s.code);case 9:throw new Error("Received ".concat(r.status," response"));case 10:case"end":return o.stop()}},n,this)}));return function(n,i){return e.apply(this,arguments)}}()}]),t}(),HI=function(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s},ex=function(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[t?a:++r];if(n(s[l],l,s)===!1)break}return e}}(),tx=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i},qI=typeof ru=="object"&&ru&&ru.Object===Object&&ru,nx=typeof self=="object"&&self&&self.Object===Object&&self,Mi=qI||nx||Function("return this")(),lr=Mi.Symbol,WI=Object.prototype,ix=WI.hasOwnProperty,rx=WI.toString,Ba=lr?lr.toStringTag:void 0,sx=function(t){var e=ix.call(t,Ba),n=t[Ba];try{t[Ba]=void 0;var i=!0}catch{}var r=rx.call(t);return i&&(e?t[Ba]=n:delete t[Ba]),r},ox=Object.prototype.toString,ax=function(t){return ox.call(t)},lx="[object Null]",cx="[object Undefined]",GI=lr?lr.toStringTag:void 0,so=function(t){return t==null?t===void 0?cx:lx:GI&&GI in Object(t)?sx(t):ax(t)},oo=function(t){return t!=null&&typeof t=="object"},ux="[object Arguments]",zI=function(t){return oo(t)&&so(t)==ux},KI=Object.prototype,hx=KI.hasOwnProperty,dx=KI.propertyIsEnumerable,XI=zI(function(){return arguments}())?zI:function(t){return oo(t)&&hx.call(t,"callee")&&!dx.call(t,"callee")},Zn=Array.isArray,fx=function(){return!1},op=rr(function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n?Mi.Buffer:void 0,s=(r?r.isBuffer:void 0)||fx;t.exports=s}),px=9007199254740991,mx=/^(?:0|[1-9]\d*)$/,QI=function(t,e){var n=typeof t;return!!(e=e==null?px:e)&&(n=="number"||n!="symbol"&&mx.test(t))&&t>-1&&t%1==0&&t<e},gx=9007199254740991,ap=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=gx},Tt={};Tt["[object Float32Array]"]=Tt["[object Float64Array]"]=Tt["[object Int8Array]"]=Tt["[object Int16Array]"]=Tt["[object Int32Array]"]=Tt["[object Uint8Array]"]=Tt["[object Uint8ClampedArray]"]=Tt["[object Uint16Array]"]=Tt["[object Uint32Array]"]=!0,Tt["[object Arguments]"]=Tt["[object Array]"]=Tt["[object ArrayBuffer]"]=Tt["[object Boolean]"]=Tt["[object DataView]"]=Tt["[object Date]"]=Tt["[object Error]"]=Tt["[object Function]"]=Tt["[object Map]"]=Tt["[object Number]"]=Tt["[object Object]"]=Tt["[object RegExp]"]=Tt["[object Set]"]=Tt["[object String]"]=Tt["[object WeakMap]"]=!1;var _x=function(t){return oo(t)&&ap(t.length)&&!!Tt[so(t)]},YI=function(t){return function(e){return t(e)}},JI=rr(function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n&&qI.process,s=function(){try{var o=i&&i.require&&i.require("util").types;return o||r&&r.binding&&r.binding("util")}catch{}}();t.exports=s}),ZI=JI&&JI.isTypedArray,$I=ZI?YI(ZI):_x,vx=Object.prototype.hasOwnProperty,yx=function(t,e){var n=Zn(t),i=!n&&XI(t),r=!n&&!i&&op(t),s=!n&&!i&&!r&&$I(t),o=n||i||r||s,a=o?tx(t.length,String):[],l=a.length;for(var c in t)!e&&!vx.call(t,c)||o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||QI(c,l))||a.push(c);return a},bx=Object.prototype,Ex=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||bx)},Ix=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),wx=Object.prototype.hasOwnProperty,Tx=function(t){if(!Ex(t))return Ix(t);var e=[];for(var n in Object(t))wx.call(t,n)&&n!="constructor"&&e.push(n);return e},lp=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},Cx="[object AsyncFunction]",Sx="[object Function]",Ax="[object GeneratorFunction]",kx="[object Proxy]",e0=function(t){if(!lp(t))return!1;var e=so(t);return e==Sx||e==Ax||e==Cx||e==kx},cp=function(t){return t!=null&&ap(t.length)&&!e0(t)},up=function(t){return cp(t)?yx(t):Tx(t)},t0=function(t,e){return function(n,i){if(n==null)return n;if(!cp(n))return t(n,i);for(var r=n.length,s=e?r:-1,o=Object(n);(e?s--:++s<r)&&i(o[s],s,o)!==!1;);return n}}(function(t,e){return t&&ex(t,e,up)}),Ox=function(t,e){var n=[];return t0(t,function(i,r,s){e(i,r,s)&&n.push(i)}),n},Rx=function(){this.__data__=[],this.size=0},n0=function(t,e){return t===e||t!=t&&e!=e},hu=function(t,e){for(var n=t.length;n--;)if(n0(t[n][0],e))return n;return-1},Lx=Array.prototype.splice,Mx=function(t){var e=this.__data__,n=hu(e,t);return!(n<0||(n==e.length-1?e.pop():Lx.call(e,n,1),--this.size,0))},Nx=function(t){var e=this.__data__,n=hu(e,t);return n<0?void 0:e[n][1]},Px=function(t){return hu(this.__data__,t)>-1},Dx=function(t,e){var n=this.__data__,i=hu(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};function ao(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ao.prototype.clear=Rx,ao.prototype.delete=Mx,ao.prototype.get=Nx,ao.prototype.has=Px,ao.prototype.set=Dx;var du=ao,Fx=function(){this.__data__=new du,this.size=0},xx=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ux=function(t){return this.__data__.get(t)},i0,jx=function(t){return this.__data__.has(t)},hp=Mi["__core-js_shared__"],r0=(i0=/[^.]+$/.exec(hp&&hp.keys&&hp.keys.IE_PROTO||""))?"Symbol(src)_1."+i0:"",Vx=function(t){return!!r0&&r0 in t},Bx=Function.prototype.toString,ts=function(t){if(t!=null){try{return Bx.call(t)}catch{}try{return t+""}catch{}}return""},Hx=/^\[object .+?Constructor\]$/,qx=Function.prototype,Wx=Object.prototype,Gx=qx.toString,zx=Wx.hasOwnProperty,Kx=RegExp("^"+Gx.call(zx).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xx=function(t){return!(!lp(t)||Vx(t))&&(e0(t)?Kx:Hx).test(ts(t))},Qx=function(t,e){return t==null?void 0:t[e]},lo=function(t,e){var n=Qx(t,e);return Xx(n)?n:void 0},Ha=lo(Mi,"Map"),qa=lo(Object,"create"),Yx=function(){this.__data__=qa?qa(null):{},this.size=0},Jx=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Zx="__lodash_hash_undefined__",$x=Object.prototype.hasOwnProperty,eU=function(t){var e=this.__data__;if(qa){var n=e[t];return n===Zx?void 0:n}return $x.call(e,t)?e[t]:void 0},tU=Object.prototype.hasOwnProperty,nU=function(t){var e=this.__data__;return qa?e[t]!==void 0:tU.call(e,t)},iU="__lodash_hash_undefined__",rU=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=qa&&e===void 0?iU:e,this};function co(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}co.prototype.clear=Yx,co.prototype.delete=Jx,co.prototype.get=eU,co.prototype.has=nU,co.prototype.set=rU;var s0=co,sU=function(){this.size=0,this.__data__={hash:new s0,map:new(Ha||du),string:new s0}},oU=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},fu=function(t,e){var n=t.__data__;return oU(e)?n[typeof e=="string"?"string":"hash"]:n.map},aU=function(t){var e=fu(this,t).delete(t);return this.size-=e?1:0,e},lU=function(t){return fu(this,t).get(t)},cU=function(t){return fu(this,t).has(t)},uU=function(t,e){var n=fu(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function uo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}uo.prototype.clear=sU,uo.prototype.delete=aU,uo.prototype.get=lU,uo.prototype.has=cU,uo.prototype.set=uU;var pu=uo,hU=200,dU=function(t,e){var n=this.__data__;if(n instanceof du){var i=n.__data__;if(!Ha||i.length<hU-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new pu(i)}return n.set(t,e),this.size=n.size,this};function ho(t){var e=this.__data__=new du(t);this.size=e.size}ho.prototype.clear=Fx,ho.prototype.delete=xx,ho.prototype.get=Ux,ho.prototype.has=jx,ho.prototype.set=dU;var mu=ho,fU="__lodash_hash_undefined__",pU=function(t){return this.__data__.set(t,fU),this},mU=function(t){return this.__data__.has(t)};function gu(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new pu;++e<n;)this.add(t[e])}gu.prototype.add=gu.prototype.push=pU,gu.prototype.has=mU;var gU=gu,_U=function(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1},vU=function(t,e){return t.has(e)},yU=1,bU=2,o0=function(t,e,n,i,r,s){var o=n&yU,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var u=-1,h=!0,d=n&bU?new gU:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var f=t[u],p=e[u];if(i)var g=o?i(p,f,u,e,t,s):i(f,p,u,t,e,s);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!_U(e,function(m,v){if(!vU(d,v)&&(f===m||r(f,m,n,i,s)))return d.push(v)})){h=!1;break}}else if(f!==p&&!r(f,p,n,i,s)){h=!1;break}}return s.delete(t),s.delete(e),h},a0=Mi.Uint8Array,EU=function(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n},IU=function(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n},wU=1,TU=2,CU="[object Boolean]",SU="[object Date]",AU="[object Error]",kU="[object Map]",OU="[object Number]",RU="[object RegExp]",LU="[object Set]",MU="[object String]",NU="[object Symbol]",PU="[object ArrayBuffer]",DU="[object DataView]",l0=lr?lr.prototype:void 0,dp=l0?l0.valueOf:void 0,FU=function(t,e,n,i,r,s,o){switch(n){case DU:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case PU:return!(t.byteLength!=e.byteLength||!s(new a0(t),new a0(e)));case CU:case SU:case OU:return n0(+t,+e);case AU:return t.name==e.name&&t.message==e.message;case RU:case MU:return t==e+"";case kU:var a=EU;case LU:var l=i&wU;if(a||(a=IU),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=TU,o.set(t,e);var u=o0(a(t),a(e),i,r,s,o);return o.delete(t),u;case NU:if(dp)return dp.call(t)==dp.call(e)}return!1},xU=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t},UU=function(t,e,n){var i=e(t);return Zn(t)?i:xU(i,n(t))},jU=function(){return[]},VU=Object.prototype.propertyIsEnumerable,c0=Object.getOwnPropertySymbols,BU=c0?function(t){return t==null?[]:(t=Object(t),HI(c0(t),function(e){return VU.call(t,e)}))}:jU,u0=function(t){return UU(t,up,BU)},HU=1,qU=Object.prototype.hasOwnProperty,WU=function(t,e,n,i,r,s){var o=n&HU,a=u0(t),l=a.length;if(l!=u0(e).length&&!o)return!1;for(var c=l;c--;){var u=a[c];if(!(o?u in e:qU.call(e,u)))return!1}var h=s.get(t);if(h&&s.get(e))return h==e;var d=!0;s.set(t,e),s.set(e,t);for(var f=o;++c<l;){var p=t[u=a[c]],g=e[u];if(i)var m=o?i(g,p,u,e,t,s):i(p,g,u,t,e,s);if(!(m===void 0?p===g||r(p,g,n,i,s):m)){d=!1;break}f||(f=u=="constructor")}if(d&&!f){var v=t.constructor,w=e.constructor;v!=w&&"constructor"in t&&"constructor"in e&&!(typeof v=="function"&&v instanceof v&&typeof w=="function"&&w instanceof w)&&(d=!1)}return s.delete(t),s.delete(e),d},fp=lo(Mi,"DataView"),pp=lo(Mi,"Promise"),mp=lo(Mi,"Set"),gp=lo(Mi,"WeakMap"),GU=ts(fp),zU=ts(Ha),KU=ts(pp),XU=ts(mp),QU=ts(gp),ns=so;(fp&&ns(new fp(new ArrayBuffer(1)))!="[object DataView]"||Ha&&ns(new Ha)!="[object Map]"||pp&&ns(pp.resolve())!="[object Promise]"||mp&&ns(new mp)!="[object Set]"||gp&&ns(new gp)!="[object WeakMap]")&&(ns=function(t){var e=so(t),n=e=="[object Object]"?t.constructor:void 0,i=n?ts(n):"";if(i)switch(i){case GU:return"[object DataView]";case zU:return"[object Map]";case KU:return"[object Promise]";case XU:return"[object Set]";case QU:return"[object WeakMap]"}return e});var h0=ns,YU=1,d0="[object Arguments]",f0="[object Array]",_u="[object Object]",p0=Object.prototype.hasOwnProperty,JU=function(t,e,n,i,r,s){var o=Zn(t),a=Zn(e),l=o?f0:h0(t),c=a?f0:h0(e),u=(l=l==d0?_u:l)==_u,h=(c=c==d0?_u:c)==_u,d=l==c;if(d&&op(t)){if(!op(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new mu),o||$I(t)?o0(t,e,n,i,r,s):FU(t,e,l,n,i,r,s);if(!(n&YU)){var f=u&&p0.call(t,"__wrapped__"),p=h&&p0.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,m=p?e.value():e;return s||(s=new mu),r(g,m,n,i,s)}}return!!d&&(s||(s=new mu),WU(t,e,n,i,r,s))},m0=function t(e,n,i,r,s){return e===n||(e==null||n==null||!oo(e)&&!oo(n)?e!=e&&n!=n:JU(e,n,i,r,t,s))},ZU=1,$U=2,ej=function(t,e,n,i){var r=n.length,s=r,o=!i;if(t==null)return!s;for(t=Object(t);r--;){var a=n[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<s;){var l=(a=n[r])[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var h=new mu;if(i)var d=i(c,u,l,t,e,h);if(!(d===void 0?m0(u,c,ZU|$U,i,h):d))return!1}}return!0},g0=function(t){return t==t&&!lp(t)},tj=function(t){for(var e=up(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,g0(r)]}return e},_0=function(t,e){return function(n){return n!=null&&n[t]===e&&(e!==void 0||t in Object(n))}},nj=function(t){var e=tj(t);return e.length==1&&e[0][2]?_0(e[0][0],e[0][1]):function(n){return n===t||ej(n,t,e)}},ij="[object Symbol]",Wa=function(t){return typeof t=="symbol"||oo(t)&&so(t)==ij},rj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sj=/^\w*$/,_p=function(t,e){if(Zn(t))return!1;var n=typeof t;return!(n!="number"&&n!="symbol"&&n!="boolean"&&t!=null&&!Wa(t))||sj.test(t)||!rj.test(t)||e!=null&&t in Object(e)},oj="Expected a function";function vp(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(oj);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(vp.Cache||pu),n}vp.Cache=pu;var aj=vp,lj=500,cj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,uj=/\\(\\)?/g,hj=function(t){var e=aj(t,function(i){return n.size===lj&&n.clear(),i}),n=e.cache;return e}(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(cj,function(n,i,r,s){e.push(r?s.replace(uj,"$1"):i||n)}),e}),yp=function(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r},dj=1/0,v0=lr?lr.prototype:void 0,y0=v0?v0.toString:void 0,fj=function t(e){if(typeof e=="string")return e;if(Zn(e))return yp(e,t)+"";if(Wa(e))return y0?y0.call(e):"";var n=e+"";return n=="0"&&1/e==-dj?"-0":n},pj=function(t){return t==null?"":fj(t)},b0=function(t,e){return Zn(t)?t:_p(t,e)?[t]:hj(pj(t))},mj=1/0,vu=function(t){if(typeof t=="string"||Wa(t))return t;var e=t+"";return e=="0"&&1/t==-mj?"-0":e},E0=function(t,e){for(var n=0,i=(e=b0(e,t)).length;t!=null&&n<i;)t=t[vu(e[n++])];return n&&n==i?t:void 0},gj=function(t,e,n){var i=t==null?void 0:E0(t,e);return i===void 0?n:i},_j=function(t,e){return t!=null&&e in Object(t)},vj=function(t,e,n){for(var i=-1,r=(e=b0(e,t)).length,s=!1;++i<r;){var o=vu(e[i]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++i!=r?s:!!(r=t==null?0:t.length)&&ap(r)&&QI(o,r)&&(Zn(t)||XI(t))},yj=function(t,e){return t!=null&&vj(t,e,_j)},bj=1,Ej=2,Ij=function(t,e){return _p(t)&&g0(e)?_0(vu(t),e):function(n){var i=gj(n,t);return i===void 0&&i===e?yj(n,t):m0(e,i,bj|Ej)}},I0=function(t){return t},wj=function(t){return function(e){return e==null?void 0:e[t]}},Tj=function(t){return function(e){return E0(e,t)}},Cj=function(t){return _p(t)?wj(vu(t)):Tj(t)},w0=function(t){return typeof t=="function"?t:t==null?I0:typeof t=="object"?Zn(t)?Ij(t[0],t[1]):nj(t):Cj(t)},T0=function(t,e){return(Zn(t)?HI:Ox)(t,w0(e))},Sj=function(t,e){var n=-1,i=cp(t)?Array(t.length):[];return t0(t,function(r,s,o){i[++n]=e(r,s,o)}),i},Aj=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t},kj=function(t,e){if(t!==e){var n=t!==void 0,i=t===null,r=t==t,s=Wa(t),o=e!==void 0,a=e===null,l=e==e,c=Wa(e);if(!a&&!c&&!s&&t>e||s&&o&&l&&!a&&!c||i&&o&&l||!n&&l||!r)return 1;if(!i&&!s&&!c&&t<e||c&&n&&r&&!i&&!s||a&&n&&r||!o&&r||!l)return-1}return 0},Oj=function(t,e,n){for(var i=-1,r=t.criteria,s=e.criteria,o=r.length,a=n.length;++i<o;){var l=kj(r[i],s[i]);if(l)return i>=a?l:l*(n[i]=="desc"?-1:1)}return t.index-e.index},Rj=function(t,e,n){var i=-1;e=yp(e.length?e:[I0],YI(w0));var r=Sj(t,function(s,o,a){return{criteria:yp(e,function(l){return l(s)}),index:++i,value:s}});return Aj(r,function(s,o){return Oj(s,o,n)})},C0=function(t,e,n,i){return t==null?[]:(Zn(e)||(e=e==null?[]:[e]),Zn(n=i?void 0:n)||(n=n==null?[]:[n]),Rj(t,e,n))},yu=function(t,e,n){return Mj(t.local,e,n)===!0},Lj=function(t,e,n){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},Ga=function(t,e,n,i){var r=Nj(t,e,n,i);return r&&r.pendingTrack},Mj=function(t,e,n){if(!t)return!1;var i=function(s){switch(s){case"avatar":return!0;case"staged":return s;default:return!!s}},r=t.public.subscribedTracks;return r&&r[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)===-1&&r[e].custom?[!0,"staged"].includes(r[e].custom)?i(r[e].custom):i(r[e].custom[n]):i(r[e][n]):!r||i(r.ALL)},Nj=function(t,e,n,i){var r=C0(T0(t.streams,function(s){return s.participantId===e&&s.type===n&&s.pendingTrack&&s.pendingTrack.kind===i}),"starttime","desc");return r&&r[0]},Pj=function(t,e){var n=t.local.public.customTracks;if(n&&n[e])return n[e].track},Dj=function(t,e,n,i){var r="soup-"+n,s=C0(T0(t.streams,function(o){return o.participantId===e&&o.streamId===r&&o.pendingTrack&&o.pendingTrack.kind===i}),"starttime","desc");return s&&s[0]&&s[0].pendingTrack};function S0(t){for(var e=store.getState(),n=0,i=["cam","screen"];n<i.length;n++)for(var r=i[n],s=0,o=["video","audio"];s<o.length;s++){var a=o[s],l=r==="cam"?a:"screen".concat(a.charAt(0).toUpperCase()+a.slice(1)),c=t.tracks[l];if(c){var u=t.local?Lj(e,r,a):Ga(e,t.session_id,r,a);c.state==="playable"&&(c.track=u),c.persistentTrack=u}}}function A0(t){try{var e=store.getState();for(var n in t.tracks)if(!bp(n)){var i=t.tracks[n].kind;if(i){var r=t.tracks[n];if(r){var s=t.local?Pj(e,n,i):Dj(e,t.session_id,n,i);r.state==="playable"&&(t.tracks[n].track=s),r.persistentTrack=s}}else console.error("unknown type for custom track")}}catch(o){console.error(o)}}function bp(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function k0(t,e){var n=store.getState();if(t.local){if(t.audio)try{t.audioTrack=n.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=n.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=n.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=n.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var i=!0;try{var r=n.participants[t.session_id];r&&r.public&&r.public.rtcType&&r.public.rtcType.impl==="peer-to-peer"&&r.private&&!["connected","completed"].includes(r.private.peeringState)&&(i=!1)}catch(c){console.error(c)}if(!i)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(n.streams,t.audio&&yu(n,t.session_id,"cam-audio")){var s=Ga(n,t.session_id,"cam","audio");s&&(e&&e.audioTrack&&e.audioTrack.id===s.id?t.audioTrack=s:s.muted||(t.audioTrack=s)),t.audioTrack||(t.audio=!1)}if(t.video&&yu(n,t.session_id,"cam-video")){var o=Ga(n,t.session_id,"cam","video");o&&(e&&e.videoTrack&&e.videoTrack.id===o.id?t.videoTrack=o:o.muted||(t.videoTrack=o)),t.videoTrack||(t.video=!1)}if(t.screen&&yu(n,t.session_id,"screen-audio")){var a=Ga(n,t.session_id,"screen","audio");a&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===a.id?t.screenAudioTrack=a:a.muted||(t.screenAudioTrack=a))}if(t.screen&&yu(n,t.session_id,"screen-video")){var l=Ga(n,t.session_id,"screen","video");l&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===l.id?t.screenVideoTrack=l:l.muted||(t.screenVideoTrack=l))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(c){console.error("unexpected error matching up tracks",c)}}}function O0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O0(Object(n),!0).forEach(function(i){di(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O0(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Fj(t){var e=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Li(t);if(e){var r=Li(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ou(this,n)}}var R0="video",xj="voice",Uj=3,L0={present:0,hidden:0},Ep={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},M0=["state","simulcastEncodings"],N0={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},za={id:{iconPath:"string",label:"string",tooltip:"string"}},is={customTrayButtons:{validate:x0,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(za))},url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t){return window._dailyConfig||(window._dailyConfig={}),window._dailyConfig.experimentalGetUserMediaConstraintsModify=t.experimentalGetUserMediaConstraintsModify,delete t.experimentalGetUserMediaConstraintsModify,window._dailyConfig.userMediaVideoConstraints=t.userMediaVideoConstraints,delete t.userMediaVideoConstraints,!0}},reactNativeConfig:{validate:function(t){return function e(n,i){if(i===void 0)return!1;switch(Sn(i)){case"string":return Sn(n)===i;case"object":if(Sn(n)!=="object")return!1;for(var r in n)if(!e(n[r],i[r]))return!1;return!0;default:return!1}}(t,N0)},help:"reactNativeConfig should look like ".concat(JSON.stringify(N0),", all fields optional")},lang:{validate:function(t){return["de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, ru, sv, tr, user"},userName:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){return e._preloadCache.videoDeviceId=t,!0}},audioSource:{validate:function(t,e){return e._preloadCache.audioDeviceId=t,!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(i){for(var r=0,s=Object.keys(i);r<s.length;r++){var o=s[r];if(!e.includes(o))return console.error('unsupported color "'.concat(o,'". Valid colors: ').concat(e.join(", "))),!1;if(!i[o].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(o,' theme color should be provided in valid hex color format. Received: "').concat(i[o],'"')),!1}return!0};return Sn(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?n(t.light.colors)&&n(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):n(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return P0(t,{allowAllParticipantsKey:!1})},help:F0({allowAllParticipantsKey:!1})},inputSettings:{validate:function(t){return D0(t)},help:Ip()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"}},bu={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var e in t.cam)if(e!=="div"&&e!=="video")return!1}if(t.screen){for(var e in t.screen)if(e!=="div"&&e!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e,n){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var i=[!0,!1,"staged"];if(i.includes(t)||!Nt()&&t==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function s(o){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var l in o)if(l==="custom"){if(!i.includes(o[l])&&!s(o[l],!0))return!1}else{var c=!a&&!r.includes(l),u=!i.includes(o[l]);if(c||u)return!1}return!0}(t)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(Nt()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,eject:!0};function Ka(t){var e={};for(var n in t)t[n]instanceof MediaStreamTrack?e[n]=lu:(n==="dailyConfig"&&(t[n].modifyLocalSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyLocalSdpHook=t[n].modifyLocalSdpHook),delete t[n].modifyLocalSdpHook),t[n].modifyRemoteSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyRemoteSdpHook=t[n].modifyRemoteSdpHook),delete t[n].modifyRemoteSdpHook)),e[n]=t[n]);return e}function ut(){if(Nt())throw new Error("This daily-js method is not currently supported in React Native")}function Xa(){if(!Nt())throw new Error("This daily-js method is only supported in React Native")}function P0(t,e){for(var n=e.allowAllParticipantsKey,i=function(h){var d=["local"];return n||d.push("*"),h&&!d.includes(h)},r=function(h){return!!(h.layer===void 0||Number.isInteger(h.layer)&&h.layer>=0||h.layer==="inherit")},s=function(h){return!!h&&!(h.video&&!r(h.video))&&!(h.screenVideo&&!r(h.screenVideo))},o=0,a=Object.entries(t);o<a.length;o++){var l=Qf(a[o],2),c=l[0],u=l[1];if(!i(c)||!s(u))return!1}return!0}function D0(t){return Sn(t)==="object"&&!(!t.video||Sn(t.video)!=="object")&&!!function(e){var n=["type","config","publish"];return!e||Sn(e)!=="object"||Object.keys(e).length===0||e.type&&!function(i){return typeof i!="string"?!1:Object.values(cu).includes(i)?!0:(console.error("inputSettings video processor type invalid"),!1)}(e.type)||e.publish!==void 0&&typeof e.publish!="boolean"||(typeof e.publish=="boolean"&&console.warn("inputSettings.video.processor: publish key has been deprecated; it will be ignored"),e.config&&(Sn(e.config)!=="object"||!function(i,r){var s=Object.keys(r);if(s.length===0)return!0;var o="invalid object in inputSettings -> video -> processor -> config";switch(i){case cu.BGBLUR:return s.length>1||s[0]!=="strength"?(console.error(o),!1):!(typeof r.strength!="number"||r.strength<=0||r.strength>1||isNaN(r.strength))||(console.error("".concat(o,"; expected: {0 < strength <= 1}, got: ").concat(r.strength)),!1);case cu.BGIMAGE:return!(r.source!==void 0&&!function(a){if(a.source==="default")return a.type="default",!0;if(UI(a.source))return a.type="url",!!function(u){var h=new URL(u),d=h.pathname;if(h.protocol==="data:")try{var f=d.substring(d.indexOf(":")+1,d.indexOf(";")),p=f.split("/")[1];return tp.includes(p)}catch(m){return console.error("failed to deduce blob content type",m),!1}var g=d.split(".").at(-1).toLowerCase().trim();return tp.includes(g)}(a.source)||(console.error("invalid image type; supported types: [".concat(tp.join(", "),"]")),!1);return l=a.source,c=Number(l),isNaN(c)||!Number.isInteger(c)||c<=0||c>RI?(console.error("invalid image selection; must be an int, > 0, <= ".concat(RI)),!1):(a.type="daily-preselect",!0);var l,c}(r));default:return!0}}(e.type,e.config)))?!1:(Object.keys(e).filter(function(i){return!n.includes(i)}).forEach(function(i){console.warn("invalid key inputSettings -> video -> processor : ".concat(i)),delete e[i]}),!0)}(t.video.processor)}function Ip(){var t=Object.values(cu).join(" | ");return"inputSettings must be of the form: { video: { processor: [ ".concat(t," ] }, config?: {} }")}function F0(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(D2).concat(e?' | "'.concat(F2,'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function x0(t){if(t&&Sn(t)!=="object"||Array.isArray(t))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(za),".")),!1;if(t)for(var e=0,n=Object.entries(t);e<n.length;e++)for(var i=Qf(n[e],1)[0],r=0,s=Object.entries(t[i]);r<s.length;r++){var o=Qf(s[r],2),a=o[0],l=o[1];if(a==="iconPath"&&!UI(l))return console.error("customTrayButton ".concat(a," should be a url.")),!1;if(Sn(l)!==za.id[a])return console.error("customTrayButton ".concat(a," should be a ").concat(za.id[a],".")),!1}return!0}function jj(t){if(typeof t!="string")throw new Error('url parameter must be "string" type')}function U0(t){if(Sn(t)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(!t.state||!Object.values(ep).includes(t.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(ep))}function j0(t,e,n){return!(typeof t!="number"||t<e||t>n)}function Vj(t){for(var e in t)if(!M0.includes(e))throw new Error("Invalid key ".concat(e,", valid keys are: ").concat(M0));if(t.simulcastEncodings){if(!(t.simulcastEncodings instanceof Array))throw new Error('simulcastEncodings must be "Array"');if(!j0(t.simulcastEncodings.length,0,Uj))throw new Error('"simulcastEncodings" not in range. valid range 1 to 3 layers');t.simulcastEncodings.every(function(n){for(var i in n){if(!Ep.hasOwnProperty(i))throw new Error("Invalid key ".concat(i,", valid keys are:")+Object.keys(Ep));if(typeof n[i]!="number")throw new Error("simulcastEncodings[].".concat(i,' must be "number"'));var r=Ep[i],s=r.min,o=r.max;if(!j0(n[i],s,o))throw new Error("simulcastEncodings[].".concat(i," value not in range. valid range:        ").concat(s," to ").concat(o))}if(!n.hasOwnProperty("maxBitrate"))throw new Error("simulcastEncodings[].maxBitrate is not specified")})}}var s4=function(t){su(n,iu);var e=Fj(n);function n(i){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(sr(this,n),r=e.call(this),di(hi(r),"startListeningForDeviceChanges",function(){navigator.mediaDevices.ondevicechange!==void 0||Nt()?navigator.mediaDevices.addEventListener("devicechange",r.deviceChangeListener):r.startPollingForDeviceChanges()}),di(hi(r),"stopListeningForDeviceChanges",function(){navigator.mediaDevices.ondevicechange!==void 0||Nt()?navigator.mediaDevices.removeEventListener("devicechange",r.deviceChangeListener):r.stopPollingForDeviceChanges()}),di(hi(r),"deviceChangeListener",Ne(Y.mark(function a(){var l;return Y.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.enumerateDevices();case 2:l=c.sent,r.handleDeviceChange(l.devices);case 4:case"end":return c.stop()}},a)}))),di(hi(r),"handleDeviceChange",function(a){r.emit(OI,{action:OI,availableDevices:a})}),di(hi(r),"startPollingForDeviceChanges",function(){r._deviceChangeInterval||(r._deviceChangeInterval=setInterval(Ne(Y.mark(function a(){var l,c;return Y.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,r.enumerateDevices();case 2:l=u.sent,c=JSON.stringify(l),r._lastDevicesJSON&&c!==r._lastDevicesJSON&&r.handleDeviceChange(l.devices),r._lastDevicesJSON=c;case 6:case"end":return u.stop()}},a)})),3e3))}),di(hi(r),"stopPollingForDeviceChanges",function(){r._deviceChangeInterval&&(clearInterval(r._deviceChangeInterval),r._deviceChangeInterval=null,r._lastDevicesJSON=null)}),di(hi(r),"handleNativeAppActiveStateChange",function(a){r.disableReactNativeAutoDeviceManagement("video")||(a?r.camUnmutedBeforeLosingNativeActiveState&&r.setLocalVideo(!0):(r.camUnmutedBeforeLosingNativeActiveState=r.localVideo(),r.camUnmutedBeforeLosingNativeActiveState&&r.setLocalVideo(!1)))}),di(hi(r),"handleNativeAudioFocusChange",function(a){r.disableReactNativeAutoDeviceManagement("audio")||(r._hasNativeAudioFocus=a,r.toggleParticipantAudioBasedOnNativeAudioFocus(),r._hasNativeAudioFocus?r.micUnmutedBeforeLosingNativeAudioFocus&&r.setLocalAudio(!0):(r.micUnmutedBeforeLosingNativeAudioFocus=r.localAudio(),r.setLocalAudio(!1)))}),s.dailyJsVersion=n.version(),r._iframe=i,r._callObjectMode=s.layout==="none"&&!r._iframe,r._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null},r._callObjectMode&&(window._dailyPreloadCache=r._preloadCache),s.showLocalVideo!==void 0?r._callObjectMode?console.error("showLocalVideo is not available in call object mode"):r._showLocalVideo=!!s.showLocalVideo:r._showLocalVideo=!0,s.showParticipantsBar!==void 0?r._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):r._showParticipantsBar=!!s.showParticipantsBar:r._showParticipantsBar=!0,s.customTrayButtons!==void 0?r._callObjectMode?console.error("customTrayButtons is not available in call object mode"):r._customTrayButtons=s.customTrayButtons:r._customTrayButtons={},s.activeSpeakerMode!==void 0?r._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):r._activeSpeakerMode=!!s.activeSpeakerMode:r._activeSpeakerMode=!1,s.receiveSettings?r._callObjectMode?r._receiveSettings=s.receiveSettings:console.error("receiveSettings is only available in call object mode"):r._receiveSettings={},r._inputSettings={},s.inputSettings&&(r._inputSettings=s.inputSettings),r.validateProperties(s),r.properties=tn({},s),r._callObjectLoader=r._callObjectMode?new J2:null,r._meetingState=kI,r._isPreparingToJoin=!1,r._accessState={access:$f},r._nativeInCallAudioMode=R0,r._participants={},r._participantCounts=L0,r._rmpPlayerState={},r._waitingParticipants={},r._inputEventsOn={},r._network={threshold:"good",quality:100},r._activeSpeaker={},r._callFrameId=ip(),r._messageChannel=Nt()?new G2:new q2,r._iframe&&(r._iframe.requestFullscreen?r._iframe.addEventListener("fullscreenchange",function(a){document.fullscreenElement===r._iframe?(r.emit(io,{action:io}),r.sendMessageToCallMachine({action:io})):(r.emit(ro,{action:ro}),r.sendMessageToCallMachine({action:ro}))}):r._iframe.webkitRequestFullscreen&&r._iframe.addEventListener("webkitfullscreenchange",function(a){document.webkitFullscreenElement===r._iframe?(r.emit(io,{action:io}),r.sendMessageToCallMachine({action:io})):(r.emit(ro,{action:ro}),r.sendMessageToCallMachine({action:ro}))})),Nt()){var o=r.nativeUtils();o.addAudioFocusChangeListener&&o.removeAudioFocusChangeListener&&o.addAppActiveStateChangeListener&&o.removeAppActiveStateChangeListener||console.warn("expected (add|remove)(AudioFocus|AppActiveState)ChangeListener to be available in React Native"),r._hasNativeAudioFocus=!0,o.addAudioFocusChangeListener(r.handleNativeAudioFocusChange),o.addAppActiveStateChangeListener(r.handleNativeAppActiveStateChange)}return r._callObjectMode&&r.startListeningForDeviceChanges(),r._messageChannel.addListenerForMessagesFromCallMachine(r.handleMessageFromCallMachine,r._callFrameId,hi(r)),r}return or(n,null,[{key:"supportedBrowser",value:function(){if(Nt())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!1,supportsSfu:!0,supportsVideoProcessing:!1};var i=class{static getParser(r,s=!1){if(typeof r!="string")throw new Error("UserAgent should be a string");return new AI(r,s)}static parse(r){return new AI(r).getResult()}static get BROWSER_MAP(){return SI}static get ENGINE_MAP(){return ar}static get OS_MAP(){return An}static get PLATFORMS_MAP(){return Mt}}.getParser(fi());return{supported:!!NI(),mobile:i.getPlatformType()==="mobile",name:i.getBrowserName(),version:i.getBrowserVersion(),supportsFullscreen:!!MI(),supportsScreenShare:!!j2(),supportsSfu:!!np(),supportsVideoProcessing:B2()}}},{key:"version",value:function(){return"0.26.0"}},{key:"createCallObject",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return i.layout="none",new n(null,i)}},{key:"wrap",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ut(),!i||!i.contentWindow||typeof i.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return r.layout||(r.customLayout?r.layout="custom-v1":r.layout="browser"),new n(i,r)}},{key:"createFrame",value:function(i,r){var s,o;ut(),i&&r?(s=i,o=r):i&&i.append?(s=i,o={}):(s=document.body,o=i||{});var a=o.iframeStyle;a||(a=s===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var l=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?l.allow="microphone, camera":l.allow="microphone; camera; autoplay; display-capture",l.style.visibility="hidden",s.appendChild(l),l.style.visibility=null,Object.keys(a).forEach(function(c){return l.style[c]=a[c]}),o.layout||(o.customLayout?o.layout="custom-v1":o.layout="browser");try{return new n(l,o)}catch(c){throw s.removeChild(l),c}}},{key:"createTransparentFrame",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ut();var r=document.createElement("iframe");return r.allow="microphone; camera; autoplay",r.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(r),i.layout||(i.layout="custom-v1"),n.wrap(r,i)}}]),or(n,[{key:"destroy",value:function(){var i=Ne(Y.mark(function r(){var s,o,a;return Y.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(l.prev=0,![cn,Zf].includes(this._meetingState)){l.next=4;break}return l.next=4,this.leave();case 4:l.next=8;break;case 6:l.prev=6,l.t0=l.catch(0);case 8:(s=this._iframe)&&(o=s.parentElement)&&o.removeChild(s),this._messageChannel.removeListener(this.handleMessageFromCallMachine),Nt()&&((a=this.nativeUtils()).removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),a.removeAppActiveStateChangeListener(this.handleNativeAppActiveStateChange)),this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars();case 14:case"end":return l.stop()}},r,this,[[0,6]])}));return function(){return i.apply(this,arguments)}}()},{key:"loadCss",value:function(i){var r=i.bodyClass,s=i.cssFile,o=i.cssText;return ut(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(s),bodyClass:r,cssText:o}),this}},{key:"iframe",value:function(){return ut(),this._iframe}},{key:"meetingState",value:function(){return this._meetingState}},{key:"accessState",value:function(){if(!this._callObjectMode)throw new Error("accessState() currently only supported in call object mode");return this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){if(!this._callObjectMode)throw new Error("waitingParticipants() currently only supported in call object mode");return this._waitingParticipants}},{key:"validateParticipantProperties",value:function(i,r){for(var s in r){if(!bu[s])throw new Error("unrecognized updateParticipant property ".concat(s));if(bu[s].validate&&!bu[s].validate(r[s],this,this._participants[i]))throw new Error(bu[s].help)}}},{key:"updateParticipant",value:function(i,r){return this._participants.local&&this._participants.local.session_id===i&&(i="local"),i&&r&&this._participants[i]&&(this.validateParticipantProperties(i,r),this.sendMessageToCallMachine({action:"update-participant",id:i,properties:r})),this}},{key:"updateParticipants",value:function(i){var r=this._participants.local&&this._participants.local.session_id;for(var s in i)s===r&&(s="local"),s&&i[s]&&(this._participants[s]||s==="*")?this.validateParticipantProperties(s,i[s]):(console.warn("unrecognized participant in updateParticipants: ".concat(s)),delete i[s]);return this.sendMessageToCallMachine({action:"update-participants",participants:i}),this}},{key:"updateWaitingParticipant",value:function(){var i=Ne(Y.mark(function r(){var s,o,a=this,l=arguments;return Y.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=l.length>0&&l[0]!==void 0?l[0]:"",o=l.length>1&&l[1]!==void 0?l[1]:{},this._callObjectMode){c.next=4;break}throw new Error("updateWaitingParticipant() currently only supported in call object mode");case 4:if(this._meetingState===cn){c.next=6;break}throw new Error("updateWaitingParticipant() only supported for joined meetings");case 6:if(typeof s=="string"&&Sn(o)==="object"){c.next=8;break}throw new Error("updateWaitingParticipant() must take an id string and a updates object");case 8:return c.abrupt("return",new Promise(function(u,h){a.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:s,updates:o},function(d){d.error&&h(d.error),d.id||h(new Error("unknown error in updateWaitingParticipant()")),u({id:d.id})})}));case 9:case"end":return c.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"updateWaitingParticipants",value:function(){var i=Ne(Y.mark(function r(){var s,o=this,a=arguments;return Y.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(s=a.length>0&&a[0]!==void 0?a[0]:{},this._callObjectMode){l.next=3;break}throw new Error("updateWaitingParticipants() currently only supported in call object mode");case 3:if(this._meetingState===cn){l.next=5;break}throw new Error("updateWaitingParticipants() only supported for joined meetings");case 5:if(Sn(s)==="object"){l.next=7;break}throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");case 7:return l.abrupt("return",new Promise(function(c,u){o.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:s},function(h){h.error&&u(h.error),h.ids||u(new Error("unknown error in updateWaitingParticipants()")),c({ids:h.ids})})}));case 8:case"end":return l.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"requestAccess",value:function(){var i=Ne(Y.mark(function r(){var s,o,a,l,c,u=this,h=arguments;return Y.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s=h.length>0&&h[0]!==void 0?h[0]:{},o=s.access,a=o===void 0?{level:"full"}:o,l=s.name,c=l===void 0?"":l,this._callObjectMode){d.next=3;break}throw new Error("requestAccess() currently only supported in call object mode");case 3:if(this._meetingState===cn){d.next=5;break}throw new Error("requestAccess() only supported for joined meetings");case 5:return d.abrupt("return",new Promise(function(f,p){u.sendMessageToCallMachine({action:"daily-method-request-access",access:a,name:c},function(g){g.error&&p(g.error),g.access||p(new Error("unknown error in requestAccess()")),f({access:g.access,granted:g.granted})})}));case 6:case"end":return d.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"localAudio",value:function(){return this._participants.local?this._participants.local.audio:null}},{key:"localVideo",value:function(){return this._participants.local?this._participants.local.video:null}},{key:"setLocalAudio",value:function(i){return this.sendMessageToCallMachine({action:"local-audio",state:i}),this}},{key:"setLocalVideo",value:function(i){return this.sendMessageToCallMachine({action:"local-video",state:i}),this}},{key:"getReceiveSettings",value:function(){var i=Ne(Y.mark(function r(s){var o,a,l,c=this,u=arguments;return Y.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(o=u.length>1&&u[1]!==void 0?u[1]:{},a=o.showInheritedValues,l=a!==void 0&&a,this._callObjectMode){h.next=3;break}throw new Error("getReceiveSettings() only supported in call object mode");case 3:h.t0=Sn(s),h.next=h.t0==="string"?6:h.t0==="undefined"?7:8;break;case 6:return h.abrupt("return",new Promise(function(d){c.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:s,showInheritedValues:l},function(f){d(f.receiveSettings)})}));case 7:return h.abrupt("return",this._receiveSettings);case 8:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments');case 9:case"end":return h.stop()}},r,this)}));return function(r){return i.apply(this,arguments)}}()},{key:"updateReceiveSettings",value:function(){var i=Ne(Y.mark(function r(s){var o=this;return Y.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this._callObjectMode){a.next=2;break}throw new Error("updateReceiveSettings() only supported in call object mode");case 2:if(P0(s,{allowAllParticipantsKey:!0})){a.next=4;break}throw new Error(F0({allowAllParticipantsKey:!0}));case 4:if(this._meetingState===cn){a.next=6;break}throw new Error("updateReceiveSettings() is only allowed when joined. To specify receive settings earlier, use the receiveSettings config property.");case 6:return a.abrupt("return",new Promise(function(l){o.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:s},function(c){l({receiveSettings:c.receiveSettings})})}));case 7:case"end":return a.stop()}},r,this)}));return function(r){return i.apply(this,arguments)}}()},{key:"getInputSettings",value:function(){var i=this;return new Promise(function(r){r(i._inputSettings)})}},{key:"updateInputSettings",value:function(){var i=Ne(Y.mark(function r(s){var o=this;return Y.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(l,c){if(!D0(s))return console.error(Ip()),void c(Ip());o.sendMessageToCallMachine({action:"update-input-settings",inputSettings:s},function(u){u.error?c(u.error):l({inputSettings:u.inputSettings})})}));case 1:case"end":return a.stop()}},r)}));return function(r){return i.apply(this,arguments)}}()},{key:"setBandwidth",value:function(i){var r=i.kbs,s=i.trackConstraints;return ut(),this.sendMessageToCallMachine({action:"set-bandwidth",kbs:r,trackConstraints:s}),this}},{key:"getDailyLang",value:function(){var i=this;return ut(),new Promise(function(){var r=Ne(Y.mark(function s(o){var a;return Y.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:a=function(c){delete c.action,delete c.callbackStamp,o(c)},i.sendMessageToCallMachine({action:"get-daily-lang"},a);case 2:case"end":return l.stop()}},s)}));return function(s){return r.apply(this,arguments)}}())}},{key:"setDailyLang",value:function(i){return ut(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:i}),this}},{key:"getMeetingSession",value:function(){var i=Ne(Y.mark(function r(){var s=this;return Y.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this._meetingState===cn){o.next=2;break}throw new Error("getMeetingSession() is only allowed when joined");case 2:return o.abrupt("return",new Promise(function(){var a=Ne(Y.mark(function l(c){var u;return Y.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:u=function(d){delete d.action,delete d.callbackStamp,delete d.callFrameId,c(d)},s.sendMessageToCallMachine({action:"get-meeting-session"},u);case 2:case"end":return h.stop()}},l)}));return function(l){return a.apply(this,arguments)}}()));case 3:case"end":return o.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"setUserName",value:function(i,r){var s=this;return this.properties.userName=i,new Promise(function(){var o=Ne(Y.mark(function a(l){var c;return Y.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:c=function(h){delete h.action,delete h.callbackStamp,l(h)},s.sendMessageToCallMachine({action:"set-user-name",name:i!=null?i:"",thisMeetingOnly:Nt()||!!r&&!!r.thisMeetingOnly},c);case 2:case"end":return u.stop()}},a)}));return function(a){return o.apply(this,arguments)}}())}},{key:"startCamera",value:function(){var i=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this._callObjectMode)throw new Error("startCamera() currently only supported in call object mode");if([Ua,cn].includes(this._meetingState))throw new Error("startCamera() not supported after joining a meeting: did you mean to use setLocalAudio() and/or setLocalVideo() instead?");return new Promise(function(){var s=Ne(Y.mark(function o(a,l){var c;return Y.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(c=function(h){delete h.action,delete h.callbackStamp,a(h)},!i.needsLoad()){u.next=12;break}return u.prev=2,u.next=5,i.load(r);case 5:u.next=10;break;case 7:u.prev=7,u.t0=u.catch(2),l(u.t0);case 10:u.next=13;break;case 12:i.validateProperties(r);case 13:i.sendMessageToCallMachine({action:"start-camera",properties:Ka(i.properties),preloadCache:Ka(i._preloadCache)},c);case 14:case"end":return u.stop()}},o,null,[[2,7]])}));return function(o,a){return s.apply(this,arguments)}}())}},{key:"setCamera",value:function(i){var r=this;if(Xa(),this.needsLoad())throw new Error("Before you can invoke setCamera, first you need to invoke one of these methods: join, startCamera, or preAuth");return new Promise(function(s,o){r.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:i},function(a){s({device:a.device})})})}},{key:"setAudioDevice",value:function(){var i=Ne(Y.mark(function r(s){var o;return Y.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return Xa(),this.nativeUtils().setAudioDevice(s),a.next=4,this.nativeUtils().getAudioDevice();case 4:return o=a.sent,a.abrupt("return",{deviceId:o});case 6:case"end":return a.stop()}},r,this)}));return function(r){return i.apply(this,arguments)}}()},{key:"cycleCamera",value:function(){var i=this;return new Promise(function(r,s){i.sendMessageToCallMachine({action:"cycle-camera"},function(o){r({device:o.device})})})}},{key:"cycleMic",value:function(){var i=this;return ut(),new Promise(function(r,s){i.sendMessageToCallMachine({action:"cycle-mic"},function(o){r({device:o.device})})})}},{key:"getCameraFacingMode",value:function(){var i=this;return Xa(),new Promise(function(r,s){i.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(o){r(o.facingMode)})})}},{key:"setInputDevices",value:function(i){var r=i.audioDeviceId,s=i.videoDeviceId,o=i.audioSource,a=i.videoSource;return console.warn("setInputDevices() is deprecated: instead use setInputDevicesAsync(), which returns a Promise"),this.setInputDevicesAsync({audioDeviceId:r,videoDeviceId:s,audioSource:o,videoSource:a}),this}},{key:"setInputDevicesAsync",value:function(){var i=Ne(Y.mark(function r(s){var o,a,l,c,u=this;return Y.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(o=s.audioDeviceId,a=s.videoDeviceId,l=s.audioSource,c=s.videoSource,ut(),l!==void 0&&(o=l),c!==void 0&&(a=c),o&&(this._preloadCache.audioDeviceId=o),a&&(this._preloadCache.videoDeviceId=a),!this._callObjectMode||!this.needsLoad()){h.next=8;break}return h.abrupt("return",{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}});case 8:return o instanceof MediaStreamTrack&&(o=lu),a instanceof MediaStreamTrack&&(a=lu),h.abrupt("return",new Promise(function(d){u.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:o,videoDeviceId:a},function(f){delete f.action,delete f.callbackStamp,f.returnPreloadCache?d({camera:{deviceId:u._preloadCache.videoDeviceId},mic:{deviceId:u._preloadCache.audioDeviceId},speaker:{deviceId:u._preloadCache.outputDeviceId}}):d(f)})}));case 11:case"end":return h.stop()}},r,this)}));return function(r){return i.apply(this,arguments)}}()},{key:"setOutputDevice",value:function(i){var r=i.outputDeviceId;return ut(),r&&(this._preloadCache.outputDeviceId=r),this._callObjectMode&&this._meetingState!==cn&&!this._didPreAuth?(console.warn("setOutputDevice() not supported before preAuth() or join()"),this):(this.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:r}),this)}},{key:"getInputDevices",value:function(){var i=Ne(Y.mark(function r(){var s=this;return Y.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this._callObjectMode||!this.needsLoad()){o.next=2;break}return o.abrupt("return",{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}});case 2:return o.abrupt("return",new Promise(function(a,l){s.sendMessageToCallMachine({action:"get-input-devices"},function(c){delete c.action,delete c.callbackStamp,c.returnPreloadCache?a({camera:{deviceId:s._preloadCache.videoDeviceId},mic:{deviceId:s._preloadCache.audioDeviceId},speaker:{deviceId:s._preloadCache.outputDeviceId}}):a(c)})}));case 3:case"end":return o.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"nativeInCallAudioMode",value:function(){return Xa(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(i){if(Xa(),[R0,xj].includes(i)){if(i!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=i,!this.disableReactNativeAutoDeviceManagement("audio")&&this.isMeetingPendingOrOngoing(this._meetingState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",i)}},{key:"preAuth",value:function(){var i=Ne(Y.mark(function r(){var s,o,a,l=this,c=arguments;return Y.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s=c.length>0&&c[0]!==void 0?c[0]:{},this._callObjectMode){u.next=3;break}throw new Error("preAuth() currently only supported in call object mode");case 3:if(![Ua,cn].includes(this._meetingState)){u.next=5;break}throw new Error("preAuth() not supported after joining a meeting");case 5:if(!this.needsLoad()){u.next=8;break}return u.next=8,this.load(s);case 8:if(s.url){u.next=10;break}throw new Error("preAuth() requires at least a url to be provided");case 10:if(o=Va(s.url),a=Va(this.properties.url||this.properties.baseUrl),o===a){u.next=14;break}throw new Error("url in preAuth() has a different bundle url than the one loaded (".concat(a," -> ").concat(o,")"));case 14:return this.validateProperties(s),this.properties=tn(tn({},this.properties),s),u.abrupt("return",new Promise(function(h,d){l.sendMessageToCallMachine({action:"daily-method-preauth",properties:Ka(l.properties)},function(f){return f.error?d(f.error):f.access?(l._didPreAuth=!0,void h({access:f.access})):d(new Error("unknown error in preAuth()"))})}));case 17:case"end":return u.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"load",value:function(){var i=Ne(Y.mark(function r(s){var o=this;return Y.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.needsLoad()){a.next=2;break}return a.abrupt("return");case 2:if(s&&(this.validateProperties(s),this.properties=tn(tn({},this.properties),s)),this._callObjectMode||this.properties.url){a.next=5;break}throw new Error("can't load iframe meeting because url property isn't set");case 5:this.updateMeetingState(Zf);try{this.emit("loading",{action:"loading"})}catch(l){console.log("could not emit 'loading'",l)}if(!this._callObjectMode){a.next=11;break}return a.abrupt("return",new Promise(function(l,c){o._callObjectLoader.cancel(),o._callObjectLoader.load(o.properties.url||o.properties.baseUrl,o._callFrameId,function(u){o.updateMeetingState("loaded"),u&&o.emit("loaded",{action:"loaded"}),l()},function(u,h){o.emit("load-attempt-failed",{action:"load-attempt-failed",errorMsg:u}),h||(o.updateMeetingState(es),o.resetMeetingDependentVars(),o.emit("error",{action:"error",errorMsg:u}),c(u))})}));case 11:return this._iframe.src=this.assembleMeetingUrl(),a.abrupt("return",new Promise(function(l,c){o._loadedCallback=function(u){if(o._meetingState!==es){for(var h in o.updateMeetingState("loaded"),(o.properties.cssFile||o.properties.cssText)&&o.loadCss(o.properties),o._inputEventsOn)o.sendMessageToCallMachine({action:"register-input-handler",on:h});l()}else c(u)}}));case 13:case"end":return a.stop()}},r,this)}));return function(r){return i.apply(this,arguments)}}()},{key:"join",value:function(){var i=Ne(Y.mark(function r(){var s,o,a,l,c=this,u=arguments;return Y.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s=u.length>0&&u[0]!==void 0?u[0]:{},o=!1,!this.needsLoad()){h.next=15;break}return this.updateIsPreparingToJoin(!0),h.prev=4,h.next=7,this.load(s);case 7:h.next=13;break;case 9:return h.prev=9,h.t0=h.catch(4),this.updateIsPreparingToJoin(!1),h.abrupt("return",Promise.reject(h.t0));case 13:h.next=42;break;case 15:if(o=!(!this.properties.cssFile&&!this.properties.cssText),!this._didPreAuth){h.next=25;break}if(!s.url||s.url===this.properties.url){h.next=21;break}return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),h.abrupt("return",Promise.reject());case 21:if(!s.token||s.token===this.properties.token){h.next=25;break}return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),h.abrupt("return",Promise.reject());case 25:if(!s.url){h.next=40;break}if(!this._callObjectMode){h.next=36;break}if(a=Va(s.url),l=Va(this.properties.url||this.properties.baseUrl),a===l){h.next=33;break}return console.error("url in join() has a different bundle url than the one loaded (".concat(l," -> ").concat(a,")")),this.updateIsPreparingToJoin(!1),h.abrupt("return",Promise.reject());case 33:this.properties.url=s.url,h.next=40;break;case 36:if(!s.url||s.url===this.properties.url){h.next=40;break}return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(s.url,")")),this.updateIsPreparingToJoin(!1),h.abrupt("return",Promise.reject());case 40:this.validateProperties(s),this.properties=tn(tn({},this.properties),s);case 42:if(s.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!s.showLocalVideo),s.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!s.showParticipantsBar),this._meetingState!==cn&&this._meetingState!==Ua){h.next=48;break}return console.warn("already joined meeting, call leave() before joining again"),this.updateIsPreparingToJoin(!1),h.abrupt("return");case 48:this.updateMeetingState(Ua,!1);try{this.emit("joining-meeting",{action:"joining-meeting"})}catch(d){console.log("could not emit 'joining-meeting'",d)}return this.sendMessageToCallMachine({action:"join-meeting",properties:Ka(this.properties),preloadCache:Ka(this._preloadCache)}),h.abrupt("return",new Promise(function(d,f){c._joinedCallback=function(p,g){if(c._meetingState!==es){if(c.updateMeetingState(cn),p)for(var m in p)c._callObjectMode&&(S0(p[m]),A0(p[m]),k0(p[m],c._participants[m])),c._participants[m]=tn({},p[m]),c.toggleParticipantAudioBasedOnNativeAudioFocus();o&&c.loadCss(c.properties),d(p)}else f(g)}}));case 52:case"end":return h.stop()}},r,this,[[4,9]])}));return function(){return i.apply(this,arguments)}}()},{key:"leave",value:function(){var i=Ne(Y.mark(function r(){var s=this;return Y.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise(function(a,l){if(s._callObjectLoader&&!s._callObjectLoader.loaded){s._callObjectLoader.cancel(),s.updateMeetingState($r),s.resetMeetingDependentVars();try{s.emit($r,{action:$r})}catch(c){console.log("could not emit 'left-meeting'",c)}a()}else s._meetingState===$r||s._meetingState===es?a():(s._leftCallback=function(){s._meetingState!==es&&s.updateMeetingState($r),s.resetMeetingDependentVars(),a()},s.sendMessageToCallMachine({action:"leave-meeting"}))}));case 1:case"end":return o.stop()}},r)}));return function(){return i.apply(this,arguments)}}()},{key:"startScreenShare",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ut(),i.mediaStream&&(this._preloadCache.screenMediaStream=i.mediaStream,i.mediaStream=lu),this.sendMessageToCallMachine({action:"local-screen-start",captureOptions:i})}},{key:"stopScreenShare",value:function(){ut(),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(tn({action:"local-recording-start"},i))}},{key:"updateRecording",value:function(i){var r=i.layout,s=r===void 0?{preset:"default"}:r;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:s})}},{key:"stopRecording",value:function(){this.sendMessageToCallMachine({action:"local-recording-stop"})}},{key:"startLiveStreaming",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(tn({action:"daily-method-start-live-streaming"},i))}},{key:"updateLiveStreaming",value:function(i){var r=i.layout,s=r===void 0?{preset:"default"}:r;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:s})}},{key:"stopLiveStreaming",value:function(){this.sendMessageToCallMachine({action:"daily-method-stop-live-streaming"})}},{key:"startRemoteMediaPlayer",value:function(){var i=Ne(Y.mark(function r(s){var o,a,l,c=this;return Y.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:o=s.url,a=s.settings,l=a===void 0?{state:ep.PLAY}:a,u.prev=1,jj(o),U0(l),Vj(l),u.next=12;break;case 7:throw u.prev=7,u.t0=u.catch(1),console.error("invalid argument Error: ".concat(u.t0)),console.error(`startRemoteMediaPlayer arguments must be of the form: 
  { url: "playback url", 
  settings?: 
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),u.t0;case 12:return u.abrupt("return",new Promise(function(){var h=Ne(Y.mark(function d(f,p){var g;return Y.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:g=function(v){v.error?p({error:v.error,errorMsg:v.errorMsg}):f({session_id:v.session_id,remoteMediaPlayerState:{state:v.state,settings:v.settings}})},c.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:o,settings:l},g);case 2:case"end":return m.stop()}},d)}));return function(d,f){return h.apply(this,arguments)}}()));case 13:case"end":return u.stop()}},r,null,[[1,7]])}));return function(r){return i.apply(this,arguments)}}()},{key:"stopRemoteMediaPlayer",value:function(){var i=Ne(Y.mark(function r(s){var o=this;return Y.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(typeof s=="string"){a.next=2;break}throw new Error(" remotePlayerID must be of type string");case 2:return a.abrupt("return",new Promise(function(){var l=Ne(Y.mark(function c(u,h){var d;return Y.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:d=function(p){p.error?h({error:p.error,errorMsg:p.errorMsg}):u()},o.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:s},d);case 2:case"end":return f.stop()}},c)}));return function(c,u){return l.apply(this,arguments)}}()));case 3:case"end":return a.stop()}},r)}));return function(r){return i.apply(this,arguments)}}()},{key:"updateRemoteMediaPlayer",value:function(){var i=Ne(Y.mark(function r(s){var o,a,l=this;return Y.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:o=s.session_id,a=s.settings,c.prev=1,U0(a),c.next=10;break;case 5:throw c.prev=5,c.t0=c.catch(1),console.error("invalid argument Error: ".concat(c.t0)),console.error(`updateRemoteMediaPlayer arguments must be of the form: 
  session_id: "participant session", 
  { settings?: {state: "play"|"pause"} }`),c.t0;case 10:return c.abrupt("return",new Promise(function(){var u=Ne(Y.mark(function h(d,f){var p;return Y.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:p=function(m){m.error?f({error:m.error,errorMsg:m.errorMsg}):d({session_id:m.session_id,remoteMediaPlayerState:{state:m.state,settings:m.settings}})},l.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:o,settings:a},p);case 2:case"end":return g.stop()}},h)}));return function(h,d){return u.apply(this,arguments)}}()));case 11:case"end":return c.stop()}},r,null,[[1,5]])}));return function(r){return i.apply(this,arguments)}}()},{key:"startTranscription",value:function(){this.sendMessageToCallMachine({action:"daily-method-start-transcription"})}},{key:"stopTranscription",value:function(){this.sendMessageToCallMachine({action:"daily-method-stop-transcription"})}},{key:"getNetworkStats",value:function(){var i=this;return this._meetingState!==cn?{stats:{latest:{}}}:new Promise(function(r,s){i.sendMessageToCallMachine({action:"get-calc-stats"},function(o){r(tn({stats:o.stats},i._network))})})}},{key:"getActiveSpeaker",value:function(){return ut(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(i){return ut(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:i}),this}},{key:"activeSpeakerMode",value:function(){return ut(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(i){if(this._meetingState!==cn)throw new Error("setSubscribeToTracksAutomatically() is only allowed when joined");return this._preloadCache.subscribeToTracksAutomatically=i,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:i}),this}},{key:"enumerateDevices",value:function(){var i=Ne(Y.mark(function r(){var s,o=this;return Y.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this._callObjectMode){a.next=5;break}return a.next=3,navigator.mediaDevices.enumerateDevices();case 3:return s=a.sent,a.abrupt("return",{devices:s.map(function(l){return JSON.parse(JSON.stringify(l))})});case 5:return a.abrupt("return",new Promise(function(l,c){o.sendMessageToCallMachine({action:"enumerate-devices"},function(u){l({devices:u.devices})})}));case 6:case"end":return a.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"sendAppMessage",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(JSON.stringify(i).length>4096)throw new Error("Message data too large. Max size is 4096");return this.sendMessageToCallMachine({action:"app-msg",data:i,to:r}),this}},{key:"addFakeParticipant",value:function(i){return ut(),this.sendMessageToCallMachine(tn({action:"add-fake-participant"},i)),this}},{key:"setShowNamesMode",value:function(i){return ut(),i&&i!=="always"&&i!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:i}),this)}},{key:"setShowLocalVideo",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ut(),typeof i!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):this._callObjectMode?(console.error("setShowLocalVideo is not available in callObject mode"),this):this._meetingState!==cn?(console.error("the meeting must be joined before calling setShowLocalVideo"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:i}),this._showLocalVideo=i,this)}},{key:"showLocalVideo",value:function(){return ut(),this._callObjectMode?(console.error("showLocalVideo is not available in callObject mode"),this):this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ut(),typeof i!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):this._callObjectMode?(console.error("setShowParticipantsBar is not available in callObject mode"),this):this._meetingState!==cn?(console.error("the meeting must be joined before calling setShowParticipantsBar"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:i}),this._showParticipantsBar=i,this)}},{key:"showParticipantsBar",value:function(){return ut(),this._callObjectMode?(console.error("showParticipantsBar is not available in callObject mode"),this):this._showParticipantsBar}},{key:"customTrayButtons",value:function(){return ut(),this._callObjectMode?(console.error("customTrayButtons is not available in callObject mode"),this):this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(i){return ut(),this._callObjectMode?(console.error("updateCustomTrayButtons is not available in callObject mode"),this):this._meetingState!==cn?(console.error("the meeting must be joined before calling updateCustomTrayButtons"),this):x0(i)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:i}),this._customTrayButtons=i,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(za))),this)}},{key:"theme",value:function(){return this._callObjectMode?(console.error("theme is not available in callObject mode"),this):this.properties.theme}},{key:"setTheme",value:function(i){var r=this;return new Promise(function(s,o){if(r._callObjectMode)o("setTheme is not available in callObject mode");else try{r.validateProperties({theme:i}),r.properties.theme=tn({},i),r.sendMessageToCallMachine({action:"set-theme",theme:r.properties.theme});try{r.emit("theme-updated",{action:"theme-updated",theme:r.properties.theme})}catch(a){console.log("could not emit 'theme-updated'",a)}s(r.properties.theme)}catch(a){o(a)}})}},{key:"detectAllFaces",value:function(){var i=this;return ut(),new Promise(function(r,s){i.sendMessageToCallMachine({action:"detect-all-faces"},function(o){delete o.action,delete o.callbackStamp,r(o)})})}},{key:"requestFullscreen",value:function(){var i=Ne(Y.mark(function r(){return Y.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(ut(),this._iframe&&!document.fullscreenElement&&MI()){s.next=3;break}return s.abrupt("return");case 3:return s.prev=3,s.next=6,this._iframe.requestFullscreen;case 6:if(!s.sent){s.next=10;break}this._iframe.requestFullscreen(),s.next=11;break;case 10:this._iframe.webkitRequestFullscreen();case 11:s.next=16;break;case 13:s.prev=13,s.t0=s.catch(3),console.log("could not make video call fullscreen",s.t0);case 16:case"end":return s.stop()}},r,this,[[3,13]])}));return function(){return i.apply(this,arguments)}}()},{key:"exitFullscreen",value:function(){ut(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"room",value:function(){var i=Ne(Y.mark(function r(){var s,o,a,l=this,c=arguments;return Y.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s=c.length>0&&c[0]!==void 0?c[0]:{},o=s.includeRoomConfigDefaults,a=o===void 0||o,this._accessState.access===$f||this.needsLoad()){u.next=5;break}return u.abrupt("return",new Promise(function(h,d){l.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:a},function(f){delete f.action,delete f.callbackStamp,h(f)})}));case 5:if(!this.properties.url){u.next=7;break}return u.abrupt("return",{roomUrlPendingJoin:this.properties.url});case 7:return u.abrupt("return",null);case 8:case"end":return u.stop()}},r,this)}));return function(){return i.apply(this,arguments)}}()},{key:"geo",value:function(){var i=Ne(Y.mark(function r(){return Y.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new Promise(function(){var o=Ne(Y.mark(function a(l,c){var u,h;return Y.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=4,fetch("https://gs.daily.co/_ks_/x-swsl/:");case 4:return u=d.sent,d.next=7,u.json();case 7:h=d.sent,l({current:h.geo}),d.next=15;break;case 11:d.prev=11,d.t0=d.catch(0),console.error("geo lookup failed",d.t0),l({current:""});case 15:case"end":return d.stop()}},a,null,[[0,11]])}));return function(a,l){return o.apply(this,arguments)}}()));case 1:case"end":return s.stop()}},r)}));return function(){return i.apply(this,arguments)}}()},{key:"setNetworkTopology",value:function(){var i=Ne(Y.mark(function r(s){var o=this;return Y.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return ut(),a.abrupt("return",new Promise(function(){var l=Ne(Y.mark(function c(u,h){var d;return Y.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:d=function(p){p.error?h({error:p.error}):u({workerId:p.workerId})},o.sendMessageToCallMachine({action:"set-network-topology",opts:s},d);case 2:case"end":return f.stop()}},c)}));return function(c,u){return l.apply(this,arguments)}}()));case 2:case"end":return a.stop()}},r)}));return function(r){return i.apply(this,arguments)}}()},{key:"getNetworkTopology",value:function(){var i=Ne(Y.mark(function r(){var s=this;return Y.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise(function(){var a=Ne(Y.mark(function l(c,u){var h;return Y.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:h=function(f){f.error?u({error:f.error}):c({topology:f.topology})},s.sendMessageToCallMachine({action:"get-network-topology"},h);case 2:case"end":return d.stop()}},l)}));return function(l,c){return a.apply(this,arguments)}}()));case 1:case"end":return o.stop()}},r)}));return function(){return i.apply(this,arguments)}}()},{key:"setPlayNewParticipantSound",value:function(i){if(ut(),typeof i!="number"&&i!==!0&&i!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(i));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:i})}},{key:"on",value:function(i,r){return this._inputEventsOn[i]={},this.sendMessageToCallMachine({action:"register-input-handler",on:i}),iu.prototype.on.call(this,i,r)}},{key:"once",value:function(i,r){return this._inputEventsOn[i]={},this.sendMessageToCallMachine({action:"register-input-handler",on:i}),iu.prototype.once.call(this,i,r)}},{key:"off",value:function(i,r){return delete this._inputEventsOn[i],this.sendMessageToCallMachine({action:"register-input-handler",off:i}),iu.prototype.off.call(this,i,r)}},{key:"validateProperties",value:function(i){for(var r in i){if(!is[r])throw new Error("unrecognized property '".concat(r,"'"));if(is[r].validate&&!is[r].validate(i[r],this))throw new Error("property '".concat(r,"': ").concat(is[r].help))}}},{key:"assembleMeetingUrl",value:function(){var i=tn(tn({},this.properties),{},{emb:this._callFrameId,embHref:encodeURIComponent(window.location.href)}),r=i.url.match(/\?/)?"&":"?";return i.url+r+Object.keys(is).filter(function(s){return is[s].queryString&&i[s]!==void 0}).map(function(s){return"".concat(is[s].queryString,"=").concat(i[s])}).join("&")}},{key:"needsLoad",value:function(){return[kI,Zf,$r,es].includes(this._meetingState)}},{key:"sendMessageToCallMachine",value:function(i,r){this._messageChannel.sendMessageToCallMachine(i,r,this._iframe,this._callFrameId)}},{key:"forwardPackagedMessageToCallMachine",value:function(i){this._messageChannel.forwardPackagedMessageToCallMachine(i,this._iframe,this._callFrameId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(i){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(i,this._callFrameId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(i){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(i)}},{key:"handleMessageFromCallMachine",value:function(i){switch(i.action){case"iframe-ready-for-launch-config":this.sendMessageToCallMachine(tn({action:"iframe-launch-config"},this.properties));break;case"loaded":this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null);try{this.emit(i.action,i)}catch(v){console.log("could not emit",i,v)}break;case"joined-meeting":this._joinedCallback&&(this._joinedCallback(i.participants),this._joinedCallback=null);try{this.emit(i.action,i)}catch(v){console.log("could not emit",i,v)}break;case"participant-joined":case"participant-updated":if(this._meetingState===$r)return;if(i.participant&&i.participant.session_id){var r=i.participant.local?"local":i.participant.session_id;this._callObjectMode&&(S0(i.participant),A0(i.participant),k0(i.participant,this._participants[r]));try{this.maybeEventTrackStopped(this._participants[r],i.participant,"audioTrack"),this.maybeEventTrackStopped(this._participants[r],i.participant,"videoTrack"),this.maybeEventTrackStopped(this._participants[r],i.participant,"screenVideoTrack"),this.maybeEventTrackStopped(this._participants[r],i.participant,"screenAudioTrack"),this.maybeEventTrackStarted(this._participants[r],i.participant,"audioTrack"),this.maybeEventTrackStarted(this._participants[r],i.participant,"videoTrack"),this.maybeEventTrackStarted(this._participants[r],i.participant,"screenVideoTrack"),this.maybeEventTrackStarted(this._participants[r],i.participant,"screenAudioTrack"),this.maybeEventTrackStoppedForCustomTracks(this._participants[r],i.participant),this.maybeEventTrackStartedForCustomTracks(this._participants[r],i.participant),this.maybeEventRecordingStopped(this._participants[r],i.participant),this.maybeEventRecordingStarted(this._participants[r],i.participant)}catch(v){console.error("track events error",v)}if(!this.compareEqualForParticipantUpdateEvent(i.participant,this._participants[r])){this._participants[r]=tn({},i.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus();try{this.emit(i.action,i)}catch(v){console.log("could not emit",i,v)}}}break;case"participant-left":if(i.participant&&i.participant.session_id){var s=this._participants[i.participant.session_id];s&&(this.maybeEventTrackStopped(s,null,"audioTrack"),this.maybeEventTrackStopped(s,null,"videoTrack"),this.maybeEventTrackStopped(s,null,"screenVideoTrack"),this.maybeEventTrackStopped(s,null,"screenAudioTrack"),this.maybeEventTrackStoppedForCustomTracks(s,null)),delete this._participants[i.participant.session_id];try{this.emit(i.action,i)}catch(v){console.log("could not emit",i,v)}}break;case"participant-counts-updated":if(!xa(this._participantCounts,i.participantCounts)){this._participantCounts=i.participantCounts;try{this.emit(i.action,i)}catch(v){console.log("could not emit",i,v)}}break;case"access-state-updated":var o={access:i.access};if(i.awaitingAccess&&(o.awaitingAccess=i.awaitingAccess),!xa(this._accessState,o)){this._accessState=o;try{this.emit(i.action,i)}catch(v){console.log("could not emit",i,v)}}break;case"meeting-session-updated":if(i.meetingSession)try{delete i.callFrameId,this.emit(i.action,i)}catch(v){console.log("could not emit",i,v)}break;case"error":this._iframe&&!i.preserveIframe&&(this._iframe.src=""),this.updateMeetingState(es),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(i.errorMsg),this._loadedCallback=null),this._joinedCallback&&(this._joinedCallback(null,i.errorMsg),this._joinedCallback=null);try{i.preserveIframe;var a=I2(i,["preserveIframe"]);this.emit(i.action,a)}catch(v){console.log("could not emit",i,v)}break;case"left-meeting":this._leftCallback&&(this._leftCallback(),this._leftCallback=null);try{this.emit(i.action,i)}catch(v){console.log("could not emit",i,v)}break;case"input-event":var l=this._participants[i.session_id];l||(l=i.session_id===this._participants.local.session_id?this._participants.local:{});try{this.emit(i.event.type,{action:i.event.type,event:i.event,participant:tn({},l)})}catch(v){console.log("could not emit",i,v)}break;case"network-quality-change":var c=i.threshold,u=i.quality;if(c!==this._network.threshold||u!==this._network.quality){this._network.quality=u,this._network.threshold=c;try{this.emit(i.action,i)}catch(v){console.log("could not emit",i,v)}}break;case"active-speaker-change":var h=i.activeSpeaker;if(this._activeSpeaker.peerId!==h.peerId){this._activeSpeaker.peerId=h.peerId;try{this.emit(i.action,{action:i.action,activeSpeaker:this._activeSpeaker})}catch(v){console.log("could not emit",i,v)}}break;case"show-local-video-changed":if(this._callObjectMode)return;var d=i.show;this._showLocalVideo=d;try{this.emit(i.action,{action:i.action,show:d})}catch(v){console.log("could not emit",i,v)}break;case"active-speaker-mode-change":var f=i.enabled;if(this._activeSpeakerMode!==f){this._activeSpeakerMode=f;try{this.emit(i.action,{action:i.action,enabled:this._activeSpeakerMode})}catch(v){console.log("could not emit",i,v)}}break;case"waiting-participant-added":case"waiting-participant-updated":case"waiting-participant-removed":this._waitingParticipants=i.allWaitingParticipants;try{this.emit(i.action,{action:i.action,participant:i.participant})}catch(v){console.log("could not emit",i,v)}break;case"receive-settings-updated":if(!xa(this._receiveSettings,i.receiveSettings)){this._receiveSettings=i.receiveSettings;try{this.emit(i.action,{action:i.action,receiveSettings:i.receiveSettings})}catch(v){console.log("could not emit",i,v)}}break;case"input-settings-updated":if(!xa(this._inputSettings,i.inputSettings)){this._inputSettings=i.inputSettings;try{this.emit(i.action,{action:i.action,inputSettings:i.inputSettings})}catch(v){console.log("could not emit",i,v)}}break;case"remote-media-player-started":var p=i.session_id;this._rmpPlayerState[p]=i.playerState,this.emitDailyJSEvent(i);break;case"remote-media-player-stopped":delete this._rmpPlayerState[i.session_id],this.emitDailyJSEvent(i);break;case"remote-media-player-updated":var g=i.session_id,m=this._rmpPlayerState[g];m&&this.compareEqualForRMPUpdateEvent(m,i.remoteMediaPlayerState)||(this._rmpPlayerState[g]=i.remoteMediaPlayerState,this.emitDailyJSEvent(i));break;case"custom-button-click":this.emitDailyJSEvent(i);break;case"recording-started":case"recording-stopped":case"recording-stats":case"recording-error":case"recording-upload-completed":case"transcription-started":case"transcription-stopped":case"transcription-error":case"started-camera":case"camera-error":case"app-message":case"local-screen-share-started":case"local-screen-share-stopped":case"network-connection":case"recording-data":case"live-streaming-started":case"live-streaming-stopped":case"live-streaming-error":case"nonfatal-error":case"lang-updated":try{this.emit(i.action,i)}catch(v){console.log("could not emit",i,v)}break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(i,r){var s="record";if(i&&!r.local&&r[s]===!1&&i[s]!==r[s])try{this.emit("recording-stopped",{action:"recording-stopped"})}catch(o){console.log("could not emit",o)}}},{key:"maybeEventRecordingStarted",value:function(i,r){var s="record";if(i&&!r.local&&r[s]===!0&&i[s]!==r[s])try{this.emit("recording-started",{action:"recording-started"})}catch(o){console.log("could not emit",o)}}},{key:"maybeEventTrackStopped",value:function(i,r,s){if(i&&(i[s]&&i[s].readyState==="ended"||i[s]&&(!r||!r[s])||i[s]&&i[s].id!==r[s].id))try{this.emit("track-stopped",{action:"track-stopped",track:i[s],participant:r})}catch(o){console.log("could not emit",o)}}},{key:"maybeEventCustomTrackStopped",value:function(i,r,s,o){if(i&&(!o||!o.remoteMediaPlayerState||o.remoteMediaPlayerState.state!=x2&&o.remoteMediaPlayerState.state!=U2)&&(i&&i.readyState==="ended"||i&&!r||i&&i.id!==r.id))try{this.emit("track-stopped",{action:"track-stopped",track:i,participant:s})}catch(a){console.log("maybeEventCustomTrackStopped: could not emit",a)}}},{key:"maybeEventCustomTrackStarted",value:function(i,r,s){if(r&&!i||r&&i.readyState==="ended"||r&&r.id!==i.id)try{this.emit("track-started",{action:"track-started",track:r,participant:s})}catch(o){console.log("maybeEventCustomTrackStarted: could not emit",o)}}},{key:"maybeEventTrackStarted",value:function(i,r,s){if(r[s]&&(!i||!i[s])||r[s]&&i[s].readyState==="ended"||r[s]&&r[s].id!==i[s].id)try{this.emit("track-started",{action:"track-started",track:r[s],participant:r})}catch(o){console.log("could not emit",o)}}},{key:"maybeEventTrackStoppedForCustomTracks",value:function(i,r){if(i)for(var s in i.tracks)bp(s)||this.maybeEventCustomTrackStopped(i.tracks[s].track,r&&r.tracks[s]?r.tracks[s].track:null,i,r)}},{key:"maybeEventTrackStartedForCustomTracks",value:function(i,r){if(r)for(var s in r.tracks)bp(s)||this.maybeEventCustomTrackStarted(i&&i.tracks[s]?i.tracks[s].track:null,r.tracks[s].track,r)}},{key:"compareEqualForRMPUpdateEvent",value:function(i,r){return i.state===r.state}},{key:"emitDailyJSEvent",value:function(i){try{this.emit(i.action,i)}catch(r){console.log("could not emit",i,r)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(i,r){return!!xa(i,r)&&(!i.videoTrack||!r.videoTrack||i.videoTrack.id===r.videoTrack.id&&i.videoTrack.muted===r.videoTrack.muted&&i.videoTrack.enabled===r.videoTrack.enabled)&&(!i.audioTrack||!r.audioTrack||i.audioTrack.id===r.audioTrack.id&&i.audioTrack.muted===r.audioTrack.muted&&i.audioTrack.enabled===r.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return Nt()?typeof DailyNativeUtils=="undefined"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(i){this.updateMeetingState(this._meetingState,i)}},{key:"updateMeetingState",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(i!==this._meetingState||r!==this._isPreparingToJoin){var s=this._meetingState,o=this._isPreparingToJoin;this._meetingState=i,this._isPreparingToJoin=r;var a=this.isMeetingPendingOrOngoing(s,o),l=this.isMeetingPendingOrOngoing(this._meetingState,this._isPreparingToJoin);a!==l&&(this.updateKeepDeviceAwake(l),this.updateDeviceAudioMode(l),this.updateShowAndroidOngoingMeetingNotification(l),this.updateNoOpRecordingEnsuringBackgroundContinuity(l))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=L0,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:$f},this._receiveSettings={},this._inputSettings={},this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(i){Nt()&&this.nativeUtils().setKeepDeviceAwake(i,this._callFrameId)}},{key:"updateDeviceAudioMode",value:function(i){if(Nt()&&!this.disableReactNativeAutoDeviceManagement("audio")){var r=i?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(r)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(i){if(Nt()&&this.nativeUtils().setShowOngoingMeetingNotification){var r,s,o,a;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var l=this.properties.reactNativeConfig.androidInCallNotification;r=l.title,s=l.subtitle,o=l.iconName,a=l.disableForCustomOverride}a&&(i=!1),this.nativeUtils().setShowOngoingMeetingNotification(i,r,s,o,this._callFrameId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(i){Nt()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(i)}},{key:"isMeetingPendingOrOngoing",value:function(i,r){return[Ua,cn].includes(i)||r}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){if(Nt()){var i=store.getState();for(var r in i.streams){var s=i.streams[r];s&&s.pendingTrack&&s.pendingTrack.kind==="audio"&&(s.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(i){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[i]}},{key:"absoluteUrl",value:function(i){if(i!==void 0){var r=document.createElement("a");return r.href=i,r.href}}},{key:"sayHello",value:function(){var i="hello, world.";return console.log(i),i}}]),n}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="firebasestorage.googleapis.com",B0="storageBucket",Bj=2*60*1e3,Hj=10*60*1e3;class Pt extends Pi{constructor(e,n){super(wp(e),`Firebase Storage: ${n} (${wp(e)})`);this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pt.prototype)}_codeEquals(e){return wp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function wp(t){return"storage/"+t}function Tp(){const t="An unknown error occurred, please check the error payload for server response.";return new Pt("unknown",t)}function qj(t){return new Pt("object-not-found","Object '"+t+"' does not exist.")}function Wj(t){return new Pt("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Gj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pt("unauthenticated",t)}function zj(){return new Pt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Kj(t){return new Pt("unauthorized","User does not have permission to access '"+t+"'.")}function Xj(){return new Pt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Qj(){return new Pt("canceled","User canceled the upload/download.")}function Yj(t){return new Pt("invalid-url","Invalid URL '"+t+"'.")}function Jj(t){return new Pt("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function Zj(){return new Pt("no-default-bucket","No default bucket found. Did you set the '"+B0+"' property when initializing the app?")}function $j(){return new Pt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function eV(){return new Pt("no-download-url","The given file does not have any download URLs.")}function Cp(t){return new Pt("invalid-argument",t)}function H0(){return new Pt("app-deleted","The Firebase app was deleted.")}function tV(t){return new Pt("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qa(t,e){return new Pt("invalid-format","String does not match format '"+t+"': "+e)}function Ya(t){throw new Pt("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=zn.makeFromUrl(e,n)}catch{return new zn(e,"")}if(i.path==="")return i;throw Jj(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(y){y.path_=decodeURIComponent(y.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${r}/o${d}`,"i"),p={bucket:1,path:3},g=n===V0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,m="([^?#]*)",v=new RegExp(`^https?://${g}/${r}/${m}`,"i"),b=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let y=0;y<b.length;y++){const O=b[y],C=O.regex.exec(e);if(C){const _=C[O.indices.bucket];let I=C[O.indices.path];I||(I=""),i=new zn(_,I),O.postModify(i);break}}if(i==null)throw Yj(e);return i}}class nV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...m){c||(c=!0,e.apply(null,m))}function h(m){r=setTimeout(()=>{r=null,t(f,l())},m)}function d(){s&&clearTimeout(s)}function f(m,...v){if(c){d();return}if(m){d(),u.call(null,m,...v);return}if(l()||o){d(),u.call(null,m,...v);return}i<64&&(i*=2);let b;a===1?(a=2,b=0):b=(i+Math.random())*1e3,h(b)}let p=!1;function g(m){p||(p=!0,d(),!c&&(r!==null?(m||(a=2),clearTimeout(r),h(0)):m||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function rV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t){return t!==void 0}function oV(t){return typeof t=="object"&&!Array.isArray(t)}function Sp(t){return typeof t=="string"||t instanceof String}function q0(t){return Ap()&&t instanceof Blob}function Ap(){return typeof Blob!="undefined"}function W0(t,e,n,i){if(i<e)throw Cp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Cp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function G0(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(rs||(rs={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,n,i,r,s,o,a,l,c,u,h){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,f)=>{this.resolve_=d,this.reject_=f,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Iu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===rs.NO_ERROR,l=s.getStatus();if(!a||this.isRetryStatusCode_(l)){const u=s.getErrorCode()===rs.ABORT;i(!1,new Iu(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new Iu(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());sV(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Tp();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?H0():Qj();o(l)}else{const l=Xj();o(l)}};this.canceled_?n(!1,new Iu(!1,null,!0)):this.backoffId_=iV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=this.additionalRetryCodes_.indexOf(e)!==-1;return n||r||s}}class Iu{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function lV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function cV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function uV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function hV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function dV(t,e,n,i,r,s){const o=G0(t.urlParams),a=t.url+o,l=Object.assign({},t.headers);return uV(l,e),lV(l,n),cV(l,s),hV(l,i),new aV(a,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function pV(...t){const e=fV();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Ap())return new Blob(t);throw new Pt("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function mV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(t){return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kp{constructor(e,n){this.data=e,this.contentType=n||null}}function _V(t,e){switch(t){case pi.RAW:return new kp(z0(e));case pi.BASE64:case pi.BASE64URL:return new kp(K0(t,e));case pi.DATA_URL:return new kp(yV(e),bV(e))}throw Tp()}function z0(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)==55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)==56320))e.push(239,191,189);else{const s=i,o=t.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)==56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function vV(t){let e;try{e=decodeURIComponent(t)}catch{throw Qa(pi.DATA_URL,"Malformed data URL.")}return z0(e)}function K0(t,e){switch(t){case pi.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw Qa(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case pi.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw Qa(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gV(e)}catch{throw Qa(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class X0{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Qa(pi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=EV(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=e.substring(e.indexOf(",")+1)}}function yV(t){const e=new X0(t);return e.base64?K0(pi.BASE64,e.rest):vV(e.rest)}function bV(t){return new X0(t).contentType}function EV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n){let i=0,r="";q0(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(q0(this.data_)){const i=this.data_,r=mV(i,e,n);return r===null?null:new cr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new cr(i,!0)}}static getBlob(...e){if(Ap()){const n=e.map(i=>i instanceof cr?i.data_:i);return new cr(pV.apply(null,n))}else{const n=e.map(o=>Sp(o)?_V(pi.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new cr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){let e;try{e=JSON.parse(t)}catch{return null}return oV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wV(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function Y0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(t,e){return e}class kn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||TV}}let wu=null;function CV(t){return!Sp(t)||t.length<2?t:Y0(t)}function J0(){if(wu)return wu;const t=[];t.push(new kn("bucket")),t.push(new kn("generation")),t.push(new kn("metageneration")),t.push(new kn("name","fullPath",!0));function e(s,o){return CV(o)}const n=new kn("name");n.xform=e,t.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new kn("size");return r.xform=i,t.push(r),t.push(new kn("timeCreated")),t.push(new kn("updated")),t.push(new kn("md5Hash",null,!0)),t.push(new kn("cacheControl",null,!0)),t.push(new kn("contentDisposition",null,!0)),t.push(new kn("contentEncoding",null,!0)),t.push(new kn("contentLanguage",null,!0)),t.push(new kn("contentType",null,!0)),t.push(new kn("metadata","customMetadata",!0)),wu=t,wu}function SV(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new zn(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function AV(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,e[o.server])}return SV(i,t),i}function Z0(t,e,n){const i=Q0(e);return i===null?null:AV(t,i,n)}function kV(t,e,n,i){const r=Q0(e);if(r===null||!Sp(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,h=t.fullPath,d="/b/"+o(u)+"/o/"+o(h),f=Eu(d,n,i),p=G0({alt:"media",token:c});return f+p})[0]}function OV(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Op{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){if(!t)throw Tp()}function RV(t,e){function n(i,r){const s=Z0(t,r,e);return $0(s!==null),s}return n}function LV(t,e){function n(i,r){const s=Z0(t,r,e);return $0(s!==null),kV(s,r,t.host,t._protocol)}return n}function ew(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=zj():r=Gj():n.getStatus()===402?r=Wj(t.bucket):n.getStatus()===403?r=Kj(t.path):r=i,r.serverResponse=i.serverResponse,r}return e}function tw(t){const e=ew(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=qj(t.path)),s.serverResponse=r.serverResponse,s}return n}function MV(t,e,n){const i=e.fullServerUrl(),r=Eu(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Op(r,s,LV(t,n),o);return a.errorHandler=tw(e),a}function NV(t,e){const n=e.fullServerUrl(),i=Eu(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new Op(i,r,o,s);return a.successCodes=[200,204],a.errorHandler=tw(e),a}function PV(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function DV(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=PV(null,e)),i}function FV(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let y=0;y<2;y++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=DV(e,i,r),u=OV(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=cr.getBlob(h,i,d);if(f===null)throw $j();const p={name:c.fullPath},g=Eu(s,t.host,t._protocol),m="POST",v=t.maxUploadRetryTime,w=new Op(g,m,RV(t,n),v);return w.urlParams=p,w.headers=o,w.body=f.uploadData(),w.errorHandler=ew(e),w}class xV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Ya("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ya("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ya("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ya("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ya("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class UV extends xV{initXhr(){this.xhr_.responseType="text"}}function Rp(){return new UV}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){this._service=e,n instanceof zn?this._location=n:this._location=zn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ss(e,n)}get root(){const e=new zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Y0(this._location.path)}get storage(){return this._service}get parent(){const e=IV(this._location.path);if(e===null)return null;const n=new zn(this._location.bucket,e);return new ss(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw tV(e)}}function jV(t,e,n){t._throwIfRoot("uploadBytes");const i=FV(t.storage,t._location,J0(),new cr(e,!0),n);return t.storage.makeRequestWithTokens(i,Rp).then(r=>({metadata:r,ref:t}))}function VV(t){t._throwIfRoot("getDownloadURL");const e=MV(t.storage,t._location,J0());return t.storage.makeRequestWithTokens(e,Rp).then(n=>{if(n===null)throw eV();return n})}function BV(t){t._throwIfRoot("deleteObject");const e=NV(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Rp)}function HV(t,e){const n=wV(t._location.path,e),i=new zn(t._location.bucket,n);return new ss(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){return/^[A-Za-z]+:\/\//.test(t)}function WV(t,e){return new ss(t,e)}function nw(t,e){if(t instanceof Lp){const n=t;if(n._bucket==null)throw Zj();const i=new ss(n,n._bucket);return e!=null?nw(i,e):i}else return e!==void 0?HV(t,e):t}function GV(t,e){if(e&&qV(e)){if(t instanceof Lp)return WV(t,e);throw Cp("To use ref(service, url), the first argument must be a Storage instance.")}else return nw(t,e)}function iw(t,e){const n=e==null?void 0:e[B0];return n==null?null:zn.makeFromBucketSpec(n,t)}class Lp{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=V0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Bj,this._maxUploadRetryTime=Hj,this._requests=new Set,r!=null?this._bucket=zn.makeFromBucketSpec(r,this._host):this._bucket=iw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zn.makeFromBucketSpec(this._url,e):this._bucket=iw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){W0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){W0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ss(this,e)}_makeRequest(e,n,i,r){if(this._deleted)return new nV(H0());{const s=dV(e,this._appId,i,r,n,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const rw="@firebase/storage",sw="0.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="storage";function o4(t,e,n){return t=it(t),jV(t,e,n)}function a4(t){return t=it(t),VV(t)}function l4(t){return t=it(t),BV(t)}function c4(t,e){return t=it(t),GV(t,e)}function u4(t=yo(),e){return t=it(t),fs(t,ow).getImmediate({identifier:e})}function zV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Lp(n,i,r,e,vr)}function KV(){Di(new gi(ow,zV,"PUBLIC").setMultipleInstances(!0)),Mn(rw,sw,""),Mn(rw,sw,"esm2017")}KV();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="type.googleapis.com/google.protobuf.Int64Value",QV="type.googleapis.com/google.protobuf.UInt64Value";function aw(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function Mp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Mp(e));if(typeof t=="function"||typeof t=="object")return aw(t,e=>Mp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Tu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case XV:case QV:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Tu(e)):typeof t=="function"||typeof t=="object"?aw(t,e=>Tu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fo extends Pi{constructor(e,n,i){super(`${Np}/${e}`,n||"");this.details=i}}function YV(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function JV(t,e){let n=YV(t),i=n,r;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!lw[o])return new fo("internal","internal");n=lw[o],i=o}const a=s.message;typeof a=="string"&&(i=a),r=s.details,r!==void 0&&(r=Tu(r))}}catch{}return n==="ok"?null:new fo(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||n.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}async getAuthToken(){if(!!this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(){if(this.appCheck){const e=await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(){const e=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken();return{authToken:e,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="us-central1";function $V(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new fo("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class eB{constructor(e,n,i,r,s=Pp,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new ZV(n,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=Pp}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function tB(t,e,n){return i=>iB(t,e,i,n||{})}async function nB(t,e,n,i){n["Content-Type"]="application/json";let r;try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await r.json()}catch{}return{status:r.status,json:s}}async function iB(t,e,n,i){const r=t._url(e);n=Mp(n);const s={data:n},o={},a=await t.contextProvider.getContext();a.authToken&&(o.Authorization="Bearer "+a.authToken),a.messagingToken&&(o["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(o["X-Firebase-AppCheck"]=a.appCheckToken);const l=i.timeout||7e4,c=$V(l),u=await Promise.race([nB(r,s,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!u)throw new fo("cancelled","Firebase Functions instance was deleted.");const h=JV(u.status,u.json);if(h)throw h;if(!u.json)throw new fo("internal","Response is not valid JSON object.");let d=u.json.data;if(typeof d=="undefined"&&(d=u.json.result),typeof d=="undefined")throw new fo("internal","Response is missing data field.");return{data:Tu(d)}}const cw="@firebase/functions",uw="0.7.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB="auth-internal",sB="app-check-internal",oB="messaging-internal";function aB(t,e){const n=(i,{instanceIdentifier:r})=>{const s=i.getProvider("app").getImmediate(),o=i.getProvider(rB),a=i.getProvider(oB),l=i.getProvider(sB);return new eB(s,o,a,l,r,t)};Di(new gi(Np,n,"PUBLIC").setMultipleInstances(!0)),Mn(cw,uw,e),Mn(cw,uw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t=yo(),e=Pp){return fs(it(t),Np).getImmediate({identifier:e})}function d4(t,e,n){return tB(it(t),e,n)}aB(fetch.bind(self));var f4=(t,e)=>(Object.entries(e).forEach(([n,i])=>{t.style.setProperty(`--${n}`,i)}),{update(n){Object.entries(n).forEach(([i,r])=>{t.style.setProperty(`--${i}`,r),delete e[i]}),Object.keys(e).forEach(i=>t.style.removeProperty(`--${i}`)),e=n}});/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var os={INDETERMINATE_CLASS:"mdc-circular-progress--indeterminate",CLOSED_CLASS:"mdc-circular-progress--closed"},ur={ARIA_HIDDEN:"aria-hidden",ARIA_VALUENOW:"aria-valuenow",DETERMINATE_CIRCLE_SELECTOR:".mdc-circular-progress__determinate-circle",RADIUS:"r",STROKE_DASHOFFSET:"stroke-dashoffset"};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var lB=function(t){wn(e,t);function e(n){return t.call(this,bt(bt({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return os},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return ur},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},getDeterminateCircleAttribute:function(){return null},hasClass:function(){return!1},removeClass:function(){},removeAttribute:function(){},setAttribute:function(){},setDeterminateCircleAttribute:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.closed=this.adapter.hasClass(os.CLOSED_CLASS),this.determinate=!this.adapter.hasClass(os.INDETERMINATE_CLASS),this.progress=0,this.determinate&&this.adapter.setAttribute(ur.ARIA_VALUENOW,this.progress.toString()),this.radius=Number(this.adapter.getDeterminateCircleAttribute(ur.RADIUS))},e.prototype.setDeterminate=function(n){this.determinate=n,this.determinate?(this.adapter.removeClass(os.INDETERMINATE_CLASS),this.setProgress(this.progress)):(this.adapter.addClass(os.INDETERMINATE_CLASS),this.adapter.removeAttribute(ur.ARIA_VALUENOW))},e.prototype.isDeterminate=function(){return this.determinate},e.prototype.setProgress=function(n){if(this.progress=n,this.determinate){var i=(1-this.progress)*(2*Math.PI*this.radius);this.adapter.setDeterminateCircleAttribute(ur.STROKE_DASHOFFSET,""+i),this.adapter.setAttribute(ur.ARIA_VALUENOW,this.progress.toString())}},e.prototype.getProgress=function(){return this.progress},e.prototype.open=function(){this.closed=!1,this.adapter.removeClass(os.CLOSED_CLASS),this.adapter.removeAttribute(ur.ARIA_HIDDEN)},e.prototype.close=function(){this.closed=!0,this.adapter.addClass(os.CLOSED_CLASS),this.adapter.setAttribute(ur.ARIA_HIDDEN,"true")},e.prototype.isClosed=function(){return this.closed},e}(Yn);function hw(t,e,n){const i=t.slice();return i[24]=e[n],i}function dw(t){let e,n,i,r,s,o,a,l,c,u,h,d,f,p;return{c(){e=_e("div"),n=_e("div"),i=vn("svg"),r=vn("circle"),s=Xe(),o=_e("div"),a=vn("svg"),l=vn("circle"),c=Xe(),u=_e("div"),h=vn("svg"),d=vn("circle"),f=Xe(),this.h()},l(g){e=ve(g,"DIV",{class:!0});var m=re(e);n=ve(m,"DIV",{class:!0});var v=re(n);i=Rn(v,"svg",{class:!0,viewBox:!0,xmlns:!0});var w=re(i);r=Rn(w,"circle",{cx:!0,cy:!0,r:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-width":!0}),re(r).forEach(M),w.forEach(M),v.forEach(M),s=Qe(m),o=ve(m,"DIV",{class:!0});var b=re(o);a=Rn(b,"svg",{class:!0,viewBox:!0,xmlns:!0});var y=re(a);l=Rn(y,"circle",{cx:!0,cy:!0,r:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-width":!0}),re(l).forEach(M),y.forEach(M),b.forEach(M),c=Qe(m),u=ve(m,"DIV",{class:!0});var O=re(u);h=Rn(O,"svg",{class:!0,viewBox:!0,xmlns:!0});var C=re(h);d=Rn(C,"circle",{cx:!0,cy:!0,r:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-width":!0}),re(d).forEach(M),C.forEach(M),O.forEach(M),f=Qe(m),m.forEach(M),this.h()},h(){ee(r,"cx","24"),ee(r,"cy","24"),ee(r,"r","18"),ee(r,"stroke-dasharray","113.097"),ee(r,"stroke-dashoffset","56.549"),ee(r,"stroke-width","4"),ee(i,"class","mdc-circular-progress__indeterminate-circle-graphic"),ee(i,"viewBox","0 0 48 48"),ee(i,"xmlns","http://www.w3.org/2000/svg"),ee(n,"class","mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left"),ee(l,"cx","24"),ee(l,"cy","24"),ee(l,"r","18"),ee(l,"stroke-dasharray","113.097"),ee(l,"stroke-dashoffset","56.549"),ee(l,"stroke-width","3.2"),ee(a,"class","mdc-circular-progress__indeterminate-circle-graphic"),ee(a,"viewBox","0 0 48 48"),ee(a,"xmlns","http://www.w3.org/2000/svg"),ee(o,"class","mdc-circular-progress__gap-patch"),ee(d,"cx","24"),ee(d,"cy","24"),ee(d,"r","18"),ee(d,"stroke-dasharray","113.097"),ee(d,"stroke-dashoffset","56.549"),ee(d,"stroke-width","4"),ee(h,"class","mdc-circular-progress__indeterminate-circle-graphic"),ee(h,"viewBox","0 0 48 48"),ee(h,"xmlns","http://www.w3.org/2000/svg"),ee(u,"class","mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right"),ee(e,"class",p=ge({[t[1]]:!0,"mdc-circular-progress__spinner-layer":!0,["mdc-circular-progress__color-"+t[24]]:t[5]}))},m(g,m){$(g,e,m),me(e,n),me(n,i),me(i,r),me(e,s),me(e,o),me(o,a),me(a,l),me(e,c),me(e,u),me(u,h),me(h,d),me(e,f)},p(g,m){m&34&&p!==(p=ge({[g[1]]:!0,"mdc-circular-progress__spinner-layer":!0,["mdc-circular-progress__color-"+g[24]]:g[5]}))&&ee(e,"class",p)},d(g){g&&M(e)}}}function cB(t){let e,n,i,r,s,o,a,l,c,u,h,d,f,p,g=[{class:"mdc-circular-progress__determinate-circle"},{cx:"24"},{cy:"24"},{r:"18"},{"stroke-dasharray":"113.097"},{"stroke-dashoffset":"113.097"},{"stroke-width":"4"},t[9]],m={};for(let O=0;O<g.length;O+=1)m=x(m,g[O]);let v=t[5]?[1,2,3,4]:[1],w=[];for(let O=0;O<v.length;O+=1)w[O]=dw(hw(t,v,O));let b=[{class:l=ge(at({[t[1]]:!0,"mdc-circular-progress":!0,"mdc-circular-progress--indeterminate":t[2],"mdc-circular-progress--closed":t[3]},t[7]))},{role:"progressbar"},{"aria-valuemin":c=0},{"aria-valuemax":u=1},{"aria-valuenow":h=t[2]?void 0:t[4]},t[8],t[12]],y={};for(let O=0;O<b.length;O+=1)y=x(y,b[O]);return{c(){e=_e("div"),n=_e("div"),i=vn("svg"),r=vn("circle"),s=vn("circle"),o=Xe(),a=_e("div");for(let O=0;O<w.length;O+=1)w[O].c();this.h()},l(O){e=ve(O,"DIV",{class:!0,role:!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0});var C=re(e);n=ve(C,"DIV",{class:!0});var _=re(n);i=Rn(_,"svg",{class:!0,viewBox:!0,xmlns:!0});var I=re(i);r=Rn(I,"circle",{class:!0,cx:!0,cy:!0,r:!0,"stroke-width":!0}),re(r).forEach(M),s=Rn(I,"circle",{class:!0,cx:!0,cy:!0,r:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-width":!0}),re(s).forEach(M),I.forEach(M),_.forEach(M),o=Qe(C),a=ve(C,"DIV",{class:!0});var K=re(a);for(let L=0;L<w.length;L+=1)w[L].l(K);K.forEach(M),C.forEach(M),this.h()},h(){ee(r,"class","mdc-circular-progress__determinate-track"),ee(r,"cx","24"),ee(r,"cy","24"),ee(r,"r","18"),ee(r,"stroke-width","4"),$a(s,m),ee(i,"class","mdc-circular-progress__determinate-circle-graphic"),ee(i,"viewBox","0 0 48 48"),ee(i,"xmlns","http://www.w3.org/2000/svg"),ee(n,"class","mdc-circular-progress__determinate-container"),ee(a,"class","mdc-circular-progress__indeterminate-container"),ce(e,y)},m(O,C){$(O,e,C),me(e,n),me(n,i),me(i,r),me(i,s),t[15](s),me(e,o),me(e,a);for(let _=0;_<w.length;_+=1)w[_].m(a,null);t[16](e),f||(p=[oe(d=dt.call(null,e,t[0])),oe(t[11].call(null,e))],f=!0)},p(O,[C]){if($a(s,m=Ae(g,[{class:"mdc-circular-progress__determinate-circle"},{cx:"24"},{cy:"24"},{r:"18"},{"stroke-dasharray":"113.097"},{"stroke-dashoffset":"113.097"},{"stroke-width":"4"},C&512&&O[9]])),C&34){v=O[5]?[1,2,3,4]:[1];let _;for(_=0;_<v.length;_+=1){const I=hw(O,v,_);w[_]?w[_].p(I,C):(w[_]=dw(I),w[_].c(),w[_].m(a,null))}for(;_<w.length;_+=1)w[_].d(1);w.length=v.length}ce(e,y=Ae(b,[C&142&&l!==(l=ge(at({[O[1]]:!0,"mdc-circular-progress":!0,"mdc-circular-progress--indeterminate":O[2],"mdc-circular-progress--closed":O[3]},O[7])))&&{class:l},{role:"progressbar"},{"aria-valuemin":c},{"aria-valuemax":u},C&20&&h!==(h=O[2]?void 0:O[4])&&{"aria-valuenow":h},C&256&&O[8],C&4096&&O[12]])),d&&We(d.update)&&C&1&&d.update.call(null,O[0])},i:Ht,o:Ht,d(O){O&&M(e),t[15](null),Hp(w,O),t[16](null),f=!1,ze(p)}}}function uB(t,e,n){const i=["use","class","indeterminate","closed","progress","fourColor","getElement"];let r=ie(e,i);const s=et(Ue());let{use:o=[]}=e,{class:a=""}=e,{indeterminate:l=!1}=e,{closed:c=!1}=e,{progress:u=0}=e,{fourColor:h=!1}=e,d,f,p={},g={},m={},v;Ln(()=>(n(14,f=new lB({addClass:b,getDeterminateCircleAttribute:_,hasClass:w,removeClass:y,removeAttribute:C,setAttribute:O,setDeterminateCircleAttribute:I})),f.init(),()=>{f.destroy()}));function w(N){return N in p?p[N]:K().classList.contains(N)}function b(N){p[N]||n(7,p[N]=!0,p)}function y(N){(!(N in p)||p[N])&&n(7,p[N]=!1,p)}function O(N,E){g[N]!==E&&n(8,g[N]=E,g)}function C(N){(!(N in g)||g[N]!=null)&&n(8,g[N]=void 0,g)}function _(N){var E;return N in m?(E=m[N])!==null&&E!==void 0?E:null:v.getAttribute(N)}function I(N,E){m[N]!==E&&n(9,m[N]=E,m)}function K(){return d}function L(N){ue[N?"unshift":"push"](()=>{v=N,n(10,v)})}function k(N){ue[N?"unshift":"push"](()=>{d=N,n(6,d)})}return t.$$set=N=>{e=x(x({},e),Ke(N)),n(12,r=ie(e,i)),"use"in N&&n(0,o=N.use),"class"in N&&n(1,a=N.class),"indeterminate"in N&&n(2,l=N.indeterminate),"closed"in N&&n(3,c=N.closed),"progress"in N&&n(4,u=N.progress),"fourColor"in N&&n(5,h=N.fourColor)},t.$$.update=()=>{t.$$.dirty&16388&&f&&f.isDeterminate()!==!l&&f.setDeterminate(!l),t.$$.dirty&16400&&f&&f.getProgress()!==u&&f.setProgress(u),t.$$.dirty&16392&&f&&(c?f.close():f.open())},[o,a,l,c,u,h,d,p,g,m,v,s,r,K,f,L,k]}class p4 extends Je{constructor(e){super();Ye(this,e,uB,cB,Ge,{use:0,class:1,indeterminate:2,closed:3,progress:4,fourColor:5,getElement:13})}get getElement(){return this.$$.ctx[13]}}export{WB as $,Ln as A,x as B,Qp as C,IB as D,un as E,Qw as F,HB as G,zB as H,we as I,Ce as J,Se as K,Te as L,mB as M,me as N,Ht as O,qA as P,TB as Q,kB as R,Je as S,RB as T,EB as U,jB as V,dB as W,KB as X,BB as Y,pr as Z,LB as _,re as a,GB as a0,fB as a1,ue as a2,Gp as a3,$e as a4,ze as a5,vB as a6,PB as a7,VB as a8,wB as a9,u4 as aA,h4 as aB,d4 as aC,pB as aD,We as aE,bB as aF,yB as aG,gB as aH,YB as aI,i1 as aJ,n1 as aK,vn as aL,Rn as aM,oe as aN,f4 as aO,o1 as aP,FB as aQ,NB as aR,NM as aS,QB as aT,o4 as aU,a4 as aV,DB as aW,SB as aX,UB as aY,p4 as aZ,CB as aa,AB as ab,OB as ac,XB as ad,dN as ae,oi as af,si as ag,mo as ah,WM as ai,xB as aj,Hp as ak,kc as al,JB as am,qB as an,ZB as ao,$B as ap,e4 as aq,MB as ar,t4 as as,r4 as at,i4 as au,n4 as av,s4 as aw,Jw as ax,l4 as ay,c4 as az,ee as b,ve as c,M as d,_e as e,$ as f,ri as g,ls as h,Ye as i,He as j,Xe as k,vt as l,nt as m,Qe as n,Ve as o,Ae as p,ht as q,xt as r,Ge as s,Xn as t,F as u,Be as v,Ut as w,P as x,qt as y,_B as z};
